Event Hubs を使用する場合は、ご自分のハブが想定どおりに動作していることを確認するために、ハブの監視が重要となります。

引き続き銀行業務の例で、Azure Event Hubs をデプロイし、送信側アプリケーションと受信側アプリケーションを構成したと仮定します。 そのアプリケーションでは、支払い処理ソリューションをテストする準備が整っています。 送信側アプリケーションによって顧客のクレジット カード データが収集され、受信側アプリケーションによってクレジット カードが有効であることが確認されます。 あなたの雇用主の業務は機密性が高いため、利用する支払い処理は、それが一時的に使えなくなった場合でも対応できるように、堅牢性と信頼性を備えていることが重要です。

データが想定どおりに処理されていることをテストすることによって、ご利用のイベント ハブを評価する必要があります。 Event Hubs で提供されているメトリックを使用すると、その正常な動作を確保することができます。

## <a name="how-do-you-use-the-azure-portal-to-view-your-event-hub-activity"></a>Azure portal を使用してご利用のイベント ハブのアクティビティを表示する方法

Azure portal で、ご利用のイベント ハブの [概要] ページを選択すると、メッセージ数が表示されます。 これらのメッセージ数は、イベント ハブによって送受信されたデータ (イベント) を表します。 これらのイベントを表示する場合はタイムスケールを選択できます。

![イベント ハブ名前空間とメッセージ数が表示されている Azure portal のスクリーン ショット。](../media/6-view-messages.png)

## <a name="how-can-you-test-event-hub-resilience"></a>イベント ハブの回復力をテストする方法

Azure Event Hubs では、それが利用できなくなった場合でも、送信側アプリケーションからのメッセージの受信は継続されます。 この期間中に受信したメッセージは、ハブが利用できるようになるとすぐに正常に送信されます。

この機能をテストするために、Azure portal を使用してご利用のイベント ハブを無効にすることができます。

そのイベント ハブを再度有効にすると、ご利用の受信側アプリケーションを再度実行し、ご自分の名前空間に対する Event Hubs メトリックを使用して、送信側のメッセージがすべて正常に送信および受信されているかどうかを確認することができます。

Event Hubs では、他にも次のような便利なメトリックを使用できます。

- 調整された要求数: スループット ユニットの使用量を超えたため調整された要求の数。
- ActiveConnections: 名前空間またはイベント ハブに対するアクティブな接続の数。
- 受信/送信バイト数: 指定された期間にわたって Event Hubs サービスに送信/Event Hubs から受信したバイト数。

## <a name="summary"></a>まとめ

Azure portal では、メッセージ数などのメトリックが提供されます。これらのメトリックは、ご利用の Event Hubs の正常性チェックで使用することができます。
