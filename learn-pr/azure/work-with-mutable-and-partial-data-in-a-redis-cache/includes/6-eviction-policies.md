Azure Redis Cache はメモリ内データベースであるため、メモリは Azure Redis Cache の最も重要なリソースです。 使用可能なメモリの量を超えるデータを追加しようとすると、問題が発生する可能性があります。 Azure Redis Cache では、メモリが不足した場合のデータの処理方法を示す削除ポリシーがサポートされています。

ここでは、メモリの最大量を超えた場合のデータの処理方法を決定するために、削除ポリシーを設定します。

## <a name="what-is-an-eviction-policy"></a>削除ポリシーとは

削除ポリシーは、使用可能なメモリの最大量を超えた場合にどのようにデータを管理するかを決定する計画です。 削除ポリシーを使用すると、たとえば、新たに挿入するデータ用にスペースを確保するためにランダム キーを削除するよう、Azure Redis Cache に指示することができます。

### <a name="types-of-eviction-policies"></a>削除ポリシーの種類

Azure Redis Cache で提供される削除ポリシーには 6 つの異なる種類があります。 メモリが不足しているときにデータを挿入しようとすると、次のすべての値によってアクションが実行されます。

* **noeviction:** 削除ポリシーはありません。 データを挿入しようとすると、エラー メッセージが返されます。

* **allkeys-lru:** 最も長く使われていないキーを削除します。

* **allkeys-random:** ランダム キーを削除します。

* **volatile-lru:** 有効期限が指定されたすべてのキーの中で、最も長く使われていないキーを削除します。

* **volatile ttl:** 設定された有効期限に基づいて、存続時間が最短のキーを削除します。

* **volatile-random:** 有効期限が設定されたランダム キーを削除します。

## <a name="how-to-set-an-eviction-policy"></a>削除ポリシーを設定する方法

Azure では、Azure Redis Cache の削除ポリシーを設定するための簡単なドロップダウン メニューが提供されています。 **[詳細設定]** を選択し、**[maxmemory-policy]** ドロップダウン メニューを使用します。

メモリは Azure Redis Cache にとって重要であるため、削除ポリシーがサポートされています。 メモリが不足している場合に新しいデータを挿入しようとすると、削除ポリシーにより、既存のデータをどのように処理するかが決定されます。