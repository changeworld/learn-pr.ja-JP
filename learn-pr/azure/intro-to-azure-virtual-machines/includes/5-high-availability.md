多くの場合、サービス企業の成功は、企業がその顧客と締結するサービス レベル アグリーメント (SLA) に直接関連します。 あなたのお客様は企業が提供するサービスが常に利用できること、自分のデータが安全に守られることを期待しています。 Microsoft はこのことを非常に深刻に受け止めています。 お客様がサービスをいつでも利用できていることを確認できるように、可用性、データ セキュリティ、監視の管理に使用できるツールが Azure により提供されています。

Azure VM の管理は、オペレーティング システムまたは VM で実行されているソフトウェアの管理に限定されません。 Azure サービスの可用性とサポートの自動化を確認するには、サービスを知っておくと役立ちます。 これらのサービスを使用して、組織のビジネス継続性とディザスター リカバリー戦略を計画するのに役立ちます。

ここでは、VM の可用性を向上させるのに役立ちますが、VM の管理タスクを効率化し、safe、VM データのバックアップを保持する Azure サービスについて説明します。 それでは可用性の定義から始めましょう。

## <a name="what-is-availability"></a>可用性とは何ですか?

可用性とは、あるサービスを利用できる時間の割合です。

ある Web サイトを所有しているあなたはその情報に顧客がいつでもアクセスできるようにすることを望んでいるとします。 あなたは Web サイトのアクセスについて、100% の可用性を期待しています。

### <a name="why-do-i-need-to-think-about-availability-when-using-azure"></a>Azure を使用するとき、なぜ可用性について考慮する必要があるのですか?

Azure VM は Microsoft のデータ センター内でホストされている物理サーバー上で実行されています。 大半の物理デバイスと同様、障害が存在することが可能性があります。 物理サーバーが故障した場合、そのサーバーでホストされている仮想マシンも停止します。 その場合、Azure では、VM が正常なホスト サーバーに自動的に移動されます。 しかし、この自己修復移行には数分かかることがあり、その間、その VM でホストされているアプリケーションが利用できなくなります。

VM はまた、Azure 自体により開始される定期的な更新の影響を受ける場合があります。 このような保守管理イベントはソフトウェアの更新からハードウェア アップグレードにまでわたりますが、プラットフォームの信頼性とパフォーマンスを改善することが必要です。 そうしたイベントは通常、ゲスト VM に影響を与えることなく実行されますが、更新またはアップグレードを完了するために仮想マシンが再起動されることがあります。

> [!NOTE]
> Microsoft は、VM の OS やソフトウェアを自動的に更新されません。 更新はユーザーがすべてをコントロールし、その責任を負います。 ただし、信頼性と高いパフォーマンスを常に確保するために、基礎となるソフトウェア ホストとハードウェアには定期的にパッチが適用されます。

確実に、サービスが中断されないしを単一障害点を避けるための各 VM に少なくとも 2 つのインスタンスをデプロイすることが推奨されます。 この機能は呼、_可用性セット_します。

### <a name="what-is-an-availability-set"></a>可用性セットとは何ですか?

**可用性セット**アップグレードように、これらはすべて単一障害点とそのすべての対象でホスト オペレーティング システムのアップグレード中に同時に関連するバーチャル マシンのグループがデプロイされることを確認するために使用する論理機能には、データ センター。 可用性セットに配置された VM では、同じ機能セットを実行し、同じソフトウェアをインストールする必要があります。

> [!TIP]
> Microsoft は、ある可用性セットにデプロイされたマルチインスタンス VM に対して、99.95% の外部接続性サービス レベル アグリーメント (SLA) を提供します。 そのため、適用する SLA に対して、ある可用性セット内に少なくとも 2 つの VM インスタンスをデプロイする必要があります。 

可用性セットは Azure portal のディザスター リカバリー セクションから作成できます。 Resource Manager を使用してそれらをビルドすることも、テンプレート、またはスクリプトやツールの API のいずれか。 可用性セットに VM を配置するとき、Azure では、必ず**障害ドメイン**と**更新ドメイン**に分散されます。

#### <a name="what-is-a-fault-domain"></a>障害ドメインとは何ですか?

障害ドメインは、一般的な電源とネットワーク スイッチを共有する Azure のハードウェアの論理グループです。 オンプレミス データセンター内のラックのようなものであるとお考えください。 1 つのラックでネットワークまたは電源に障害が発生しても、影響を受ける VM が 1 つだけになるように、可用性セットの最初の 2 つの VM が 2 つの異なるラックにプロビジョニングされます。 障害ドメインも、VM に接続されているマネージド ディスクに対して定義されます。

![障害ドメイン](../media/5-fault-domains.png)

#### <a name="what-is-an-update-domain"></a>更新ドメインとは何ですか?

更新ドメインとは、メンテナンスや再起動が同時に行われる可能性のあるハードウェアの論理グループです。 Azure では、Azure プラットフォームでホスト オペレーティング システムが変更されるときの影響を最小限に抑える目的で、可用性セットが更新ドメインに自動的に配置されます。 Azure ではその後、一度に 1 つずつ各更新ドメインが処理されます。

可用性セットは、VM で実行されているサービスを顧客が常に利用できるようにする高度な機能です。 ただし、完全に確実なものではありません。 VM 自体で実行されているデータやソフトウェアに何か発生した場合、どうなりますか? そのため、他のディザスター リカバリーとバックアップの手法を検討する必要になります。

## <a name="failover-across-locations"></a>場所の間におけるフェールオーバー

サイト間でインフラストラクチャを複製し、リージョン内でフェールオーバーすることもできます。 **Azure Site Recovery**ワークロードをプライマリ サイトから 2 次拠点にレプリケートされます。 プライマリ サイトで停電が発生した場合、セカンダリの場所にフェールオーバーできます。 このフェールオーバーにより、中断なく、引き続きアプリケーションにアクセスできます。 その後、再び起動し実行されたら、プライマリの場所にフェールバックできます。 Azure Site Recovery の目標は仮想マシンまたは物理マシンの複製にあります。停電時、ワークロードの可用性を維持します。

Site Recovery に多くの魅力的な技術的な特徴があるときに少なくとも 2 つの重要なビジネスの利点があります。

1. Site Recovery は、リカバリーでは、先として Azure を使用できるようにコストとセカンダリの物理データ センターの管理の複雑さがなくなります。

2. Site Recovery によって、運用環境に影響を与えることがなく復旧訓練のフェールオーバーをテストする非常に簡単にできます。 そのため、計画フェールオーバーや計画外フェールオーバーを簡単にテストできます。 結局のところ、フェールオーバーを試したことがなければ、適切なディザスター リカバリーを計画できません。

Site Recovery で作成した復旧計画には、単純または複雑なシナリオが必要ですを指定できます。 計画にはカスタム PowerShell スクリプト、Azure Automation Runbook、手動介入手順を含めることができます。 復元計画を活用してワークロードを Azure に複製できるため、新たな移行、急増時の一時的なバースト、新しいアプリケーションの開発やテストが簡単になります。

Azure Site Recovery は、Azure のリソースまたは HYPER-V、VMware、およびオンプレミス インフラストラクチャの物理サーバーと連携し、レプリケーションを調整することによって、組織のビジネス継続性とディザスター リカバリー (BCDR) 戦略の重要な部分ができます。フェールオーバー、およびワークロードとアプリケーション、プライマリの場所が失敗した場合の回復。
