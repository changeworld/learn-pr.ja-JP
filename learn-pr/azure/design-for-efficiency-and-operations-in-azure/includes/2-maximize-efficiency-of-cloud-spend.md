<span data-ttu-id="f3c91-101">ここでは、皆さんはソリューション アーキテクトです。</span><span class="sxs-lookup"><span data-stu-id="f3c91-101">You are a solution architect.</span></span> <span data-ttu-id="f3c91-102">所属組織である Lamna Healthcare では、ワークロードがクラウドに移行されました。</span><span class="sxs-lookup"><span data-stu-id="f3c91-102">Your organization, Lamna Healthcare has moved its workloads to the cloud.</span></span> <span data-ttu-id="f3c91-103">最近、これらのリソースやワークフローに対する課金が Lamna で予想した以上に増加しています。</span><span class="sxs-lookup"><span data-stu-id="f3c91-103">Recently, the bill for these resources and workflows has increased more than Lamna had anticipated.</span></span> <span data-ttu-id="f3c91-104">この増加が自然な効率的成長を示すものかどうか、あるいは組織のクラウド リソースをより効率的に利用することでコストを削減できるかどうかを判断するように依頼されました。</span><span class="sxs-lookup"><span data-stu-id="f3c91-104">You have been asked to determine whether the increase is natural, efficient growth, or whether the cost can be reduced by being more efficient with the organization's cloud resources.</span></span>

#### <a name="maximize-efficiency-of-cloud-spend"></a><span data-ttu-id="f3c91-105">クラウド支出の効率を最大化する</span><span class="sxs-lookup"><span data-stu-id="f3c91-105">Maximize efficiency of cloud spend</span></span>

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RWjTgy]

## <a name="how-the-cloud-changes-your-expenses"></a><span data-ttu-id="f3c91-106">クラウドで経費を変更する方法</span><span class="sxs-lookup"><span data-stu-id="f3c91-106">How the cloud changes your expenses</span></span>

<span data-ttu-id="f3c91-107">パブリック クラウドとオンプレミス インフラストラクチャとの違いの 1 つは、使用するサービスに対する支払い方法です。</span><span class="sxs-lookup"><span data-stu-id="f3c91-107">One of the differences between the public cloud and on-premises infrastructure is how you pay for the services you use.</span></span> <span data-ttu-id="f3c91-108">オンプレミス データセンターでは、ハードウェアの調達時間が長く、ハードウェアのサイズは最大容量に対して設定されており、電力やスペースなどの一部のコストはリソースを消費する部署からは確認できません。</span><span class="sxs-lookup"><span data-stu-id="f3c91-108">In an on-premises datacenter, hardware procurement time is long, hardware is sized for maximum capacity, and some of the costs, such as power and space, can be hidden from the business unit consuming the resources.</span></span> <span data-ttu-id="f3c91-109">物理インフラストラクチャの購入は、長期的な資産への投資と関連付けられており、迅速なリソースの使用の妨げとなります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-109">Purchasing physical infrastructure ties up investments in long-term assets, hindering your ability to be agile with your resources.</span></span>

<span data-ttu-id="f3c91-110">クラウドに移行することで、使用した分だけ支払うというコスト モデルが導入されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-110">Shifting to the cloud introduces a pay-for-what-you-use cost model.</span></span> <span data-ttu-id="f3c91-111">資産への投資に関連付ける必要はなくなり、リソース要件が変更された場合、リソースを追加、移行、あるいは削除することで対応できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-111">You no longer need to tie up investments in assets, and if your resource requirements change, you can respond by adding, moving, or removing resources.</span></span> <span data-ttu-id="f3c91-112">ワークロードはサービス間やサービス内で異なり、需要が予測不能となる可能性があり、成長パターンは時間の経過と共に変わります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-112">Workloads vary between and within services, demand can be unpredictable, and your growth patterns shift over time.</span></span> <span data-ttu-id="f3c91-113">クラウドで使用した分だけ支払うため、コスト構造をリソースの変更と同期して移行することができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-113">Since you only pay for what you use in the cloud, your cost structure can move in sync with the changes in resources.</span></span>

<span data-ttu-id="f3c91-114">クラウド インフラストラクチャは、リソース使用量が変動するシナリオを処理できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-114">Cloud infrastructure can handle fluctuating resource usage scenarios.</span></span> <span data-ttu-id="f3c91-115">非常に長い期間、非アクティブな状態にあるリソースについては、使用されておらず、コストがまったく発生していない場合、シャットダウンすることができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-115">Resources that have significant periods of inactivity can be shut down when not in use and not incur any cost at all.</span></span> <span data-ttu-id="f3c91-116">正常なサービスの成長に伴い、リソースが増加する可能性があります。次の調達サイクルを待つ必要はありません。</span><span class="sxs-lookup"><span data-stu-id="f3c91-116">Resources can grow with a successful service as it grows, rather than having to wait for the next procurement cycle.</span></span> <span data-ttu-id="f3c91-117">さらにリソースの動的な追加や削除を行うことで、予測可能および予測不可能な需要の急激な変化に対応できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-117">More resources can be dynamically added and removed to respond to predictable and unpredictable bursts of demand.</span></span> <span data-ttu-id="f3c91-118">次の図では、オンプレミスのインフラストラクチャがこのような変動するシナリオのすべてを処理できない理由を示します。</span><span class="sxs-lookup"><span data-stu-id="f3c91-118">The following illustration shows why the on-premises infrastructure cannot handle all these fluctuating scenarios.</span></span>

![オンプレミスのインフラストラクチャを使用する欠点を示す図。](../media/cloudcomputingpatterns.png)

<span data-ttu-id="f3c91-120">効率的なアーキテクチャでは、プロビジョニングされたリソースとこれらのリソースに対する需要が一致します。</span><span class="sxs-lookup"><span data-stu-id="f3c91-120">In an efficient architecture, provisioned resources match the demand for those resources.</span></span> <span data-ttu-id="f3c91-121">仮想マシンの多くの時間の使用率が 10% 未満の場合、コンピューティングとコストの両方においてリソースの無駄となります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-121">If a virtual machine is less than 10% utilized the majority of the time, you are wasting resources, both in compute and cost.</span></span> <span data-ttu-id="f3c91-122">逆に、90% の使用率で実行されている仮想マシンでは利用可能なリソースの大部分が使用され、経費は効率的に使われています。</span><span class="sxs-lookup"><span data-stu-id="f3c91-122">Conversely, a virtual machine that is running 90% utilized is using the majority of the available resources and is an efficient use of money.</span></span> <span data-ttu-id="f3c91-123">使用率が 100% になるまでシステムを実行することは、パフォーマンスの問題を発生させる危険性があります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-123">Running a system to 100% utilization runs the risk of introducing performance issues.</span></span> <span data-ttu-id="f3c91-124">効率を最大化した場合にシステムのパフォーマンスに悪影響を与えないようにすることが重要です。</span><span class="sxs-lookup"><span data-stu-id="f3c91-124">It is important to ensure that maximizing efficiency doesn't negatively impact the performance of your system.</span></span> <span data-ttu-id="f3c91-125">需要が一定になることはほとんどないため、効率性を確保するためにできるだけ需要に合わせてリソースを調整することが重要です。</span><span class="sxs-lookup"><span data-stu-id="f3c91-125">Demand is rarely constant, so adjusting resources when possible to match demand is important to ensure efficiency.</span></span>

## <a name="track-your-cloud-spend"></a><span data-ttu-id="f3c91-126">クラウド支出を追跡する</span><span class="sxs-lookup"><span data-stu-id="f3c91-126">Track your cloud spend</span></span>

<span data-ttu-id="f3c91-127">賢明な判断を行うには、データが必要です。</span><span class="sxs-lookup"><span data-stu-id="f3c91-127">In order to make intelligent decisions, you need data.</span></span> <span data-ttu-id="f3c91-128">コストのかかる場所を調べることで、その場所と使用率の比較を開始し、環境内で浪費している可能性がある場所を見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-128">By looking at where your money is going, you can start comparing that to utilization to uncover where you may have waste within your environment.</span></span>

<span data-ttu-id="f3c91-129">いつでも課金データをエクスポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-129">An export of your billing data is available at any time.</span></span> <span data-ttu-id="f3c91-130">課金データを使用することで、コストのかかる場所とリソース全体にコストがどのように割り当てられているかを追跡できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-130">Using your billing data, you can track where your costs are going and how they're allocated across your resources.</span></span> <span data-ttu-id="f3c91-131">課題は、課金データにコストは表示されますが、使用率は表示されないことです。</span><span class="sxs-lookup"><span data-stu-id="f3c91-131">The challenge is that the billing data shows cost but not utilization.</span></span> <span data-ttu-id="f3c91-132">大規模な VM に対して料金を支払っていることを示すデータは得られますが、実際にはどれくらい使用しているのでしょうか?</span><span class="sxs-lookup"><span data-stu-id="f3c91-132">You'll have data that indicates you're paying for that large VM, but how much are you actually using it?</span></span>

<span data-ttu-id="f3c91-133">Azure Cost Management では、コストのかかる場所と使用率の低いリソースを把握できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-133">Azure Cost Management gives you insights where your spend is going, as well as underutilized resources.</span></span> <span data-ttu-id="f3c91-134">Azure Cost Management では、総支出、サービスごとのコスト、経時的なコストが追跡されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-134">Azure Cost Management tracks your total spend, cost by service, and cost over time.</span></span> <span data-ttu-id="f3c91-135">リソースの種類とインスタンスの詳細を確認することができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-135">You can drill down into resource types and instances.</span></span> <span data-ttu-id="f3c91-136">また、リソースにカテゴリでタグ付けすることで、組織やコスト センターごとにコストの詳細を確認できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-136">You can also break down your costs by organization or cost center by tagging resources with those categories.</span></span>

<span data-ttu-id="f3c91-137">Azure Advisor にはコスト コンポーネントもあります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-137">Azure Advisor also has a cost component.</span></span> <span data-ttu-id="f3c91-138">Azure Advisor では、従量課金制インスタンスよりもコスト効率が高い場合は予約インスタンスを購入し、VM のサイズを変更することが推奨されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-138">It recommends VM resizing, buying reserved instances when more cost effective than pay-as-you-go instances.</span></span> <span data-ttu-id="f3c91-139">また、未使用の ExpressRoute 回線とアイドル状態の仮想ネットワーク ゲートウェイが識別されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-139">It identifies unused ExpressRoute circuits and idle virtual network gateways.</span></span> <span data-ttu-id="f3c91-140">Advisor によって、パフォーマンス、高可用性、セキュリティの領域において追加の推奨事項が示されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-140">Advisor makes additional recommendations in the areas of performance, high availability, and security.</span></span>

<span data-ttu-id="f3c91-141">時間をかけて、支出を確認し、コストのかかる場所を評価することが重要です。</span><span class="sxs-lookup"><span data-stu-id="f3c91-141">The important part is to take time to review your spend and evaluate where your money is going.</span></span> <span data-ttu-id="f3c91-142">非効率な領域を識別し、できるだけ効率的に運用するようにします。</span><span class="sxs-lookup"><span data-stu-id="f3c91-142">Identify areas of inefficiency to ensure you're operating as efficiently as possible.</span></span>

## <a name="organize-to-optimize"></a><span data-ttu-id="f3c91-143">最適化のために整理する</span><span class="sxs-lookup"><span data-stu-id="f3c91-143">Organize to optimize</span></span>

<span data-ttu-id="f3c91-144">一部の組織をリソースに配置することは、一部のコストがかかる場所を追跡するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-144">Putting some organization to your resources can help track where some of your costs are going.</span></span> <span data-ttu-id="f3c91-145">リソースをまとめて、関係を確立し、コストが関連する場所を把握する方法はいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-145">There are ways to group resources together, establishing a relationship so you know where your costs are related.</span></span> <span data-ttu-id="f3c91-146">課金の観点から、次のようにしてリソースを簡単にグループ化することができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-146">From a billing perspective, resources can be easily grouped by:</span></span>

- <span data-ttu-id="f3c91-147">リソースをさまざまなサブスクリプションに割り当てる。</span><span class="sxs-lookup"><span data-stu-id="f3c91-147">Assigning resources to different subscriptions.</span></span>
- <span data-ttu-id="f3c91-148">リソースをさまざまなリソース グループに割り当てる。</span><span class="sxs-lookup"><span data-stu-id="f3c91-148">Assigning resources to different resource groups.</span></span>
- <span data-ttu-id="f3c91-149">タグをリソースに適用する。</span><span class="sxs-lookup"><span data-stu-id="f3c91-149">Applying tags to resources.</span></span>

<span data-ttu-id="f3c91-150">サブスクリプションとリソース グループを使用してリソースを整理することは、論理的にリソースをグループ化する簡単な方法であり、課金データを調べる際に活用できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-150">Using subscriptions and resource groups to organize resources is an easy way to logically group resources and can be leveraged when going through billing data.</span></span> <span data-ttu-id="f3c91-151">リソースの関係がサブスクリプションとリソース グループの境界にまたがる場合は、タグが役立ちます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-151">Tags come into play when resource relationships span the boundaries of subscriptions and resource groups.</span></span> <span data-ttu-id="f3c91-152">タグはキーと値のペアであり、任意のリソースに追加でき、課金データで公開され、部署やコスト センターをリソースに関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-152">Tags are key/value pairs that can be added to any resource, and are exposed in billing data, allowing you to associate a department or cost center with your resource.</span></span> <span data-ttu-id="f3c91-153">タグを使用することで、コストについてより適切にレポートできるだけでなく、組織内の各部署に独自のコストに対する責任を与えることができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-153">Tags improve your ability to report on cost, as well as giving each department in your organization accountability for their own costs.</span></span> <span data-ttu-id="f3c91-154">次の図では、異なるリソース グループ内のリソースに、さらには異なるサブスクリプション内のリソースにでも、同じタグを適用できる方法を示します。</span><span class="sxs-lookup"><span data-stu-id="f3c91-154">The following illustration shows how you can apply the same tag to resources in different resource groups and even in different subscriptions.</span></span>

![タグ、リソース グループ、およびサブスクリプションを使用して整理されているリソースを示す図。](../media/tagging.png)

<span data-ttu-id="f3c91-156">一部の組織をリソースに追加することは非常に役立ち、コストのかかる場所を把握するのにとても役立ちます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-156">Adding some organization to your resources can go a long way and can really aid in your ability to understand where your costs are going.</span></span> <span data-ttu-id="f3c91-157">ここで、コストを最適化するための方法をいくつか見てましょう。</span><span class="sxs-lookup"><span data-stu-id="f3c91-157">Now let's take a look at some ways to optimize costs.</span></span>

## <a name="optimizing-iaas-costs"></a><span data-ttu-id="f3c91-158">IaaS コストの最適化</span><span class="sxs-lookup"><span data-stu-id="f3c91-158">Optimizing IaaS costs</span></span>

<span data-ttu-id="f3c91-159">仮想マシンを使用する組織では、多くの場合、仮想マシンに関連するコストが支出の最も大きな部分となります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-159">For organizations using virtual machines, the cost associated with virtual machines is often the biggest portion of spend.</span></span> <span data-ttu-id="f3c91-160">一般に、コンピューティング コストが最も大きな部分であり、その次に大きいのがストレージです。</span><span class="sxs-lookup"><span data-stu-id="f3c91-160">The compute costs are typically the biggest piece, followed by storage.</span></span> <span data-ttu-id="f3c91-161">時間をかけてリソースを使用した分だけ支払う方法を最適化することは、月々の請求額に大きく影響する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-161">Taking time to optimize pay-for-what-you-use resources can have a large impact on the size of your monthly bill.</span></span>

<span data-ttu-id="f3c91-162">コンピューティング コストとストレージ コストを削減するためのベスト プラクティスを見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="f3c91-162">Let's take a look at best practices to reduce your compute and storage costs.</span></span>

### <a name="compute"></a><span data-ttu-id="f3c91-163">コンピューティング</span><span class="sxs-lookup"><span data-stu-id="f3c91-163">Compute</span></span>

<span data-ttu-id="f3c91-164">仮想マシンのコスト削減を実現するために使用できるさまざまなオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-164">There are different options available to achieve cost savings for virtual machines.</span></span>

- <span data-ttu-id="f3c91-165">より小さい仮想マシン インスタンス サイズを選択します。</span><span class="sxs-lookup"><span data-stu-id="f3c91-165">Choose a smaller virtual machine instance size.</span></span>
- <span data-ttu-id="f3c91-166">仮想マシンが実行される時間数を減らします。</span><span class="sxs-lookup"><span data-stu-id="f3c91-166">Reduce the number of hours a virtual machine runs.</span></span>
- <span data-ttu-id="f3c91-167">コンピューティング コストに対して割引を利用します。</span><span class="sxs-lookup"><span data-stu-id="f3c91-167">Use discounts for the compute costs.</span></span>

#### <a name="right-size-virtual-machines"></a><span data-ttu-id="f3c91-168">仮想マシンのサイズを適切に設定する</span><span class="sxs-lookup"><span data-stu-id="f3c91-168">Right size virtual machines</span></span>

<span data-ttu-id="f3c91-169">仮想マシンのサイズを適切に設定することは、仮想マシンのサイズを VM に求められるリソース需要と一致させるプロセスです。</span><span class="sxs-lookup"><span data-stu-id="f3c91-169">Right sizing a virtual machine is the process of matching the virtual machine size with the resource demand required of the VM.</span></span> <span data-ttu-id="f3c91-170">25% のアイドル率で VM が実行されている場合、その VM のサイズを減らすと、コストはすぐに削減されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-170">If a VM is running 25% idle, reducing the size of the VM will immediately reduce your cost.</span></span> <span data-ttu-id="f3c91-171">インスタンス ファミリ内では仮想マシンのコストは線形であり、より大きい次のサイズではそれぞれコストが倍になります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-171">Virtual machine costs are linear within an instance family; each next size larger will double your cost.</span></span> <span data-ttu-id="f3c91-172">逆に、1 つのインスタンス サイズごとに VM を減らすと、コストが半分に削減されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-172">Conversely, reducing a VM by a single instance size will reduce your cost in half.</span></span> <span data-ttu-id="f3c91-173">次の図では、同じシリーズ内で 1 つサイズを下げたことで 50% の節約を達成しています。</span><span class="sxs-lookup"><span data-stu-id="f3c91-173">The following illustration shows a 50% savings achieved by moving one size down within the same series.</span></span>

![使用率の低い仮想マシンのサイズを下げることで節約を達成したことを示す図。](../media/vm-resize.png)

<span data-ttu-id="f3c91-175">Azure Advisor によって、使用率の低い仮想マシンが識別されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-175">Azure Advisor identifies which virtual machines are underutilized.</span></span> <span data-ttu-id="f3c91-176">Advisor では、仮想マシンの使用状況が 14 日間にわたって監視され、使用率が低い仮想マシンが識別されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-176">Advisor monitors your virtual machine usage for 14 days and then identifies underutilized virtual machines.</span></span> <span data-ttu-id="f3c91-177">CPU 使用率が 5% 以下で、ネットワーク使用量が 7 MB 以下である日が 4 日以上ある仮想マシンは、使用率が低い仮想マシンと見なされます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-177">Virtual machines whose CPU utilization is 5 percent or less and network usage is 7 MB or less for four or more days are considered underutilized virtual machines.</span></span>

#### <a name="implement-shutdown-schedules-for-virtual-machines"></a><span data-ttu-id="f3c91-178">仮想マシン用のシャットダウン スケジュールを実装する</span><span class="sxs-lookup"><span data-stu-id="f3c91-178">Implement shutdown schedules for virtual machines</span></span>

<span data-ttu-id="f3c91-179">VM のワークロードが使用されるのは一定期間のみであるにもかかわらず、継続的に実行している場合、コストの無駄になります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-179">If you have VM workloads that are only used periodically, but are running continuously, you're wasting money.</span></span> <span data-ttu-id="f3c91-180">このような VM を使用していないときにシャットダウンすることで、VM の割り当てが解除されている間のコンピューティング コストを節約できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-180">These VMs can be shut down when not in use saving you compute costs while the VM is deallocated.</span></span> <span data-ttu-id="f3c91-181">たとえば、開発は通常、業務時間内しか行われないため、開発環境は適切な候補です。</span><span class="sxs-lookup"><span data-stu-id="f3c91-181">For example, a development environment is a good candidate because development generally happens only during business hours.</span></span>

<span data-ttu-id="f3c91-182">VM はいくつかの方法で割り当てを解除することができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-182">You have several options to deallocate a VM.</span></span> <span data-ttu-id="f3c91-183">Azure Automation を使用して、ワークロードで必要な時間のみに VM を実行することができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-183">You can use Azure Automation to run your VMs only during those times that your workloads require.</span></span> <span data-ttu-id="f3c91-184">仮想マシンで自動シャットダウン機能を使用して、1 回限りの自動シャットダウンのスケジュールを設定することができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-184">You can use the auto-shutdown feature on a virtual machine to schedule a one-off automated shutdown.</span></span> <span data-ttu-id="f3c91-185">最後に、Azure portal で手動で VM を停止できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-185">Finally, you can stop a VM manually in the Azure portal.</span></span> <span data-ttu-id="f3c91-186">VM を停止する場合は常に Azure のコントロールを使用する必要があります。VM 内部で OS をシャットダウンしても、その Azure リソースの割り当ては解除されないため、引き続きコストが発生します。</span><span class="sxs-lookup"><span data-stu-id="f3c91-186">You should always use the Azure controls to stop your VMs; shutting down the OS from inside a VM does not deallocate its Azure resource so you will continue to accrue costs.</span></span>

#### <a name="apply-compute-cost-discounts"></a><span data-ttu-id="f3c91-187">コンピューティング コストの割引を適用する</span><span class="sxs-lookup"><span data-stu-id="f3c91-187">Apply compute cost discounts</span></span>

<span data-ttu-id="f3c91-188">Azure ハイブリッド特典では、Windows Server と SQL Server の両方にかかるコストをさらに最適化することができます。その場合、これらの VM のコンピューティング コストに対する割引として使用されるソフトウェア アシュアランス付きのオンプレミスの Windows Server または SQL Server のライセンスを利用できるようにします。</span><span class="sxs-lookup"><span data-stu-id="f3c91-188">The Azure Hybrid Benefit allows you to further optimize your costs for both Windows Server and SQL Server by allowing you to use your on-premises Windows Server or SQL Server licenses with Software Assurance to be used as a discount toward the compute cost of these VMs, eliminating the costs for Windows and SQL Server on enabled instances.</span></span>

<span data-ttu-id="f3c91-189">一部の仮想マシンは常に稼働している必要があります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-189">Some virtual machines need to be up and running all the time.</span></span> <span data-ttu-id="f3c91-190">運用ワークロード用の Web アプリケーション サーバー ファーム、または仮想ネットワーク上のさまざまなサーバーをサポートするドメイン コントローラーがある場合があります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-190">Maybe you have a web application server farm for a production workload or maybe a domain controller supporting various servers on a virtual network.</span></span> <span data-ttu-id="f3c91-191">これらの仮想マシンが今後 1 年あるいはおそらくそれ以上実行されることが確実にわかっている場合、予約インスタンスを購入してコストをさらに節約できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-191">If you know with certainty that these virtual machines will run over the coming year or maybe longer, you can get further cost savings by purchasing a reserved instance.</span></span> <span data-ttu-id="f3c91-192">Azure Reserved Virtual Machine Instances は 1 年間または 3 年間のコンピューティング容量を指定して購入することができ、従量課金制のコンピューティング リソースに比べて割安です。</span><span class="sxs-lookup"><span data-stu-id="f3c91-192">Azure Reserved Virtual Machine Instances can be purchased for one year or three years of compute capacity, at a discount compared to pay-as-you-go compute resources.</span></span> <span data-ttu-id="f3c91-193">Azure Reserved Virtual Machine Instances により、仮想マシンのコストを大幅に削減できます。割引率は、従量課金制の料金に対し、1 年間または 3 年間の前払い契約で最大 72% となります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-193">Azure Reserved Virtual Machine Instances can significantly reduce your virtual machine costs, up to 72 percent on pay-as-you-go prices, with one-year or three-year upfront commitment.</span></span> <span data-ttu-id="f3c91-194">次の図では、オンプレミスのライセンスと Azure ハイブリッド特典を組み合わせたとき、およびオンプレミスのライセンスと Azure RI および Azure ハイブリッド特典の両方を組み合わせたときに、達成できる節約を示します。</span><span class="sxs-lookup"><span data-stu-id="f3c91-194">The following illustration shows savings achieved when you combine your on-premises license with the Azure Hybrid Benefit and when you combine your on-premises license with both Azure RI and the Azure Hybrid Benefit.</span></span>

![ソフトウェア アシュアランス付きオンプレミス ライセンスがある Azure 製品での節約を示す図。](../media/ahub-save.png)

### <a name="virtual-machine-disk-storage-cost-optimization"></a><span data-ttu-id="f3c91-196">仮想マシン ディスク ストレージのコストの最適化</span><span class="sxs-lookup"><span data-stu-id="f3c91-196">Virtual machine disk storage cost optimization</span></span>

<span data-ttu-id="f3c91-197">信頼性とパフォーマンスの高いディスクを必要としないワークロードでは、低コストの標準的なストレージを使用できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-197">For workloads that do not require high reliability and performance disks, you can use the reduced-cost standard storage.</span></span> <span data-ttu-id="f3c91-198">運用ワークロードに関して完全に一致する必要がない開発およびテスト環境では、標準的なストレージを使用することを選択できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-198">You might choose to use standard storage for development and test environments that are not required to be an identical match for a production workload.</span></span>

<span data-ttu-id="f3c91-199">環境内に孤立ディスクが残らないようにしてください。</span><span class="sxs-lookup"><span data-stu-id="f3c91-199">Ensure you don't have any orphaned disks remaining in your environment.</span></span> <span data-ttu-id="f3c91-200">VM に関連付けられていないディスクでは引き続きストレージ コストが発生します。</span><span class="sxs-lookup"><span data-stu-id="f3c91-200">Disks that aren't associated with a VM still incur storage costs.</span></span> <span data-ttu-id="f3c91-201">VM は削除したものの、ディスクは削除していない場合、孤立ディスクでストレージ コストを削減できる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-201">If you've removed a VM but not the disks, the orphaned disks may be a place to reduce your storage cost.</span></span>

<span data-ttu-id="f3c91-202">孤立ディスクと同様に、孤立スナップショットが残存している場合は、ある程度時間をかけてクリーンアップしてください。</span><span class="sxs-lookup"><span data-stu-id="f3c91-202">Similar to orphaned disks, if you have any orphaned snapshots lingering around, take some time to clean them up.</span></span> <span data-ttu-id="f3c91-203">これらの価格はディスク自体より低くなりますが、不要なリソースのコストをなくすことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f3c91-203">Pricing for these is lower than the disks themselves, but it's still a good practice to eliminate costs of unnecessary resources.</span></span>

## <a name="optimizing-paas-costs"></a><span data-ttu-id="f3c91-204">PaaS コストの最適化</span><span class="sxs-lookup"><span data-stu-id="f3c91-204">Optimizing PaaS costs</span></span>

<span data-ttu-id="f3c91-205">PaaS サービスは通常、IaaS サービス経由でコストに合わせて最適化されますが、無駄を特定し、コストを最小限に抑えるために最適化する機会があります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-205">PaaS services are typically optimized for costs over IaaS services, but there are opportunities to identify waste and optimize for minimal costs.</span></span> <span data-ttu-id="f3c91-206">Azure SQL Database と Azure BLOB ストレージのコストを削減する方法を見ていきましょう。</span><span class="sxs-lookup"><span data-stu-id="f3c91-206">Let's take a look at ways to reduce Azure SQL Database and Azure Blob storage costs.</span></span>

### <a name="optimizing-azure-sql-database-costs"></a><span data-ttu-id="f3c91-207">Azure SQL Database コストの最適化</span><span class="sxs-lookup"><span data-stu-id="f3c91-207">Optimizing Azure SQL Database costs</span></span>

<span data-ttu-id="f3c91-208">Azure SQL Database を作成するときに、Azure SQL Server を選択し、パフォーマンス レベルを決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-208">When creating an Azure SQL database, you have to select an Azure SQL Server and decide on a performance tier.</span></span> <span data-ttu-id="f3c91-209">各レベルでは、データベース トランザクション ユニット (DTU) または仮想コア (vCore) におけるパフォーマンス レベルが提供されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-209">Each tier provides a performance level either in database transaction units (DTUs) or virtual cores (vCores).</span></span> <span data-ttu-id="f3c91-210">データベースの負荷が一定の場合、必要なパフォーマンスに対して適切にサイズ設定されたレベルを選択することで、簡単に最適化できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-210">For database loads that are steady, it's easy to optimize by selecting the properly sized tier for the needed performance.</span></span> <span data-ttu-id="f3c91-211">しかし、データベースのアクティビティが予期せず急増した場合はどうでしょうか? </span><span class="sxs-lookup"><span data-stu-id="f3c91-211">But what if your database has unpredictable bursts or spikes in activity?</span></span> <span data-ttu-id="f3c91-212">エラスティック プールにより、予期できないワークロードにかかるコストを削減できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-212">Elastic pools can reduce costs for unpredictable workloads.</span></span>

<span data-ttu-id="f3c91-213">SQL Database のエラスティック プールは、予期できないいくつかの使用ニーズを持つ複数のデータベースを管理し、スケーリングするための、シンプルでコスト効率の高いソリューションです。</span><span class="sxs-lookup"><span data-stu-id="f3c91-213">SQL Database elastic pools are a simple, cost-effective solution for managing and scaling several databases that have varying and unpredictable usage demands.</span></span> <span data-ttu-id="f3c91-214">エラスティック プール内のデータベースは単一の Azure SQL Database サーバー上にあり、設定された数のリソースが設定価格で共有されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-214">The databases in an elastic pool are on a single Azure SQL Database server and share a set number of resources at a set price.</span></span> <span data-ttu-id="f3c91-215">プールは、数多くのデータベースが特定の使用パターンで使用されている場合に適しています。</span><span class="sxs-lookup"><span data-stu-id="f3c91-215">Pools are well suited for a large number of databases with specific utilization patterns.</span></span> <span data-ttu-id="f3c91-216">あるデータベースは、使用が急増することはあまりなく、平均使用量が低いパターンの特徴を持っています。</span><span class="sxs-lookup"><span data-stu-id="f3c91-216">For a given database, this pattern is characterized by low average utilization with relatively infrequent utilization spikes.</span></span>
<span data-ttu-id="f3c91-217">プールに追加できるデータベースが多ければ多いほど、節約量も多くなります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-217">The more databases you can add to a pool, the greater your savings become.</span></span> <span data-ttu-id="f3c91-218">次の図では、3 種類 (Basic、Standard、Premium) のエラスティック データベース プールの機能を示します。</span><span class="sxs-lookup"><span data-stu-id="f3c91-218">The following illustration shows the capabilities of the three types of Elastic Database Pools: basic, standard, and premium.</span></span>  <span data-ttu-id="f3c91-219">Basic は DB ごとに最大 5 eDTU まで、Standard は DB ごとに最大 100 eDTU まで、Premium は DB ごとに最大 1000 eDTU まで、自動的にスケールアップします。</span><span class="sxs-lookup"><span data-stu-id="f3c91-219">Basic auto scales up to 5 eDTUs per DB, standard auto scales up to 100 eDTUs per DB, and Premium that auto scales up to 1000 eDTUs per DB.</span></span>

![異なる種類のエラスティック データベース プールの自動スケーリング容量を示す図。](../media/sqldb-elastic-pools.png)

<span data-ttu-id="f3c91-221">エラスティック プールは複数のデータベース間でコストを分散する優れた方法であり、Azure SQL Database のコストの削減に大きく影響する場合があります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-221">Elastic pools are a great way to spread costs across multiple databases and can make a significant impact on reducing your Azure SQL Database costs.</span></span>

### <a name="optimizing-blob-storage-costs"></a><span data-ttu-id="f3c91-222">BLOB ストレージ コストの最適化</span><span class="sxs-lookup"><span data-stu-id="f3c91-222">Optimizing Blob storage costs</span></span>

<span data-ttu-id="f3c91-223">BLOB ストレージはデータを格納するためのコスト効率に優れた方法ですが、データ量が増えるにつれて、データの格納方法を最適化することによる利点が得られます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-223">Blob storage is a cost-effective way to store data, but as the amount of data grows, your bill can benefit from optimizing how the data is stored.</span></span>

<span data-ttu-id="f3c91-224">Lamna Healthcare に話を戻します。</span><span class="sxs-lookup"><span data-stu-id="f3c91-224">Let's return to Lamna Healthcare.</span></span> <span data-ttu-id="f3c91-225">BLOB ストレージに画像を格納する医用画像アプリケーションがあります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-225">You have a medical-imaging application that stores images in blob storage.</span></span> <span data-ttu-id="f3c91-226">画像の数量とサイズにより、ストレージでのアプリケーションにかかるコストは著しいものになります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-226">Due to the quantity and size of the images, the storage ends up being a notable cost for the application.</span></span> <span data-ttu-id="f3c91-227">患者の画像が撮影されたとき、最初の週は、その画像が何度か表示される可能性が高いことから、画像検索に求められるパフォーマンスは高くなります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-227">When an image has been taken for a patient, it's likely that in the first week, that image will be viewed several times, and the performance of image retrieval is expected to be high.</span></span> <span data-ttu-id="f3c91-228">逆に、2 年前に撮影された画像へのアクセス頻度は通常低く、検索にさほど高いパフォーマンスは求められません。</span><span class="sxs-lookup"><span data-stu-id="f3c91-228">Conversely, an image taken two years ago may be accessed infrequently and has a lower retrieval performance expectation.</span></span> <span data-ttu-id="f3c91-229">画像が古くなるにつれ、必要なパフォーマンスが低くなった場合は、ストレージ層を使用して画像検索のコストを最適化することができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-229">You can use storage tiering to optimize the cost of image retrieval, given the reduced performance required as the image ages.</span></span>

<span data-ttu-id="f3c91-230">Azure Storage では、BLOB オブジェクト ストレージ用に 3 つのストレージ層が提供されています。</span><span class="sxs-lookup"><span data-stu-id="f3c91-230">Azure Storage offers three storage tiers for blob object storage.</span></span> <span data-ttu-id="f3c91-231">Azure ホット ストレージ層は、頻繁にアクセスされるデータを格納するために最適化されています。</span><span class="sxs-lookup"><span data-stu-id="f3c91-231">The Azure hot storage tier is optimized for storing data that is accessed frequently.</span></span> <span data-ttu-id="f3c91-232">Azure クール ストレージ層は、アクセスされる頻度は低いものの、30 日以上保管されるデータを格納するために最適化されています。</span><span class="sxs-lookup"><span data-stu-id="f3c91-232">The Azure cool storage tier is optimized for storing data that is infrequently accessed and stored for at least 30 days.</span></span> <span data-ttu-id="f3c91-233">Azure アーカイブ ストレージ層は、ほとんどアクセスされず、180 日以上保管され、待ち時間の要件が柔軟であるデータを格納するために最適化されています。</span><span class="sxs-lookup"><span data-stu-id="f3c91-233">The Azure archive storage tier is optimized for storing data that is rarely accessed and stored for at least 180 days with flexible latency requirements.</span></span>

- <span data-ttu-id="f3c91-234">**ホット アクセス層** - ストレージ コストは最も高くなりますが、アクセス コストは最も低くなります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-234">**Hot access tier** - Highest storage costs but the lowest access costs.</span></span>
- <span data-ttu-id="f3c91-235">**クール アクセス層**- ストレージに比べてストレージ コストが低くなり、アクセス コストが高くなります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-235">**Cool access tier** - Lower storage costs and higher access costs compared to hot storage.</span></span> <span data-ttu-id="f3c91-236">この層は、30 日以上クール層に留まるデータを対象としています。</span><span class="sxs-lookup"><span data-stu-id="f3c91-236">This tier is intended for data that will stay in the cool tier for at least 30 days.</span></span>
- <span data-ttu-id="f3c91-237">**アーカイブ アクセス層** - ストレージ コストが最も低く、ホット ストレージとクール ストレージに比べてデータ取得コストが最も高くなります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-237">**Archive access tier** - Lowest storage cost and highest data retrieval costs compared to hot and cool storage.</span></span> <span data-ttu-id="f3c91-238">この層は、数時間の取得待ち時間が許容され、180 日以上アーカイブ層に留まるデータを対象としています。</span><span class="sxs-lookup"><span data-stu-id="f3c91-238">This tier is intended for data that can tolerate several hours of retrieval latency and will stay in the archive tier for at least 180 days.</span></span>

<span data-ttu-id="f3c91-239">Lamna Healthcare では、1 か月間ホット アクセス層で新しい画像を保持するのが妥当であるため、最新画像の表示は可能な限り高速に行われます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-239">For Lamna Healthcare, keeping new images on the hot access tier for a month makes sense, so that viewing the most recent images performs as fast as possible.</span></span> <span data-ttu-id="f3c91-240">1 年が経過した画像は、検索されなくなる可能性があるため、アーカイブ層に移動することができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-240">You could then move images over one year old to the archive tier since it is likely that these images will not be retrieved.</span></span> <span data-ttu-id="f3c91-241">これで、これらの画像の格納に関連するコストが削減されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-241">This would reduce their costs associated with storing these images.</span></span>

### <a name="leverage-consumption-pricing-models"></a><span data-ttu-id="f3c91-242">従量課金モデルを利用する</span><span class="sxs-lookup"><span data-stu-id="f3c91-242">Leverage consumption pricing models</span></span>

<span data-ttu-id="f3c91-243">PaaS サービスへの移行により、実際の従量課金モデル以上に詳細な従量課金制モデルも採用される場合があります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-243">Moving to PaaS services can also take the pay-as-you-go model even further into a true consumption pricing model.</span></span> <span data-ttu-id="f3c91-244">Azure Functions などのサービスでは、_従量課金プラン_を使用することができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-244">Services such as Azure Functions have the ability to use _Consumption plans_.</span></span> <span data-ttu-id="f3c91-245">従量課金プランを使用する場合、Azure Functions ホストのインスタンスは、受信イベントの数に基づいて動的に追加および削除されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-245">When you're using a Consumption plan, instances of the Azure Functions host are dynamically added and removed based on the number of incoming events.</span></span> <span data-ttu-id="f3c91-246">このサーバーレス プランではスケーリングが自動的に行われ、関数の実行中にのみコンピューティング リソースに対して料金が発生します。</span><span class="sxs-lookup"><span data-stu-id="f3c91-246">This serverless plan scales automatically, and you're charged for compute resources only when your functions are running.</span></span> <span data-ttu-id="f3c91-247">従量課金プランでは、構成可能な期間が経過すると関数の実行はタイムアウトします。</span><span class="sxs-lookup"><span data-stu-id="f3c91-247">On a Consumption plan, a function execution times out after a configurable period of time.</span></span>

<span data-ttu-id="f3c91-248">課金は、実行数、実行時間、メモリの使用量に基づきます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-248">Billing is based on number of executions, execution time, and memory used.</span></span> <span data-ttu-id="f3c91-249">関数アプリ内のすべての関数にわたって料金が集計されます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-249">Billing is aggregated across all functions within a function app.</span></span>

<span data-ttu-id="f3c91-250">従量課金モデルを使用するサービスに移行することで、アーキテクチャに対するコストを削減するための新しいアプローチがもたらされる場合があります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-250">Moving to services that use a consumption pricing model can bring a new approach to cost savings into your architecture.</span></span>

## <a name="cost-optimization-at-lamna-healthcare"></a><span data-ttu-id="f3c91-251">Lamna Healthcare でのコストの最適化</span><span class="sxs-lookup"><span data-stu-id="f3c91-251">Cost optimization at Lamna Healthcare</span></span>

<span data-ttu-id="f3c91-252">Lamna Healthcare では、コストの削減が順調に進んでいます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-252">Lamna Healthcare is making strides on reducing their costs.</span></span> <span data-ttu-id="f3c91-253">コストを月単位で確認するようにし、各部署から Azure Cost Management にアクセスできるようにしたため、月を通してコストを確認することができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-253">They have organized a monthly review of their costs, and each department has access to Azure Cost Management, where they can review their costs throughout the month.</span></span> <span data-ttu-id="f3c91-254">予約インスタンスを使用できる多くの場所を特定し、この割引を活用するためにいくつか購入しました。</span><span class="sxs-lookup"><span data-stu-id="f3c91-254">They've identified a number of places where reserved instances can be used and have purchased several to take advantage of this discount.</span></span> <span data-ttu-id="f3c91-255">業務時間外に開発環境を停止するための自動プロセスを実装しました。これにより、リソースが使用されていない時間の追加コストを節約できます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-255">They have implemented automated processes to stop development environments in off-hours, saving them additional costs during times when these resources were not being used.</span></span> 

<span data-ttu-id="f3c91-256">画像ストレージ用に BLOB ストレージを最適化すると同時に、特に過去数か月にわたり課金を減らすように管理しました。</span><span class="sxs-lookup"><span data-stu-id="f3c91-256">Along with the optimization of blob storage for their imaging storage, they've managed to drop their bill notably over the past couple of months.</span></span>

## <a name="summary"></a><span data-ttu-id="f3c91-257">まとめ</span><span class="sxs-lookup"><span data-stu-id="f3c91-257">Summary</span></span>

<span data-ttu-id="f3c91-258">クラウド インフラストラクチャのコストを最適化するには、支出を追跡し、リソース使用率がワークロードの需要と一致していることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f3c91-258">Optimizing the cost of your cloud infrastructure involves tracking your spend and ensuring that your resource utilization matches the demands of your workloads.</span></span> <span data-ttu-id="f3c91-259">リソースに適した品質とパフォーマンス層を使用することで、クラウド コストをさらに最適化することができます。</span><span class="sxs-lookup"><span data-stu-id="f3c91-259">Using the right quality and performance tier for your resources further optimizes your cloud costs.</span></span>