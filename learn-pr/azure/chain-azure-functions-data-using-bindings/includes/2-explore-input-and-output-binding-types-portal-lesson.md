多くのソフトウェア ソリューションにおいて、データへのアクセスとデータの処理は重要なタスクです。 次のシナリオを考えてみましょう。

* 受信データを Blob Storage から Azure Cosmos DB に移動する方法を実装するよう依頼された。
* 社内の別のコンポーネントで処理するために、受信メッセージをキューに送信したい。
* サービスでキューからゲーマー スコアを取得し、オンライン スコアボードを更新する必要がある。

これらの例はすべて、データの移動に関するものです。 データ ソースと送信先はシナリオによって異なりますが、パターンは似ています。 データ ソースに接続し、データを読み書きします。 Azure Functions では、バインディングを使用してデータやサービスと統合できるようにします。 

## <a name="what-is-a-binding"></a>バインディングとは

Azure Functions では、バインディングによって、コード内からデータに接続する宣言型の方法が提供されます。 バインディングにより、関数内で一貫した方法でデータ ストリームと簡単に統合できるようになります。 さまざまなデータ要素へのアクセスを提供する複数のバインディングを使用できます。 これが強力なのは、特定の接続ロジック (データベース接続や Web API インターフェイスなど) をコーディングしなくても、データソースに接続できるためです。

### <a name="types-of-bindings"></a>バインディングの種類

関数で使用できるバインディングには、次の 2 種類があります。

1. **入力バインディング**: 入力バインディングとは、データ **ソース**への接続です。 関数は、これらの入力からデータを読み取ることができます。

1. **出力バインディング**: 出力バインディングとは、データの**送信先**への接続です。 関数は、これらの送信先にデータを書き込むことができます。

トリガーもあります。 トリガーは、関数を実行させる特殊な種類の入力バインディングです。 たとえば、Azure Event Grid の通知をトリガーとして構成できます。 イベントが発生すると、関数が実行されます。

### <a name="types-of-supported-bindings"></a>サポートされるバインディングの種類

バインディングの "*種類*" では、データの読み取り先または送信先を定義します。 Web 要求に応答するためのバインディングと、各種 Azure サービスやサード パーティのサービスと直接やり取りするためのさまざまなバインディングがあります。

バインディングの種類は、入力、出力、またはその両方として使用できます。 たとえば、関数は Azure Blob Storage 出力バインディングに書き込むことができますが、Blob Storage の更新によって別の関数をトリガーすることができます。

一般的なバインドの種類を次に示します。
- Blob Storage
- Azure Service Bus キュー
- Azure Cosmos DB
- Azure Event Hubs
- 外部ファイル
- 外部テーブル
- HTTP エンドポイント

これらの種類はほんの一部にすぎません。 ほかにも多くの種類があります。また、関数には、さらに多くのバインディングを追加する拡張モデルもあります。

### <a name="binding-properties"></a>バインディングのプロパティ

どのバインディングでも 3 つのプロパティが必要です。 使用しているバインディングとストレージの種類に基づいて、追加のプロパティを提供することが必要な場合があります。

1. **名前**: データにアクセスするために使用する関数パラメーターを定義します。 たとえば、キュー入力バインディングでは、これはキュー メッセージの内容を受け取る関数パラメーターの名前になります。 

1. **種類**: バインディングの種類 (対話するデータまたはサービスの種類) を指定します。

1. **方向**: データが流れる方向 (入力バインディングか、出力バインディングか) を指定します。

さらに、ほとんどのバインドの種類では、4 つ目のプロパティも必要です。 

4. **接続**: 接続文字列が含まれたアプリ設定キーの名前を指定します。 バインディングでは、アプリ設定に保存された接続文字列を使用して、関数コードの外部にシークレットを保持します。 これにより、コードをより柔軟に構成できるようになり、コードの安全性も高まります。

## <a name="create-a-binding"></a>バインディングを作成する

バインディングは JSON で定義されます。 バインディングは関数の構成ファイルで構成されます。このファイルは *function.json* という名前で、関数コードと同じフォルダーにあります。

 "*入力バインディング*" のサンプルを詳しく見てみましょう。

```json
    ...
    {
      "name": "headshotBlob",
      "type": "blob",
      "path": "thumbnail-images/{filename}",
      "connection": "HeadshotStorageConnection",
      "direction": "in"
    },
    ...
```

このバインディングを作成するには、次の手順に従います。

1. *function.json* ファイルにバインディングを作成します。

1. `name` 変数の値を指定します。 この例では、変数に BLOB データが保持されます。

1. ストレージの `type` を指定します。 前の例では、Blob Storage を使用しています。

1. コンテナーとそこに格納される項目名を指定する、`path` を指定します。 BLOB の場合、`path` プロパティは必須です。

1. アプリケーションの設定ファイルで定義されている `connection` 文字列設定名を指定します。 これは、ストレージ アカウントに接続する際の接続文字列を見つけるためのキーとして使用されます。

1. `direction` を `in` として定義します。 これにより、BLOB からデータを読み取ります。

バインディングは、関数でデータに接続するために使用されます。 この例では、入力バインディングを使用して、関数によってサムネイルとして処理されるユーザー画像に接続しました。
