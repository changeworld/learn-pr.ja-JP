Azure IoT Central アプリケーションを使用し、コーヒー マシンを Azure IoT Central に接続しました。 リモート コーヒー マシンの監視と管理を開始するまでの手順を順調に進んでいます。 このユニットでは、少し時間を取って、先ほど定義した接続されているコーヒー メーカー テンプレートを使用して、セットアップと接続を検証します。 設定の最適温度を更新し、コマンドを実行してマシンの状態を確認し、ダッシュボードで接続されているコーヒー マシンを表示します。 

## <a name="update-settings-to-sync-your-application-with-the-coffee-machine"></a>設定を更新してアプリケーションとコーヒー マシンを同期させる

[設定] ページで、アプリケーションからコーヒー マシンに構成データを送信します。 

このシナリオでは、最適温度を変更して、**[更新]** を選択します。 設定が変更されると、コーヒー マシンで設定変更に対する応答が確認されるまで、設定は UI で保留中としてマークされます。 

> [!NOTE]
> 設定が正常に更新されると、データ フローが示され、接続が検証されます。 テレメトリ測定で最適温度の更新に応答します。 [測定] ページで変更を確認できます。 

## <a name="run-commands-on-the-coffee-machine"></a>コーヒー マシンに対してコマンドを実行する 
次の演習では、**[コマンド]** ページに移動します。 コマンドのセットアップを検証するには、IoT Central からコーヒー マシンに対してリモートでコマンドを実行します。 正常に実行された場合は、コーヒー マシンから確認メッセージが送信されます。

1. **[実行]** を選択し、リモートで抽出を開始します。 
    
    次の 3 つの条件が満たされている場合、コーヒー マシンが起動します。
    - カップが検出された
    - メンテナンス中ではない
    - まだ抽出していなし  

    > [!NOTE]
    > 抽出が正常に開始されると、[測定] > [状態] で示されるマシンの状態が黄色に変わります。 
    
    コーヒー マシンのコンソール ログで確認メッセージを探します。 

    ![コマンドを実行する](../images/4-commands-brewing.png)

1. **[実行]** を選択して、メンテナンス モードを設定します。 まだメンテナンスになって "*いない*" 場合は、コーヒー マシンがメンテナンスに設定されます。
    
    コーヒー マシンのコンソール ログで確認メッセージを探します。 

    > [!NOTE]
    > 実際に技術者がマシンをオフラインにして必要な修理を行ってからオンラインに戻すのと同じように、クライアント コードを再起動するまで、コーヒー マシンはメンテナンス モードのままになっています。

    ![コマンドを実行する](../images/4-commands-maintenance.png)

1. Node.js アプリケーションを 60 分を超えない程度で実行し、アプリケーションから不要な通知や電子メールが送信されないようにすることをお勧めします。 チュートリアルで操作していない場合はアプリケーションを停止することで、一日のメッセージ クォータを使い切ることもなくなります。

## <a name="view-the-coffee-machine-in-the-dashboard"></a>ダッシュボードでコーヒー マシンを表示する
コーヒー マシンに関する情報をまとめて見ることができる **[ダッシュボード]** ページに移動します。 次の演習では、**[デザイン モード]** をオンにしてダッシュボードを構成します。 完了するたびに、**[保存]** を選択します。

1. **[折れ線グラフ]** を選択し、タイトルを「テレメトリ」と入力してテレメトリ測定を表示します。 **[時間範囲]** で **[過去 30 分]** を選択します。

    ![ダッシュボードの表示](../images/4-dashboard-a.png)

1. **[Settings and Properties]\(設定とプロパティ\)** を選択して、タイトルに「デバイスのプロパティ」と入力します。 **[追加/削除]** で、コーヒー メーカー最高温度、コーヒー メーカー最低温度、デバイスの保証期限切れを選択します。 

1. **[Settings and Properties]\(設定とプロパティ\)** を選択して、タイトルに「最適温度」と入力します。 **[追加/削除]** で、[最適温度] を選択します。 

## <a name="summary"></a>まとめ

このユニットでは、少し時間を取ってコーヒー マシンと Azure IoT Central の間の接続を検証しました。 コマンドを実行し、最適温度を更新することで検証を行いました。 最後に、コーヒー マシンに関して見たい情報を定義することで、マシンを 1 か所で監視するようにダッシュボードを設定しました。 これらの検証手順は、次のユニットの他のタスクに進む前に必要です。 