<span data-ttu-id="1af7b-101">1 台の大きな仮想マシン､あるいは仮想マシン間でリクエストを分散するためのロード バランサーを装備した数台の小さな仮想マシンのどちらを利用しても必要とするリソースを取得することができます｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-101">You can get the resources you need using either one large virtual machine or several small VMs with a load balancer to distribute requests among the VMs.</span></span>

<span data-ttu-id="1af7b-102">VM プールには、需要が変化したときに仮想マシンを迅速に追加または削除したりできる素晴らしい利点があります｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-102">The VM pool has the nice advantage that you can add or remove VMs quickly when demand changes.</span></span> <span data-ttu-id="1af7b-103">たとえば､おもちゃの会社の例では､この方式は､想定外の需要の急増に対処するのに役立ちます｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-103">In the toy company scenario, this strategy would be useful to handle unexpected spikes in demand.</span></span> <span data-ttu-id="1af7b-104">需要が増加したらプールに仮想マシンを追加し､需要が通常に戻ったら､仮想マシンを削除できます｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-104">You could add VMs to the pool when demand increased and remove them when demand returned to normal.</span></span> <span data-ttu-id="1af7b-105">プールによって冗長性が得られます。1 つの VM で問題が発生した場合は､残りの VM でサービスを中断することなく引き続きリクエストを処理することができます｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-105">The pool also gives you redundancy; if one VM fails, the others can continue to handle requests with no interruption in service.</span></span>

<span data-ttu-id="1af7b-106">このセクションでは、スケール セットを使用して複数の VM をプロビジョニングする方法､また需要の変化に応じてインスタンスを自動的に追加･削除する方法を説明します｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-106">In this section, you will see how to provision multiple VMs using scale sets and how to automatically add and remove instances in response to changing demand.</span></span> 

## <a name="what-is-horizontal-scaling"></a><span data-ttu-id="1af7b-107">水平スケーリングとは…</span><span class="sxs-lookup"><span data-stu-id="1af7b-107">What is horizontal scaling?</span></span>

<span data-ttu-id="1af7b-108">*水平スケーリング*とは、使用可能なリソース量を調整するためにプールから仮想マシンを追加･削除するプロセスです。</span><span class="sxs-lookup"><span data-stu-id="1af7b-108">*Horizontal scaling* is the process of adding or removing virtual machines from a pool to adjust the amount of available resources.</span></span> <span data-ttu-id="1af7b-109">マシンの追加は_スケール アウト_、マシンの削除は_スケールイン_といいます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-109">Adding machines is called _scaling out_, and removing machines is called _scaling in_.</span></span> <span data-ttu-id="1af7b-110">水平スケーリングを利用するソリューションには、ロード バランサーまたはゲートウェイによるプール内の仮想マシンに対する要求の配信があります。</span><span class="sxs-lookup"><span data-stu-id="1af7b-110">Solutions that use horizontal scaling include a load balancer or gateway to distribute requests among the VMs in the pool.</span></span> <span data-ttu-id="1af7b-111">次の図は、仮想マシンのインスタンス数を変更している例です｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-111">The following illustration shows an example of changing the number of virtual machine instances.</span></span>

![需要に対処するためにリソースをスケール アウト､ コストを削減するためにリソースをスケールインしている図｡](../media/4-ScaleInOut.png)

<span data-ttu-id="1af7b-113">この手法は、複数の同一のサーバーの間でアプリケーションを分散実行できる場合に最も有効です。</span><span class="sxs-lookup"><span data-stu-id="1af7b-113">This technique works best for applications that can be run across multiple, identical servers.</span></span> <span data-ttu-id="1af7b-114">たとえば、複数の仮想マシンで Web サーバーや Web ページの複製を作成することができます。この場合、どのサーバーが要求を受信しても、すべてが同じ応答をすることができます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-114">For example, you can duplicate your web server and web pages on multiple VMs, and they will all give the same response no matter which server receives the request.</span></span> <span data-ttu-id="1af7b-115">これに対し、バックエンドのデータベースを実行する VM は最適な候補にはなりません。これは、データベースの複数のコピーを実行するには、それらコピーを同期させる必要があるためです。</span><span class="sxs-lookup"><span data-stu-id="1af7b-115">On the other hand, a VM that runs your backend database is not an ideal candidate because running multiple copies of the database requires some effort to keep the copies in sync.</span></span>

## <a name="what-is-a-scale-set"></a><span data-ttu-id="1af7b-116">スケール セットとは…</span><span class="sxs-lookup"><span data-stu-id="1af7b-116">What is a scale set?</span></span>

<span data-ttu-id="1af7b-117">*スケール セット*とは､同一の仮想マシン、リクエストを配信するロード バランサーまたはゲートウェイ､そしてプールの仮想マシンを追加または削除するタイミングを制御する任意規則セットからなるプールです。</span><span class="sxs-lookup"><span data-stu-id="1af7b-117">A *scale set* is a pool of identical virtual machines, a load balancer or gateway to distribute requests, and an optional set of rules that control when VMs are added or removed from the pool.</span></span> <span data-ttu-id="1af7b-118">ここで「同一」とは、セット内のすべての仮想マシンが同じイメージを使用して作成され、サイズが同じであることを意味します｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-118">Here, "identical" means that each VM in the set is created using the same image and has the same size.</span></span>

<span data-ttu-id="1af7b-119">新しい仮想マシンに対する必要とするソフトウェアの構成では､多少柔軟に対応することができます｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-119">You have some flexibility in how a new VM is configured with the software you need.</span></span> <span data-ttu-id="1af7b-120">最初に基本 OS の定義済みイメージをインストールし、OS をセットアップしたら､スクリプトを使用してファイルを自動的にインストールまたはコピーすることができます｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-120">You can start with a predefined image for the base OS and then use scripts to install or copy files automatically after the OS is set up.</span></span> <span data-ttu-id="1af7b-121">あるいは、オペレーティング システムと既にインストールされているアプリケーション ソフトウェアでカスタム仮想マシン イメージを作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-121">Alternately, you can create a custom virtual machine image with the operating system and your application software already installed.</span></span>

## <a name="how-to-distribute-requests"></a><span data-ttu-id="1af7b-122">要求の配信方法</span><span class="sxs-lookup"><span data-stu-id="1af7b-122">How to distribute requests</span></span>

<span data-ttu-id="1af7b-123">スケール セット内のすべての VM インスタンスへの要求配信には、ロード バランサーまたはアプリケーション ゲートウェイのどちらでも利用できます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-123">You can use either a load balancer or an application gateway to distribute requests to the VM instances in a scale set.</span></span>

<span data-ttu-id="1af7b-124">Azure ロード バランサーは OSI レイヤー 4 (TCP および UDP) で動作し、発信元 IP アドレスとポート、宛先の IP アドレスとポートの組み合わせに基づいてトラフィックがルーティングされます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-124">An Azure load balancer operates at OSI layer 4 (TCP and UDP) and routes traffic based on source IP address and port combined with the destination IP address and port.</span></span> <span data-ttu-id="1af7b-125">Azure ロード バランサーにはアフィニティ機能があります｡この機能では､同じ送信元 IP アドレスを同じ宛先サーバーにルーティングすることによってクライアント セッション全体の一貫性を維持します｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-125">It can provide affinity, where traffic from the same source IP address is routed to the same destination server to provide consistency across a client session.</span></span> <span data-ttu-id="1af7b-126">このロード バランサーには、サーバー インスタンスの可用性を判断する正常性プローブ メカニズムもあります。</span><span class="sxs-lookup"><span data-stu-id="1af7b-126">The load balancer also has a health probe mechanism that determines the availability of server instances.</span></span> <span data-ttu-id="1af7b-127">仮想マシンが正常性プローブに応答しなくなった場合、ロード バランサーではそのマシンに新しい接続がルーティングされなくなります。</span><span class="sxs-lookup"><span data-stu-id="1af7b-127">If a virtual machine becomes unresponsive to the health probe, the load balancer will avoid routing any new connections to that machine.</span></span>

<span data-ttu-id="1af7b-128">アプリケーション ゲートウェイは、OSI レイヤー 7 (アプリケーション層) で動作します。</span><span class="sxs-lookup"><span data-stu-id="1af7b-128">An application gateway operates at OSI layer 7 (the application layer).</span></span> <span data-ttu-id="1af7b-129">たとえば VM で Web サーバーが稼働している場合、ゲートウェイでは要求された URL を使用してルーティングを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-129">For example, if your VMs are running a web server, then the gateway can use the requested URL to perform routing.</span></span> <span data-ttu-id="1af7b-130">このことは、URL に `*/customers*` がある要求と URL に `*/partners*` がある要求とで、送信先となるサーバー プールを変えることができることを意味します。</span><span class="sxs-lookup"><span data-stu-id="1af7b-130">This means you could forward requests with `*/customers*` in the URL to one pool of servers and requests with `*/partners*` in the URL to a different pool.</span></span> <span data-ttu-id="1af7b-131">アプリケーション ゲートウェイでは、HTTP から HTTPS へのリダイレクト機能、仮想マシンに対する暗号化のための処理要件を軽減する SSL (Secure Sockets Layer) 終端機能、規則に基づいて既知の Web 悪用を検出し、そうした要求が Web サーバーに到達しないようにする Web アプリケーション ファイアウォール (WAF) 機能も提供できます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-131">The application gateway can also provide HTTP to HTTPS redirection, Secure Sockets Layer (SSL) termination to reduce the processing requirement on the virtual machines for encryption, and a web application firewall (WAF) that uses rules to detect known web exploits and prevent these requests from reaching the web servers.</span></span>

## <a name="what-is-autoscaling"></a><span data-ttu-id="1af7b-132">自動スケールとは</span><span class="sxs-lookup"><span data-stu-id="1af7b-132">What is autoscaling?</span></span>

<span data-ttu-id="1af7b-133">_自動スケール_は一連の規則に基づく自動的なスケール アウトまたはスケール イン プロセスです｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-133">_Autoscaling_ is the process of automatically scaling out or in based on a set of rules.</span></span> <span data-ttu-id="1af7b-134">規則は、マシンの負荷またはスケジュールによって発動できます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-134">The rules can be triggered by machine load or a schedule.</span></span> <span data-ttu-id="1af7b-135">次の図は、負荷に対処する際に自動スケール機能がインスタンスを管理する方法を示しています｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-135">The following illustration shows how the autoscale feature manages instances to handle the load.</span></span>

![自動スケールが仮想マシン プールの CPU レベルを監視し、CPU 使用率がしきい値を上回ったときにインスタンスが追加する方法を示す図。](../media/4-autoscale.png)

<span data-ttu-id="1af7b-137">スケール セットに対して自動スケールを有効にするには、自動スケール プロファイルを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="1af7b-137">To enable autoscaling for a scale set, you must create an autoscale profile.</span></span> <span data-ttu-id="1af7b-138">プロファイルでは、セットおよびスケール規則に対する 最小および最大 VM インスタンス数を定義します。</span><span class="sxs-lookup"><span data-stu-id="1af7b-138">The profile defines the minimum and maximum number of VM instances for the set and the scaling rules.</span></span> <span data-ttu-id="1af7b-139">自動スケール規則には、次の要素があります。</span><span class="sxs-lookup"><span data-stu-id="1af7b-139">Autoscale rules have the following elements:</span></span>

* <span data-ttu-id="1af7b-140">メトリック - 自動スケール規則を発動する情報またはデータのソース。</span><span class="sxs-lookup"><span data-stu-id="1af7b-140">Metric source - The source of information or data that triggers the autoscale rule.</span></span> <span data-ttu-id="1af7b-141">4 つのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="1af7b-141">There are four options:</span></span>
  * <span data-ttu-id="1af7b-142">*現在のスケール セット* - 追加のエージェントを必要としない、ホストベースのメトリックを提供します。</span><span class="sxs-lookup"><span data-stu-id="1af7b-142">*Current scale set* provides host-based metrics that do not require any additional agents.</span></span>
  * <span data-ttu-id="1af7b-143">*ストレージ アカウント*。</span><span class="sxs-lookup"><span data-stu-id="1af7b-143">*Storage account*.</span></span> <span data-ttu-id="1af7b-144">Azure 診断拡張機能により、Azure Sorage にパフォーマンス メトリックが書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-144">The Azure diagnostic extension writes performance metrics to Azure Storage.</span></span> <span data-ttu-id="1af7b-145">これらのメトリックを使用して、自動スケール規則がトリガーされます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-145">These metrics are used to trigger autoscale rules.</span></span>
  * <span data-ttu-id="1af7b-146">*Azure Service Bus キュー* - 自動スケールを発動するアプリケーション ベースまたは他の Azure Service Bus メッセージを指定できます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-146">*Azure Service Bus queue* can specify application-based or other Azure Service Bus messages to trigger autoscaling.</span></span>
  * <span data-ttu-id="1af7b-147">*Azure Application Insights* - インストルメンテーション パッケージを使用します。スケール セットで実行されるアプリケーションから直接メトリックデータをストリーミングするには、そのアプリケーションにパッケージをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="1af7b-147">*Azure Application Insights* uses an instrumentation package that needs to be installed in the application running on the scale set to stream metric data directly from the application.</span></span>
* <span data-ttu-id="1af7b-148">規則の判定基準 - 自動スケール規則の発動に使用する具体的なメトリックです。</span><span class="sxs-lookup"><span data-stu-id="1af7b-148">Rule criteria - This is the specific metric you want to use to trigger an autoscale rule.</span></span> <span data-ttu-id="1af7b-149">ホスト ベースのメトリックを使用している場合は、CPU 使用率、ネットワーク トラフィック量、ディスクの操作回数､CPU クレジット数などの基準を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-149">If you are using host-based metrics, this can include aspects such as CPU usage, volume of network traffic, disk operations, or CPU credits.</span></span> <span data-ttu-id="1af7b-150">たとえば、1 秒あたりのディスク書き込み操がしきい値を超えた場合にスケール アウトする規則を設定できます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-150">For example, you could configure a rule to scale out if disk write operations per second exceed a threshold.</span></span> <span data-ttu-id="1af7b-151">Azure 診断拡張機能または Application Insights を利用することで、用意されている基準を利用して規則を発動することができますが、適切なエージェントを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="1af7b-151">Using the Azure diagnostic extension or Application Insights enables you to use any available measure to trigger the rule but requires configuration of the appropriate agent.</span></span>
* <span data-ttu-id="1af7b-152">集計の種類 - このメトリック データを測定する方法を指定します。次のオプションのいずれかになります。</span><span class="sxs-lookup"><span data-stu-id="1af7b-152">Aggregation type - This specifies how you want to measure the metric data and will be one of the following options:</span></span>
  * <span data-ttu-id="1af7b-153">平均</span><span class="sxs-lookup"><span data-stu-id="1af7b-153">Average</span></span>
  * <span data-ttu-id="1af7b-154">最小値</span><span class="sxs-lookup"><span data-stu-id="1af7b-154">Minimum</span></span>
  * <span data-ttu-id="1af7b-155">最大値</span><span class="sxs-lookup"><span data-stu-id="1af7b-155">Maximum</span></span>
  * <span data-ttu-id="1af7b-156">合計</span><span class="sxs-lookup"><span data-stu-id="1af7b-156">Total</span></span>
  * <span data-ttu-id="1af7b-157">Last</span><span class="sxs-lookup"><span data-stu-id="1af7b-157">Last</span></span>
  * <span data-ttu-id="1af7b-158">Count (最後の回数)</span><span class="sxs-lookup"><span data-stu-id="1af7b-158">Count</span></span>
* <span data-ttu-id="1af7b-159">演算子 - 演算子は、規則を発動する定義済みしきい値とメトリックとの関係を表します｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-159">Operator - The operator denotes how a metric must be different to a defined threshold to trigger the rules action.</span></span> <span data-ttu-id="1af7b-160">これは、規則によってスケール アウトまたはスケール インのどちらを行うかを決定する上で特に重要です。</span><span class="sxs-lookup"><span data-stu-id="1af7b-160">This is particularly important when identifying whether the rule will scale out or in.</span></span> <span data-ttu-id="1af7b-161">以下の演算子を使用できます｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-161">Operators can be:</span></span>
  * <span data-ttu-id="1af7b-162">より大</span><span class="sxs-lookup"><span data-stu-id="1af7b-162">Greater than</span></span>
  * <span data-ttu-id="1af7b-163">以上</span><span class="sxs-lookup"><span data-stu-id="1af7b-163">Greater than or equal to</span></span>
  * <span data-ttu-id="1af7b-164">より小</span><span class="sxs-lookup"><span data-stu-id="1af7b-164">Less than</span></span>
  * <span data-ttu-id="1af7b-165">以下</span><span class="sxs-lookup"><span data-stu-id="1af7b-165">Less than or equal to</span></span>
  * <span data-ttu-id="1af7b-166">等しい</span><span class="sxs-lookup"><span data-stu-id="1af7b-166">Equal to</span></span>
  * <span data-ttu-id="1af7b-167">等しくない</span><span class="sxs-lookup"><span data-stu-id="1af7b-167">Not equal to</span></span>
* <span data-ttu-id="1af7b-168">操作 - 規則が発動されたときのインスタンス数の変更方法を指定します。</span><span class="sxs-lookup"><span data-stu-id="1af7b-168">Action - This determines how the number of instances will change when the rule is triggered.</span></span> <span data-ttu-id="1af7b-169">次のオプションがあります｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-169">The following actions are available:</span></span>
  * <span data-ttu-id="1af7b-170">*Increase count by* 一定の台数ずつ仮想マシンを増やします。</span><span class="sxs-lookup"><span data-stu-id="1af7b-170">*Increase count by* a fixed number of virtual machines.</span></span>
  * <span data-ttu-id="1af7b-171">*Increase percent by* 既存のインスタンス数に対する割合で仮想マシンを増やします｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-171">*Increase percent by* a percentage of existing instances.</span></span>
  * <span data-ttu-id="1af7b-172">*Increase count to* 指定された台数まで仮想マシンを増やします｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-172">*Increase count to* a specific number of virtual machines.</span></span>
  * <span data-ttu-id="1af7b-173">*Decrease count by* 一定の台数ずつ仮想マシンを減らします｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-173">*Decrease count by* a fixed number of virtual machines.</span></span>
  * <span data-ttu-id="1af7b-174">*Decrease percent by* 既存のインスタンス数に対する割合で仮想マシンを減らしします｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-174">*Decrease percent by* a percentage of existing instances.</span></span>
  * <span data-ttu-id="1af7b-175">*Decrease count to* 指定された台数まで仮想マシンを減らします｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-175">*Decrease count to* a specific number of virtual machines.</span></span>

<span data-ttu-id="1af7b-176">スケジュールに従って発動する自動スケール規則を作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-176">You can also create autoscale rules that trigger on a schedule.</span></span> <span data-ttu-id="1af7b-177">たとえば、需要が大きくなる午前にスケール アウトして、一般に需要が減る昼食後にスケール インする規則を定義することができます｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-177">For example, you might define a rule that scales out in the morning when you know demand is high and then scales in after lunch when demand typically decreases.</span></span>

## <a name="how-to-create-a-scale-set"></a><span data-ttu-id="1af7b-178">スケール セットの作成方法</span><span class="sxs-lookup"><span data-stu-id="1af7b-178">How to create a scale set</span></span>

<span data-ttu-id="1af7b-179">スケール セットは、Azure portal、Azure PowerShell、または Azure CLI を使用して作成できます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-179">You can create a scale set using the Azure portal, Azure PowerShell, or the Azure CLI.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="1af7b-180">Azure portal</span><span class="sxs-lookup"><span data-stu-id="1af7b-180">Azure portal</span></span>

<span data-ttu-id="1af7b-181">Azure portal を使用してスケール セットを作成する場合は、仮想マシンに使用するオペレーティング システムイメージと、起動時に作成する VM インスタンス数を指定します。</span><span class="sxs-lookup"><span data-stu-id="1af7b-181">If you use the Azure portal to create the scale set, you will specify the operating system image to use for the virtual machines and how many VM instances to create at startup.</span></span> <span data-ttu-id="1af7b-182">また、インスタンスごとに仮想マシンの大きさと、負荷分散用に Azure ロード バランサーとアプリケーション ゲートウェイのどちらを使用するのかも指定します。</span><span class="sxs-lookup"><span data-stu-id="1af7b-182">You will also specify the size of virtual machine for each instance and whether to use the Azure load balancer or the application gateway for load balancing.</span></span> <span data-ttu-id="1af7b-183">ロード バランサーを選択した場合、既定では、ポータルはそのための正常性プローブをポート 80 に作成します。</span><span class="sxs-lookup"><span data-stu-id="1af7b-183">If you choose a load balancer, the portal will create a default health probe on port 80 for it.</span></span>

### <a name="azure-powershell"></a><span data-ttu-id="1af7b-184">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="1af7b-184">Azure PowerShell</span></span>

<span data-ttu-id="1af7b-185">`New-AzureRmVmss` PowerShell コマンドレットを使用して、仮想マシン スケール セットを作成することができます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-185">You can create a virtual machine scale set with the `New-AzureRmVmss` PowerShell cmdlet.</span></span> <span data-ttu-id="1af7b-186">このコマンドレットでは、新しいスケール セットとロード バランサーを作成し、IP アドレスと仮想ネットワークの割り当てを制御できます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-186">This cmdlet can create a new scale set, a load balancer, and control IP address and virtual network assignments.</span></span> <span data-ttu-id="1af7b-187">コマンドレットに設定が指定されていない限り、`New-AzureRmVmss` では既定で次の設定が使用されます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-187">Unless settings are specified in the cmdlet, `New-AzureRmVmss` will use the following default settings:</span></span>

* <span data-ttu-id="1af7b-188">仮想マシン インスタンスを 2 つ作成</span><span class="sxs-lookup"><span data-stu-id="1af7b-188">Create two virtual machine instances</span></span>
* <span data-ttu-id="1af7b-189">Windows Server 2016 Datacenter イメージを使用</span><span class="sxs-lookup"><span data-stu-id="1af7b-189">Use the Windows Server 2016 Datacenter image</span></span>
* <span data-ttu-id="1af7b-190">Standard DS1_v2 の仮想マシン サイズを使用</span><span class="sxs-lookup"><span data-stu-id="1af7b-190">Use the Standard DS1_v2 virtual machine size</span></span>
* <span data-ttu-id="1af7b-191">ロード バランサーを作成</span><span class="sxs-lookup"><span data-stu-id="1af7b-191">Create a load balancer</span></span>
* <span data-ttu-id="1af7b-192">Windows の場合はポート 3389 と 5985、Linux の場合はポート 22 に対するロード バランサー規則を作成</span><span class="sxs-lookup"><span data-stu-id="1af7b-192">Create load balancer rules for ports 3389 and 5985 for Windows, port 22 for Linux</span></span>

<span data-ttu-id="1af7b-193">`New-AzureRmVmss` では、ロード バランサーの正常性プローブは作成されません。</span><span class="sxs-lookup"><span data-stu-id="1af7b-193">`New-AzureRmVmss` does not create a health probe for the load balancer.</span></span> <span data-ttu-id="1af7b-194">ベスト プラクティスは、スケール セットを作成した後で `Add-AzureRmLoadBalancerProbeConfig` を使用してこのプローブを作成することです。</span><span class="sxs-lookup"><span data-stu-id="1af7b-194">The best practice would be to create this using `Add-AzureRmLoadBalancerProbeConfig` after you have created the scale set.</span></span>

<span data-ttu-id="1af7b-195">スケール セットを使用した水平スケーリングでは、複数のサーバーでアプリケーションを実行することができます。</span><span class="sxs-lookup"><span data-stu-id="1af7b-195">Horizontal scaling with scale sets gives you multiple servers to run your application.</span></span> <span data-ttu-id="1af7b-196">複数のサーバーを利用することで､高負荷に対処し､サーバーがクラッシュした場合でも、確実にサービスを維持することができます｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-196">Using multiple servers lets you handle high loads and ensures your services remain available even if a server crashes.</span></span> <span data-ttu-id="1af7b-197">スケールセットに自動スケールを追加することで､想定外の需要の変化にも自動的に対応することができます｡</span><span class="sxs-lookup"><span data-stu-id="1af7b-197">You can add autoscale to your scale sets, so your system automatically adjusts to unexpected changes in demand.</span></span>