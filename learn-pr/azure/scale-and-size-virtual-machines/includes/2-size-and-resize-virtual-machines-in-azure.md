<span data-ttu-id="efc84-101">サーバーには、日々の要求を処理できるだけのリソースが必要です。</span><span class="sxs-lookup"><span data-stu-id="efc84-101">Your server needs enough resources to handle daily demand.</span></span> <span data-ttu-id="efc84-102">VM の作成時には、標準的なワークロードに必要なサイズを選択しておき、要求量に変化があったときにサイズを変更するのが一般的な戦略です。</span><span class="sxs-lookup"><span data-stu-id="efc84-102">A typical strategy is to choose a VM size at creation that is sufficient for typical workloads and then resize it when demand changes.</span></span>

<span data-ttu-id="efc84-103">玩具企業のシナリオで、中期的な成長に合わせてリソースを管理したければ、この戦略が効果的でしょう。</span><span class="sxs-lookup"><span data-stu-id="efc84-103">In the toy company scenario, this strategy would be useful to manage resources for your medium-term growth.</span></span> <span data-ttu-id="efc84-104">VM のサイズを大きくすることで、事業の拡大に伴う要求量の増加に対応することができます。</span><span class="sxs-lookup"><span data-stu-id="efc84-104">You can increase the size of your VM to handle the added demand as your business grows.</span></span>

## <a name="what-is-virtual-machine-size"></a><span data-ttu-id="efc84-105">仮想マシンのサイズとは</span><span class="sxs-lookup"><span data-stu-id="efc84-105">What is virtual machine size?</span></span>

<span data-ttu-id="efc84-106">仮想マシンの "_サイズ_" とは、その CPU とメモリ、ディスク、想定されているネットワーク帯域幅の尺度です。</span><span class="sxs-lookup"><span data-stu-id="efc84-106">The _size_ of a virtual machine is a measure of its CPU, memory, disk, and expected network bandwidth.</span></span> <span data-ttu-id="efc84-107">仮想マシンは、あらかじめ決められたサイズ値で提供されます。</span><span class="sxs-lookup"><span data-stu-id="efc84-107">Virtual machines are available in a predetermined number of sizes.</span></span> <span data-ttu-id="efc84-108">たとえば、**Standard_F32s_v2** サイズは、仮想 CPU が 32 個、メモリが 64 GiB、ローカル SSD が 256 GiB、見込まれるネットワーク帯域幅が 14,000 Mbps となっています。</span><span class="sxs-lookup"><span data-stu-id="efc84-108">For example, the **Standard_F32s_v2** size has 32 virtual CPUs, 64 GiB of memory, a 256 GiB local SSD, and 14,000 Mbps of expected network bandwidth.</span></span>

<span data-ttu-id="efc84-109">Azure で新しい仮想マシンを作成するときは、サイズを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="efc84-109">When you create a new virtual machine in Azure, you must choose a size.</span></span> <span data-ttu-id="efc84-110">サイズが大きくなるほど、コストも大きくなります。</span><span class="sxs-lookup"><span data-stu-id="efc84-110">Larger sizes cost more.</span></span> <span data-ttu-id="efc84-111">必要以上の処理能力を構成することなく、実際のワークロードを処理できるサイズを選ぶことが理想です。</span><span class="sxs-lookup"><span data-stu-id="efc84-111">The goal is to choose a size that can handle your workload without configuring more power than you need.</span></span>

## <a name="what-is-virtual-machine-type"></a><span data-ttu-id="efc84-112">仮想マシンのタイプとは</span><span class="sxs-lookup"><span data-stu-id="efc84-112">What is virtual machine type?</span></span>

<span data-ttu-id="efc84-113">仮想マシンの "_タイプ_" とは、その VM の最適化の対象となったワークロードです。</span><span class="sxs-lookup"><span data-stu-id="efc84-113">The _type_ of a virtual machine is the workload for which the VM has been optimized.</span></span> <span data-ttu-id="efc84-114">たとえば、Web サーバーのホスティングなど、CPU 負荷の高いタスクを対象とした VM があります。</span><span class="sxs-lookup"><span data-stu-id="efc84-114">For example, some VMs are targeted at CPU-intensive tasks like hosting a web server.</span></span> <span data-ttu-id="efc84-115">一方、データベースの実行など、ストレージが重視されるジョブを意図したものも存在します。</span><span class="sxs-lookup"><span data-stu-id="efc84-115">Others are intended for storage-focused jobs like running a database.</span></span>

<span data-ttu-id="efc84-116">**計算**、**メモリ**、**ストレージ**、**GPU** など、今日のコンピューターの核となるハードウェア コンポーネントごとに、対応する "_タイプ_" が存在します。</span><span class="sxs-lookup"><span data-stu-id="efc84-116">There are _types_ that correspond to each core hardware component in a modern computer: **compute**, **memory**, **storage**, and **GPU**.</span></span> <span data-ttu-id="efc84-117">バランスのとれたリソースの組み合わせが必要な場合のために、**汎用**タイプも存在します。</span><span class="sxs-lookup"><span data-stu-id="efc84-117">There's also a **general purpose** type if you need a balanced combination of resources.</span></span> <span data-ttu-id="efc84-118">次の表は、それぞれのタイプと、各タイプの VM サイズの一覧です。対象のワークロードについての簡単な説明も記載されています。</span><span class="sxs-lookup"><span data-stu-id="efc84-118">The following table lists the types and the VM sizes that are part of each type, along with a brief description of the target workload.</span></span>

|<span data-ttu-id="efc84-119">タイプ</span><span class="sxs-lookup"><span data-stu-id="efc84-119">Type</span></span>|<span data-ttu-id="efc84-120">サイズ</span><span class="sxs-lookup"><span data-stu-id="efc84-120">Sizes</span></span>|<span data-ttu-id="efc84-121">説明</span><span class="sxs-lookup"><span data-stu-id="efc84-121">Description</span></span>|
|---|---|---|
|<span data-ttu-id="efc84-122">汎用</span><span class="sxs-lookup"><span data-stu-id="efc84-122">General purpose</span></span>|<span data-ttu-id="efc84-123">B、Ds_v3、D_v3、DS_v2 (一部)、D_v2、A_v2 (一部)</span><span class="sxs-lookup"><span data-stu-id="efc84-123">B, Ds_v3, D_v3, some DS_v2, some D_v2, A_v2</span></span>|<span data-ttu-id="efc84-124">汎用マシンは、CPU とメモリの比率のバランスがとれています。</span><span class="sxs-lookup"><span data-stu-id="efc84-124">General-purpose machines have a balanced CPU-to-memory ratio.</span></span> <span data-ttu-id="efc84-125">汎用マシンは、テスト用サーバーや開発サーバーに適しているほか、小から中規模のデータベース、そして低から中程度のトラフィックの Web サーバーにも適しています。</span><span class="sxs-lookup"><span data-stu-id="efc84-125">General-purpose machines are good for testing or development servers, small to medium databases, or web servers with low to medium traffic.</span></span>|
|<span data-ttu-id="efc84-126">コンピューティング最適化</span><span class="sxs-lookup"><span data-stu-id="efc84-126">Compute optimized</span></span>|<span data-ttu-id="efc84-127">Fs_v2、Fs、F</span><span class="sxs-lookup"><span data-stu-id="efc84-127">Fs_v2, Fs, F</span></span>|<span data-ttu-id="efc84-128">コンピューティング最適化仮想マシンは、汎用マシンよりも高い CPU 対メモリ比を備えています。アプリケーション サーバー、ネットワーク アプライアンス、中程度のトラフィックの Web サーバーなど、追加の処理能力を必要とするタスクが対象です。</span><span class="sxs-lookup"><span data-stu-id="efc84-128">Compute-optimized virtual machines have a higher CPU-to-memory ratio than general-purpose machines, for tasks that require extra processing power, such as application servers, network appliances, or medium-traffic web servers.</span></span>|
|<span data-ttu-id="efc84-129">メモリ最適化</span><span class="sxs-lookup"><span data-stu-id="efc84-129">Memory optimized</span></span>|<span data-ttu-id="efc84-130">Es_v3、E_v3、M、GS、G、DS_v2 (一部)、D_v2 (一部)</span><span class="sxs-lookup"><span data-stu-id="efc84-130">Es_v3, E_v3, M, GS, G, some DS_v2, some D_v2</span></span>|<span data-ttu-id="efc84-131">メモリ最適化仮想マシンは、高いメモリ対 CPU 比を備えています。</span><span class="sxs-lookup"><span data-stu-id="efc84-131">Memory-optimized virtual machines have a high memory-to-CPU ratio.</span></span> <span data-ttu-id="efc84-132">これらのマシンは、リレーショナル データベース サーバーや、キャッシュを大量に必要とする (または頻繁にキャッシュを実行する) サーバー、インメモリ分析を実行するサーバーに適しています。</span><span class="sxs-lookup"><span data-stu-id="efc84-132">These machines are good for relational database servers, servers that require or perform a lot of caching, or servers that perform in-memory analytics.</span></span>|
|<span data-ttu-id="efc84-133">ストレージ最適化</span><span class="sxs-lookup"><span data-stu-id="efc84-133">Storage optimized</span></span>|<span data-ttu-id="efc84-134">Ls</span><span class="sxs-lookup"><span data-stu-id="efc84-134">Ls</span></span>|<span data-ttu-id="efc84-135">これらの仮想マシンは、ディスク スループットが高く IO が大きい操作を想定して構成され、ビッグ データや SQL、NoSQL データベースに適しています。</span><span class="sxs-lookup"><span data-stu-id="efc84-135">These virtual machines are configured for high disk throughput and IO operations to suit big data, SQL, and NoSQL databases.</span></span>|
|<span data-ttu-id="efc84-136">GPU</span><span class="sxs-lookup"><span data-stu-id="efc84-136">GPU</span></span>|<span data-ttu-id="efc84-137">NV、NC、NC_v2、NC_v3、ND</span><span class="sxs-lookup"><span data-stu-id="efc84-137">NV, NC, NC_v2, NC_v3, ND</span></span>|<span data-ttu-id="efc84-138">GPU 仮想マシンは、負荷の高いグラフィックのレンダリングやビデオ編集、ディープ ラーニングを使用したモデル トレーニングと推論 (ND シリーズ) などのタスクに特化しています。</span><span class="sxs-lookup"><span data-stu-id="efc84-138">GPU virtual machines are specialized for tasks such as heavy-duty graphic rendering or video editing, along with model training and inferencing (ND series) with deep learning.</span></span> <span data-ttu-id="efc84-139">これらのマシンでは、単一または複数の GPU を選択できます。</span><span class="sxs-lookup"><span data-stu-id="efc84-139">You can choose single or multiple GPUs for these machines.</span></span>|
|<span data-ttu-id="efc84-140">ハイ パフォーマンス コンピューティング</span><span class="sxs-lookup"><span data-stu-id="efc84-140">High performance compute</span></span>|<span data-ttu-id="efc84-141">H</span><span class="sxs-lookup"><span data-stu-id="efc84-141">H</span></span>|<span data-ttu-id="efc84-142">これらの仮想マシンには、最も高速かつ強力な CPU が備わっています。</span><span class="sxs-lookup"><span data-stu-id="efc84-142">The fastest, most powerful CPUs are available in these virtual machines.</span></span> <span data-ttu-id="efc84-143">高スループットのネットワーク インターフェイス (RDMA) を追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="efc84-143">You can also add high-throughput network interfaces (RDMA).</span></span>|

## <a name="clusters"></a><span data-ttu-id="efc84-144">クラスター</span><span class="sxs-lookup"><span data-stu-id="efc84-144">Clusters</span></span>

<span data-ttu-id="efc84-145">Azure のリージョンでは、物理サーバーのハードウェアがクラスターにグループ化されています。</span><span class="sxs-lookup"><span data-stu-id="efc84-145">The physical server hardware in Azure regions is grouped together into clusters.</span></span> <span data-ttu-id="efc84-146">それぞれのクラスターは、物理ハードウェアに応じて、いくつかの異なる仮想マシン サイズをサポートします。</span><span class="sxs-lookup"><span data-stu-id="efc84-146">Each cluster can support several different virtual machine sizes based on the physical hardware.</span></span>

<span data-ttu-id="efc84-147">仮想マシンを作成して特定のサイズを選択すると、そのサイズの適切なハードウェア クラスターに仮想マシンがプロビジョニングされます。</span><span class="sxs-lookup"><span data-stu-id="efc84-147">When you create a virtual machine and choose a specific size, the virtual machine is provisioned to an appropriate hardware cluster for that size.</span></span> <span data-ttu-id="efc84-148">仮想マシンは作成後にサイズを変更できますが、初期サイズに選んだハードウェア クラスターによってサイズ変更の選択肢が制限されることがあります。</span><span class="sxs-lookup"><span data-stu-id="efc84-148">Although you can resize virtual machines after creation, the resizing options may be limited by the hardware cluster chosen for the initial size.</span></span>

## <a name="what-is-vertical-scaling"></a><span data-ttu-id="efc84-149">垂直方向のスケーリングとは</span><span class="sxs-lookup"><span data-stu-id="efc84-149">What is vertical scaling?</span></span>

<span data-ttu-id="efc84-150">"_垂直スケーリング_" とは、仮想マシンの "_サイズ_" を変更するプロセスです。</span><span class="sxs-lookup"><span data-stu-id="efc84-150">_Vertical scaling_ is the process of changing the _size_ of a virtual machine.</span></span> <span data-ttu-id="efc84-151">要求の量の増加に対応するには、より大きなサイズを選んで "_スケールアップ_" し、割り当てリソースを減らしてコストを削減するには "_スケールダウン_" します。</span><span class="sxs-lookup"><span data-stu-id="efc84-151">You can _scale up_ by choosing a more powerful size to handle increased demand or _scale down_ to allocate fewer resources and reduce costs.</span></span> <span data-ttu-id="efc84-152">次の図は、仮想マシンのサイズ変更の例を示しています。</span><span class="sxs-lookup"><span data-stu-id="efc84-152">The following illustration shows an example of changing the size of a virtual machine.</span></span>

![パフォーマンス機能を変更するための、仮想マシンのスケールアップおよびスケールダウンを示す図。](../media/2-ScaleUpDown.png)

<span data-ttu-id="efc84-154">VM のサイズは、Azure portal、Azure PowerShell、Azure CLI のいずれかを使って変更できます。</span><span class="sxs-lookup"><span data-stu-id="efc84-154">You can resize a VM using the Azure portal, Azure PowerShell, or the Azure CLI.</span></span>

### <a name="resize-in-the-portal"></a><span data-ttu-id="efc84-155">ポータルを使用してサイズを変更する</span><span class="sxs-lookup"><span data-stu-id="efc84-155">Resize in the portal</span></span>

<span data-ttu-id="efc84-156">Azure portal で仮想マシンのサイズを変更するには、目的の仮想マシンを選択し、**[サイズ]** エントリをクリックして、**[サイズの選択]** ブレードからいずれかのエントリを選択します。</span><span class="sxs-lookup"><span data-stu-id="efc84-156">In the Azure portal, you can resize a virtual machine by selecting the virtual machine, clicking the **Size** entry, and selecting an entry from the **Choose a size** blade.</span></span> 

<span data-ttu-id="efc84-157">その時点で仮想マシンを実行中である場合、選択可能なサイズは、ご利用のリージョンで提供されているサイズによって異なります。</span><span class="sxs-lookup"><span data-stu-id="efc84-157">If the virtual machine is running at the time, the available sizes you can select from will depend on the available sizes in your region.</span></span> <span data-ttu-id="efc84-158">表示されるのは、現在仮想マシンが実行されているハードウェア クラスターと互換性があるサイズ変更オプション ("*サイズ ファミリー*" と呼ばれることもあります) だけです。</span><span class="sxs-lookup"><span data-stu-id="efc84-158">You will only see resize options compatible with the same hardware cluster that the virtual machine is currently running on; this is sometimes called a *size family*.</span></span> <span data-ttu-id="efc84-159">仮想マシンの実行中に新しいサイズを選択した場合、VM が自動的に再起動されて新しいサイズが適用されます。</span><span class="sxs-lookup"><span data-stu-id="efc84-159">If you choose a new size while the virtual machine is running, the VM will be restarted automatically to apply the new size.</span></span>

<span data-ttu-id="efc84-160">仮想マシンの実行中、目的のサイズがポータルに表示されない場合、仮想マシンをシャットダウンすると、他の選択肢が表示されます。</span><span class="sxs-lookup"><span data-stu-id="efc84-160">If the size you are looking for is not visible in the portal when the virtual machine is running, then you can shut down the virtual machine to see more options.</span></span> <span data-ttu-id="efc84-161">マシンの状態が "**停止済み (割り当て解除)**" であるときは、同じリージョン内の他のハードウェアのサイズを選ぶことができます。</span><span class="sxs-lookup"><span data-stu-id="efc84-161">When the machine is in the **stopped (deallocated)** state, you will be able to select sizes from other hardware in the same region.</span></span>

### <a name="resize-with-powershell"></a><span data-ttu-id="efc84-162">PowerShell を使用してサイズを変更する</span><span class="sxs-lookup"><span data-stu-id="efc84-162">Resize with PowerShell</span></span>

<span data-ttu-id="efc84-163">PowerShell を使用すると、垂直スケーリングを対話形式またはスクリプトで実行することができます。</span><span class="sxs-lookup"><span data-stu-id="efc84-163">You can use PowerShell to perform vertical scaling interactively or with scripts.</span></span> <span data-ttu-id="efc84-164">スクリプトは、複数の VM のサイズを一度に変更する必要がある場合など、複雑なシナリオに適しています。</span><span class="sxs-lookup"><span data-stu-id="efc84-164">Scripts are good for complex scenarios; for example, if you need to resize several VMs at once.</span></span> <span data-ttu-id="efc84-165">また、ユーザーの中断を避けて非稼働時間帯にサイズ変更を実行する場合にも便利です。</span><span class="sxs-lookup"><span data-stu-id="efc84-165">They are also convenient if you need to perform the resize during non-working hours to avoid user disruption.</span></span>

<span data-ttu-id="efc84-166">次のコマンドレットは、現在のハードウェアと同じサイズ ファミリーの VM サイズを一覧表示しています。</span><span class="sxs-lookup"><span data-stu-id="efc84-166">The following cmdlet lists VM sizes of the same size-family as the current hardware:</span></span>

```PowerShell
Get-AzureRmVMSize -ResourceGroupName "myResourceGroup" -VMName "MyVM"
```

<span data-ttu-id="efc84-167">目的のサイズが表示された場合は、次のコマンドレットを使用して仮想マシンのサイズを変更します。</span><span class="sxs-lookup"><span data-stu-id="efc84-167">If the desired size is displayed, use the following cmdlet to change the virtual machine size:</span></span>

```PowerShell
$vm = Get-AzureRmVM -ResourceGroupName "myResourceGroup" -VMName "MyVM"
$vm.HardwareProfile.VmSize = "<newVMsize>"
Update-AzureRmVM -VM $vm -ResourceGroupName "myResourceGroup"
```

<span data-ttu-id="efc84-168">マシンを実行した状態で目的のサイズが表示されない場合は、次のコマンドを使用して仮想マシンの割り当てを解除し、マシンのサイズを変更してから、再度マシンを起動してください。</span><span class="sxs-lookup"><span data-stu-id="efc84-168">If the desired size is not displayed with the machine running, use the following commands to deallocate the virtual machine, resize the machine, and start the machine again:</span></span>

```PowerShell
Stop-AzureRmVM -ResourceGroupName "myResourceGroup" -Name "MyVM" -Force
$vm = Get-AzureRmVM -ResourceGroupName "myResourceGroup" -VMName "MyVM"
$vm.HardwareProfile.VmSize = "<newVMSize>"
Update-AzureRmVM -VM $vm -ResourceGroupName "myResourceGroup"
Start-AzureRmVM -ResourceGroupName "myResourceGroup" -Name "MyVM"
```

<span data-ttu-id="efc84-169">Azure の仮想マシンは、パフォーマンスを向上させたりコストを削減したりする目的で、必要に応じてサイズを変更できます。</span><span class="sxs-lookup"><span data-stu-id="efc84-169">Virtual machines in Azure can be resized as needed to increase performance or decrease costs.</span></span> <span data-ttu-id="efc84-170">事業の拡大に段階的に対応する場合や、要求量の変化を事前に把握している場合は、ポータルまたはスクリプトを使った手動でのサイズ変更が適しています。</span><span class="sxs-lookup"><span data-stu-id="efc84-170">Performing the resize manually, with either the portal or a script, is useful to handle gradual business growth or when you know about a change in demand ahead of time.</span></span> <span data-ttu-id="efc84-171">玩具企業のシナリオであれば、商戦シーズンの前にスケールアップして要求量の急増に対応し、その後、スケールダウンすることが考えられます。</span><span class="sxs-lookup"><span data-stu-id="efc84-171">In the toy-company scenario, they could scale up before a holiday to handle the spike in demand and then scale down afterward.</span></span>
