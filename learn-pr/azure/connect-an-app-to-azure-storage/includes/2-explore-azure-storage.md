まずは、Azure ストレージ サービス、データ スタイル、アカウントについて簡単に確認してみましょう。 

Microsoft Azure Storage は、クラウド内で耐久性がありセキュリティで保護されたスケーラブルなストレージを提供するマネージド サービスです。 これらの用語をわかりやすく説明します。

| | |
|-|-|
| **耐久性** | 冗長性により、一時的なハードウェア障害が発生した場合でも、ご利用のデータは必ず安全に保たれます。 地域的な災害または自然災害から保護するために、データセンターまたは地理的リージョン間でデータをレプリケートすることもできます。 この方法でレプリケートされたデータは、予期しない停止が発生した場合でも高可用性が維持されます。 |
| **セキュリティ保護** | Azure Storage に書き込まれるデータはすべて、このサービスによって暗号化されます。 Azure Storage では、ご利用のデータにアクセスできるユーザーをきめ細かく制御できます。 |
| **スケーラブル** | Azure Storage には、今日のアプリケーションのデータ ストレージとパフォーマンスに関するニーズを満たすために、高度にスケーラブルな設計が採用されています。 |
| **マネージド** | メンテナンスや重大な問題は、Microsoft Azure がお客様に代わって処理します。 |

単一の Azure サブスクリプションでは最大で 200 個のストレージ アカウントをホストすることができます。それぞれのストレージ アカウントでは 500 TB のデータを保持できます。 ビジネス ケースをお持ちの場合は、Azure Storage チームに連絡して、1 つのサブスクリプションで最大 250 個のストレージ アカウントの承認を得ることができます。この場合、最大ストレージは 125 ペタバイトまで拡大できます。

## <a name="azure-data-services"></a>Azure データ サービス

Azure Storage には、次の 4 種類のデータがあります。

- **BLOB**: テキストとバイナリ データのための高度にスケーラブルなオブジェクト ストア。
- **Files**: クラウド デプロイ用またはオンプレミスのデプロイ用のマネージド ファイル共有。
- **Queues**: アプリケーション コンポーネント間の信頼性の高いメッセージングのためのメッセージング ストア。
- **Tables**: 構造化データのスキーマレス ストレージのための NoSQL ストア。 このサービスは Cosmos DB によって置き換えられているので、ここで説明しません。

Azure Storage 内のこのような種類のデータすべてに、世界中のどこからでも HTTP または HTTPS 経由でアクセスできます。 Microsoft では、さまざまな言語による Azure Storage 用 SDK に加えて、REST API も提供しています。 Azure portal ではすぐにデータを視覚的に確認できます。

### <a name="blob-storage"></a>BLOB ストレージ
Azure BLOB ストレージは、テキスト データやバイナリ データなどの大量の非構造化データを格納するために最適化されたオブジェクト ストレージ ソリューションです。 BLOB ストレージは、次の目的に最適です。

- 画像またはドキュメントをブラウザーに直接配信する (完全に静的な Web サイト)。
- 分散アクセス用にファイルを格納する。
- ビデオおよびオーディオをストリーミング配信する。
- バックアップと復元、ディザスター リカバリー、アーカイブのためのデータを格納する。
- オンプレミス サービスまたは Azure ホステッド サービスで分析するデータを格納する。

Azure Storage でサポートされている 3 種類の BLOB:

| BLOB の種類 | 説明 |
|-----------|-------------|
| **ブロック BLOB** | ブロック BLOB は、最大 5 TB (100 MB のブロックが 50,000 個) のテキスト ファイルまたはバイナリ ファイルの保存に使用されます。 ブロック BLOB は主に、始めから終わりまで読み込まれるファイルの保存に使用されます。メディア ファイルや Web サイトの画像ファイルなどです。 100 MB を超えるファイルは小さなブロックとしてアップロードされた上で、連結 (またはコミット) されて最終的な BLOB になるため、ブロック BLOB という名前が付けられました。 |
| **ページ BLOB** | ページ BLOB は最大 8 TB のランダム アクセス ファイルの保存に使用されます。 ページ BLOB は主に、Azure Virtual Machines (Azure VM) に耐久性のあるディスクを提供するための VHD 用のバッキング ストレージとして使用されます。 512 バイト ページを読み書きするランダム アクセスを提供するため、ページ BLOB という名前が付いています。 |
| **追加 BLOB** | 追加 BLOB は、ブロック BLOB と同様にブロックで構成されますが、追加操作に最適化されています。 多くの場合は、1 つまたは複数のソースから同じ BLOB に情報を記録するために使用されます。 たとえば、複数の VM 上で実行されているアプリケーションの場合は、すべてのトレース ログを同じ追加 BLOB に書き込みます。 1 つの追加 BLOB は最大 195 GB です。 |

### <a name="files"></a>Files
Azure Files では、標準的なサーバー メッセージ ブロック (SMB) プロトコルを使用してアクセスできる可用性の高いネットワーク ファイル共有を設定することができます。 つまり、複数の VM が、読み取りアクセス権と書き込みアクセス権の両方を使用して同じファイルを共有できます。 また、REST インターフェイスまたはストレージ クライアント ライブラリを使用してファイルを読み取ることもできます。 また、任意のファイルに一意の URL を関連付けることで、設定した期間、プライベート ファイルへの細かに制御されたアクセスを許可することができます。 ファイル共有は、多くの一般的なシナリオで使用できます。

- すべてのユーザーが同じバージョンを使用するように、VM、ツール、またはユーティリティに対して共有される構成ファイルの格納。
- 診断、メトリック、クラッシュ ダンプなどのログ ファイル。
- 一定の期間にわたるクラウドへのアプリの移行を可能にするため、オンプレミスのアプリケーションと Azure VM との間で共有されるデータ。

### <a name="queues"></a>Queues
Azure Queue サービスは、メッセージの格納と取得に使用します。 キューに許容されるメッセージ サイズは最大 64 KB で、1 つのキューに数百万件のメッセージを格納することができます。 一般に、非同期的に処理するメッセージのリストを格納するのが Queues の用途となります。

キューを使用することで、ご利用のアプリケーションのさまざまな部分をゆるく接続することができます。 たとえば、ユーザーによってアップロードされた写真上でイメージ処理を実行することが可能です。 ユーザーが Microsoft のサービスで格納したすべてのイメージを対象にして検索を行えるように、ある種の顔検出またはタグ付け機能を提供することが多分必要です。 キューを使用すれば Microsoft のイメージ処理サービスにメッセージを渡すことができます。これにより、新しいイメージがアップロードされ、処理可能な状態にあることをそのサービスに知らせることができます。 この種のアーキテクチャを使用すれば、サービスの各部分を個別に開発したり更新したりすることができます。

## <a name="azure-storage-accounts"></a>Azure ストレージ アカウント

アプリケーションからこのようなサービスのいずれかにアクセスするには、_ストレージ アカウント_を作成する必要があります。 ストレージ アカウントには、ご自分のデータ オブジェクトを格納してそれにアクセスするために一意の名前空間が用意されています。 ストレージ アカウントには、このアカウントの下で作成する BLOB、Files、キュー、テーブル、VM ディスクが含まれます。

### <a name="creating-a-storage-account"></a>ストレージ アカウントの作成

Azure ストレージ アカウントは、Azure portal、Azure PowerShell、または Azure CLI を使用して作成できます。 Azure Storage は、3 種類のアカウントから選択できるようになっています。3 つのアカウントはそれぞれ料金体系が異なり、サポートされている機能も異なります。

> [!div class="mx-tableFixed"]
> | アカウントの種類 | 説明 |
> |--------------|-------------|
> | **汎用 v2 (GPv2)** | 汎用 v2 (GPv2) アカウントは、BLOB、Files、キュー、テーブルの最新機能すべてをサポートするストレージ アカウントです。 GPv2 アカウントの料金体系は、GB 単価の最安値の実現を目指して設定されています。 |
> | **汎用 v1 (GPv1)** | 汎用 v1 (GPv1) アカウントでは、すべての Azure Storage サービスにアクセスできますが、最新の機能が利用できない場合があるほか、GB 単価もやや高いことがあります。 たとえば、GPv1 では、クール ストレージとアーカイブ ストレージがサポートされません。 この種類のアカウントは、GPv1 トランザクションの料金が比較的低いため、変更頻度が高いワークロードや読み取り速度が速いワークロードでメリットが得られることがあります。 |
> | **BLOB ストレージ アカウント** | 従来のアカウント型である BLOB ストレージ アカウントは、GPv2 とまったく同じブロック BLOB 機能を備えていますが、サポートされるのはブロック BLOB と追加 BLOB だけです。 価格については、汎用 v2 アカウントと大きな違いはありません。 |
    
ストレージ アカウントの作成について詳しく学ぶことに関心がある場合は、学習ポータル内の「**Azure ストレージ アカウントの作成**」モジュールを参照してください。