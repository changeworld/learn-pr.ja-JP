サーバーレス コンピューティングが自社に適しているかどうかを容易に判断できるように、まずサーバーレスとはどのようなものかを説明します。

## <a name="what-is-serverless-compute"></a>サーバーレス コンピューティングとは

サーバーレス コンピューティングは、Function as a Service (FaaS)、またはクラウド プラットフォーム上でホストされるマイクロサービスと考えることができます。 ご利用のビジネス ロジックは関数として実行され、インフラストラクチャのプロビジョニングまたはスケーリングを手動で行う必要はありません。 インフラストラクチャはクラウド プロバイダーによって管理されます。 ご利用のアプリは、負荷に応じて自動的にスケールアウトまたはスケールダウンされます。 Azure には、この種のアーキテクチャを構築するための方法がいくつか用意されています。 最も一般的な方法として、Azure Logic Apps とこのモジュールで取り上げる Azure Functions の 2 つが挙げられます。

## <a name="what-is-azure-functions"></a>Azure Functions とは

Azure Functions はサーバーレス アプリケーション プラットフォームです。 これにより、開発者はインフラストラクチャをプロビジョニングすることなく実行できるビジネス ロジックをホストできます。 Azure Functions では、組み込みのスケーラビリティが提供され、使用されているリソースに対してのみ料金が請求されます。 C#、F#、JavaScript など、お好みの言語で関数コードを記述することができます。 NuGet および npm のサポートも含まれているので、ビジネス ロジック内で一般的なライブラリを使用することができます。

## <a name="benefits-of-a-serverless-compute-solution"></a>サーバーレス コンピューティング ソリューションの利点

サーバーレス コンピューティングは、クラウドでビジネス ロジックのコードをホストする場合に適したオプションです。 Azure Functions などサーバーレス サービスを使用すると、お好みの言語でビジネス ロジックを記述できます。 また、スケーリングも自動的に行われます。管理対象のサーバーはありません。予約された時間ではなく、使用されているものに基づいて課金されます。 サーバーレス ソリューションには、他にも検討すべき特性がいくつかあります。

### <a name="avoids-over-allocation-of-infrastructure"></a>インフラストラクチャの割り当て超過を回避する

VM サーバーをプロビジョニングし、このサーバーに、ピーク負荷に対応するために十分なリソースを構成したとします。 負荷が小さい場合、使用していないインフラストラクチャに対しても課金される可能性があります。 サーバーレス コンピューティングでは、自動的なスケールアップまたはスケールダウンにより割り当ての問題を容易に解決することができ、ご利用の機能で作業が処理されているときのみ課金されます。

### <a name="stateless-logic"></a>ステートレスなロジック

ステートレスな関数は、サーバーレス コンピューティングの有力候補です。関数のインスタンスがオンデマンドで作成され、破棄されます。 状態が必要な場合は、関連付けられているストレージ サービスに格納できます。

### <a name="event-driven"></a>イベント ドリブン

Azure Functions は "_イベント ドリブン_" です。 つまり、HTTP 要求やキューに追加されているメッセージの受信などのイベント ("トリガー" と呼ばれる) への応答でのみ実行されます。 トリガーは関数定義の一部として構成します。 この方法によって、データの取得元 (トリガー/入力バインド) とデータの送信先 (出力バインド) を宣言できるようになるため、コードが大幅に単純化されます。 キュー、BLOB、ハブなどを監視するコードを記述する必要はありません。純粋にビジネス ロジックに専念できます。

### <a name="functions-can-be-used-in-traditional-compute-environments"></a>Azure Functions は従来のコンピューティング環境で使用できます。

Azure Functions は、サーバーレス コンピューティングの重要なコンポーネントですが、任意の種類のコードを実行するための一般的なコンピューティング プラットフォームでもあります。 ご利用のアプリのニーズに変化が生じた場合は、そのプロジェクトを取得し、それを非サーバーレス環境にデプロイすることができます。そうすることで、スケーリングの管理、仮想ネットワーク上での実行、さらに自分の関数の完全な分離を柔軟に行うことができます。

## <a name="drawbacks-of-a-serverless-compute-solution"></a>サーバーレス コンピューティング ソリューションの欠点

サーバーレス コンピューティングのソリューションはビジネス ロジックのホスティングに常に適しているわけではありません。 サーバーレス コンピューティングでご利用のサービスをホストするための決定に影響を与える可能性がある Azure Functions の特性をいくつか示します。

### <a name="execution-time"></a>実行時間

既定では、Azure Functions に 5 分のタイムアウトが設定されています。 このタイムアウトは、最大 10 分に設定することができます。 実行に 10 分以上必要な関数は、VM 上でホストすることができます。 さらに、サービスが HTTP 要求を介して開始され、その値を HTTP 応答として求める場合は、タイムアウトが 2.5 分にまで制限されます。 最後に、**Durable Functions** と呼ばれるオプションもあります。これを使用すると、タイムアウトなしで複数の関数の実行を調整することができます。

### <a name="execution-frequency"></a>実行頻度

2 番目の特性は、実行頻度です。 ご利用の関数が複数のクライアントによって継続的に実行されることが想定される場合は、必要に応じて使用量を見積もり、Azure Functions を使用するコストを計算することをお勧めします。 ご利用のサービスを VM 上でホストする方が安くなる可能性もあります。

スケーリング中には、10 秒ごとに関数アプリ インスタンスを 1 つだけ作成でき、合計では最大 200 個のインスタンスを作成できます。 各インスタンスでは複数の同時実行を提供できるため、1 つのインスタンスで処理できるトラフィックには制限がないことに留意してください。 トリガーの種類が異なれば、スケーリング要件も異なるため、選択したトリガーとその制限を確認してください。
