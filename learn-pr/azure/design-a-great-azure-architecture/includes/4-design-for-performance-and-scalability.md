<span data-ttu-id="5eab8-101">自分の会社の驚くべきがんの治療が、第一面のニュースになっているところを想像してみてください。</span><span class="sxs-lookup"><span data-stu-id="5eab8-101">Imagine a news story has just been published covering your organization's breakthrough cancer treatment.</span></span> <span data-ttu-id="5eab8-102">これはすばらしい通過点であり、間違いなく会社の Web サイトに大量のアクセスが流れるでしょう。</span><span class="sxs-lookup"><span data-stu-id="5eab8-102">This is a terrific milestone, and will undoubtedly bring a large influx of traffic to your website.</span></span> <span data-ttu-id="5eab8-103">その Web サイトは、このアクセスの増加に対応できますか。サイトの反応の低下や停止を引き起こすでしょうか。</span><span class="sxs-lookup"><span data-stu-id="5eab8-103">Will the website handle this traffic increase, or will the load cause the site to be slow or unresponsive?</span></span>

<span data-ttu-id="5eab8-104">ここでは、スケーリングと最適化の原則を使用して優れたアプリケーション パフォーマンスを確保する基本原理を見ていきます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-104">Here, we'll look at some of the basic principles of ensuring outstanding application performance using scaling and optimization principles.</span></span>

## <a name="what-is-scaling-and-performance-optimization"></a><span data-ttu-id="5eab8-105">スケーリングとパフォーマンスの最適化とは何ですか。</span><span class="sxs-lookup"><span data-stu-id="5eab8-105">What is scaling and performance optimization?</span></span>

<span data-ttu-id="5eab8-106">スケーリングとパフォーマンスの最適化とは、利用可能なリソースと受信要求を持つアプリケーションを適合させることです。</span><span class="sxs-lookup"><span data-stu-id="5eab8-106">Scaling and performance optimization are about matching the resources available to an application with the demand it is receiving.</span></span> <span data-ttu-id="5eab8-107">パフォーマンスの最適化には、リソースをスケーリングすること、潜在的なボトルネックを識別して最適化すること、最高のパフォーマンスが得られるようアプリケーション コードを最適化することが含まれています。</span><span class="sxs-lookup"><span data-stu-id="5eab8-107">Performance optimization includes scaling resources, identifying and optimizing potential bottlenecks, and optimizing your application code for peak performance.</span></span>

### <a name="scaling"></a><span data-ttu-id="5eab8-108">スケーリング</span><span class="sxs-lookup"><span data-stu-id="5eab8-108">Scaling</span></span>

<span data-ttu-id="5eab8-109">コンピューティング リソースは、2 つの方向にスケーリングできます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-109">Compute resources can be scaled in two different directions:</span></span>

* <span data-ttu-id="5eab8-110">スケーリング*アップ*は他のリソースを 1 つのインスタンスに追加する操作です。</span><span class="sxs-lookup"><span data-stu-id="5eab8-110">Scaling *up* is the action of adding more resources to a single instance.</span></span>
* <span data-ttu-id="5eab8-111">スケーリング*アウト*とはインスタンスの追加です。</span><span class="sxs-lookup"><span data-stu-id="5eab8-111">Scaling *out* is the addition of instances.</span></span>

![スケール アップとスケール アウト](../media-draft/scale-up-scale-out.png)

<span data-ttu-id="5eab8-113">スケール アップでは CPU やメモリなどの他のリソースを 1 つのインスタンスに追加します。</span><span class="sxs-lookup"><span data-stu-id="5eab8-113">Scaling up is concerned with adding more resources, such as CPU or memory, to a single instance.</span></span> <span data-ttu-id="5eab8-114">このインスタンスは、仮想マシンまたは PaaS サービスである場合があります。</span><span class="sxs-lookup"><span data-stu-id="5eab8-114">This instance could be a virtual machine or a PaaS service.</span></span> <span data-ttu-id="5eab8-115">インスタンスへより多くの容量を追加する機能により、アプリケーションで使用できるリソースが向上しますが、制限があります。</span><span class="sxs-lookup"><span data-stu-id="5eab8-115">The act of adding more capacity to the instance increases the resources available to your application, but it does come with a limit.</span></span> <span data-ttu-id="5eab8-116">仮想マシンは実行中のホストの容量に限られ、ホスト自体に物理的な制限があります。</span><span class="sxs-lookup"><span data-stu-id="5eab8-116">Virtual machines are limited to the capacity of the host they run on, and hosts themselves have physical limitations.</span></span> <span data-ttu-id="5eab8-117">最終的には、インスタンスをスケール アップを行う時に、これらの制限にぶつかり、インスタンスにさらにリソースを追加する機能が限られてしまいます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-117">Eventually, when you scale up an instance, you can run into these limits, restricting your ability to add further resources to the instance.</span></span>

<span data-ttu-id="5eab8-118">スケール アウトには、サービスに追加のインスタンスを加えることが関係しています。</span><span class="sxs-lookup"><span data-stu-id="5eab8-118">Scaling out is concerned with adding additional instances to a service.</span></span> <span data-ttu-id="5eab8-119">仮想マシンや PaaS サービスともなり得ますが、1 つのインスタンスをより強力にすることで多くの容量を追加する代わりに、インスタンスの合計数を増やすことで容量を増加させます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-119">These can be virtual machines or PaaS services, but instead of adding more capacity by making a single instance more powerful, we add capacity by increasing the overall total number of instances.</span></span> <span data-ttu-id="5eab8-120">スケール アウトのメリットは、アーキテクチャに追加する複数のマシンがあれば、考える限り永久にスケール アウトが可能です。</span><span class="sxs-lookup"><span data-stu-id="5eab8-120">The advantage of scaling out is that you can conceivably scale out forever if you have more machines to add to the architecture.</span></span> <span data-ttu-id="5eab8-121">スケール アウトには、何らかの種類の負荷分散が必要です。</span><span class="sxs-lookup"><span data-stu-id="5eab8-121">Scaling out requires some type of load distribution.</span></span> <span data-ttu-id="5eab8-122">利用可能なサーバー全体で負荷バランス分散リクエストの形を取ることもありますが、リクエストを送信するアクティブなサーバーを識別するためのサービス検出メカニズムであることも考えられます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-122">This could be in the form of a load balancer distributing requests across available servers, or a service discovery mechanism for identifying active servers to send requests to.</span></span>

<span data-ttu-id="5eab8-123">どちらの場合も、リソースを削減し、コストの最適化を実現できます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-123">In both cases, resources can be reduced, bringing cost optimization into the picture.</span></span>

### <a name="performance-optimization"></a><span data-ttu-id="5eab8-124">パフォーマンスの最適化</span><span class="sxs-lookup"><span data-stu-id="5eab8-124">Performance optimization</span></span>

<span data-ttu-id="5eab8-125">パフォーマンスを最適化するときは、ネットワークとストレージに許容レベルのパフォーマンスを確保してください。</span><span class="sxs-lookup"><span data-stu-id="5eab8-125">When optimizing for performance, you'll look at network and storage to ensure performance is acceptable.</span></span> <span data-ttu-id="5eab8-126">両方ともアプリケーションの応答時間に影響を与えかねません。</span><span class="sxs-lookup"><span data-stu-id="5eab8-126">Both can impact the response time of your application.</span></span> <span data-ttu-id="5eab8-127">お使いのアーキテクチャに適切なネットワークとストレージテクノロジー選択すると、消費者に最高のエクスペリエンスを提供することができます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-127">Selecting the right networking and storage technologies for your architecture will help you ensure you're providing the best experience for your consumers.</span></span>

<span data-ttu-id="5eab8-128">パフォーマンスの最適化には、アプリケーション自体がどのように実行されているかを理解することも含まれます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-128">Performance optimization will also include understanding how the applications themselves are performing.</span></span> <span data-ttu-id="5eab8-129">依存システム内でのエラー、不具合のあるコード、ボトルネックはすべて、アプリケーション パフォーマンス管理ツールで明らかになります。</span><span class="sxs-lookup"><span data-stu-id="5eab8-129">Errors, poorly performing code, and bottlenecks in dependent systems can all be uncovered through an application performance management tool.</span></span> <span data-ttu-id="5eab8-130">たいていの場合、これらの問題はエンドユーザーや開発者、管理者には見えなかったり、わかりにくかったりしますが、アプリケーションの全体的なパフォーマンスには悪影響があります。</span><span class="sxs-lookup"><span data-stu-id="5eab8-130">Often, these issues may be hidden or obfuscated for end users, developers, and administrators, but can have adverse impact on the overall performance of your application.</span></span>

## <a name="scalability-and-performance-best-practices"></a><span data-ttu-id="5eab8-131">拡張性とパフォーマンスのベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="5eab8-131">Scalability and performance best practices</span></span>

<span data-ttu-id="5eab8-132">アプリケーションのすべての階層を確認して、アプリケーションでのパフォーマンスボトルネックを識別して修復します。</span><span class="sxs-lookup"><span data-stu-id="5eab8-132">Look across all layers of your application and identify and remediate performance bottlenecks in your application.</span></span> <span data-ttu-id="5eab8-133">お使いのアプリケーションで、または、データベースにインデックスを追加するプロセスでも、これらのボトルネックが低いメモリ処理を行っている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="5eab8-133">These bottlenecks could be poor memory handling in your application, or even the process of adding indexes into your database.</span></span> <span data-ttu-id="5eab8-134">反復的なプロセスとなり、１つのボトルネックを解決すると、今まで気が付かなかった別のボトルネックを見つけてしまうことがあります。</span><span class="sxs-lookup"><span data-stu-id="5eab8-134">It can be an iterative process, as you may relieve one bottleneck and then uncover another that you were unaware of.</span></span>

<span data-ttu-id="5eab8-135">アーキテクチャでキャッシュを使用すると、パフォーマンスを向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-135">Using caching in your architecture can help improve performance.</span></span> <span data-ttu-id="5eab8-136">キャッシュは、頻繁に使用されるストアのデータやアセット (Web ページ、画像)をより速く回復するために保存するメカニズムです。</span><span class="sxs-lookup"><span data-stu-id="5eab8-136">Caching is a mechanism to store frequently used data or assets (web pages, images) for faster retrieval.</span></span> <span data-ttu-id="5eab8-137">アプリケーションのさまざまなレイヤーで、キャッシュを使用できます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-137">Caching can be used at different layers of your application.</span></span> <span data-ttu-id="5eab8-138">アプリケーション サーバーとデータベース間でキャッシュを使用することができ、データの取得時間を短縮することができます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-138">You can use caching between your application servers and a database, to decrease data retrieval times.</span></span> <span data-ttu-id="5eab8-139">静的なコンテンツをユーザーの近くに配置して、エンドユーザーが Web ページに戻るのにかかる時間を短縮し、エンドユーザーと Web サーバー間でキャッシュを使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-139">You could also use caching between your end users and your web servers, placing static content closer to the user and decreasing the time it takes to return web pages to the end user.</span></span> <span data-ttu-id="5eab8-140">これには、他のリクエストへのパフォーマンスを向上して、データベースまたは Web サーバーからのリクエストをオフロードするという二次的な効果もあります。</span><span class="sxs-lookup"><span data-stu-id="5eab8-140">This also has a secondary effect of offloading requests from your database or web servers, increasing the performance for other requests.</span></span>

<span data-ttu-id="5eab8-141">複数のタスクを実行する 1 つの大規模なアプリケーションとしてビルドされたレガシー アプリケーションを表示することは珍しくありません。</span><span class="sxs-lookup"><span data-stu-id="5eab8-141">It's not uncommon to see legacy applications built as one large application to do multiple tasks.</span></span> <span data-ttu-id="5eab8-142">このアーキテクチャは、スケール アップのみに制限されていることが多く、スケール アウトに対応していません。このようなタイプのアーキテクチャでは、アプリケーションを最新化し、サービスを他から分離します。</span><span class="sxs-lookup"><span data-stu-id="5eab8-142">These architectures are often limited to only scaling up, and are incapable of scaling out. In these types of architectures, look to modernize your application and decouple services from each other.</span></span> <span data-ttu-id="5eab8-143">分離とは、アプリケーションの主要な機能を別のアプリケーションに切り離す操作です。</span><span class="sxs-lookup"><span data-stu-id="5eab8-143">Decoupling is the act of breaking apart the major functions of an application into separate applications.</span></span> <span data-ttu-id="5eab8-144">分離されると、必要に応じて各サービスがそれぞれ個別にスケール アウトまたはスケールインされることができます、</span><span class="sxs-lookup"><span data-stu-id="5eab8-144">Once separated, each service could then be scaled-out and scaled-in as needed, independently of each other.</span></span>

<span data-ttu-id="5eab8-145">分離と合わせて、サービス間でのメッセージング レイヤーの追加がパフォーマンスに役立つことがあります。</span><span class="sxs-lookup"><span data-stu-id="5eab8-145">Along with decoupling, adding a messaging layer in between services can have a benefit to performance.</span></span> <span data-ttu-id="5eab8-146">メッセージング レイヤーを追加すると、アプリケーションがサポートできない場合でもリクエストがエラーなく継続できるようサービス間のリクエストへのバッファーが作成されます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-146">Adding a messaging layer creates a buffer for requests between the services so that requests can continue to flow in without error if the application can’t keep up.</span></span> <span data-ttu-id="5eab8-147">リクエストを通じてアプリケーションが動作するので、受信した順序で解消されます。</span><span class="sxs-lookup"><span data-stu-id="5eab8-147">As the application works through the requests, they will be answered in the order in which they were received.</span></span>

<span data-ttu-id="5eab8-148">アーキテクチャによっては、さまざまなアプリケーションのパフォーマンスを最適化するために見るべき幅広い階層があります。</span><span class="sxs-lookup"><span data-stu-id="5eab8-148">Depending on the architecture, there's a wide array of places to look to optimize the performance of your application.</span></span> <span data-ttu-id="5eab8-149">アプリケーションのパフォーマンスを評価し、最適に実行できていない部分を見つける必要があります。</span><span class="sxs-lookup"><span data-stu-id="5eab8-149">You will need to evaluate the performance of your application, and look for areas that may not be performing optimally.</span></span>
