"不言実行" が真実であれば、このモジュールの核心にたどり着いたことになります。 このユニットでは、SRE 実践の中心としばしば見なされている 2 つのプラクティスについて見ていきます。 いずれも "好循環" を作ることが重要であるという原則から来ています。 ここで言う好循環とは、組織を継続的に改善するフィードバック ループを組織内で作り出すプラクティスのことです。 この 2 つのプラクティスには後続のモジュールが用意されているので、ここでは概要だけ見ておきます。

### <a name="virtuous-cycle-1-slis-and-slos"></a>好循環 #1: SLI と SLO

このモジュールで先に、"適切な信頼性レベル" に向けて取り組むという大きな仕事をしました。 その概念が活かされたのはまさにそこです。

本稼働への移行を計画している新しいサービスがあるとします (構築済みのサービスかまだ計画段階にあるサービス)。 その過程の一環として、それに望まれる信頼性についていくつかの決定を行うことが重要です。 コードをすべて自分で記述しないのであれば、決定はコードを記述する開発者と共同で行われます (このことは非常に重要です)。

最初の決定は、サービスの正常性の指標として使用されます (Service Level Indicator/サービス レベル指標、略して SLI)。 これには "システムが稼働しているか/問題なく動作しているかはどのようにして確認するか" という別の問い方があります。 これを追跡するさまざまな方法については後で詳しく見ますが、これは通常、成功か失敗かという指標 (時間の何割かにおいてサービスが操作を正常に完了するか)、タイミングの指標 (特定の時間しきい値内で返信したか)、スループットの指標 (特定の量のデータ化を処理したか)、またはそれらすべての組み合わせになります。 簡単な例を挙げると、Microsoft サービスの SLI は、(500 やその他のコードではなく) HTTP 200 コードで示される成功を返した頻度と言えるかもしれません。

サービスの状態を伝えるわかりやすい指標が与えられたら、サービスに期待する信頼性レベルを決定します。 たとえば、1 日という期間で 20% の失敗率をサービスに予想しますか? 端数のない大きな数を使用します。最初の段階では説明しやすいからです。 後続のモジュールでは、"そのエラー率はどのユーザーに表示されるのか"、"一部のユーザー?"、"ほとんどのユーザー?" など、 ステートメントの複雑性と精度を上げます。 その期待されるものが、サービスの開発者との共同で作成される、サービス レベル目標 (SLO) です。

SLO は、精確に計測し、監視システムに表示できるものでなければなりません。 サービスの信頼性として、客観的でわかりやすい目標にします。どのくらいの数値で十分でしょうか。 "このサービスはこの 1 週間くらい問題なく稼働していると思うけど、断言するのは難しい" というのはここでは論外です。 サービスがその SLO を満たすかどうかは、データではっきりさせてください。 その SLO を満たしていない場合 (特に、一定期間に繰り返される)、何かに問題があり、対処する必要があります。

### <a name="error-budgets"></a>エラー予算

サービスでその SLO が満たされない場合、組織がすぐに対処するというのは単純明快ですが、SRE では、SLO が満たされるか、それを上回る場合、この概念全体をもう 1 つ先に進めます。 SLO を利用し、"エラー予算" と呼ばれるものを作る組織があります。

このアイデアを示すために、ここまでの説明に登場したサンプル サービスを利用します。その SLO は 80% 成功です (これは "時間の 80% は稼働していなければならない" と考えてください)。 80% アップタイムの SLO をもって、サービスは時間の 80% は稼働していなければならないと宣言しました。 それでは、残りの 20% はどうなりますか? 残りの 20% は停止する場合、特に "気にする" ことはありません。サービスの目標として、残りの 20% も稼働することは重要ではないと決定しているためです。

それでは、その間に発生することについて気にしない場合、サービスに関して何ができるでしょうか。 確かにできることの 1 つは、いくつかの機能を追加する新しいリリースなどでアップグレードすることにより、実行中のサービスを揺るがすことです。 その新しいリリースが稼働し、ダウンタイムが増えないようであれば最高です。 その新しいリリースによってサービスの安定性が低下し、デバッグしたとき、さらに時間の 10% でエラーが返される場合、それも良しとします。 許容される信頼性の予算内です。

エラー予算は、サービスの潜在的完全信頼性とその望まれる信頼性の差です (100% - 80% = 20%)。 今回の場合、エラー予算で 20% 信頼性欠如という資金が与えられます。20% の時間は "仕様の範囲内であるから稼働していてもいなくても心配しません"。  他の予算と同じように予算が尽きるまで、その 20% の時間は好きなように使うことができます (おそらくはリリースを増やすでしょう)。

エラー予算はまた、SLO を作らないような、満足度の低い場合に一部の組織で利用されます。 その場合、上述の "措置を講じる" より少しばかり厳しい行動を選択するかもしれません。 サービスに問題があり、先に選択した SLI で示されるように、時間の 60% だけ稼働したとします。 目標 (SLO) は作りませんでした。 サービスはそのエラー予算を使い切っています。 この時点でシステムをさらに揺るがすとおそらくは信頼性を悪化させるだけなので、組織は予定のリリースを控えることを選択することがあります。 エラー予算は通常、一定の期間、つまり、1 か月や 1 四半期に対して計算されるか、サービスの信頼性が許すとき、その予算が戻るように、ローリング基準で計算されます。

組織はリリースを控える間、サービスでその SLO が達成できない問題の源を見つけ、改善する目的で、機能開発から信頼性作業にエンジニアリング リースの一部を移すことがあります。

エラー予算の話になるとき "一部の組織" と表現する理由は、その実装方法にあります。特に、リリースを控える場合、組織内で何らかの同意を得る必要があります。 組織はリリース決定に直面したとき、それを快く伝えなければなりません。現時点までのサービスの信頼性に問題があれば、そのリリースは控えられます。 そのような決定を快く行えるのは一部の組織だけです。 これはまた、エラー予算の枯渇に対する唯一の応答ではなく、最も議論される応答です。

SLI、SLO、エラー予算の詳細については個別のモジュールでたくさんお話ししますが、これらのプラクティスを好循環という側面から強調することには意味があります。 それは理論上、より良い信頼性を目指して皆を働かせるように、組織がサービスの信頼性を説明し、伝達し、信頼性に基づいて行動する手法を与えます。 このフィードバック ループは非常に重要であることがあります。

## <a name="virtuous-cycle-2-blameless-postmortems"></a>好循環 #2: 責めない事後分析

事後分析、つまり、通常は望まれない重大なイベントを遡及的に分析するという考えは、サイト リライアビリティ エンジニアリングだけに固有ではありません。 事業の世界では珍しいことですらありません。 他とは違うことがあるとすれば、SRE では事後分析に "責めないこと" が求められるということです。 特定の人の行動ではなく、問題を起こしたプロセスやテクノロジの失敗に集中的に取り組む必要があります。 "失敗につながった動作を X に許したプロセスを置いたのはどういうことか。 間違った結論が導かれたとき、その担当者はどのような情報が利用できなかったのか。あるいは、どのような情報が目立っていたのか。 そのような壊滅的な障害が起こらないようにするには、どのような種類のガードレールを置くべきであったのか。" 責めない事後分析では、このような質問が行われます。

こうした質問の質と方向が非常に重要です。 システムを改善するための方法を模索するものであり、良かれと思ってした行動でダウンタイムを引き起こした個人を罰するためのものではありません。 "攻撃ばかりでは信頼されない" ということを覚えておいてください。 私の経験では、(ごくわずかな例外はありますが) 運用環境で問題が発生するたびに人を解雇する組織はその問題から何も学びません。 何も学ばないどころか、ひとりの人間が置き去りにされ、隅っこで震え、それが何であれ、変えることを恐れるようになります。

しかしながら、組織で事後分析プロセスを正しく機能させると好循環が生まれます。 組織はダウンタイムから学び、そのシステムを継続的に改善できます (適切な分析と事後処理が行われるなら)。

障害やエラーとこのように付き合うこと、つまり、組織が失敗を学習と改善のための機会と捉えることが、サイト リライアビリティ エンジニアリングの中心的原則です。 好循環を作り、機会を活かし、組織の信頼性を上げる方向に導くことがもう 1 つの中心的原則です。

次のユニットでは、他の原則とプラクティスについていくつか確認します。SRE の人間側に注目します。
