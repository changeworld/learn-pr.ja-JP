設定した間隔でロジックを実行することはよくあります。 あなたはブログ所有者で、購読者が最新の投稿を読んでいないことに気付いたとします。 最良の対処として、1 週間に一度、ブログをチェックするように知らせる電子メールを送信することにしました。 このロジックを実装するには、Azure 関数と_タイマー トリガー_を使用して関数を週 1 回呼び出します。

## <a name="what-is-a-timer-trigger"></a>タイマー トリガーとは

タイマー トリガーは、一定の間隔で関数を実行するトリガーです。 タイマー トリガーを作成するには、2 つの情報を指定する必要があります。 

1. *タイムスタンプ パラメーター名*。これは、コード内でこのトリガーにアクセスするための識別子です。 
2. *スケジュール*。これは、タイマーの間隔を設定する *CRON 式*です。

## <a name="what-is-a-cron-expression"></a>CRON 式とは

*CRON 式*は、一連の時間を表す 6 つのフィールドで構成される文字列です。

Azure でのこの 6 つのフィールドの順序は、`{second} {minute} {hour} {day} {month} {day of the week}` です。

たとえば、5 分ごとに実行されるトリガーを作成する *CRON 式*は、次のようになります。

```
0 */5 * * * *
```

最初は、この文字列は複雑に見えるかもしれません。 *CRON 式*について詳しく説明するときに、再度個々に解説します。

*CRON 式*を作成するには、いくつかの特殊文字について基本を理解している必要があります。

| 特殊文字 | 意味 | 例 |
| ------------- | ------------- | ------------- |
| *      | フィールド内のすべての値を選択する | 曜日フィールド内でのアスタリスク "*" は、*すべての*曜日を意味します。 |
| ,      | リスト内の項目を区切る | 曜日フィールド内でのコンマ "1, 3" は、月曜日 (1 日目) と水曜日 (3 日目) を意味します。 |
| -      | 範囲を指定する | 時間フィールド内でのハイフン "10 - 12" は、10 時、11 時、および 12 時を含む範囲を意味します。 |
| /      | 増分を指定する | 分フィールド内でのスラッシュ"*/10" は、10 分ごとの増分を意味します。 |

では、元の CRON 式の例に戻ります。 フィールドごとに分けて詳しく理解してみましょう。

```
0 */5 * * * *
```

**最初のフィールド**は、秒を表します。 このフィールドでは、0 から 59 までの値を使用できます。 このフィールドには 0 が含まれているため、最初の指定可能な値である 1 秒を選択しています。

**2 番目のフィールド**は、分を表します。 "*/5" という値には 2 つの特殊文字が含まれています。 まず、アスタリスク (\*) は "フィールド内のすべての値を選択する" ことを意味します。 このフィールドは分を表すため、取り得る値は 0 から 59 までです。 2 つ目の特殊文字はスラッシュ (/) で、これは増分を表します。 これらの文字を組み合わせると、0 から 59 までのすべての値について、5 番目ごとの値を選択することを意味します。 簡単に言うと、"5 分ごと" です。

**残りの 4 つのフィールド**は、時間、日、月、曜日を表します。 これらのフィールドにおいて、アスタリスクはすべての値を選択することを意味します。 この例では、"毎月の毎日の毎時" を選択します。

すべてのフィールドを結合すると、この式は "毎月、毎日、毎時、5 分ごと、最初の秒" と読むことができます。

## <a name="how-to-create-a-timer-trigger"></a>タイマー トリガーを作成する方法

タイマー トリガーは、Azure portal 内だけで作成できます。 Azure 関数内で、定義済みのトリガーの種類の一覧から **[タイマー トリガー]** を選択します。 実行するロジックを入力します。 **[タイムスタンプ パラメーター名]** と **[CRON 式]** を指定します。

## <a name="summary"></a>まとめ

タイマー トリガーは、一貫したスケジュールに基づいて Azure 関数を呼び出すトリガーです。 タイマー トリガーのスケジュールを定義するには、*CRON 式*を作成します。CRON 式は一連の時間を表す文字列です。

