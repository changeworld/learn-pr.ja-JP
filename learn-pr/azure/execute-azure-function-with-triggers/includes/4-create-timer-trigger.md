この演習では、タイマー トリガーを使用して 20 秒ごとに呼び出される Azure 関数を作成します。

## <a name="create-an-azure-function"></a>Azure 関数を作成する

ポータルで Azure 関数を作成することから始めましょう。

1. [Azure portal](https://portal.azure.com?azure-portal=true) にサインインします。

1. 左側のナビゲーションで、**[リソースの作成]** を選択します。

1. **[コンピューティング]** を選択します。

1. **[Function App]** を検索して選択します。 必要に応じて検索バーを使用してテンプレートを検索することもできます。

    ![Function App を選択する](../media-drafts/4-click-function-app.png)

1. 一意の**アプリ名**を入力します。

1. **サブスクリプション**を選択します。

1. 新しい**リソース グループ**を作成します。

1. 使用する **OS** として **[Windows]** を選択します。

1. 使用する**ホスティング プラン**には、**[従量課金プラン]** を選択します。 ご利用の関数を実行するたびに課金されます。 ご利用のアプリケーション ワークロードに基づいてリソースが自動的に割り当てられます。

1. **[場所]** を選択します。

1. 新しい**ストレージ** アカウントを作成します。既定はアプリ名のバリエーションですが、名前は任意で変更することができます。

1. **[Application Insights]** をオフにします。

1. **[作成]** を選択します。 これの完了には数分かかります。リソースの作成が完了すると、ツールバー領域の **[通知]** アイコンには、Azure Portal で開くためのボタンが作成されることが確認できます。

## <a name="create-a-timer-trigger"></a>タイマー トリガーを作成する

ここで、Azure 関数内にタイマー トリガーを作成します。

1. Azure 関数が作成されたら、左側のナビゲーションから **[すべてのリソース]** を選択します。

1. 使用する Azure 関数を検索し、選択します。

1. 新しいブレード上で、**[関数]** をポイントし、プラス (+) アイコンを選択します。

    ![[関数] をポイントし、プラスを選択する](../media-drafts/4-hover-function.png)

1. **[タイマー]** を選択します。

1. 言語として **[CSharp]** を選択します。

1. **[この関数を作成する]** をクリックします。

## <a name="configure-the-timer-trigger"></a>タイマー トリガーを構成する

ログ ウィンドウにメッセージを出力するロジックが備わった Azure 関数があります。 20 秒ごとに実行されるようにタイマーのスケジュールを設定することにします。

1. **[統合]** を選択します。

1. **[スケジュール]** ボックスに次の値を入力します。

    ```
    */20 * * * * *
    ```

1. **[保存]** を選択します。

## <a name="start-the-timer"></a>タイマーを開始する

これで、タイマーは構成されましたので、いつでも開始することができます。

1. **[TimerTriggerCSharp1]** を選択します。 

    > [!NOTE]
    > **[TimerTriggerCSharp1]** は既定の名前です。 これは、トリガーを作成するとき自動的に選択されます。

1. **[実行]** を選択します。 

この時点では、ログ ウィンドウに 20 秒ごとにメッセージが表示されるはずです。

## <a name="clean-up"></a>クリーンアップ

この関数に対して課金されないようにするには、ログ ウィンドウの上にある **[一時停止]** を選択してタイマーを停止します。

![一時停止](../media-drafts/4-pause-timer.png)
