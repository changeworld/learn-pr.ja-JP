<span data-ttu-id="e64b0-101">あなたは写真家で、その日の写真を載せる Web サイトを所有しているとします。</span><span class="sxs-lookup"><span data-stu-id="e64b0-101">Imagine you're a photographer and you have a website where you display your pictures of the day.</span></span> <span data-ttu-id="e64b0-102">忙しさからアップロードのスケジュールが一貫していないため、写真をアップロードするときにファンに通知したいと考えています。</span><span class="sxs-lookup"><span data-stu-id="e64b0-102">Because you're busy, you don't have a consistent upload schedule, but you want to notify your fans when you upload a picture.</span></span> <span data-ttu-id="e64b0-103">ご利用の Azure Storage Blob コンテナーにイメージをアップロードするたびに、自動的にツイートを送信する Azure 関数を作成することにします。</span><span class="sxs-lookup"><span data-stu-id="e64b0-103">You decide to create an Azure function to automatically send a tweet whenever you upload an image to your Azure Storage blob container.</span></span>

<span data-ttu-id="e64b0-104">ここでは、BLOB トリガーを作成して、Azure Storage Blob コンテナーの特定の場所を監視するように指示する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-104">Here, you learn how to create a blob trigger and instruct it to monitor a specific location in your Azure Storage blob container.</span></span>

## <a name="what-is-azure-storage"></a><span data-ttu-id="e64b0-105">Azure Storage とは</span><span class="sxs-lookup"><span data-stu-id="e64b0-105">What is Azure Storage?</span></span>

<span data-ttu-id="e64b0-106">Azure Storage は、すべての種類のデータ (BLOB、キュー、NoSQL など) をサポートする Microsoft のクラウド ストレージのソリューションです。</span><span class="sxs-lookup"><span data-stu-id="e64b0-106">Azure Storage is Microsoft's cloud storage solution that supports all types of data, including: blobs, queues, and NoSQL.</span></span> <span data-ttu-id="e64b0-107">Azure Storage の目標は、次のようなデータ ストレージを提供することです。</span><span class="sxs-lookup"><span data-stu-id="e64b0-107">The goal of Azure Storage is to provide data storage that's:</span></span>

- <span data-ttu-id="e64b0-108">高可用性</span><span class="sxs-lookup"><span data-stu-id="e64b0-108">Highly available</span></span>
- <span data-ttu-id="e64b0-109">セキュリティ保護</span><span class="sxs-lookup"><span data-stu-id="e64b0-109">Secure</span></span>
- <span data-ttu-id="e64b0-110">拡張性</span><span class="sxs-lookup"><span data-stu-id="e64b0-110">Scalable</span></span>
- <span data-ttu-id="e64b0-111">管理者常駐型</span><span class="sxs-lookup"><span data-stu-id="e64b0-111">Managed</span></span>

<span data-ttu-id="e64b0-112">ここでは Azure Storage にはあまり焦点を当てません。</span><span class="sxs-lookup"><span data-stu-id="e64b0-112">We're not going to focus on Azure Storage too much.</span></span> <span data-ttu-id="e64b0-113">代わりに、Azure Storage を使って、関数を実行するようにトリガーする BLOB を作成します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-113">Instead, we use it to create blobs that will trigger our function to run.</span></span>

## <a name="what-is-azure-blob-storage"></a><span data-ttu-id="e64b0-114">Azure BLOB Storage とは</span><span class="sxs-lookup"><span data-stu-id="e64b0-114">What is Azure Blob storage?</span></span>

<span data-ttu-id="e64b0-115">Azure BLOB ストレージは、大量の非構造化データを格納するように設計されたオブジェクト ストレージのソリューションです。</span><span class="sxs-lookup"><span data-stu-id="e64b0-115">Azure Blob storage is an object storage solution that's designed to store large amounts of unstructured data.</span></span> 

<span data-ttu-id="e64b0-116">たとえば、Azure BLOB ストレージは次の操作に最適です。</span><span class="sxs-lookup"><span data-stu-id="e64b0-116">For example, Azure Blob storage is great at doing things like:</span></span>

- <span data-ttu-id="e64b0-117">ファイルを格納する</span><span class="sxs-lookup"><span data-stu-id="e64b0-117">Storing files</span></span>
- <span data-ttu-id="e64b0-118">ファイルを提供する</span><span class="sxs-lookup"><span data-stu-id="e64b0-118">Serving files</span></span>
- <span data-ttu-id="e64b0-119">ビデオやオーディオをストリーミング配信する</span><span class="sxs-lookup"><span data-stu-id="e64b0-119">Streaming video and audio</span></span>
- <span data-ttu-id="e64b0-120">データのログを記録する</span><span class="sxs-lookup"><span data-stu-id="e64b0-120">Logging data</span></span>

<span data-ttu-id="e64b0-121">BLOB には、**ブロック BLOB**、**追加 BLOB**、**ページ BLOB** の 3 種類があります。</span><span class="sxs-lookup"><span data-stu-id="e64b0-121">There are three types of blobs: **block blobs**, **append blobs**, and **page blobs**.</span></span> <span data-ttu-id="e64b0-122">ブロック BLOB は最も一般的な種類です。</span><span class="sxs-lookup"><span data-stu-id="e64b0-122">Block blobs are the most common type.</span></span> <span data-ttu-id="e64b0-123">ブロック BLOB では、テキストやバイナリ データを効率的に格納できます。</span><span class="sxs-lookup"><span data-stu-id="e64b0-123">They allow you to store text or binary data efficiently.</span></span> <span data-ttu-id="e64b0-124">追加 BLOB はブロック BLOB に似ていますが、定期的に更新されるログ ファイルの作成など、より追加の操作のために設計されています。</span><span class="sxs-lookup"><span data-stu-id="e64b0-124">Append blobs are like block blobs, but they're designed more for append operations like creating a log file that's being constantly updated.</span></span> <span data-ttu-id="e64b0-125">最後に、ページ BLOB はページで構成されており、頻繁なランダムの読み取り/書き込み操作のために設計されています。</span><span class="sxs-lookup"><span data-stu-id="e64b0-125">Finally, page blobs are made up of pages and are designed for frequent random read and write operations.</span></span>

## <a name="what-is-a-blob-trigger"></a><span data-ttu-id="e64b0-126">BLOB トリガーとは</span><span class="sxs-lookup"><span data-stu-id="e64b0-126">What is a blob trigger?</span></span>

<span data-ttu-id="e64b0-127">BLOB トリガーは、Azure BLOB ストレージ内にファイルがアップロードされたり、ファイルが更新されたりしたときに関数を実行するトリガーです。</span><span class="sxs-lookup"><span data-stu-id="e64b0-127">A blob trigger is a trigger that executes a function when a file is uploaded or updated in Azure Blob storage.</span></span> <span data-ttu-id="e64b0-128">BLOB トリガーを作成するには、Azure Storage アカウントを作成して、トリガーで監視する場所を指定します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-128">To create a blob trigger, you create an Azure Storage account and provide a location that the trigger monitors.</span></span>

## <a name="how-to-create-a-blob-trigger"></a><span data-ttu-id="e64b0-129">BLOB トリガーを作成する方法</span><span class="sxs-lookup"><span data-stu-id="e64b0-129">How to create a blob trigger</span></span>

<span data-ttu-id="e64b0-130">これまでに確認したその他のトリガーのように、Azure portal 内で BLOB トリガーを作成します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-130">Just like the other triggers we've seen so far, we create a blob trigger in the Azure portal.</span></span> <span data-ttu-id="e64b0-131">Azure 関数内で、定義済みのトリガーの種類の一覧から **[BLOB トリガー]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-131">Inside your Azure function, select **Blob trigger** from the list of predefined trigger types.</span></span> <span data-ttu-id="e64b0-132">次に、BLOB が作成または更新されたときに実行するロジックを入力します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-132">Then enter the logic to execute when a blob is created or updated.</span></span>

<span data-ttu-id="e64b0-133">1 つ確認する必要があるのは、**パス**という設定です。</span><span class="sxs-lookup"><span data-stu-id="e64b0-133">One setting that you'll want to look at is the **Path**.</span></span> <span data-ttu-id="e64b0-134">**パス**によって、BLOB トリガーに、BLOB がアップロードまたは更新されたかどうかを確認するために監視する場所を示します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-134">The **Path** tells the blob trigger where to monitor to see if a blob is uploaded or updated.</span></span> <span data-ttu-id="e64b0-135">既定では、**パス**の値は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="e64b0-135">By default, the **Path** value is:</span></span> 

> <span data-ttu-id="e64b0-136">samples-workitems/{name}</span><span class="sxs-lookup"><span data-stu-id="e64b0-136">samples-workitems/{name}</span></span>

<span data-ttu-id="e64b0-137">この概念を *samples-workitems* と *{name}* の 2 つの部分に分割します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-137">Let's break down this concept into two pieces: *samples-workitems* and *{name}*.</span></span> <span data-ttu-id="e64b0-138">最初の部分の *samples-workitems* は、トリガーを監視する BLOB コンテナーを表します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-138">The first part, *samples-workitems*, represents the blob container that the trigger monitors.</span></span> <span data-ttu-id="e64b0-139">2 番目の部分の \*{name は、どの種類のファイルでも、このトリガーで関数を呼び出せることを意味します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-139">The second part, \*{name means that every type of file will cause the trigger to invoke the function.</span></span> <span data-ttu-id="e64b0-140">関数が呼び出されるのは、フィルターがないからです。</span><span class="sxs-lookup"><span data-stu-id="e64b0-140">The function is invoked because there's no filter.</span></span> <span data-ttu-id="e64b0-141">たとえば、PNG ファイルが次のような構文を使用して追加される場合にのみ、トリガーで関数を呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="e64b0-141">For example, I could make the trigger invoke the function only when a PNG file is added by using syntax like:</span></span>

> <span data-ttu-id="e64b0-142">samples-workitems/{name}.png</span><span class="sxs-lookup"><span data-stu-id="e64b0-142">samples-workitems/{name}.png</span></span>

<span data-ttu-id="e64b0-143">この概念での情報における重要な最後の部分は、テキストの *name* です。</span><span class="sxs-lookup"><span data-stu-id="e64b0-143">The last significant piece of information with this concept is the text *name*.</span></span> <span data-ttu-id="e64b0-144">*name* は、追加されたファイルの名前を受け取る Azure 関数内のパラメーターを表します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-144">The *name* represents a parameter in your Azure function that receives the name of the added file.</span></span> <span data-ttu-id="e64b0-145">たとえば、*resume.txt* という名前のファイルをアップロードした場合、自分の Azure 関数では *name* と呼ばれるパラメーターを介して、文字列としてその値を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="e64b0-145">For example, if I upload a file named *resume.txt*, my Azure function receives that value as a string through a parameter called *name*.</span></span>

## <a name="summary"></a><span data-ttu-id="e64b0-146">まとめ</span><span class="sxs-lookup"><span data-stu-id="e64b0-146">Summary</span></span>

<span data-ttu-id="e64b0-147">Azure Storage Blob アカウントの特定の場所でアクティビティを表示する場合、BLOB トリガーによって Azure 関数が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="e64b0-147">A blob trigger invokes an Azure function when it sees activity at a specific location in your Azure Storage blob account.</span></span> <span data-ttu-id="e64b0-148">Azure portal 内で**パス**の値を変更することによって、監視する場所を設定します。</span><span class="sxs-lookup"><span data-stu-id="e64b0-148">You set the location to monitor by modifying the **Path** value in the Azure portal.</span></span>
