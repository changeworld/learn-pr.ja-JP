この演習では、BLOB が作成または更新された際のサイズと名前を表示する Azure 関数を作成します。 

> [!NOTE]
> この演習を完了するには、有効なアカウントで [Azure portal](https://portal.azure.com?azure-portal=true) にサインインしていることを確認してください。

## <a name="create-a-blob-trigger"></a>BLOB トリガーを作成する

既存の Azure Functions アプリケーションを引き続き使用し、BLOB トリガーを追加してみましょう。

1. **[関数]** をポイントし、プラス (+) アイコンを選択します。

    ![[関数] をポイントし、プラスを選択する](../media-drafts/4-hover-function.png)

2. **[カスタム関数]**、**[BLOB トリガー]** の順に選択します。

3. 言語として **[C#]** を選択します。 

4. **[名前]** は既定値のままにします。

5. **[パス]** は既定値のままにします。

6. 既存の Azure Storage アカウントを選択するか、または Azure で新しいアカウントを作成する場合は **[作成]** を選択します。

## <a name="create-a-blob-container"></a>BLOB コンテナーを作成する

BLOB トリガーが作成されたので、ストレージ エクスプローラーを使用して、BLOB を作成し、関数をトリガーしてみましょう。

1. 新しいタブで使用した (または作成した) ストレージ アカウントを開きます。これを簡単に行うには、新しい Azure Portal タブを開き、サイドバーの **[ストレージ アカウント]** をクリックするか、サイドバーの **[すべてのサービス]** を使用して、名前を使用してフィルタリングを行います。 新しいタブを使用して、使用している 2 つのサービスを切り替えることができるようにすることが希望です。

2. **[ストレージ エクスプローラー (プレビュー)]** セクションをクリックすると、BLOB やファイルを操作できる、新しいブレードが開きます。

この BLOB トリガーは、**[パス]**  フィールドに示されている場所のみを監視しています。 既定では、パスは次のようになります。

> samples-workitems/{name}

**samples-workitems** という名前のコンテナーを作成する必要があります。

3. **[BLOB コンテナー]** を右クリックし、**[BLOB コンテナーの作成]** を選択します。

4. 名前として **samples-workitems** を入力し、アクセス レベルは、既定の**プライベート**の設定のままにします。

## <a name="turn-on-your-blob-trigger"></a>BLOB トリガーを有効にする

これで、監視するコンテナーが作成されたので、BLOB の作成時に出力を確認するために関数を実行してみましょう。

1. Azure Function タブに戻ります (またはそれを再度開きます)。

2. BLOB トリガーを選択してコード画面を開きます。

3. **[実行]** を選択します。これにより出力ウィンドウが開きます。

## <a name="create-a-blob"></a>BLOB を作成する

BLOB トリガーが有効になっており、アクティビティをリッスンしています。 ログ メッセージを取得しているかどうかを確認するために、BLOB を作成してみましょう。

1. ストレージ エクスプローラーで、**[samples-workitems]** コンテナーを選択します。

2. ツールバーから **[アップロード]** を選択します。

3. コンピューターから任意のファイルを選択します。

4. **[アップロード]** を選択します。

5. [Azure Function] タブに戻り、どのファイルがアップロードされたか表示するメッセージを出力ログで確認します。

## <a name="pause-the-function"></a>関数を一時停止する

追加の要求に対して課金されないように、ログ ウィンドウの **[一時停止]** をクリックします。

![関数を一時停止する](../media-drafts/4-pause-timer.png)


