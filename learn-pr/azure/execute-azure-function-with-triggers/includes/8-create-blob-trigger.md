このユニットでは、BLOB が作成または更新されたときの名前とサイズを表示する Azure 関数を作成します。

## <a name="create-a-blob-trigger"></a>BLOB トリガーを作成する

もう一度、既存の Azure Functions アプリケーションを引き続き使用し、BLOB トリガーを追加してみましょう。

1. [Azure portal](https://portal.azure.com?azure-portal=true) にサインインします。

1. **[関数]** をポイントし、プラス (+) アイコンを選択します。

1. **[カスタム関数]**、**[BLOB トリガー]** の順に選択します。

1. 言語として **[C#]** を選択します。

1. **[名前]** は既定値のままにします。

1. **[パス]** は既定値のままにします。

1. 既存の Azure Storage アカウントを選択するか、または Azure で新しいアカウントを作成する場合は **[作成]** を選択します。

## <a name="create-a-blob-container"></a>BLOB コンテナーを作成する

BLOB トリガーが作成されたので、ストレージ エクスプローラーを使用して、BLOB を作成し、関数をトリガーしてみましょう。

1. 新しいタブで使用した (または作成した) ストレージ アカウントを開きます。これを簡単に行うには、新しい Azure Portal タブを開き、サイドバーの **[ストレージ アカウント]** をクリックするか、サイドバーの **[すべてのサービス]** を使用して、名前を使用してフィルタリングを行います。 新しいタブを使用して、使用している 2 つのサービスを切り替えることができるようにすることが希望です。

1. **[ストレージ エクスプローラー (プレビュー)]** セクションをクリックすると、BLOB やファイルを操作できる、新しいブレードが開きます。

この BLOB トリガーは、**[パス]**  フィールドに示されている場所のみを監視しています。 既定では、パスは次のようになります。

> samples-workitems/{name}

**samples-workitems** という名前のコンテナーを作成する必要があります。

1. **[BLOB コンテナー]** を右クリックし、**[BLOB コンテナーの作成]** を選択します。

1. 名前として **samples-workitems** を入力し、アクセス レベルは、既定の**プライベート**の設定のままにします。

## <a name="turn-on-your-blob-trigger"></a>BLOB トリガーを有効にする

これで、監視するコンテナーが作成されたので、BLOB の作成時に出力を確認するために関数を実行してみましょう。

1. Azure Function タブに戻ります (またはそれを再度開きます)。

1. BLOB トリガーを選択してコード画面を開きます。

1. **[実行]** を選択します。これにより出力ウィンドウが開きます。

## <a name="create-a-blob"></a>BLOB を作成する

BLOB トリガーが有効になっており、アクティビティをリッスンしています。 ログ メッセージを取得しているかどうかを確認するために、BLOB を作成してみましょう。

1. ストレージ エクスプローラーで、**[samples-workitems]** コンテナーを選択します。

1. ツールバーから **[アップロード]** を選択します。

1. コンピューターから任意のファイルを選択します。

1. **[アップロード]** を選択します。

1. [Azure Function] タブに戻り、どのファイルがアップロードされたか表示するメッセージを出力ログで確認します。

## <a name="pause-the-function"></a>関数を一時停止する

追加の要求に対して課金されないように、ログ ウィンドウの **[一時停止]** をクリックします。
