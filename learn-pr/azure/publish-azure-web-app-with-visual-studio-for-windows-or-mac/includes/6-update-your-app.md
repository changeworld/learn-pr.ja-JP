Web アプリの作成と Azure への発行は問題なくできましたが、変更したいときはどうなるのでしょうか。 Visual Studio ではアプリの発行先が記憶されているので、2 回クリックするだけでアプリの更新や変更を行うことができます。

## <a name="explore-the-project-structure"></a>プロジェクトの構造を調べる

Visual Studio での ASP.NET Web アプリの作成が済んだので、今度は Web サイトを編集したりカスタマイズしたりする必要があります。 プロジェクトの構造を調べて、Visual Studio によってどのようなものが作成されたのかを見てみましょう。

### <a name="dependencies"></a>依存関係

依存関係には、アプリを稼働させるための ASP.NET の内部構造が含まれます。 特定のサード パーティ製パッケージを追加していない場合、このフォルダーに多くの時間を費やす必要はありません。

### <a name="properties"></a>プロパティ

プロパティ フォルダーには、Web アプリをホストしている場所についての構成データが含まれます。 **PublishProfiles** フォルダーを展開すると、Alpine Ski Hill サイトの URL が表示されます。 各発行プロファイルは .xml ファイルであり、Visual Studio がファイルのアップロードに使用する Azure のアドレスなど、発行の構成情報が含まれます。

### <a name="wwwroot"></a>wwwroot

wwwroot ファイルには、.css、.js、イメージ、.lib ファイルなど、サイトのすべての静的資産が含まれます。 サイトのスタイルを設定したり、サイトに機能を追加したりする準備ができたら、ここで作業します。

### <a name="pages"></a>ページ

**[ページ]** フォルダーには、サイトのページ用の _**Razor**_ テンプレートが含まれます。
Razor は HTML を基にして作成されている構文であり、サイトでのデータの表示とロジックの実行のための特別な規則を備えています。

サイト内の各ページは、2 つのコード ファイルで表されます。

- 1 つ目の `.cshtml` ファイルは、Razor マークアップ ファイルです。 このファイルには、表示用の HTML と若干の C# ロジックが含まれます。

- 2 つ目の `.cs` ファイルは、`PageModel` クラスを含む C# コードビハインドです。 このファイルでは、HTTP 要求をインターセプトして、Razor ファイルにデータが渡される前に要求に対して何らかの処理を行うことができます。

### <a name="appsettingjson"></a>appsetting.json

これは、ASP.NET 用の構成ファイルです。

### <a name="bundleconfigjson"></a>bundleconfig.json

bundleconfig.json では構成の前処理が行われます。 このファイルにより、発行されるときの .css ファイルと .js ファイルが小さくなります。

### <a name="programcs-and-startupcs"></a>Program.cs、Startup.cs

Program.cs と Startup.cs では、サイトに対する Web ホストの構成と起動が行われます。

## <a name="updating-your-website-using-razor"></a>Razor を使用して Web サイトを更新する

Web サイトに対していくつかの基本的な変更を行います。 これを行うには、Razor テンプレートを使用して Web アプリをカスタマイズする方法を基本的に理解している必要があります。

## <a name="what-is-razor"></a>Razor とは

Razor は、C# で動的な Web ページを作成するために使用される ASP.NET 構文です。 サーバーで Razor ページが読み取られると、HTML をレンダリングする前に、C# コードが実行されます。 これにより、動的なコンテンツをすばやく生成できます。

Razor では、`@` ディレクティブを使用してページの処理方法を ASP.NET に伝えます。

例として、`Contact.cshtml` ページのコードを見てください。

```aspx-csharp
@page
@model ContactModel
@{
    ViewData["Title"] = "Contact";
}
<h2>@ViewData["Title"]</h2>
<h3>@Model.Message</h3>
...
```

たとえば、`@page` ディレクティブは、Razor ページとしてこのファイルを処理するよう ASP.NET に指示します。
`@model` ディレクティブは、この Razor ページを `ContactModel` という名前の C# クラスと結び付けるよう ASP.NET に指示します。

Razor では、コードと HTML の切り替えのためにも `@` 記号が使用されます。
たとえば、上のスニペットを見ると、`@{ ... }` があることがわかります。 これは **Razor コード ブロック**です。 このコードは、"_実行されますが、レンダリングはされません_"。

コード ステートメントの出力をレンダリングするには、C# 式の前に `@` を付けます。 上記のコード ブロックの `<h2>` タグと `<h3>` タグに、それの 2 つの例があります。

## <a name="publish-your-updates"></a>更新を発行する

Web サイトを変更した後は、それを Azure に発行します。 このプロセスは、最初に発行したときの方法と似ています。

1. ソリューション エクスプローラーで、プロジェクトを右クリックします。

1. 後に "Web 配置" が付いた Web サイトの名前が表示されます。 たとえば、Web サイトの名前を AlpineSkiHouse42 にした場合、使用可能なオプションに "**AlpineSkiHouse42 - Web 配置**" と表示されます。 それを選択すると、Azure でサイトが更新されます。

## <a name="summary"></a>まとめ

Web サイトの作成と発行は、優れた Web サイトを作成する最初のステップに過ぎません。 コンテンツの追加を始めたら、サイトを更新する必要があります。 最初にサイトを Azure に発行した後は、ソリューション エクスプローラーでいつでも更新できます。
