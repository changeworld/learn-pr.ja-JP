<span data-ttu-id="d2651-101">サイトが作成され、それを Azure にデプロイしたいとでしょう。</span><span class="sxs-lookup"><span data-stu-id="d2651-101">You created a site and you want to deploy it to Azure.</span></span> <span data-ttu-id="d2651-102">ここで、このニーズに最適な Azure サービスはどれか考える必要があります。</span><span class="sxs-lookup"><span data-stu-id="d2651-102">Now we need to consider which Azure services to leverage to best support our needs.</span></span> <span data-ttu-id="d2651-103">Web Apps は、アプリケーションに、高度にスケーラブルな自己適用型の Web ホスティング サービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="d2651-103">Web Apps provides a highly scalable, self-patching web hosting service for your applications.</span></span>

<span data-ttu-id="d2651-104">ここでは、Visual Studio を使用して Azure App Service プランに ASP.NET Core Web アプリケーションを発行する方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="d2651-104">Here, we look at how to use Visual Studio to publish your ASP.NET Core web application to an Azure App Service plan.</span></span>

## <a name="azure-subscription"></a><span data-ttu-id="d2651-105">Azure サブスクリプション</span><span class="sxs-lookup"><span data-stu-id="d2651-105">Azure subscription</span></span>

<span data-ttu-id="d2651-106">Azure に発行するには、Azure サブスクリプションが必要です。</span><span class="sxs-lookup"><span data-stu-id="d2651-106">To publish to Azure, you need to have an Azure subscription.</span></span> <span data-ttu-id="d2651-107">Azure App Service の機能のテストに、[Azure の無料アカウント](https://azure.microsoft.com/free/)を使用できます。</span><span class="sxs-lookup"><span data-stu-id="d2651-107">You can use an [Azure Free Subscription](https://azure.microsoft.com/free/) for testing the Azure App Service features.</span></span>

## <a name="what-is-web-apps"></a><span data-ttu-id="d2651-108">Web Apps とは</span><span class="sxs-lookup"><span data-stu-id="d2651-108">What is Web Apps?</span></span>

<span data-ttu-id="d2651-109">Azure App Service の Web Apps 機能は、Web アプリケーション、REST API、モバイル バックエンドをホストするためのサービスです。</span><span class="sxs-lookup"><span data-stu-id="d2651-109">The Web Apps feature of Azure App Service is a service for hosting web applications, REST APIs, and mobile backends.</span></span> <span data-ttu-id="d2651-110">Web Apps のホスト コードは、.NET、.NET Core、Java、Ruby、Node.js、PHP、Python などのさまざまな言語で記述されています。</span><span class="sxs-lookup"><span data-stu-id="d2651-110">Web Apps host code is written in a variety of languages, such as .NET, .NET Core, Java, Ruby, Node.js, PHP, and Python.</span></span> <span data-ttu-id="d2651-111">Web Apps は、特にホスティング インフラストラクチャを制御する必要があまりない、ほとんどの Web サイトに最適です。</span><span class="sxs-lookup"><span data-stu-id="d2651-111">Web Apps is ideal for most websites, particularly if you don't need a lot of control over the hosting infrastructure.</span></span>

## <a name="what-is-the-app-service-plan"></a><span data-ttu-id="d2651-112">App Service プランとは</span><span class="sxs-lookup"><span data-stu-id="d2651-112">What is the App Service plan?</span></span>

<span data-ttu-id="d2651-113">App Service プランでは、コンピューティング リソースの場所、そのプランで消費できる追加のリソースの数、使用されているサービス プランの種類など、アプリが使用するコンピューティング リソースを定義します。</span><span class="sxs-lookup"><span data-stu-id="d2651-113">The App Service plan defines the compute resources your app will consume, where those resources are located, how many additional resources the plan can consume, and the type of service plan in use.</span></span> <span data-ttu-id="d2651-114">これらのコンピューティング リソースは従来の Web ホスティングのサーバー ファームに似ています。</span><span class="sxs-lookup"><span data-stu-id="d2651-114">These compute resources are analogous to the server farm in conventional web hosting.</span></span> <span data-ttu-id="d2651-115">同じ App Service プランで 1 つ以上のアプリを実行するように構成することができます。</span><span class="sxs-lookup"><span data-stu-id="d2651-115">One or more apps can be configured to run on the same App Service plan.</span></span>

<span data-ttu-id="d2651-116">アプリをデプロイする場合、新しい App Service プランを作成するか、アプリを既存のプランに追加し続けます。</span><span class="sxs-lookup"><span data-stu-id="d2651-116">When you deploy your apps, you can create a new App Service plan or you can continue to add apps to an existing plan.</span></span>  <span data-ttu-id="d2651-117">ただし、同じ App Service プラン内のアプリは、同じコンピューティング リソースを共有します。</span><span class="sxs-lookup"><span data-stu-id="d2651-117">However, apps in the same App Service plan all share the same compute resources.</span></span> <span data-ttu-id="d2651-118">新しいアプリが必要なリソースを持てるかどうかを判断するには、既存の App Service プランの容量と新しいアプリの予想される負荷について理解する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d2651-118">To determine whether the new app has the necessary resources, you need to understand the capacity of the existing App Service plan, and the expected load for the new app.</span></span> <span data-ttu-id="d2651-119">App Service プランのオーバーロードは、新規および既存のアプリのダウンタイムを引き起こす可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d2651-119">Overloading an App Service plan can potentially cause downtime for your new and existing apps.</span></span>

<span data-ttu-id="d2651-120">App Service プランは、事前に Azure portal で、PowerShell または Azure CLI を使用して定義することができます。また、アプリケーションを Visual Studio で発行するときにそれを設定することも可能です。</span><span class="sxs-lookup"><span data-stu-id="d2651-120">You can define an App Service plan in advance in the Azure portal with PowerShell or the Azure CLI, or set one up as you publish your application in Visual Studio.</span></span>

<span data-ttu-id="d2651-121">各 App Service プランでは以下を定義します。</span><span class="sxs-lookup"><span data-stu-id="d2651-121">Each App Service plan defines:</span></span>

- <span data-ttu-id="d2651-122">リージョン (米国西部、米国東部など)</span><span class="sxs-lookup"><span data-stu-id="d2651-122">Region (West US, East US, and so on)</span></span>
- <span data-ttu-id="d2651-123">VM インスタンスの数</span><span class="sxs-lookup"><span data-stu-id="d2651-123">Number of VM instances</span></span>
- <span data-ttu-id="d2651-124">VM インスタンスのサイズ (小、中、大)</span><span class="sxs-lookup"><span data-stu-id="d2651-124">Size of VM instances (small, medium, large)</span></span>
- <span data-ttu-id="d2651-125">価格レベル (Free、Shared、Basic、Standard、Premium、PremiumV2、Isolated、従量課金)</span><span class="sxs-lookup"><span data-stu-id="d2651-125">Pricing tier (Free, Shared, Basic, Standard, Premium, Premium V2, Isolated, Consumption)</span></span>

## <a name="specify-the-region"></a><span data-ttu-id="d2651-126">リージョンを指定する</span><span class="sxs-lookup"><span data-stu-id="d2651-126">Specify the region</span></span>

<span data-ttu-id="d2651-127">App Service プランを作成する場合に、そのプランをホストするリージョンや場所を定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d2651-127">When creating an App Service plan, you have to define a region or location where that plan will be hosted.</span></span> <span data-ttu-id="d2651-128">通常、見込み顧客に地理的に近いリージョンを選択します。</span><span class="sxs-lookup"><span data-stu-id="d2651-128">Typically, you would choose a region geographically close to your expected customers.</span></span>

## <a name="what-are-the-pricing-and-reliability-levels"></a><span data-ttu-id="d2651-129">価格と信頼性のレベルとは</span><span class="sxs-lookup"><span data-stu-id="d2651-129">What are the pricing and reliability levels?</span></span>

<span data-ttu-id="d2651-130">Azure App Service にアプリをデプロイするときの重要な要因は、正しいサービス プランの選択です。</span><span class="sxs-lookup"><span data-stu-id="d2651-130">A key factor when deploying apps to Azure App Service is choosing the right service plan.</span></span> <span data-ttu-id="d2651-131">App Service プランは、いつでもスケールアップまたはスケールダウンできます。</span><span class="sxs-lookup"><span data-stu-id="d2651-131">Your App Service plan can be scaled up and down at any time.</span></span> <span data-ttu-id="d2651-132">最初に低い価格レベルを選び、後で App Service 機能がさらに必要になったときにスケールアップできます。</span><span class="sxs-lookup"><span data-stu-id="d2651-132">You can choose a lower pricing tier at first and scale up later when you need more App Service features.</span></span>

<span data-ttu-id="d2651-133">価格レベルにはいくつかのカテゴリがあります。</span><span class="sxs-lookup"><span data-stu-id="d2651-133">There are a few categories of pricing tiers:</span></span>

<span data-ttu-id="d2651-134">**共有コンピューティング**: 2 つの基本レベルである **Free** と **Shared** は、他のお客様のアプリを含む他の App Service アプリと同じ Azure VM 上でアプリを実行します。</span><span class="sxs-lookup"><span data-stu-id="d2651-134">**Shared compute**: **Free** and **Shared**, the two base tiers, run an app on the same Azure VM as other App Service apps, including apps of other customers.</span></span> <span data-ttu-id="d2651-135">これらのレベルは共有リソースで実行される各アプリに CPU クォータを割り当て、リソースはスケールアウトできません。</span><span class="sxs-lookup"><span data-stu-id="d2651-135">These tiers allocate CPU quotas to each app that runs on the shared resources, and the resources cannot scale out.</span></span>

<span data-ttu-id="d2651-136">Free および Shared プランは、トラフィックの需要が非常に少ない小規模な個人プロジェクトに最適です。限度として、24 時間ごとに 165 MB の送信データが設定されています。</span><span class="sxs-lookup"><span data-stu-id="d2651-136">Free and Shared plans are best for small-scale personal projects with very limited traffic demands, with a set limit of 165 MB of outbound data every 24 hours.</span></span>

<span data-ttu-id="d2651-137">**専用コンピューティング**: **Basic、Standard、Premium、PremiumV2** のレベルはアプリを専用の Azure VM 上で実行します。</span><span class="sxs-lookup"><span data-stu-id="d2651-137">**Dedicated compute**: The **Basic, Standard, Premium, and Premium V2** tiers run apps on dedicated Azure VMs.</span></span> <span data-ttu-id="d2651-138">同じ App Service プラン内のアプリのみが同じコンピューティング リソースを共有します。</span><span class="sxs-lookup"><span data-stu-id="d2651-138">Only apps in the same App Service plan share the same compute resources.</span></span> <span data-ttu-id="d2651-139">レベルが高いほど、スケールアウトに使用できる VM インスタンスが多くなります。</span><span class="sxs-lookup"><span data-stu-id="d2651-139">The higher the tier, the more VM instances are available to you for scale out.</span></span>

<span data-ttu-id="d2651-140">Standard サービス プランは、商用のアプリをお客様に発行する、ライブ プロダクション ワークロードに最適です。</span><span class="sxs-lookup"><span data-stu-id="d2651-140">The Standard service plan is best suited for live production workloads, where you are publishing commercial applications to customers.</span></span>
<span data-ttu-id="d2651-141">Premium サービス プランは、専用 (Isolated) プランによる追加コストを支払いたくない、処理能力の高い Web アプリをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="d2651-141">The Premium service plans support high-capacity web apps where you do not want the additional costs of a dedicated (isolated) plan.</span></span>

<span data-ttu-id="d2651-142">**Isolated**: このレベルは、専用の Azure VM を専用の Azure 仮想ネットワーク上で実行し、コンピューティングの分離の上のネットワークの分離をアプリに提供します。</span><span class="sxs-lookup"><span data-stu-id="d2651-142">**Isolated**: This tier runs dedicated Azure VMs on dedicated Azure virtual networks, which provide network isolation on top of compute isolation to your apps.</span></span> <span data-ttu-id="d2651-143">最大のスケールアウト機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="d2651-143">It provides the maximum scale-out capabilities.</span></span> <span data-ttu-id="d2651-144">Isolated サービス プランは、最高レベルのセキュリティおよびパフォーマンスが必要な特殊な場合を除き、選択しません。</span><span class="sxs-lookup"><span data-stu-id="d2651-144">You would only select an Isolated service plan when you have a specific requirement for the highest levels of security and performance.</span></span>

<span data-ttu-id="d2651-145">次の場合にはアプリを新しい App Service プランに分離してください。</span><span class="sxs-lookup"><span data-stu-id="d2651-145">Isolate your app into a new App Service plan when:</span></span>

- <span data-ttu-id="d2651-146">アプリが多くのリソースを消費している。</span><span class="sxs-lookup"><span data-stu-id="d2651-146">The app is resource-intensive</span></span>
- <span data-ttu-id="d2651-147">既存のプランの他のアプリとは別に、そのアプリをスケーリングする必要がある。</span><span class="sxs-lookup"><span data-stu-id="d2651-147">You want to scale the app independently from the other apps in the existing plan</span></span>
- <span data-ttu-id="d2651-148">アプリに別の地理的なリージョンのリソースが必要である。</span><span class="sxs-lookup"><span data-stu-id="d2651-148">The app needs resources in a different geographical region</span></span>

<span data-ttu-id="d2651-149">**従量課金**: このレベルは関数アプリにのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="d2651-149">**Consumption**: This tier is only available to function apps.</span></span> <span data-ttu-id="d2651-150">ワークロードに応じて関数を動的にスケーリングします。</span><span class="sxs-lookup"><span data-stu-id="d2651-150">It scales the functions dynamically depending on workload.</span></span> <span data-ttu-id="d2651-151">詳細については、「Azure Functions のホスティング プラン」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d2651-151">For more information, see the Azure Functions hosting plans comparison.</span></span>

## <a name="specify-the-resource-group"></a><span data-ttu-id="d2651-152">リソース グループを指定する</span><span class="sxs-lookup"><span data-stu-id="d2651-152">Specify the resource group</span></span>

<span data-ttu-id="d2651-153">多くの Azure リソース同様、使用するリソース グループを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d2651-153">As with most Azure resources, you will need to specify the resource group you want to use.</span></span> <span data-ttu-id="d2651-154">既存のリソース グループを使用することも、Visual Studio から新しいリソース グループを作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="d2651-154">You can use an existing resource group or create a new one directly from Visual Studio.</span></span> <span data-ttu-id="d2651-155">リソース グループとは、Web アプリ、データベース、ストレージ アカウントなどの Azure リソースのデプロイと管理に使用する論理コンテナーです。</span><span class="sxs-lookup"><span data-stu-id="d2651-155">A resource group is a logical container into which Azure resources like web apps, databases, and storage accounts are deployed and managed.</span></span> <span data-ttu-id="d2651-156">これは、関連するリソースを一緒に保持する便利なメカニズムです。</span><span class="sxs-lookup"><span data-stu-id="d2651-156">It is a useful mechanism for keeping associated resources together.</span></span>

## <a name="deploy-your-web-app-from-visual-studio"></a><span data-ttu-id="d2651-157">Visual Studio から Web アプリをデプロイする</span><span class="sxs-lookup"><span data-stu-id="d2651-157">Deploy your web app from Visual Studio</span></span>

<span data-ttu-id="d2651-158">アプリの Azure から Visual Studio への発行は、短時間で行えます。</span><span class="sxs-lookup"><span data-stu-id="d2651-158">It's a short process to publish your app to Azure from Visual Studio.</span></span>

### <a name="select-the-project"></a><span data-ttu-id="d2651-159">プロジェクトを選択する</span><span class="sxs-lookup"><span data-stu-id="d2651-159">Select the project</span></span>

1. <span data-ttu-id="d2651-160">ソリューション エクスプローラーで、プロジェクトを右クリックします。</span><span class="sxs-lookup"><span data-stu-id="d2651-160">Right-click the project in Solution Explorer.</span></span>

1. <span data-ttu-id="d2651-161">**[発行]、[Azure に発行する]** の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="d2651-161">Select **Publish > Publish to Azure**.</span></span>

### <a name="configure-the-app-service-plan-in-windows"></a><span data-ttu-id="d2651-162">Windows で App Service のプランを構成する</span><span class="sxs-lookup"><span data-stu-id="d2651-162">Configure the App Service plan in Windows</span></span>

1. <span data-ttu-id="d2651-163">App Service のプランを構成する</span><span class="sxs-lookup"><span data-stu-id="d2651-163">Configure the App Service plan</span></span>

    - <span data-ttu-id="d2651-164">Hosting\(ホスティング\): このタブでは、App Service のプランを設定します。ここでは、アプリをホストする Web サーバー ファームの場所、サイズ、機能を指定します。</span><span class="sxs-lookup"><span data-stu-id="d2651-164">Hosting: You will configure your App Service plan in this tab. It specifies the location, size, and features of the web server that hosts your app.</span></span> <span data-ttu-id="d2651-165">既存のホスティング プランを選択するか、新しいホスティング プランを作成します。</span><span class="sxs-lookup"><span data-stu-id="d2651-165">You can select an existing hosting plan or create a new one.</span></span> <span data-ttu-id="d2651-166">Windows によって、グローバルに一意の名前が自動的に生成されます。この名前は、設定中に変更することができます。</span><span class="sxs-lookup"><span data-stu-id="d2651-166">Windows will automatically generate globally unique names which you can change during setup.</span></span>
    - <span data-ttu-id="d2651-167">サービス: ここで、サイトの SQL データベースを構成できます。</span><span class="sxs-lookup"><span data-stu-id="d2651-167">Services: You can configure a SQL database for your site here.</span></span>

        > [!NOTE]
        > <span data-ttu-id="d2651-168">Visual Studio から Azure の SQL データベースに接続し、それを管理します。しかし、このモジュールではそれについては扱いません。</span><span class="sxs-lookup"><span data-stu-id="d2651-168">Although you can connect and manage a SQL database in Azure from Visual Studio, that is beyond the scope of this module.</span></span>

1. <span data-ttu-id="d2651-169">**[作成]** をクリックして、アプリをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="d2651-169">Click **Create** to deploy the app.</span></span> <span data-ttu-id="d2651-170">これが完了すると、Visual Studio によりサイトがホストされている Web ページが起動されます。</span><span class="sxs-lookup"><span data-stu-id="d2651-170">Once this is done, Visual Studio will launch the web page where your site is hosted.</span></span>

### <a name="configure-the-app-service-plan-for-mac"></a><span data-ttu-id="d2651-171">Mac 向けの App Service プランを構成する</span><span class="sxs-lookup"><span data-stu-id="d2651-171">Configure the App Service plan for Mac</span></span>

1. <span data-ttu-id="d2651-172">Azure で設定済みの場合、既存の App Service プランを選択するか、新しいものを作成することができます。</span><span class="sxs-lookup"><span data-stu-id="d2651-172">You can select an existing App Service plan if you have one set up in Azure, or you can create a new one.</span></span>

1. <span data-ttu-id="d2651-173">このタブで App Service プランを構成します。ここでは、アプリをホストする Web サーバー ファームの場所、サイズ、機能を指定します。</span><span class="sxs-lookup"><span data-stu-id="d2651-173">Configure your  App Service plan in this tab. It specifies the location, size, and features of the web server that hosts your app.</span></span> <span data-ttu-id="d2651-174">既存のホスティング プランを選択するか、新しいホスティング プランを作成します。</span><span class="sxs-lookup"><span data-stu-id="d2651-174">You can select an existing hosting plan or create a new one.</span></span> <span data-ttu-id="d2651-175">Azure では、Web サイトと、すべてのリソースの名前がグローバルに一意である必要があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="d2651-175">Remember that Azure requires the name of your website and all resources to be globally unique.</span></span>

1. <span data-ttu-id="d2651-176">**[作成]** をクリックして、アプリをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="d2651-176">Click **Create** to deploy the app.</span></span> <span data-ttu-id="d2651-177">これが完了すると、Visual Studio によりサイトがホストされている Web ページが起動されます。</span><span class="sxs-lookup"><span data-stu-id="d2651-177">Once this is done, Visual Studio will launch the web page where your site is hosted.</span></span>

## <a name="summary"></a><span data-ttu-id="d2651-178">まとめ</span><span class="sxs-lookup"><span data-stu-id="d2651-178">Summary</span></span>

<span data-ttu-id="d2651-179">ASP.NET Core Web アプリケーションおよび Azure App Services は、ASP.NET Web アプリをホストする柔軟でスケーラブルなソリューションです。</span><span class="sxs-lookup"><span data-stu-id="d2651-179">ASP.NET Core web applications and Azure App Services provide a flexible, scalable solution for hosting your ASP.NET web app.</span></span> <span data-ttu-id="d2651-180">他の Azure サービス同様、リソース グループを提供し、ニーズを一番満たす価格レベルを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d2651-180">As with all Azure services, you will need to provide a resource group and select the pricing tier which best fulfills your needs.</span></span>
