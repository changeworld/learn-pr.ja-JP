[!INCLUDE [0-vm-note](0-vm-note.md)]

<span data-ttu-id="4af2d-101">[Azure Cognitive Services](https://www.microsoft.com/cognitive-services/) の一部である [QnA Maker](https://www.qnamaker.ai/) は、人工知能 (AI) と機械学習に基づくインテリジェントなアプリを構築するためのサービスと API のスイートです。</span><span class="sxs-lookup"><span data-stu-id="4af2d-101">[QnA Maker](https://www.qnamaker.ai/) is part of [Azure Cognitive Services](https://www.microsoft.com/cognitive-services/), which is a suite of services and APIs for building intelligent apps backed by artificial intelligence (AI) and machine learning.</span></span> <span data-ttu-id="4af2d-102">ユーザーからのあらゆる質問を予測して応答するようにボットをコーディングするのではなく、QnA Maker で作成された質問と回答のナレッジ ベースにボットを接続することができます。</span><span class="sxs-lookup"><span data-stu-id="4af2d-102">Rather than code a bot to anticipate every question a user might ask and provide a response, you can connect it to a knowledge base of questions and answers created with QnA Maker.</span></span> <span data-ttu-id="4af2d-103">一般的な使用シナリオは、"Windows プロダクト キーはどこにありますか" や "Visual Studio Code はどこでダウンロードできますか" といったドメイン固有の質問にボットで回答できるように、FAQ ページの URL からナレッジ ベースを作成することです。</span><span class="sxs-lookup"><span data-stu-id="4af2d-103">A common usage scenario is to create a knowledge base from the URL of a FAQ page so the bot can answer domain-specific questions such as "How do I find my Windows product key" or "Where can I download Visual Studio Code?"</span></span>

<span data-ttu-id="4af2d-104">このユニットでは、QnA Maker を使用して、"スーパー ボウルで最も優勝回数の多い NFL チームはどこですか" や "世界最大の都市はどこですか" といった質問を含むナレッジ ベースを作成します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-104">In this unit, you will use QnA Maker to create a knowledge base containing questions such as "What NFL teams have won the most Super Bowls" and "What is the largest city in the world?"</span></span> <span data-ttu-id="4af2d-105">次に、HTTPS エンドポイントを経由してアクセスできるように、ナレッジ ベースを Azure Web アプリにデプロイします。</span><span class="sxs-lookup"><span data-stu-id="4af2d-105">Then, you will deploy the knowledge base in an Azure web app so that it can be accessed via an HTTPS endpoint.</span></span>

1. <span data-ttu-id="4af2d-106">VM ブラウザーで https://www.qnamaker.ai を開いて QnA Maker ポータルを開き、**[サインイン]** を選択し、Azure portal のサインインに使用した同じラボ アカウントでサインインします。</span><span class="sxs-lookup"><span data-stu-id="4af2d-106">Open the QnA Maker portal by opening https://www.qnamaker.ai in the VM browser, and select **Sign in** to sign in with the same lab account that you used to sign into the Azure portal.</span></span> 

1. <span data-ttu-id="4af2d-107">ハンバーガー メニューを選択し、**[ナレッジ ベースの作成]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-107">Select the hamburger menu, then **Create a knowledge base**.</span></span> 

1. <span data-ttu-id="4af2d-108">**[Create a QnA service]\(QnA サービスの作成\)** を選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-108">Select **Create a QnA service**.</span></span>

1. <span data-ttu-id="4af2d-109">Azure portal タブが新しく開いたら、**[名前]** ボックスに名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-109">In the newly-opened Azure portal tab, enter a name into the **Name** box.</span></span> <span data-ttu-id="4af2d-110">この名前は、Azure 内で一意である必要があるため、名前の横*および*ブレードの下の方にある **[アプリ名]** ボックスに緑色のチェック マークが表示されることを確認します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-110">This name must be unique within Azure, so make sure a green check mark appears next to it *and* in the **App name** box further down the blade.</span></span>

1. <span data-ttu-id="4af2d-111">**[リソース グループ]** の下で **[既存のものを使用]** を選択し、この演習のために事前に作成した演習用リソース グループを選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-111">Select **Use existing** under **Resource group**, then select the exercise resource group pre-created for this exercise.</span></span>

1. <span data-ttu-id="4af2d-112">ドロップダウンの利用可能な一覧から **[場所]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-112">Select a **Location** from the list available in the dropdown.</span></span> 

1. <span data-ttu-id="4af2d-113">**[管理価格レベル]** として **[F0]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-113">Select **F0** as the **Management pricing tier**.</span></span> 

1. <span data-ttu-id="4af2d-114">**[価格レベルの検索]** として **[F]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-114">Select **F** for the **Search pricing tier**.</span></span> 

1. <span data-ttu-id="4af2d-115">**[アプリ名]** が Azure に固有であることを確認します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-115">Verify the **App name** is unique to Azure.</span></span>

1. <span data-ttu-id="4af2d-116">両方の場所のドロップダウンで最も近い場所を選択してから、ブレードの下部にある **[作成]** ボタンを選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-116">Select the location nearest you in both location drop-downs, then select the **Create** button at the bottom of the blade.</span></span>

    ![説明した構成値が設定された QnA Maker の [作成] ブレードを表示している Azure portal のスクリーンショット。](../media/3-new-qna-maker-service.png)

1. <span data-ttu-id="4af2d-118">ポータルの左側にあるリボンで **[リソース グループ]** を選択し、事前に作成した演習用リソース グループを開きます。</span><span class="sxs-lookup"><span data-stu-id="4af2d-118">Select **Resource groups** in the ribbon on the left side of the portal, and open the pre-created exercise resource group.</span></span> <span data-ttu-id="4af2d-119">ブレードの上部の "デプロイ中" が、QnA のサービスとそれに関連付けられているリソースが正常にデプロイされたことを示す "成功" に変わるまで待ちます。</span><span class="sxs-lookup"><span data-stu-id="4af2d-119">Wait until "Deploying" changes to "Succeeded" at the top of the blade, indicating that the QnA service and the resources associated with it were successfully deployed.</span></span> <span data-ttu-id="4af2d-120">メッセージが消えたら、メニュー バーのベル アイコンを選択し、状態を表示できます。</span><span class="sxs-lookup"><span data-stu-id="4af2d-120">If the message disappears, you can select the bell icon in the menu bar to view the status.</span></span> <span data-ttu-id="4af2d-121">また、ブレードの上部の **[更新]** をクリックすると、デプロイ状態が更新されます。</span><span class="sxs-lookup"><span data-stu-id="4af2d-121">You can also select **Refresh** at the top of the blade to refresh the deployment status.</span></span>

1. <span data-ttu-id="4af2d-122">VM ブラウザーで https://www.qnamaker.ai/Create を開いて **[ナレッジ ベースの作成]** に戻り、**[手順 2]** までスクロールし、QnA サービスに接続します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-122">Return to **Create a knowledge base** by opening https://www.qnamaker.ai/Create in the VM browser and scroll to **Step 2** to connect to our QnA service.</span></span>

1. <span data-ttu-id="4af2d-123">**[Microsoft Azure Directory ID]\(Microsoft Azure Directory ID\)** で **[Microsoft Learn Hosting]\(Microsoft Learn Hosting\)** を選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-123">Under **Microsoft Azure Directory ID**, choose **Microsoft Learn Hosting**.</span></span>

1. <span data-ttu-id="4af2d-124">**[Azure サブスクリプション名]** ドロップダウン リストから **[Microsoft Learn Hosting]\(Microsoft Learn Hosting\)** を選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-124">Select **Microsoft Learn Hosting** from the **Azure subscription name** drop-down list.</span></span>

1. <span data-ttu-id="4af2d-125">**[Azure QnA service]\(Azure QnA サービス\)** で、前に指定した QnA サービスの名前を選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-125">Under **Azure QnA service**, select the QnA service name you specified previously.</span></span> <span data-ttu-id="4af2d-126">サービスが一覧にないときは、場合によっては、ページを更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4af2d-126">If no services are listed, you may need to refresh the page.</span></span>

1. <span data-ttu-id="4af2d-127">次に、ナレッジ ベースに "Factbot ナレッジ ベース" などの名前を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="4af2d-127">Then, assign the knowledge base a name, such as "Factbot Knowledge Base".</span></span>

1. <span data-ttu-id="4af2d-128">QnA Maker のナレッジ ベースに手動で質問と回答を入力することも、オンラインのよく寄せられる質問またはローカル ファイルから質問と回答をインポートすることもできます。</span><span class="sxs-lookup"><span data-stu-id="4af2d-128">You can enter questions and answers into a QnA Maker knowledge base manually, or you can import them from online FAQs or local files.</span></span> <span data-ttu-id="4af2d-129">サポートされている形式には、タブ区切りテキスト ファイル、Microsoft Word 文書、Excel スプレッドシート、および PDF ファイルが含まれます。</span><span class="sxs-lookup"><span data-stu-id="4af2d-129">Supported formats include tab-delimited text files, Microsoft Word documents, Excel spreadsheets, and PDF files.</span></span>

    <span data-ttu-id="4af2d-130">たとえば、VM ブラウザーで https://github.com/MicrosoftDocs/mslearn-build-chat-bot-with-azure-bot-service/blob/master/Factbot.tsv.zip を開き、**Factbot.tsv.zip** ファイルをダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="4af2d-130">To demonstrate, open https://github.com/MicrosoftDocs/mslearn-build-chat-bot-with-azure-bot-service/blob/master/Factbot.tsv.zip in the VM browser, then download the **Factbot.tsv.zip** file.</span></span> <span data-ttu-id="4af2d-131">この zip フォルダーには **Factbot.tsv** という名前のテキスト ファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="4af2d-131">This zip folder contains a text file named **Factbot.tsv**.</span></span> <span data-ttu-id="4af2d-132">ファイルを抽出し、コンピューターにコピーします。</span><span class="sxs-lookup"><span data-stu-id="4af2d-132">Extract and copy the file to your computer.</span></span> <span data-ttu-id="4af2d-133">次に、VM ブラウザーで、QnA Maker ポータル内を下にスクロールし、**[+ ファイルの追加]** を選択し、**Factbot.tsv** を選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-133">Then, scroll down in the QnA Maker portal in the VM browser, select **+ Add file**, and select **Factbot.tsv**.</span></span> <span data-ttu-id="4af2d-134">このファイルには、20 個の質問と回答がタブ区切り形式で含まれています。</span><span class="sxs-lookup"><span data-stu-id="4af2d-134">This file contains 20 questions and answers in tab-delimited format.</span></span>

1. <span data-ttu-id="4af2d-135">ページの下部の **[Create your KB]\(KB の作成\)** を選択して、ナレッジ ベースが作成されるのを待ちます。</span><span class="sxs-lookup"><span data-stu-id="4af2d-135">Select **Create your KB** at the bottom of the page, and wait for the knowledge base to be created.</span></span> <span data-ttu-id="4af2d-136">通常は 1 分もかかりません。</span><span class="sxs-lookup"><span data-stu-id="4af2d-136">It should take less than a minute.</span></span>

1. <span data-ttu-id="4af2d-137">**Factbot.tsv** からインポートされた質問と回答がナレッジ ベースに表示されることを確認します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-137">Confirm that the questions and answers imported from **Factbot.tsv** appear in the knowledge base.</span></span> <span data-ttu-id="4af2d-138">次に、**[Save and train]\(保存してトレーニング\)** を選択し、トレーニングが完了するのを待ちます。</span><span class="sxs-lookup"><span data-stu-id="4af2d-138">Then, select **Save and train** and wait for training to complete.</span></span>

    ![読み込まれたナレッジ ベースのデータを表示している Factbot ナレッジ ベース サイトのスクリーンショット。](../media/3-save-and-train.png)

1. <span data-ttu-id="4af2d-140">**[Save and train]\(保存してトレーニング\)** ボタンの右にある **[テスト]** ボタンを選択します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-140">Select the **Test** button to the right of the **Save and train** button.</span></span> <span data-ttu-id="4af2d-141">メッセージ ボックスに「こんにちは」と入力して、**Enter** キーを押します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-141">Type "Hi" into the message box and press **Enter**.</span></span> <span data-ttu-id="4af2d-142">次に示すように、応答が "QnA Factbot へようこそ" となることを確認します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-142">Confirm that the response is "Welcome to the QnA Factbot," as shown below.</span></span>

    ![作成されたチャット ボットとの対話テストのスクリーンショット。](../media/3-test-kb.png)

1. <span data-ttu-id="4af2d-144">メッセージ ボックスに、「最も売れた本は何ですか?」と入力し、</span><span class="sxs-lookup"><span data-stu-id="4af2d-144">Type "What book has sold the most copies?"</span></span> <span data-ttu-id="4af2d-145">**Enter** キーを押します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-145">into the message box and press **Enter**.</span></span> <span data-ttu-id="4af2d-146">応答はどのようになるでしょう。</span><span class="sxs-lookup"><span data-stu-id="4af2d-146">What is the response?</span></span>

1. <span data-ttu-id="4af2d-147">もう一度 **[テスト]** ボタンを選択し、[テスト] パネルを折りたたみます。</span><span class="sxs-lookup"><span data-stu-id="4af2d-147">Select the **Test** button again to collapse the Test panel.</span></span> 
1. <span data-ttu-id="4af2d-148">ページ上部のメニューで **[発行]** を選択し、ページの下部にある **[発行]** ボタンを選択してナレッジ ベースを発行します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-148">Select **Publish** in the menu at the top of the page, and select the **Publish** button at the bottom of the page to publish the knowledge base.</span></span> <span data-ttu-id="4af2d-149">*発行* すると、ナレッジ ベースが HTTPS エンドポイントで使用可能になります。</span><span class="sxs-lookup"><span data-stu-id="4af2d-149">*Publishing* makes the knowledge base available at an HTTPS endpoint.</span></span>

<span data-ttu-id="4af2d-150">発行プロセスが完了するまで待機し、QnA サービスがデプロイされたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="4af2d-150">Wait for the publication process to complete and confirm that the QnA service has been deployed.</span></span> <span data-ttu-id="4af2d-151">これで、ナレッジ ベースが独自の Azure Web アプリでホストされるようになったので、次の手順では、それを使用できるボットをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="4af2d-151">With the knowledge base now hosted in an Azure web app of its own, the next step is to deploy a bot that can use it.</span></span>
