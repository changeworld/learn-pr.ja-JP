[!INCLUDE [0-vm-note](0-vm-note.md)]

Azure Web アプリ ボットを作成したときに、それをホストするために Azure Web アプリがデプロイされました。 しかし、ボットにはいくつかのコードが必要であり、それも Azure Web アプリにデプロイする必要があります。 さいわい、コードは Azure Bot Service によって生成されています。 このユニットでは、Visual Studio Code を使用してそのコードをローカル Git リポジトリに配置して、ローカル リポジトリから、ボットをホストする Azure Web アプリに接続されているリモート リポジトリに変更をプッシュして、ボットを Azure に発行します ([継続的インテグレーション](https://wikipedia.org/wiki/Continuous_integration)として知られるプロセス)。

1. ボットのソース コードを保持するため、自分のハード ディスク上の任意の場所に、"Factbot" という名前のフォルダーを作成します。

1. VM ブラウザーで Azure portal に戻り、事前に作成した演習のリソース グループを開きます。 次に、前の演習で作成した Web アプリ ボットを選択します。

1. 左側のメニューで **[ビルド]** を選択し、**[Download Bot source code]\(ボットのソース コードのダウンロード\)** を選択して、ボットのソース コードを含む ZIP ファイルを準備します。 ZIP ファイルの準備ができたら、**[Download Bot source code]\(ボットのソース コードのダウンロード\)** ボタンを選択してダウンロードします。 ダウンロードが完了したら、ZIP ファイルのコンテンツを先ほど作成した "Factbot" フォルダーに展開します。

1. Azure portal で Web アプリ ボットの [Build]\(ビルド\) ブレードに戻り、**[Configure continuous deployment]\(継続的デプロイの構成\)** を選択します。

1. **[ソースの選択]** に続いて表示される **[デプロイ]** ブレードの上部で **[セットアップ]** を選択します。

1. 次に、デプロイ ソースとして **[ローカル Git リポジトリ]** を選択します。

1. 次に、**[接続のセットアップ]** を選択し、ユーザー名とパスワードを入力します。 ユーザー名は Azure 内で一意である必要があるので、"FactbotAdministrator" 以外のユーザー名を入力する必要があります。 次に、**[OK]** を選択して **[デプロイ オプション]** ブレードに戻り、もう一度 **[OK]** を選択して **[デプロイ]** ブレードに戻ります。

    ![新しいボットが表示された Azure portal のスクリーンショット。App Service ブレードに表示された [デプロイ資格情報] 画面。[デプロイ資格情報] メニュー項目と[保存] ボタンが強調表示されています。](../media/4-portal-enter-ci-creds.png)

1. デプロイ システムのプロビジョニング中に、**[デプロイ]** ブレードを閉じ、左側のメニューで **[すべてのアプリ サービスの設定]** を選択します。

1. **Visual Studio Code** を起動し、**[ファイル]** > **[フォルダーを開く]** を使用して、ボットのソース コードをコピーした "Factbot" フォルダーを開きます。

1. Visual Studio Code の左側にあるアクティビティ バーで **[ソース管理]** ボタンを選択します。

1. 上部にある **[リポジトリの初期化]** アイコンを選択します。

1. ダイアログで **[リポジトリの初期化]** ボタンを選択します。

1. メッセージ ボックスに「最初のコミット」と 入力します。

1. 確認を求められたら、すべてのファイルをステージングする変更をコミットするチェック マークを選択します。

    > [!NOTE]
    > ID が Git で設定されていないことに関する Git エラーが発生した場合は、コマンド プロンプトを起動し、次のコマンドを実行します。必要に応じて、プレースホルダーのメール アドレスと名前をご自分のものに置き換えてください。 その後、コミット ボタンを再度押します。
    >
    > ```bash
    > git config --global user.email "Lab User"
    > git config --global user.name "LabUser#######@learn"
    > ```

1. Visual Studio Code の **[表示]** メニューから **[ターミナル]** を選択し、統合ターミナルを開きます。

1. 統合ターミナルで次のコマンドを実行します。次の 2 か所の BOT_NAME を演習 1 で入力したボット名に置き換えます。

    > [!NOTE]
    > Git リモートの完全な URL は、App Service リソースの **[Git クローン URL]** の下の **[概要]** セクションでも確認できます。

    ```bash
    git remote add qna-factbot https://BOT_NAME.scm.azurewebsites.net:443/BOT_NAME.git
    ```

1. **[ソース コントロール]** パネルに戻り、[ソース コントロール] パネルの上部にある省略記号 (3 つのドット) をクリックし、メニューから **[ブランチの発行]** を選択して、ボット コードをローカル リポジトリから Azure にプッシュします。 資格情報を求められた場合は、この演習の手順 9 で指定したユーザー名とパスワードを入力します。

ボットは Azure に発行されています。 しかし、それをここでテストする前に、ローカルで実行して、Visual Studio Code でデバッグする方法について学習します。
