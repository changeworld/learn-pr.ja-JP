<span data-ttu-id="cc492-101">このユニットでは、Azure portal を使用して、南カリフォルニアの架空のサーフィン レポート Web App に適したストレージ アカウントを作成します。</span><span class="sxs-lookup"><span data-stu-id="cc492-101">In this unit, you will use the Azure portal to create a storage account that is appropriate for a fictitious southern California surf report web app.</span></span>

<span data-ttu-id="cc492-102">このサーフィン レポート サイトでは、ユーザーが現地のビーチの状態を写真と動画でアップロードすることができる。</span><span class="sxs-lookup"><span data-stu-id="cc492-102">The surf report site lets users upload photos and videos of their local beach conditions.</span></span> <span data-ttu-id="cc492-103">表示するユーザーは、そのコンテンツを使って、サーフィンに最適な状態のビーチを選ぶことができる。</span><span class="sxs-lookup"><span data-stu-id="cc492-103">Viewers will use the content to help them choose the beach with the best surfing conditions.</span></span> <span data-ttu-id="cc492-104">デザインと機能の目標は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="cc492-104">Your list of design and feature goals is:</span></span>

- <span data-ttu-id="cc492-105">ビデオ コンテンツはすばやく読み込まれる必要がある</span><span class="sxs-lookup"><span data-stu-id="cc492-105">Video content must load quickly</span></span>
- <span data-ttu-id="cc492-106">このサイトではアップロード ボリュームの予期しない上昇を処理する必要がある</span><span class="sxs-lookup"><span data-stu-id="cc492-106">The site must handle unexpected spikes in upload volume</span></span>
- <span data-ttu-id="cc492-107">サーフィンの状態が変更されると、古くなったコンテンツは削除されるため、サイトでは常に現在の状態が示される</span><span class="sxs-lookup"><span data-stu-id="cc492-107">Outdated content will be removed as surf conditions change so the site always shows current conditions</span></span>

<span data-ttu-id="cc492-108">アップロードしたコンテンツを Azure キューのバッファーに入れて処理し、その後、Azure BLOB に移して保管することにします。</span><span class="sxs-lookup"><span data-stu-id="cc492-108">You decide on an implementation that buffers uploaded content in an Azure Queue for processing and then moves it into an Azure Blob for storage.</span></span> <span data-ttu-id="cc492-109">キューと BLOB の両方を保持できて、コンテンツにアクセスする際の待機時間が短いストレージ アカウントが必要です。</span><span class="sxs-lookup"><span data-stu-id="cc492-109">You need a storage account that can hold both queues and blobs while delivering low-latency access to your content.</span></span>

## <a name="use-the-azure-portal-to-create-a-storage-account"></a><span data-ttu-id="cc492-110">Azure portal を使用してストレージ アカウントを作成する</span><span class="sxs-lookup"><span data-stu-id="cc492-110">Use the Azure portal to create a storage account</span></span>

1. <span data-ttu-id="cc492-111">[Azure portal](https://portal.azure.com/?azure-portal=true) にサインインします。</span><span class="sxs-lookup"><span data-stu-id="cc492-111">Sign in to the [Azure Portal](https://portal.azure.com/?azure-portal=true).</span></span>

1. <span data-ttu-id="cc492-112">Azure portal の左上にある **[リソースの作成]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-112">In the top left of the Azure Portal, select **Create a resource**.</span></span>

1. <span data-ttu-id="cc492-113">選択パネルが表示されたら、**[ストレージ]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-113">In the selection panel that appears, select **Storage**.</span></span>

1. <span data-ttu-id="cc492-114">そのパネルの右側にある **[ストレージ アカウント - Blob、File、テーブル、キュー]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-114">On the right side of that pane, select **Storage account - blob, file, table, queue**.</span></span>

    ![Azure portal のスクリーンショット。[リソースの作成] ブレードで [ストレージ カテゴリ] と [ストレージ アカウント] オプションが強調表示されています。](..\media\5-portal-storage-select.png)

### <a name="configure-the-basic-options"></a><span data-ttu-id="cc492-116">基本的なオプションを構成する</span><span class="sxs-lookup"><span data-stu-id="cc492-116">Configure the basic options</span></span>

<span data-ttu-id="cc492-117">**[プロジェクトの詳細]** の下で:</span><span class="sxs-lookup"><span data-stu-id="cc492-117">Under **PROJECT DETAILS**:</span></span>

1. <span data-ttu-id="cc492-118">適切な**サブスクリプション**を選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-118">Select the appropriate **Subscription**.</span></span>

1. <span data-ttu-id="cc492-119">ドロップダウン リストから既存のリソース グループである <rgn>[サンドボックス リソース グループ名]</rgn> を選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-119">Select the existing Resource Group <rgn>[Sandbox resource group name]</rgn> from the drop-down list.</span></span>

    > [!NOTE]
    > <span data-ttu-id="cc492-120">この無料のリソース グループは演習の一部として Microsoft が提供するものです。</span><span class="sxs-lookup"><span data-stu-id="cc492-120">This free Resource Group has been provided by Microsoft as part of the learning experience.</span></span> <span data-ttu-id="cc492-121">実際のアプリケーションのためにアカウントを作成するときは、アプリのリソースをすべて保持する目的で、自分のサブスクリプションで新しいリソース グループを作成することになるでしょう。</span><span class="sxs-lookup"><span data-stu-id="cc492-121">When you create an account for a real application, you will want to create a new Resource Group in your subscription to hold all the resources for the app.</span></span>

<span data-ttu-id="cc492-122">**[インスタンスの詳細]** で:</span><span class="sxs-lookup"><span data-stu-id="cc492-122">Under **INSTANCE DETAILS**:</span></span>

1. <span data-ttu-id="cc492-123">**[ストレージ アカウント名]** を入力します。</span><span class="sxs-lookup"><span data-stu-id="cc492-123">Enter a **Storage account name**.</span></span> <span data-ttu-id="cc492-124">この名前は、アカウントのデータにアクセスするためのパブリック URL を生成するときに使用されます。</span><span class="sxs-lookup"><span data-stu-id="cc492-124">The name will be used to generate the public URL used to access the data in the account.</span></span> <span data-ttu-id="cc492-125">Azure に存在するストレージ アカウント名の中で一意になる名前を付ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="cc492-125">It must be unique across all existing storage account names in Azure.</span></span> <span data-ttu-id="cc492-126">長さは 3 から 24 文字にする必要があります。小文字と数字のみを使用できます。</span><span class="sxs-lookup"><span data-stu-id="cc492-126">It must be 3 to 24 characters long and can contain only lowercase letters and numbers.</span></span>

1. <span data-ttu-id="cc492-127">自分の所在地に近い **[場所]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-127">Select a **Location** near to you.</span></span> 

1. <span data-ttu-id="cc492-128">**[デプロイ モデル]** には _[Resource Manager]_ を選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-128">Leave the **Deployment model** as _Resource manager_.</span></span> <span data-ttu-id="cc492-129">これは Azure においてすべてのリソース デプロイに推奨されるモデルであり、自分のアプリに関連するリソースをすべて_リソース グループ_に入れることで管理が簡単になります。</span><span class="sxs-lookup"><span data-stu-id="cc492-129">This is the preferred model for all resource deployments in Azure and allows you to group all the related resources for your app into a _resource group_ for easier management.</span></span>

1. <span data-ttu-id="cc492-130">**[パフォーマンス]** オプションには _[Standard]_ を選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-130">Select _Standard_ for the **Performance** option.</span></span> <span data-ttu-id="cc492-131">これで、ストレージ アカウントのデータ保持に使用されるディスク ストレージの種類が決定されます。</span><span class="sxs-lookup"><span data-stu-id="cc492-131">This decides the type of disk storage used to hold the data in the Storage account.</span></span> <span data-ttu-id="cc492-132">Standard の場合、従来のハード ディスクが使用され、Premium の場合、ソリッドステート ドライブ (SSD) が使用されてアクセスが速くなります。</span><span class="sxs-lookup"><span data-stu-id="cc492-132">Standard uses traditional hard disks, and Premium uses solid-state drives (SSD) for faster access.</span></span> <span data-ttu-id="cc492-133">ただし、Premium の場合、_ページ BLOB_ のみがサポートされます。動画にはブロック BLOB が、バッファー処理にはキューが必要になりますが、いずれも _[Standard]_ オプションでのみ利用できます。</span><span class="sxs-lookup"><span data-stu-id="cc492-133">However, remember that Premium only supports _page blobs_ and you will need block blobs for your videos, and a queue for buffering - both of which are only available with the _Standard_ option.</span></span>

1. <span data-ttu-id="cc492-134">**[アカウントの種類]** には _[StorageV2 (汎用 v2)]_ を選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-134">Select _StorageV2 (general purpose v2)_ for the **Account kind**.</span></span> <span data-ttu-id="cc492-135">これで最新の機能や価格にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="cc492-135">This provides access to the latest features and pricing.</span></span> <span data-ttu-id="cc492-136">具体的には、BLOB ストレージ アカウントでは、この種類のアカウントで利用できるオプションが増えます。</span><span class="sxs-lookup"><span data-stu-id="cc492-136">In particular, Blob storage accounts have more options available with this account type.</span></span> <span data-ttu-id="cc492-137">BLOB とキューを組み合わせる必要があるため、_[BLOB ストレージ]_ オプションは使用できません。</span><span class="sxs-lookup"><span data-stu-id="cc492-137">You need a mix of blobs and a queue, so the _Blob storage_ option will not work.</span></span> <span data-ttu-id="cc492-138">このアプリケーションでは、アクセスできる機能が制限され、予想されるワークロードのコストを削減できる可能性が低いため、_[Storage (汎用 v1)]_ アカウントを選択してもメリットはありません。</span><span class="sxs-lookup"><span data-stu-id="cc492-138">For this application, there would be no benefit to choosing a _Storage (general purpose v1)_ account, since that would limit the features you could access and would be unlikely to reduce the cost of your expected workload.</span></span>

1. <span data-ttu-id="cc492-139">**[レプリケーション]** は _[ローカル冗長ストレージ (LRS)]_ のままにします。</span><span class="sxs-lookup"><span data-stu-id="cc492-139">Leave the **Replication** as _Locally-redundant storage (LRS)_.</span></span> <span data-ttu-id="cc492-140">高い可用性を維持するために、Azure ストレージ アカウントのデータは常に複製されます。このオプションでは、持続性要件を満たす複製頻度を選択できます。</span><span class="sxs-lookup"><span data-stu-id="cc492-140">Data in Azure storage accounts are always replicated to ensure high availability - this option lets you choose how far away the replication occurs to match your durability requirements.</span></span> <span data-ttu-id="cc492-141">今回のケースでは、イメージとビデオはすぐに古くなり、サイトから削除されます。</span><span class="sxs-lookup"><span data-stu-id="cc492-141">In our case, the images and videos quickly become out-of-date and are removed from the site.</span></span> <span data-ttu-id="cc492-142">つまり、グローバルな冗長性のために追加料金を払う価値がほとんどないということです。</span><span class="sxs-lookup"><span data-stu-id="cc492-142">This means there is little value to paying extra for global redundancy.</span></span> <span data-ttu-id="cc492-143">致命的な障害でデータを失った場合は、ユーザーからの最新コンテンツでサイトを再開することができます。</span><span class="sxs-lookup"><span data-stu-id="cc492-143">If a catastrophic event results in data loss, you can restart the site with fresh content from your users.</span></span>

1. <span data-ttu-id="cc492-144">**[アクセス層]** を _[ホット]_ に設定します。</span><span class="sxs-lookup"><span data-stu-id="cc492-144">Set the **Access tier** to _Hot_.</span></span> <span data-ttu-id="cc492-145">この設定は BLOB ストレージでのみ使用されます。</span><span class="sxs-lookup"><span data-stu-id="cc492-145">This setting is only used for Blob storage.</span></span> <span data-ttu-id="cc492-146">**ホット アクセス層**は頻繁にアクセスされるデータに最適です。**クール アクセス層**はアクセス頻度の低いデータに適しています。</span><span class="sxs-lookup"><span data-stu-id="cc492-146">The **Hot Access Tier** is ideal for frequently accessed data, and the **Cool Access Tier** is better for infrequently accessed data.</span></span> <span data-ttu-id="cc492-147">これによって設定されるのは_既定_値のみであることに注意してください。BLOB を作成する場合は、データに対して異なる値を設定できます。</span><span class="sxs-lookup"><span data-stu-id="cc492-147">Note that this only sets the _default_ value - when you create a Blob, you can set a different value for the data.</span></span> <span data-ttu-id="cc492-148">今回のケースでは、ビデオをすばやく読み込む必要があるため、BLOB に高パフォーマンス オプションを使用します。</span><span class="sxs-lookup"><span data-stu-id="cc492-148">In our case, we want the videos to load quickly, so you will use the high-performance option for your blobs.</span></span>
   
<span data-ttu-id="cc492-149">次のスクリーンショットは、**[基本]** タブの設定が完了したことを示しています。リソース グループ、サブスクリプション、名前に異なる値が与えられていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="cc492-149">The following screenshot shows the completed settings for the **Basics** tab. Note that the resource group, subscription, and name will have different values.</span></span>

![[ストレージ アカウントを作成する] ブレードのスクリーンショット。**[基本]** タブが選択されています。](../media-drafts/5-create-storage-account-basics.png)

### <a name="configure-the-advanced-options"></a><span data-ttu-id="cc492-151">詳細オプションを構成する</span><span class="sxs-lookup"><span data-stu-id="cc492-151">Configure the advanced options</span></span>

1. <span data-ttu-id="cc492-152">**[次: 詳細 >]** ボタンをクリックして **[詳細]** タブに移動するか、画面上部にある **[詳細]** タブを選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-152">Click the **Next: Advanced >** button to move to the **Advanced** tab, or select the **Advanced** tab at the top of the screen.</span></span>

1. <span data-ttu-id="cc492-153">**[安全な転送が必須]** 設定により、ストレージ アカウントのデータにアクセスするための REST API で **HTTP** を使用できるかどうかが制御されます。</span><span class="sxs-lookup"><span data-stu-id="cc492-153">The **Secure transfer required** setting controls whether **HTTP** can be used for the REST APIs used to access data in the Storage account.</span></span> <span data-ttu-id="cc492-154">このオプションを _[有効]_ に設定すると、すべてのクライアントで強制的に SSL (**HTTPS**) が使用されます。</span><span class="sxs-lookup"><span data-stu-id="cc492-154">Setting this option to _Enabled_ will force all clients to use SSL (**HTTPS**).</span></span> <span data-ttu-id="cc492-155">ネットワーク経由の HTTPS がベスト プラクティスと見なされているため、ほとんどの場合、これを _[有効]_ に設定することになります。</span><span class="sxs-lookup"><span data-stu-id="cc492-155">Most of the time you will want to set this to _Enabled_ as using HTTPS over the network is considered a best practice.</span></span>

    > [!WARNING]
    > <span data-ttu-id="cc492-156">このオプションが有効な場合、追加の制約がいくつか強制されます。</span><span class="sxs-lookup"><span data-stu-id="cc492-156">If this option is enabled, it will enforce some additional restrictions.</span></span> <span data-ttu-id="cc492-157">Linux で SMB 2.1 または 3.0 を使用するシナリオも含め、暗号化のない Azure ファイル サービス接続は失敗します。</span><span class="sxs-lookup"><span data-stu-id="cc492-157">Azure files service connections without encryption will fail, including scenarios using SMB 2.1 or 3.0 on Linux.</span></span> <span data-ttu-id="cc492-158">Azure ストレージではカスタム ドメイン名に対して HTTPS がサポートされないため、カスタム ドメイン名ではこのオプションを使用できません。</span><span class="sxs-lookup"><span data-stu-id="cc492-158">Because Azure storage doesn’t support SSL for custom domain names, this option cannot be used with a custom domain name.</span></span>

1. <span data-ttu-id="cc492-159">**[仮想ネットワーク]** オプションを _[なし]_ に設定します。</span><span class="sxs-lookup"><span data-stu-id="cc492-159">Set the **Virtual networks** option to _None_.</span></span> <span data-ttu-id="cc492-160">このオプションでは、Azure 仮想ネットワークでストレージ アカウントを分離できます。</span><span class="sxs-lookup"><span data-stu-id="cc492-160">This option allows you to isolate the storage account on an Azure virtual network.</span></span> <span data-ttu-id="cc492-161">今回、公共のインターネット アクセスを使用します。</span><span class="sxs-lookup"><span data-stu-id="cc492-161">We want to use public Internet access.</span></span> <span data-ttu-id="cc492-162">今回のコンテンツは一般向けであり、パブリック コンテンツからのアクセスを許可する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cc492-162">Our content is public facing and you need to allow access from public clients.</span></span>

1. <span data-ttu-id="cc492-163">**[Data Lake Storage Gen2]** オプションは _[無効]_ のままにします。</span><span class="sxs-lookup"><span data-stu-id="cc492-163">Leave the **Data Lake Storage Gen2** option as _Disabled_.</span></span> <span data-ttu-id="cc492-164">これはこのモジュールには関係のないビッグデータ アプリケーション向けです。</span><span class="sxs-lookup"><span data-stu-id="cc492-164">This is for big-data applications that aren't relevant to this module.</span></span>

<span data-ttu-id="cc492-165">次のスクリーンショットは、**[詳細]** タブの設定が完了したことを示しています。</span><span class="sxs-lookup"><span data-stu-id="cc492-165">The following screenshot shows the completed settings for the **Advanced** tab.</span></span>

![**詳細** タブが選択されている [ストレージ アカウントを作成する] ブレードのスクリーンショット。](../media-drafts/5-create-storage-account-advanced.png)

### <a name="create"></a><span data-ttu-id="cc492-167">作成</span><span class="sxs-lookup"><span data-stu-id="cc492-167">Create</span></span>

1. <span data-ttu-id="cc492-168">必要であれば、**[タグ]** 設定をいろいろ試すことができます。</span><span class="sxs-lookup"><span data-stu-id="cc492-168">You can explore the **Tags** settings if you like.</span></span> <span data-ttu-id="cc492-169">これはあらゆる Azure リソースで利用できる機能であり、キー/値のペアを組織のアカウントに関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="cc492-169">This lets you associate key/value pairs to the account for your categorization and is a feature available to any Azure resource.</span></span>

1. <span data-ttu-id="cc492-170">**[レビュー + 作成]** をクリックし、設定を見直します。</span><span class="sxs-lookup"><span data-stu-id="cc492-170">Click **Review + create** to review the settings.</span></span> <span data-ttu-id="cc492-171">オプションがすばやく検証され、必須フィールドがすべて選択されていることが確認されます。</span><span class="sxs-lookup"><span data-stu-id="cc492-171">This will do a quick validation of your options to make sure all the required fields are selected.</span></span> <span data-ttu-id="cc492-172">問題があれば、ここで報告されます。</span><span class="sxs-lookup"><span data-stu-id="cc492-172">If there are issues, they'll be reported here.</span></span> <span data-ttu-id="cc492-173">設定を見直したら **[作成]** をクリックし、ストレージ アカウントをプロビジョニングします。</span><span class="sxs-lookup"><span data-stu-id="cc492-173">Once you've reviewed the settings, click **Create** to provision the storage account.</span></span>

<span data-ttu-id="cc492-174">アカウントがデプロイされるまで数分かかります。</span><span class="sxs-lookup"><span data-stu-id="cc492-174">It will take a few minutes to deploy the account.</span></span> <span data-ttu-id="cc492-175">Azure がそれに対して動作している間、このアカウントで使用する API について見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="cc492-175">While Azure is working on that, let's explore the APIs we'll use with this account.</span></span>

### <a name="verify"></a><span data-ttu-id="cc492-176">確認</span><span class="sxs-lookup"><span data-stu-id="cc492-176">Verify</span></span>

1. <span data-ttu-id="cc492-177">左サイドバーで **[ストレージ アカウント]** リンクを選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-177">Select the **Storage accounts** link in the left sidebar.</span></span>

1. <span data-ttu-id="cc492-178">一覧で新しいストレージ アカウントを見つけて、作成が成功したことを確認します。</span><span class="sxs-lookup"><span data-stu-id="cc492-178">Locate the new storage account in the list to verify that creation succeeded.</span></span>

<!-- Cleanup sandbox -->
[!include[](../../../includes/azure-sandbox-cleanup.md)]

<span data-ttu-id="cc492-179">自分のサブスクリプションで作業している場合は、Azure portal で次の手順を実行し、リソース グループと、関連付けられているすべてのリソースを削除できます。</span><span class="sxs-lookup"><span data-stu-id="cc492-179">When you are working in your own subscription, you can the following steps in the Azure portal to delete the resource group and all associated resources.</span></span>

1. <span data-ttu-id="cc492-180">左サイドバーで **[リソース グループ]** リンクを選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-180">Select the **Resource groups** link in the left sidebar.</span></span>

1. <span data-ttu-id="cc492-181">作成したリソース グループを一覧から見つけます。</span><span class="sxs-lookup"><span data-stu-id="cc492-181">Locate the resource group you created in the list.</span></span>

1. <span data-ttu-id="cc492-182">リソース グループ エントリを右クリックして、コンテキスト メニューから **[リソース グループの削除]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="cc492-182">Right-click on the resource group entry and select **Delete resource group** from the context menu.</span></span> <span data-ttu-id="cc492-183">エントリの右側にある [...] をクリックした場合も同じコンテキスト メニューが表示されます。</span><span class="sxs-lookup"><span data-stu-id="cc492-183">You can also click the "..." menu element on the right side of the entry to get to the same context menu.</span></span>

1. <span data-ttu-id="cc492-184">確認フィールドにリソース グループ名を入力します。</span><span class="sxs-lookup"><span data-stu-id="cc492-184">Type the resource group name into the confirmation field.</span></span>

1. <span data-ttu-id="cc492-185">**[削除]** ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="cc492-185">Click the **Delete** button.</span></span>

## <a name="summary"></a><span data-ttu-id="cc492-186">まとめ</span><span class="sxs-lookup"><span data-stu-id="cc492-186">Summary</span></span>

<span data-ttu-id="cc492-187">自分のビジネス要件に合わせた設定でストレージ アカウントを作成しました。</span><span class="sxs-lookup"><span data-stu-id="cc492-187">You created a storage account with settings driven by your business requirements.</span></span> <span data-ttu-id="cc492-188">顧客の所在地が主に南カリフォルニアであれば、米国西部のデータセンターを選択したことでしょう。</span><span class="sxs-lookup"><span data-stu-id="cc492-188">For example, you might have selected a West US datacenter because your customers were primarily located in southern California.</span></span> <span data-ttu-id="cc492-189">これが一般的なフローです。まず、自分のデータと目標を分析し、条件に合うストレージ アカウントのオプションを構成します。</span><span class="sxs-lookup"><span data-stu-id="cc492-189">This is a typical flow: first analyze your data and goals, and then configure the storage account options to match.</span></span>