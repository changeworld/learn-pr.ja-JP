Azure portal を使用すると、PostgreSQL データベース サーバーの管理およびスケーリングを行うことができます。 あなたは、ランナーのパフォーマンス データを格納するために Azure Database for PostgreSQL サーバーを作成することに決めました。 取得されたデータ ボリュームの履歴から、サーバー ストレージの要件を 10 GB に設定する必要があることがわかっています。 ご自分の処理要件をサポートするには、仮想コアを 1 個備えたコンピューティング世代 Gen 5 のサポートが必要です。 また、通常、25 日間のバックアップを格納していることもわかっています。

[!include[](../../../includes/azure-sandbox-activate.md)]

サンドボックスをアクティブ化したときと同じアカウントを使用して、[Azure portal](https://portal.azure.com/triplecrownlabs.onmicrosoft.com?azure-portal=true) にサインインします。 

左側には Azure リソースの作成と管理のメニューが表示されます。画面の残りの部分はダッシュボードになっています。

## <a name="create-an-azure-database-for-postgresql-server"></a>Azure Database for PostgreSQL サーバーの作成

サインインした後、既定のダッシュ ボードが表示されるのを確認できます。 Azure Database for PostgreSQL サーバーの作成に使用可能なオプションがいくつかあります。 ダッシュボードからは、次のいずれかの操作を行うことができます。

- **[すべてのサービス]** オプションを選択し、次に **[Azure Database for PostgreSQL サーバー]** を選択します。 ご自分のアカウントで既に構成されているサーバーがあれば、この画面に表示されます。 ここでは、**[追加]** を選択して、新しいサーバーを作成するためのブレードに移動します。

**または**

- **[リソースの作成]** オプションを選択します。これにより、Azure Marketplace リソース オプションが表示されます。 ここでは、**[データベース]** オプション、**[Azure Database for PostgreSQL]** の順に選択します。

### <a name="configure-the-server"></a>サーバーの構成

ここで、次の図に示すような PostgreSQL サーバーの作成ブレードが表示されます。

![新しい PostgreSQL データベースの作成ブレードを示す Azure portal のスクリーンショット](../media/4-create-blade.png)

> [!NOTE]
> PostgreSQL サーバーを作成する場合は、いくつかの詳細情報を覚えておく必要があります。 たとえば、サーバーにアクセスするためのユーザー名とパスワードがあります。 この情報は、後でご自分のサーバーに接続するときに使用します。

1. サーバーの一意の名前を選択します。 名前はすべて小文字とする必要があり、名前には数字とハイフンを含めることができることを思い出してください。

1. サブスクリプションを選択します。 このフィールドが使用するサブスクリプションに設定されていることを必ず確認します。

1. これで、リソース グループを作成するか、または既存のリソース グループを再利用するオプションを使用できるようになります。 **[既存のものを使用]** を選択し、ドロップダウンから "<rgn>[サンドボックス リソース グループ名]</rgn>" を選択します。 このモジュールの残りの部分には、このグループを使用します。

1. ご自分の新しいサーバーのソースを選択します。 このラボでは、このオプションを _[空白]_ のままとします。 既存のサーバーのバックアップを復元する場合は、オプションを _[バックアップ]_ に変更できることを思い出してください。

1. 新しいサーバー用の管理者ログインとして使用するログイン名を選択します。 管理者のログイン名に azure_superuser、azure_pg_admin、admin、administrator、root、guest、または public は使用できないことを思い出してください。 pg_ で始めることはできません。 今後の使用に備えて名前を覚えておくか書き留めます。

1. 上記の管理者ログイン名と一緒に使用するパスワードを選択します。 パスワードには次のカテゴリのうち 3 つの文字が含まれている必要があることを思い出してください。
   - 英大文字
   - 英小文字
   - 数字 (0 から 9)
   - 英数字以外の文字 (!、$、#、% など)

1. パスワードをもう一度入力して、そのパスワードを確定します。

1. ご自分のサーバーの場所を選択します。 次の一覧から自分に最も近い場所を選択します。

    [!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]


1. サーバーのバージョンを選択します。 PostgreSQL の最新バージョンを選択します。

1. 最後から 2 番目の手順として、**[価格レベル]** オプションを選択します。

    特定のストレージ オプションとコンピューティング オプションを使用してご自分のサーバーを構成する必要があることを思い出してください。

    - 10 GB のディスク ストレージ
    - コンピューティング世代 Gen 5 のサポート
    - 保有期間 25 日

    **[価格レベル]** をクリックして価格レベル ブレードにアクセスし、次の変更を行います。

    - **[Basic]** オプション タブを選択します。
    - **[Gen 5 Computation Generation]\(コンピューティング世代 Gen 5\)** オプションを選択します。
    - **[仮想コア]** スライダーから [1 個の仮想コア] を選択します。 スライダーを変更した結果、**[価格の概要]** にどのような影響があったかを注目してください。
    - **[ストレージ]** スライダーから 10 GB を選択します。 10 GB に正確にスライドするのが難しい場合は、キーボードの左方向キーと右方向キーを使用して正確な値を取得することができます。
    - **[バックアップの保有期間]** スライダーから 25 日を選択します。
    - バックアップ冗長性オプションの設定は **[ローカル冗長]** のままにします。

    ![新しい PostgreSQL データベースのデータベース価格レベルを示す Azure portal のスクリーンショット](../media/4-azure-db-pricing-tier.png)

1. 右側に表示される価格の概要を確認します。 サーバーのコスト内訳と月額料金の見積もりが提供します。

1. 選択が完了して選択内容をコミットしたら **[OK]** をクリックして価格レベルのオプションを閉じます。

1. 残りの作業は、入力した値を確認して **[作成]** をクリックするだけとなりました。 作成には数分かかる場合があります。 Azure portal 画面の上部にある通知アイコン (ベル) を選択すると、進行状況を監視できます。

これで PostgreSQL サーバーが使用できるようになりました。 次のユニットでは、Azure CLI を使用して、上記と同じサーバーを作成する方法について説明します。
