<span data-ttu-id="9ac1c-101">ローカルの Ubuntu Linux サーバー上で実行されている既存の Web サイトがあります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-101">We have an existing website running on a local Ubuntu Linux server.</span></span> <span data-ttu-id="9ac1c-102">今回の目標は、最新の Ubuntu イメージを使用して Azure 仮想マシン (VM) を作成し、サイトをクラウドへ移行することです。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-102">Our goal is to create an Azure virtual machine (VM) using the latest Ubuntu image and then migrate the site to the cloud.</span></span> <span data-ttu-id="9ac1c-103">このユニットでは、Azure で仮想マシンを作成する際に評価が必要になるオプションについて学習します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-103">In this unit, you will learn about the options you will need to evaluate when creating a virtual machine in Azure.</span></span>

## <a name="introduction-to-azure-virtual-machines"></a><span data-ttu-id="9ac1c-104">Azure Virtual Machines の概要</span><span class="sxs-lookup"><span data-stu-id="9ac1c-104">Introduction to Azure Virtual Machines</span></span>

<span data-ttu-id="9ac1c-105">Azure Virtual Machines は、オンデマンドのスケーラブルなクラウド コンピューティング リソースです。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-105">Azure Virtual Machines is an on-demand, scalable cloud-computing resource.</span></span> <span data-ttu-id="9ac1c-106">プロセッサ、メモリ、ストレージ、ネットワーク リソースが含まれます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-106">They include processors, memory, storage, and networking resources.</span></span> <span data-ttu-id="9ac1c-107">自由に仮想マシンを開始および停止し、Azure portal から、または Azure CLI を使用して仮想マシンを管理できます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-107">You can start and stop virtual machines at will and manage them from the Azure portal or with the Azure CLI.</span></span> <span data-ttu-id="9ac1c-108">また、リモート Secure Shell (SSH) を使用して実行中の VM に直接接続し、ローカル コンピューターの場合と同じようにコマンドを実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-108">You can also use a remote Secure Shell (SSH) to connect directly to the running VM and execute commands as if you were on a local computer.</span></span>

### <a name="running-linux-in-azure"></a><span data-ttu-id="9ac1c-109">Azure での Linux の実行</span><span class="sxs-lookup"><span data-stu-id="9ac1c-109">Running Linux in Azure</span></span>

<span data-ttu-id="9ac1c-110">Azure で Linux ベースの VM を作成することは簡単です。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-110">Creating Linux-based VMs in Azure is easy.</span></span> <span data-ttu-id="9ac1c-111">Microsoft は主要な Linux ベンダーと提携し、ディストリビューションが Azure プラットフォーム用に確実に最適化されるようにしています。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-111">Microsoft has partnered with prominent Linux vendors to ensure their distributions are optimized for the Azure platform.</span></span> <span data-ttu-id="9ac1c-112">SUSE、Red Hat、Ubuntu などのさまざまな人気のある Linux ディストリビューションの事前構築済みイメージから仮想マシンを作成することも、クラウドで実行するように独自の Linux ディストリビューションを構築することもできます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-112">You can create virtual machines from prebuilt images for a variety of popular Linux distributions, such as SUSE, Red Hat, and Ubuntu, or build your own Linux distribution to run in the cloud.</span></span>

## <a name="creating-an-azure-vm"></a><span data-ttu-id="9ac1c-113">Azure VM の作成</span><span class="sxs-lookup"><span data-stu-id="9ac1c-113">Creating an Azure VM</span></span>

<span data-ttu-id="9ac1c-114">VM を定義して Azure にデプロイするには、いくつかの方法があります。つまり、Azure portal、スクリプト (Azure CLI または Azure PowerShell を使用)、Azure Resource Manager テンプレートのいずれかを使用します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-114">VMs can be defined and deployed on Azure in several ways: the Azure portal, a script (using the Azure CLI or Azure PowerShell), or an Azure Resource Manager template.</span></span> <span data-ttu-id="9ac1c-115">いずれの場合も、いくつかの情報を指定する必要があります。それについては、この後すぐに説明します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-115">In all cases, you will need to supply several pieces of information that we'll cover shortly.</span></span>

<span data-ttu-id="9ac1c-116">Azure Marketplace には、OS と特定のシナリオ用にインストールされた人気のあるソフトウェア ツールの両方を含む、事前構成済みのイメージも用意されています。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-116">The Azure Marketplace also provides preconfigured images that include both an OS and favorite software tools installed for specific scenarios.</span></span>

![Azure Marketplace のいくつかの仮想マシン オプションを示す、Azure portal のスクリーンショット。](../media/2-marketplace-vm-choices.png)

## <a name="resources-used-in-a-linux-vm"></a><span data-ttu-id="9ac1c-118">Linux VM で使用されるリソース</span><span class="sxs-lookup"><span data-stu-id="9ac1c-118">Resources used in a Linux VM</span></span>

<span data-ttu-id="9ac1c-119">Azure で Linux VM を作成する場合、VM をホストするためにリソースも作成します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-119">When creating a Linux VM in Azure, you also create resources to host the VM.</span></span> <span data-ttu-id="9ac1c-120">これらのリソースが連携することによってコンピューターが仮想化され、Linux オペレーティング システムが実行されます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-120">These resources work together to virtualize a computer and run the Linux operating system.</span></span> <span data-ttu-id="9ac1c-121">これらのリソースは存在しているか (VM の作成時に選択します)、VM と共に作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-121">These must exist (and be selected during VM creation), or they will be created with the VM:</span></span>

- <span data-ttu-id="9ac1c-122">CPU およびメモリリソースを提供する仮想マシン</span><span class="sxs-lookup"><span data-stu-id="9ac1c-122">A virtual machine that provides CPU and memory resources</span></span>
- <span data-ttu-id="9ac1c-123">仮想ハード ディスクを保持する Azure Storage アカウント</span><span class="sxs-lookup"><span data-stu-id="9ac1c-123">An Azure Storage account to hold the virtual hard disks</span></span>
- <span data-ttu-id="9ac1c-124">OS、アプリケーション、およびデータを保持する仮想ディスク</span><span class="sxs-lookup"><span data-stu-id="9ac1c-124">Virtual disks to hold the OS, applications, and data</span></span>
- <span data-ttu-id="9ac1c-125">他の Azure サービスやオンプレミスのハードウェアに VM を接続する仮想ネットワーク (VNet)</span><span class="sxs-lookup"><span data-stu-id="9ac1c-125">A virtual network (VNet) to connect the VM to other Azure services or your on-premise hardware</span></span>
- <span data-ttu-id="9ac1c-126">VNet と通信するためのネットワーク インターフェイス</span><span class="sxs-lookup"><span data-stu-id="9ac1c-126">A network interface to communicate with the VNet</span></span>
- <span data-ttu-id="9ac1c-127">VM へのアクセスを可能にする省略可能なパブリック IP アドレス</span><span class="sxs-lookup"><span data-stu-id="9ac1c-127">An optional public IP address so you can access the VM</span></span>

<span data-ttu-id="9ac1c-128">他の Azure サービスと同じように、VM を格納する (および、必要に応じて管理のためにこれらのリソースをグループ化する) ための**リソース グループ**が必要です。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-128">Like other Azure services, you'll need a **Resource Group** to contain the VM (and optionally group these resources for administration).</span></span> <span data-ttu-id="9ac1c-129">新しい VM を作成する場合、既存のリソース グループを使用することも、新しいリソース グループを作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-129">When you create a new VM, you can either use an existing resource group or create a new one.</span></span>

## <a name="choose-the-vm-image"></a><span data-ttu-id="9ac1c-130">VM イメージを選択する</span><span class="sxs-lookup"><span data-stu-id="9ac1c-130">Choose the VM image</span></span>

<span data-ttu-id="9ac1c-131">イメージの選択は、VM を作成するときに行う最初の最も重要な決定事項の 1 つです。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-131">Selecting an image is one of the first and most important decisions you'll make when creating a VM.</span></span> <span data-ttu-id="9ac1c-132">イメージとは、VM の作成に使用するテンプレートです。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-132">An image is a template that's used to create a VM.</span></span> <span data-ttu-id="9ac1c-133">これらのテンプレートには、OS と、多くの場合はその他のソフトウェア (開発ツールや Web ホスティング環境など) が含まれています。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-133">These templates include an OS and often other software, such as development tools or web hosting environments.</span></span>

<span data-ttu-id="9ac1c-134">コンピューターにインストールできるものはすべて、イメージに含めることができます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-134">Anything that a computer can have installed can be included in an image.</span></span> <span data-ttu-id="9ac1c-135">Apache HTTP サーバーでの Web アプリのホスティングなど、必要なタスクに正確に対応するように事前構成されたイメージから、VM を作成できます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-135">You can create a VM from an image that's preconfigured to precisely the tasks you need, such as hosting a web app on the Apache HTTP Server.</span></span>

> [!TIP]
> <span data-ttu-id="9ac1c-136">カスタム ディスク イメージを作成し、アップロードすることもできます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-136">You can also create and upload custom disk images.</span></span>

## <a name="sizing-your-vm"></a><span data-ttu-id="9ac1c-137">VM のサイズを変更する</span><span class="sxs-lookup"><span data-stu-id="9ac1c-137">Sizing your VM</span></span>

<span data-ttu-id="9ac1c-138">物理マシンに一定量のメモリや CPU 電源があるように、仮想マシンにも同様にあります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-138">Just as a physical machine has a certain amount of memory and CPU power, so does a virtual machine.</span></span> <span data-ttu-id="9ac1c-139">Azure では、さまざまな価格ポイントで異なるサイズの VM が提供されます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-139">Azure offers a range of VMs of differing sizes at different price points.</span></span> <span data-ttu-id="9ac1c-140">選択したサイズによって、VM の処理能力、メモリ、ストレージの最大容量などが決まります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-140">The size that you choose will determine the VM's processing power, memory, and maximum storage capacity.</span></span>

> [!WARNING]
> <span data-ttu-id="9ac1c-141">各サブスクリプションには、VM の作成に影響するクォータ制限があります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-141">There are quota limits on each subscription that can impact VM creation.</span></span> <span data-ttu-id="9ac1c-142">既定では、1 つのリージョン内のすべての VM 全体で、20 を超える数の仮想_コア_を使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-142">By default, you cannot have more than 20 virtual _cores_ across all VMs within a region.</span></span> <span data-ttu-id="9ac1c-143">VM を複数のリージョンに分割するか、制限を引き上げる[オンライン要求](https://docs.microsoft.com/azure/azure-supportability/resource-manager-core-quotas-request)を申請することができます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-143">You can either split up VMs across regions or file an [online request](https://docs.microsoft.com/azure/azure-supportability/resource-manager-core-quotas-request) to increase your limits.</span></span>

<span data-ttu-id="9ac1c-144">VM のサイズは、基本的なテストと運用向けの B シリーズから、大規模なコンピューティング タスク向けの H シリーズまで、複数のカテゴリに分類されています。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-144">VM sizes are grouped into categories, starting with the B-series for basic testing and running up to the H-series for massive computing tasks.</span></span> <span data-ttu-id="9ac1c-145">実行する必要があるワークロードに基づいて VM サイズを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-145">You should select the size of the VM based on the workload you want to perform.</span></span> <span data-ttu-id="9ac1c-146">VM 作成後に VM のサイズを変更することは可能ですが、そのためにはまず VM を停止する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-146">It is possible to change the size of a VM after it's been created, but the VM must be stopped first.</span></span> <span data-ttu-id="9ac1c-147">そのため、可能であれば最初から適切なサイズを選択することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-147">So, it's best to size it appropriately from the start if possible.</span></span>

#### <a name="here-are-some-guidelines-based-on-the-scenario-you-are-targeting"></a><span data-ttu-id="9ac1c-148">対象とするシナリオに基づいたガイドラインを以下に示します</span><span class="sxs-lookup"><span data-stu-id="9ac1c-148">Here are some guidelines based on the scenario you are targeting</span></span>

| <span data-ttu-id="9ac1c-149">シナリオ</span><span class="sxs-lookup"><span data-stu-id="9ac1c-149">What are you doing?</span></span> | <span data-ttu-id="9ac1c-150">考慮するサイズ</span><span class="sxs-lookup"><span data-stu-id="9ac1c-150">Consider these sizes</span></span>
|-------|------------------|
| <span data-ttu-id="9ac1c-151">**汎用コンピューティング/Web**: テストと開発、小規模から中規模のデータベース、軽度から中程度のトラフィックの Web サーバー。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-151">**General use computing/web**: Testing and development, small to medium databases, or low to medium traffic web servers.</span></span> | <span data-ttu-id="9ac1c-152">B、Dsv3、Dv3、DSv2、Dv2</span><span class="sxs-lookup"><span data-stu-id="9ac1c-152">B, Dsv3, Dv3, DSv2, Dv2</span></span> |
| <span data-ttu-id="9ac1c-153">**高負荷の計算タスク**: トラフィックが中程度の Web サーバー、ネットワーク アプライアンス、バッチ処理、アプリケーション サーバー。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-153">**Heavy computational tasks**: Medium traffic web servers, network appliances, batch processes, and application servers.</span></span> | <span data-ttu-id="9ac1c-154">Fsv2、Fs、F</span><span class="sxs-lookup"><span data-stu-id="9ac1c-154">Fsv2, Fs, F</span></span> |
| <span data-ttu-id="9ac1c-155">**大容量のメモリ使用量**: リレーショナル データベース サーバー、中規模から大規模のキャッシュ、メモリ内分析。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-155">**Large memory usage**: Relational database servers, medium to large caches, and in-memory analytics.</span></span> | <span data-ttu-id="9ac1c-156">Esv3、Ev3、M、GS、G、DSv2、Dv2</span><span class="sxs-lookup"><span data-stu-id="9ac1c-156">Esv3, Ev3, M, GS, G, DSv2, Dv2</span></span> |
| <span data-ttu-id="9ac1c-157">**データ ストレージと処理**: 高いディスク スループットと IO を必要とするビッグ データ、SQL、NoSQL データベース。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-157">**Data storage and processing**: Big data, SQL, and NoSQL databases that need high disk throughput and I/O.</span></span> | <span data-ttu-id="9ac1c-158">Ls</span><span class="sxs-lookup"><span data-stu-id="9ac1c-158">Ls</span></span> |
| <span data-ttu-id="9ac1c-159">**負荷の高いグラフィックスのレンダリング**やビデオ編集、ディープ ラーニングを使用したモデル トレーニングと推論 (ND)。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-159">**Heavy graphics rendering** or video editing, as well as model training and inferencing (ND) with deep learning.</span></span> | <span data-ttu-id="9ac1c-160">NV、NC、NCv2、NCv3、ND</span><span class="sxs-lookup"><span data-stu-id="9ac1c-160">NV, NC, NCv2, NCv3, ND</span></span> |
| <span data-ttu-id="9ac1c-161">**ハイ パフォーマンス コンピューティング (HPC)**: 高スループットのネットワーク インターフェイスのオプションを備えた、最も高速かつ強力な CPU 仮想マシンがワークロードに必要な場合。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-161">**High-performance computing (HPC)**: Your workloads need the fastest and most powerful CPU virtual machines with optional high-throughput network interfaces.</span></span> | <span data-ttu-id="9ac1c-162">H</span><span class="sxs-lookup"><span data-stu-id="9ac1c-162">H</span></span> |

## <a name="choosing-storage-options"></a><span data-ttu-id="9ac1c-163">ストレージ オプションを選択する</span><span class="sxs-lookup"><span data-stu-id="9ac1c-163">Choosing storage options</span></span>

<span data-ttu-id="9ac1c-164">次にストレージに関する一連の決定事項を示します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-164">The next set of decisions revolves around storage.</span></span> <span data-ttu-id="9ac1c-165">まず、ディスク テクノロジを選択できます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-165">First, you can choose the disk technology.</span></span> <span data-ttu-id="9ac1c-166">オプションには、従来の円盤状の記憶媒体ベースのハード ディスク ドライブ (HDD) や、より最新のソリッドステート ドライブ (SSD) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-166">Options include a traditional platter-based hard disk drive (HDD) or a more modern solid-state drive (SSD).</span></span> <span data-ttu-id="9ac1c-167">ハードウェアを購入する場合と同じように、SSD ストレージは高コストですがパフォーマンスに優れています。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-167">Just like the hardware you purchase, SSD storage costs more but provides better performance.</span></span>

> [!TIP]
> <span data-ttu-id="9ac1c-168">SSD ストレージには、standard と premium という 2 つのレベルがあります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-168">There are two levels of SSD storage available: standard and premium.</span></span> <span data-ttu-id="9ac1c-169">Standard SSD ディスクは、ワークロードは標準的であるが、パフォーマンスを向上させたい場合に選択します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-169">Choose Standard SSD disks if you have normal workloads but want better performance.</span></span> <span data-ttu-id="9ac1c-170">I/O 集中型ワークロードまたは非常に迅速にデータを処理する必要があるミッション クリティカルなシステムの場合は、Premium SSD ディスクを選択します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-170">Choose Premium SSD disks if you have I/O intensive workloads or mission-critical systems that need to process data very quickly.</span></span>

### <a name="mapping-storage-to-disks"></a><span data-ttu-id="9ac1c-171">ディスクへのストレージのマッピング</span><span class="sxs-lookup"><span data-stu-id="9ac1c-171">Mapping storage to disks</span></span>

<span data-ttu-id="9ac1c-172">Azure では、VM 用の物理ディスクを表すために仮想ハード ディスク (VHD) が使用されます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-172">Azure uses virtual hard disks (VHDs) to represent physical disks for the VM.</span></span> <span data-ttu-id="9ac1c-173">VHD は、論理形式とディスク ドライブのデータをレプリケートしますが、Azure Storage アカウントにページ BLOB として格納されます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-173">VHDs replicate the logical format and data of a disk drive but are stored as page blobs in an Azure Storage account.</span></span> <span data-ttu-id="9ac1c-174">ディスクごとに、使用するストレージの種類 (SSD または HDD) を選択できます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-174">You can choose on a per disk basis what type of storage it should use (SSD or HDD).</span></span> <span data-ttu-id="9ac1c-175">これにより、一般にはディスクで実行する予定の I/O に基づいて、各ディスクのパフォーマンスを制御できます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-175">This allows you to control the performance of each disk, likely based on the I/O you plan to perform on it.</span></span>

<span data-ttu-id="9ac1c-176">既定では、2 個の仮想ハード ディスク (VHD) が Linux VM に作成されます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-176">By default, two virtual hard disks (VHDs) will be created for your Linux VM:</span></span>

1. <span data-ttu-id="9ac1c-177">**オペレーティング システム ディスク**: これはプライマリ ドライブであり、最大容量は 2,048 GB です。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-177">The **operating system disk**: This is your primary drive, and it has a maximum capacity of 2048 GB.</span></span> <span data-ttu-id="9ac1c-178">既定のラベルは `/dev/sda` です。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-178">It will be labeled as `/dev/sda` by default.</span></span>

1. <span data-ttu-id="9ac1c-179">**一時ディスク**: このディスクは、OS またはアプリ用の一時的なストレージを提供します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-179">A **temporary disk**: This provides temporary storage for the OS or any apps.</span></span> <span data-ttu-id="9ac1c-180">Linux 仮想マシンでは、このディスクは `/dev/sdb` であり、Azure Linux エージェントによりフォーマットされて、`/mnt` にマウントされます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-180">On Linux virtual machines, the disk is `/dev/sdb` and is formatted and mounted to `/mnt` by the Azure Linux Agent.</span></span> <span data-ttu-id="9ac1c-181">サイズは、VM のサイズに基づいて設定され、スワップ ファイルの格納に使用されます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-181">It is sized based on the VM size and is used to store the swap file.</span></span>

> [!WARNING]
> <span data-ttu-id="9ac1c-182">一時ディスクは永続的ではありません。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-182">The temporary disk is not persistent.</span></span> <span data-ttu-id="9ac1c-183">このディスクには、システムにとって重大ではないデータのみを書き込む必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-183">You should only write data to this disk that is not critical to the system.</span></span>

#### <a name="what-about-data"></a><span data-ttu-id="9ac1c-184">データについて</span><span class="sxs-lookup"><span data-stu-id="9ac1c-184">What about data?</span></span>

<span data-ttu-id="9ac1c-185">プライマリ ドライブに OS だけでなくデータを格納することもできますが、専用の "_データ ディスク_" を作成する方がよい方法です。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-185">You can store data on the primary drive along with the OS, but a better approach is to create dedicated _data disks_.</span></span> <span data-ttu-id="9ac1c-186">追加のディスクを作成して VM にアタッチできます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-186">You can create and attach additional disks to the VM.</span></span> <span data-ttu-id="9ac1c-187">各ディスクは最大 4095 GB のデータを保存でき、ストレージの最大容量は、選択した VM サイズによって決まります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-187">Each disk can hold up to 4095 GB of data, with the maximum amount of storage determined by the VM size you select.</span></span>

> [!NOTE]
> <span data-ttu-id="9ac1c-188">興味深い機能として、実際のディスクから VHD イメージを作成する機能が挙げられます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-188">An interesting capability is to create a VHD image from a real disk.</span></span> <span data-ttu-id="9ac1c-189">これにより、オンプレミスのコンピューターからクラウドに "_既存_" 情報を簡単に移行できます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-189">This allows you to easily migrate _existing_ information from an on-premises computer to the cloud.</span></span>

### <a name="unmanaged-vs-managed-disks"></a><span data-ttu-id="9ac1c-190">アンマネージド vs マネージド ディスク</span><span class="sxs-lookup"><span data-stu-id="9ac1c-190">Unmanaged vs. managed disks</span></span>

<span data-ttu-id="9ac1c-191">最後に行うストレージの選択は、**アンマネージド** ディスクを使用するか、または**マネージド** ディスクを使用するかです。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-191">The final storage choice you'll make is whether to use **unmanaged** or **managed** disks.</span></span>

<span data-ttu-id="9ac1c-192">アンマネージド ディスクを使用する場合、VM ディスクに対応する VHD を保持するために使用するストレージ アカウントを自分で管理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-192">With unmanaged disks, you are responsible for the storage accounts that are used to hold the VHDs that correspond to your VM disks.</span></span> <span data-ttu-id="9ac1c-193">使用するスペースの容量に対応したストレージ アカウント料金を支払うことになります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-193">You pay the storage account rates for the amount of space you use.</span></span> <span data-ttu-id="9ac1c-194">1 つのストレージ アカウントには、I/O 操作数 20,000/秒という固定レート制限があります。これは、1 つのストレージ アカウントが最大スロットルで 40 個の標準仮想ハード ディスクをサポートできることを意味します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-194">A single storage account has a fixed rate limit of 20,000 I/O operations/sec. This means that a single storage account is capable of supporting 40 standard virtual hard disks at full throttle.</span></span> <span data-ttu-id="9ac1c-195">スケールアウトを行う必要がある場合は、複数のストレージ アカウントが必要となります。これは複雑な状況をもたらす場合があります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-195">If you need to scale out, then you need more than one storage account, which can get complicated.</span></span>

<span data-ttu-id="9ac1c-196">マネージド ディスクはより新しく、推奨されるディスク ストレージ モデルです。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-196">Managed disks are the newer and recommended disk storage model.</span></span> <span data-ttu-id="9ac1c-197">Azure にストレージ アカウント管理の負荷を担わせることにより、この複雑性を適切に解決します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-197">They elegantly solve this complexity by putting the burden of managing the storage accounts onto Azure.</span></span> <span data-ttu-id="9ac1c-198">ユーザーはディスクの種類 (Premium または Standard) とディスクのサイズを指定し、ディスクとそれが使用するストレージ "_両方_" の作成と管理は Azure によって行われます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-198">You specify the disk type (Premium or Standard) and the size of the disk, and Azure creates and manages both the disk _and_ the storage it uses.</span></span> <span data-ttu-id="9ac1c-199">ストレージ アカウントの制限について心配する必要はなく、スケールアウトがより簡単になります。また、他にもいくつかの利点があります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-199">You don't have to worry about storage account limits, which makes them easier to scale out. They also offer several other benefits:</span></span>

- <span data-ttu-id="9ac1c-200">**信頼性の向上**: Azure では、高信頼性の VM に関連付けられた VHD が Azure Storage のさまざまな部分に配置されて、同等のレベルの回復力が提供されます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-200">**Increased reliability**: Azure ensures that VHDs associated with high-reliability VMs will be placed in different parts of Azure Storage to provide similar levels of resilience.</span></span>
- <span data-ttu-id="9ac1c-201">**セキュリティの向上**: マネージド ディスクは、リソース グループ内の実際の管理対象リソースです。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-201">**Better security**: Managed disks are real managed resources in the resource group.</span></span> <span data-ttu-id="9ac1c-202">つまり、ロールベースのアクセス制御を使用して、VHD データを使用できるユーザーを制限することができます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-202">This means they can use role-based access control to restrict who can work with the VHD data.</span></span>
- <span data-ttu-id="9ac1c-203">**スナップショットサポート**: VHD の読み取り専用コピーの作成にスナップショットが利用可能です。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-203">**Snapshot support**: Snapshots can be used to create a read-only copy of a VHD.</span></span> <span data-ttu-id="9ac1c-204">所有している VM をシャットダウンする必要がありますが、スナップショットの作成に要する時間はわずか数秒です。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-204">You have to shut down the owning VM, but creating the snapshot only takes a few seconds.</span></span> <span data-ttu-id="9ac1c-205">完了したら、VM の電源を入れ、スナップショットを使用して重複する VM を作成し、運用環境の問題をトラブルシューティングしたり、スナップショットが作成された時点に VM をロールバックしたりできます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-205">Once it's done, you can power on the VM and use the snapshot to create a duplicate VM to troubleshoot a production issue or roll back the VM to the point in time that the snapshot was taken.</span></span>
- <span data-ttu-id="9ac1c-206">**バックアップのサポート**: Azure Backup を使用して、ディザスター リカバリーのために、マネージド ディスクを異なるリージョンに自動的にバックアップできます。VM のサービスに影響はありません。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-206">**Backup support**: Managed disks can be automatically backed up to different regions for disaster recovery with Azure Backup without affecting the service of the VM.</span></span>

## <a name="network-communication"></a><span data-ttu-id="9ac1c-207">ネットワーク通信</span><span class="sxs-lookup"><span data-stu-id="9ac1c-207">Network communication</span></span>

<span data-ttu-id="9ac1c-208">仮想マシンは仮想ネットワーク（VNet）を用いて外部リソースと通信を行います。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-208">Virtual machines communicate with external resources using a virtual network (VNet).</span></span> <span data-ttu-id="9ac1c-209">VNet は、リソースが通信を行う単一領域内のプライベート ネットワークを表します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-209">The VNet represents a private network in a single region that your resources communicate on.</span></span> <span data-ttu-id="9ac1c-210">仮想ネットワークは、ユーザーがオンプレミスで管理するネットワークと同じようなものです。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-210">A virtual network is just like the networks you manage on-premises.</span></span> <span data-ttu-id="9ac1c-211">サブネットに分割してリソースを分離したり、他のネットワーク (オンプレミスのネットワークを含む) に接続したり、トラフィック規則を適用して受信および送信接続を管理したりできます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-211">You can divide them up with subnets to isolate resources, connect them to other networks (including your on-premises networks), and apply traffic rules to govern inbound and outbound connections.</span></span>

### <a name="planning-your-network"></a><span data-ttu-id="9ac1c-212">ネットワークの計画</span><span class="sxs-lookup"><span data-stu-id="9ac1c-212">Planning your network</span></span>

<span data-ttu-id="9ac1c-213">新しい VM を作成するときは、新しい仮想ネットワークの作成、またはリージョン内の既存の VNet の使用を選択できます。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-213">When you create a new VM, you will have the option of creating a new virtual network or using an existing VNet in your region.</span></span>

<span data-ttu-id="9ac1c-214">VM と一緒に Azure でネットワークを自動的に作成するとシンプルですが、ほとんどのシナリオに適していない可能性が高くなります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-214">Having Azure create the network together with the VM is simple, but it's likely not ideal for most scenarios.</span></span> <span data-ttu-id="9ac1c-215">アーキテクチャ内のすべてのコンポーネントに対するネットワーク要件を_事前に_計画し、必要な VNet 構造を別個に作成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-215">It's better to plan your network requirements _up front_ for all the components in your architecture and create the VNet structure separately.</span></span> <span data-ttu-id="9ac1c-216">その後、VM を作成して、既に作成されている VNet に配置します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-216">Then, create the VMs and place them into the already-created VNets.</span></span> <span data-ttu-id="9ac1c-217">このモジュールでは、後で詳しく仮想ネットワークについて説明します。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-217">We'll look more at virtual networks later in this module.</span></span>

<span data-ttu-id="9ac1c-218">仮想マシンを作成する前に、VM の望ましい管理方法を決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-218">Before we create a virtual machine, we need to decide how we'd like to administer the VM.</span></span> <span data-ttu-id="9ac1c-219">そのオプションを見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="9ac1c-219">Let's look at our options.</span></span>