目標は、Apache を実行している既存の Linux サーバーを Azure に移動することであることを思い出してください。 最初に、Ubuntu Linux サーバーを作成します。

## <a name="create-a-new-linux-virtual-machine"></a>新しい Linux 仮想マシンを作成する

Azure portal、Azure CLI、または Azure PowerShell で Linux Vm を作成できます。 Azure で開始しているときに、最も簡単な方法では、作成時にメッセージの便利なヒントを提供し、必要な情報を説明しますので、ポータルを使用します。

1. [Azure portal](https://portal.azure.com?azure-portal=true) にサインインします。

1. クリックして**リソースの作成**で Azure portal の左上隅にあります。

1. 検索ボックスに「**Ubuntu Server**」と入力し、使用できるバージョンを表示します。 選択**Ubuntu Server 18.04 LTS**表示された一覧から。

1. **[作成]** ボタンをクリックして、VM の構成を始めます。

## <a name="configure-the-vm-settings"></a>VM 設定を構成する

ポータルで VM の作成エクスペリエンスは、VM の構成のすべての領域について説明するウィザード形式で表示されます。 クリックすると、**次** ボタンをクリックすると、次の構成可能なセクションです。 ただし、上部に並んでいるタブで各部分が示されており、自由にセクション間を移動できます。

![初期を示す Azure ポータルのスクリーン ショットでは、Ubuntu Server マシンの仮想マシンのブレードを作成します。](../media/3-azure-portal-create-vm.png)

ウィザード操作の残りの部分をスキップして使用して、VM の作成を開始できます (赤いアスタリスクで識別される) すべての必要なオプションで記入すると、**レビュー + 作成**下部にあるボタンをクリックします。

最初は **[基本]** セクションです。

### <a name="configure-basic-vm-settings"></a>VM の基本設定を構成する

[!include[](../../../includes/azure-sandbox-regions-first-mention-note.md)]

1. VM 時間の請求対象である **[サブスクリプション]** を選択します。

1. **リソース グループ**を選択します**既存を使用して、** 名前のリソース グループを選択して **<rgn>[サンド ボックス リソース グループ名]</rgn>** します。

    > [!NOTE]
    > 設定し、tab キーで移動の各フィールドを変更すると、Azure が各値を自動的に検証しをお勧めときに、その横にある緑色のチェック マークを配置します。 エラー インジケーターをポイントすると、検出された問題についての詳細が表示されます。

#### <a name="select-a-location"></a>場所を選択します。

<!-- Resource selection -->
[!include[](../../../includes/azure-sandbox-regions-first-mention-note.md)]

1. **インスタンスの詳細**セクションで、VM、web サーバーの名前を入力します。**テスト web eus vm1**します。 これは、環境を示します (**テスト**)、ロール (**web**)、場所 (**米国東部**)、service (**vm**)、インスタンス番号 (と**1**)。
    - その目的を簡単に識別できるように、リソース名を標準化することをお勧めします。 Linux VM の名前は、1 から 64 文字の範囲で、数字、文字、ダッシュで構成されている必要があります。

1. 近くのリージョンを選択します。 上記の使用可能な場所から 1 つ選択してください。

1. まま**可用性オプション**として**None**します。 このオプションを使用して、セットを扱う計画または計画外メンテナンス イベントや停止として複数の Vm をまとめてグループ化して、VM が高可用性を確認します。

1. イメージに設定されていることを確認**Ubuntu Server 18.04 LTS**します。 ドロップダウン リストを開いて、使用可能なすべてのオプションを確認できます。

1. **サイズ**フィールドを選択しは直接編集できませんが、 **DS2_v3**汎用のコンピューティングの選択肢の 1 つは、既定のサイズ。 この選択はパブリック Web サーバーに最適ですが、**[Change size]\(サイズの変更\)** リンクをクリックして他の VM サイズを調べます。 表示されるダイアログ ボックスでは、フィルター処理できます。 に基づいて**Cpu 数**、**名前**、および**ディスクの種類**します。 同じ選択**DS2_v3** 8 GB の RAM と 2 つの Vcpu を提供するには、選択します。

    > [!TIP]
    > ビューを左側にスライドして新しいウィンドウを開いたときの VM 設定に戻し、ウィンドウをスライドしてそれを表示することもできます。

1. **[ADMINISTRATOR ACCESS]\(管理者アクセス\)** セクションで、**[認証の種類]** に対して SSH 公開キー オプションを選択します。

1. SSH でサインインするために使用する**ユーザー名**を入力します。

1. 公開キー ファイルから SSH キーをコピーして、**[SSH 公開キー]** フィールドに貼り付けます。

> [!IMPORTANT]
> Azure ポータルに公開キーをコピーする場合は、任意の追加の空白または改行文字を追加しないように確認します。

1. **受信ポートの規則**セクションの一覧を開き、オフに**パブリック受信ポートがありません**します。 これは Linux VM なので、リモートで SSH を使用して VM にアクセスできるようにします。 見つかるまで、必要に応じて、一覧をスクロール**SSH (22)** して選択します。 UI の注意事項が示すとおり、VM を作成した後でネットワーク ポートを調整することもできます。

    ![SSH アクセス用の Linux VM を開くの説明に従って、管理者アカウントと受信ポートの設定を示す、Azure portal のスクリーン ショット。](../media/3-open-ports.png)

## <a name="configure-disks-for-the-vm"></a>VM 用にディスクを構成する

1. クリックして**次: ディスク >** に移動する、**ディスク**セクション。

    ![仮想マシン ブレードの作成のディスクのセクションを示す Azure ポータルのスクリーン ショット。](../media/3-configure-disks.png)

1. 選択**Premium SSD**の**OS ディスクの種類**します。

1. マネージド ディスクを使用するので、ストレージ アカウントを使用する必要はありません。 GUI でスイッチを切り替えて、Azure で必要な情報の違いを確認できます。

### <a name="create-a-data-disk"></a>データ ディスクを作成する

OS ディスク (開発/sda) と一時ディスク (開発/sdb)、私たちが取得することを思い出してください。 同様にデータ ディスクを追加してみましょう。

1. **[データ ディスク]** セクションで **[Create and attach a new disk]\(新しいディスクの作成とアタッチ\)** リンクをクリックします。

    ![新しいディスクのブレードの作成を示す Azure ポータルのスクリーン ショット。](../media/3-add-data-disk.png)

1. すべての既定値を実行できます: Premium SSD、1023 GB と**なし**(空のディスク) を使えば、スナップショットまたは Azure Blob storage VHD を作成するここでは、ことに注意してください。

1. **[OK]** をクリックしてディスクを作成し、**[データ ディスク]** セクションに戻ります。

1. 最初の行に新しいディスクが表示されるはずです。

    ![VM の作成プロセスを新しく作成されたデータ ディスクの行を示す Azure ポータルのスクリーン ショット。](../media/3-new-disk.png)

## <a name="configure-the-network"></a>ネットワークの構成方法

1. クリックして **[次へ]: ネットワーク >** に移動する、**ネットワーク**セクション。

1. 既に他のコンポーネントがある運用システムでは、"_既存の_" 仮想ネットワークを利用します。 これにより、VM は、ソリューション内の他のクラウド サービスと通信できます。 この場所でまだ定義されていない場合は、ここで作成して構成できます。
    - **アドレス空間**: このネットワークに使用できる全体的な IPV4 領域。
    - **サブネット範囲**: 最初のサブネット アドレス空間 - の分割に定義されたアドレス空間内に適合する必要があります。 VNet が作成された後、別のサブネットを追加できます。

> [!NOTE]
> 既定では、Azure によって VM 用に仮想ネットワーク、ネットワーク インターフェイス、パブリック IP が作成されます。 VM が作成された後、ネットワークのオプションを変更するには、常に Azure で作成したサービスのネットワークの割り当てを再確認容易ではありません。

## <a name="finish-configuring-the-vm-and-create-the-image"></a>VM の構成を完了してイメージを作成する

残りのオプションは既定値で問題ないので、どれも変更する必要はありません。 そうしたければ、他のタブを調べてもかまいません。 個々 のオプションが、`(i)`横にアイコンであり、オプションを説明するヘルプ ヒントが表示されます。 これは、VM 構成に使用できるさまざまなオプションについて説明する優れた方法です。

1. パネルの下部にある **[確認および作成]** ボタンをクリックします。

1. システムによってオプションが検証され、作成される VM についての詳細が表示されます。

1. **[作成]** をクリックして VM を作成し、デプロイします。 Azure ダッシュボードにはデプロイされている VM が表示されます。 これには数分かかる場合があります。

デプロイされている間に、この VM でできることを見てみましょう。