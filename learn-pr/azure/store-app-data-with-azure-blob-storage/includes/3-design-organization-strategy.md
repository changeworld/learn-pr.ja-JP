<span data-ttu-id="281ae-101">データを格納する必要があるアプリを設計するときは、そのアプリが、ストレージ アカウント、コンテナー、BLOB にわたってどのようにデータを整理するかについて考えることが重要です。</span><span class="sxs-lookup"><span data-stu-id="281ae-101">When designing an app that needs to store data, it's important to think about how the app is going to organize data across storage accounts, containers, and blobs.</span></span>

## <a name="storage-accounts"></a><span data-ttu-id="281ae-102">ストレージ アカウント</span><span class="sxs-lookup"><span data-stu-id="281ae-102">Storage accounts</span></span>

<span data-ttu-id="281ae-103">1 つのストレージ アカウントで BLOB を整理するのに十分な柔軟性がありますが、論理的にコストを分離し、データへのアクセス制御に必要な場合は、追加のストレージ アカウントを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="281ae-103">A single storage account is flexible enough to organize your blobs however you like, but you should use additional storage accounts as necessary to logically separate costs and control access to data.</span></span>

## <a name="containers-and-blobs"></a><span data-ttu-id="281ae-104">コンテナーと BLOB</span><span class="sxs-lookup"><span data-stu-id="281ae-104">Containers and blobs</span></span>

<span data-ttu-id="281ae-105">アプリケーションとアプリケーションが格納するデータの性質によって、コンテナーと BLOB の名前付けと整理の方法を決める必要があります。</span><span class="sxs-lookup"><span data-stu-id="281ae-105">The nature of your application and the data that it stores should drive your strategy for naming and organizing containers and blobs.</span></span>

<span data-ttu-id="281ae-106">データベースを含むストレージ スキームの一部として BLOB を使用しているアプリは、多くの場合、そのデータに関することを表示するのに、組織、名前付け、またはメタデータに大きく依存する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="281ae-106">Apps using blobs as part of a storage scheme that includes a database often don't need to rely heavily on organization, naming, or metadata to indicate anything about their data.</span></span> <span data-ttu-id="281ae-107">このようなアプリは一般的に、GUID のような識別子を BLOB 名として使用し、データベース レコードでこれらの識別子を参照します。</span><span class="sxs-lookup"><span data-stu-id="281ae-107">Such apps commonly use identifiers like GUIDs as blob names and reference these identifiers in database records.</span></span> <span data-ttu-id="281ae-108">アプリでは、データベースを使用して、BLOB が格納されている場所と BLOB に含まれているデータの種類を判断します。</span><span class="sxs-lookup"><span data-stu-id="281ae-108">The app will use the database to determine where blobs are stored and the kind of data they contain.</span></span>

<span data-ttu-id="281ae-109">その他のアプリでは、より個人のファイル システムに近い Azure Blob Storage を使用しているものもあります。この場合、意味と構造を示すためにコンテナーと BLOB の名前が使用されます。</span><span class="sxs-lookup"><span data-stu-id="281ae-109">Other apps may use Azure Blob storage more like a personal file system, where container and blob names are used to indicate meaning and structure.</span></span> <span data-ttu-id="281ae-110">この種のアプリでは、BLOB 名は、従来のファイル名に似ていることが多く、含まれているデータの種類を示すために `.jpg` のようなファイル名拡張子が含まれています。</span><span class="sxs-lookup"><span data-stu-id="281ae-110">Blob names in these kinds of apps will often look like traditional file names and include file name extensions like `.jpg` to indicate what kind of data they contain.</span></span> <span data-ttu-id="281ae-111">これらのアプリでは、BLOB を整理するために仮想ディレクトリ (下記参照) が使用され、BLOB とコンテナーに関する情報を格納するためにメタデータ タグが頻繁に使用されます。</span><span class="sxs-lookup"><span data-stu-id="281ae-111">They'll use virtual directories (see below) to organize blobs and will frequently use metadata tags to store information about blobs and containers.</span></span>

<span data-ttu-id="281ae-112">BLOB とコンテナーを整理して格納する方法を決定する際に、考慮すべきいくつかの重要事項があります。</span><span class="sxs-lookup"><span data-stu-id="281ae-112">There are a few key things to consider when deciding how to organize and store blobs and containers.</span></span>

### <a name="naming-limitations"></a><span data-ttu-id="281ae-113">名前付けの制限事項</span><span class="sxs-lookup"><span data-stu-id="281ae-113">Naming limitations</span></span>

<span data-ttu-id="281ae-114">コンテナーと BLOB の名前は、長さ制限や文字の制限を含む、一連の規則に従う必要があります。</span><span class="sxs-lookup"><span data-stu-id="281ae-114">Container and blob names must conform to a set of rules, including length limitations and character restrictions.</span></span> <span data-ttu-id="281ae-115">名前付け規則に関するより具体的な情報については、このモジュールの最後の「参考資料」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="281ae-115">See the Further Reading section at the end of this module for more specific information about naming rules.</span></span>

### <a name="public-access-and-containers-as-security-boundaries"></a><span data-ttu-id="281ae-116">パブリック アクセスとセキュリティ境界としてのコンテナー</span><span class="sxs-lookup"><span data-stu-id="281ae-116">Public access and containers as security boundaries</span></span>

<span data-ttu-id="281ae-117">既定では、すべての BLOB にはアクセスするための認証が必要です。</span><span class="sxs-lookup"><span data-stu-id="281ae-117">By default, all blobs require authentication to access.</span></span> <span data-ttu-id="281ae-118">ただし、個々のコンテナーは、認証がなくてもその BLOB のパブリック ダウンロードができるように構成できます。</span><span class="sxs-lookup"><span data-stu-id="281ae-118">However, individual containers can be configured to allow public downloading of their blobs without authentication.</span></span> <span data-ttu-id="281ae-119">この機能は、静的な Web サイト資産のホストやファイルの共有など、多くのユース ケースをサポートします。</span><span class="sxs-lookup"><span data-stu-id="281ae-119">This feature supports many use cases, such as hosting static website assets and sharing files.</span></span> <span data-ttu-id="281ae-120">BLOB コンテンツのダウンロードが、Web 経由での他の種類のデータの読み取りと同じように機能するため、ブラウザーや、BLOB URL で GET 要求ができるものをポイントするだけで済みます。</span><span class="sxs-lookup"><span data-stu-id="281ae-120">This is because downloading blob contents works the same way as reading any other kind of data over the web: you just point a browser or anything that can make a GET request at the blob URL.</span></span>

<span data-ttu-id="281ae-121">サーバー側のアプリに BLOB ストレージから直接ダウンロードしたデータによるトラフィックが生成されないため、パブリック アクセスを有効にすることはスケーラビリティにとって重要です。</span><span class="sxs-lookup"><span data-stu-id="281ae-121">Enabling public access is important for scalability because data downloaded directly from Blob storage doesn't generate any traffic in your server-side app.</span></span> <span data-ttu-id="281ae-122">パブリック アクセスの利点がすぐに得られない場合や、アプリケーション経由でデータへのアクセスを制御するためにデータベースを使用する場合でも、公開するデータ用に個別のコンテナーを使用することを計画してください。</span><span class="sxs-lookup"><span data-stu-id="281ae-122">Even if you don't immediately take advantage of public access or if you will use a database to control data access via your application, plan on using separate containers for data you want to be publicly available.</span></span>

> [!CAUTION]
> <span data-ttu-id="281ae-123">パブリック アクセス用に構成されたコンテナー内の BLOB は、そのストレージ URL を知っていれば、誰でもダウンロードでき、いかなる種類の認証や監査も必要としません。</span><span class="sxs-lookup"><span data-stu-id="281ae-123">Blobs in a container configured for public access can be downloaded without any kind of authentication or auditing by anyone who knows their storage URLs.</span></span> <span data-ttu-id="281ae-124">一般に共有する予定がない BLOB データをパブリック コンテナーに配置しないでください。</span><span class="sxs-lookup"><span data-stu-id="281ae-124">Never put blob data in a public container that you don't intend to share publicly.</span></span>

<span data-ttu-id="281ae-125">パブリック アクセスの他に、Azure には、コンテナーでのきめ細かいアクセス制御を可能にする Shared Access Signature 機能があります。</span><span class="sxs-lookup"><span data-stu-id="281ae-125">In addition to public access, Azure has a shared access signature feature that allows fine-grained permissions control on containers.</span></span> <span data-ttu-id="281ae-126">正確なアクセス制御により、スケーラビリティをさらに向上させるシナリオが可能になります。そのため、一般的にセキュリティ境界としてのコンテナーを考えることがガイドラインとして役立ちます。</span><span class="sxs-lookup"><span data-stu-id="281ae-126">Precision access control enables scenarios that further improve scalability, so thinking about containers as security boundaries in general is a helpful guideline.</span></span>

### <a name="blob-name-prefixes-virtual-directories"></a><span data-ttu-id="281ae-127">BLOB 名のプレフィックス (仮想ディレクトリ)</span><span class="sxs-lookup"><span data-stu-id="281ae-127">Blob name prefixes (virtual directories)</span></span>

<span data-ttu-id="281ae-128">技術的には、コンテナーは "フラット" で、いかなる種類の入れ子または階層もサポートしません。</span><span class="sxs-lookup"><span data-stu-id="281ae-128">Technically, containers are "flat" and do not support any kind of nesting or hierarchy.</span></span> <span data-ttu-id="281ae-129">しかし、BLOB にファイル パスのような階層名 (`finance/budgets/2017/q1.xls` など) を付けると、API の一覧表示操作によって結果を特定のプレフィックスにフィルター処理できます。</span><span class="sxs-lookup"><span data-stu-id="281ae-129">But if you give your blobs hierarchical names that look like file paths (such as `finance/budgets/2017/q1.xls`), the API's listing operation can filter results to specific prefixes.</span></span> <span data-ttu-id="281ae-130">これにより、ファイルとフォルダーの階層的なシステムのように、一覧内を移動できるようになります。</span><span class="sxs-lookup"><span data-stu-id="281ae-130">This allows you to navigate the list as if it was a hierarchical system of files and folders.</span></span>

<span data-ttu-id="281ae-131">この機能は、一部のツールとクライアント ライブラリでファイル システムのように BLOB ストレージを視覚化して移動するために使用されているため、一般に*仮想ディレクトリ*と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="281ae-131">This feature is often called *virtual directories* because some tools and client libraries use it to visualize and navigate Blob storage as if it was a file system.</span></span> <span data-ttu-id="281ae-132">フォルダーを移動するたびに、そのフォルダー内の BLOB を一覧表示する別の呼び出しがトリガーされます。</span><span class="sxs-lookup"><span data-stu-id="281ae-132">Each folder navigation triggers a separate call to list the blobs in that folder.</span></span>

<span data-ttu-id="281ae-133">BLOB にファイル名のような名前を使用するのは、複雑な BLOB データを整理および移動するための一般的な手法です。</span><span class="sxs-lookup"><span data-stu-id="281ae-133">Using names that are like file names for blobs is a common technique for organizing and navigating complex blob data.</span></span>

### <a name="blob-types"></a><span data-ttu-id="281ae-134">BLOB の種類</span><span class="sxs-lookup"><span data-stu-id="281ae-134">Blob types</span></span>

<span data-ttu-id="281ae-135">データを格納できる BLOB には、次の 3 種類があります。</span><span class="sxs-lookup"><span data-stu-id="281ae-135">There are three different kinds of blobs you can store data in:</span></span>

- <span data-ttu-id="281ae-136">**ブロック BLOB** は、個別にまたは並列でアップロードできる異なるサイズのブロックで構成されます。</span><span class="sxs-lookup"><span data-stu-id="281ae-136">**Block blobs** are composed of blocks of different sizes that can be uploaded independently and in parallel.</span></span> <span data-ttu-id="281ae-137">ブロック BLOB に書き込むには、データをブロックにアップロードして、それを BLOB にコミットする必要があります。</span><span class="sxs-lookup"><span data-stu-id="281ae-137">Writing to a block blob involves uploading data to blocks and committing them to the blob.</span></span>
- <span data-ttu-id="281ae-138">**追加 BLOB** は、新しいデータの追加だけをサポートする (既存のデータの更新または削除はサポートされません) 特殊なブロック BLOB ですが、データの追加には非常に効率的です。</span><span class="sxs-lookup"><span data-stu-id="281ae-138">**Append blobs** are specialized block blobs that support only appending new data (not updating or deleting existing data), but they're very efficient at it.</span></span> <span data-ttu-id="281ae-139">追加 BLOB はログの格納やストリーミングされるデータの書き込みのようなシナリオに適しています。</span><span class="sxs-lookup"><span data-stu-id="281ae-139">Append blobs are great for scenarios like storing logs or writing streamed data.</span></span>
- <span data-ttu-id="281ae-140">**ページ BLOB** は、ランダム アクセスの読み取りと書き込みを伴うシナリオ用に設計されています。</span><span class="sxs-lookup"><span data-stu-id="281ae-140">**Page blobs** are designed for scenarios that involve random-access reads and writes.</span></span> <span data-ttu-id="281ae-141">ページ BLOB は Azure Virtual Machines で使用される仮想ハード ディスク (VHD) ファイルの格納に使用されますが、ランダム アクセスを伴うすべてのシナリオに適しています。</span><span class="sxs-lookup"><span data-stu-id="281ae-141">Page blobs are used to store the virtual hard disk (VHD) files used by Azure Virtual Machines, but they're great for any scenario that involves random access.</span></span>

<span data-ttu-id="281ae-142">追加 BLOB やページ BLOB を特に必要としないほとんどのシナリオには、ブロック BLOB が最適な選択肢です。</span><span class="sxs-lookup"><span data-stu-id="281ae-142">Block blobs are the best choice for most scenarios that don't specifically call for append or page blobs.</span></span> <span data-ttu-id="281ae-143">そのブロック ベースの構造では、非常に高速のアップロードとダウンロード、および BLOB の個々の部分への効率的なアクセスがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="281ae-143">Their block-based structure supports very fast uploads and downloads and efficient access to individual pieces of a blob.</span></span> <span data-ttu-id="281ae-144">ブロックの管理とコミットのプロセスは、ほとんどのクライアント ライブラリによって自動的に処理され、一部ではパフォーマンスを最大化するために並列アップロードとダウンロードも処理されます。</span><span class="sxs-lookup"><span data-stu-id="281ae-144">The process of managing and committing blocks is automatically handled by most client libraries, and some will also handle parallel uploads and downloads to maximize performance.</span></span>