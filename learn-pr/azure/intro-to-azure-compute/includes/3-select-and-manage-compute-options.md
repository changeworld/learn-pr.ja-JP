利用できる Azure コンピューティング サービスの概要がわかったので、各サービスをどのようなときに使用すればよいか決められるように各サービスを詳しく見ていきましょう。

## <a name="azure-virtual-machines"></a>Azure 仮想マシン

:::row:::
  :::column:::
    ![Azure 仮想マシンを表すイメージ](../media/3-azure-vms.png)
  :::column-end:::
  :::column span="3":::
オペレーティング システムと環境を完全に制御する必要がある場合は、仮想マシンが理想的な選択肢です。 物理コンピューターと同じように、VM で実行されているすべてのソフトウェアをカスタマイズすることができます。 これは特に、カスタム ソフトウェアまたはカスタム ホスト構成を実行するときに適しています。
  :::column-end:::
:::row-end:::

物理サーバーからクラウドに移行するときも、VM が優れた選択肢です。 多くの場合、物理サーバーのイメージを作成し、仮想マシン内でそれをホストできます。 これにより、オペレーティング システムとアプリケーション実行環境を完全に自由に選択でき、好みのツールを使用するほぼすべての言語で開発することができます。

ただし、仮想マシンを維持する必要があります。 これは、オペレーティング システムとそこで実行されているソフトウェアを更新することを意味します。 

また、スケーリングするときもいっそうの考慮が必要です。 仮想マシンをスケールアップできます。つまり、コンピューティング リソースとメモリ リソースを追加できます。 ただし、複数のインスタンスを並列で実行したり、スケールアウトしたりする必要がある場合、ロード バランサーのようなサービスを追加する必要があることがあります。

そこで、処理する必要がある天文学の画像を科学者がアップロードできるようにする Web サイトを運用していることを想像してください。 VM を複製した場合、複数の Web サイト VM インスタンス間で要求をルーティングするサービスを追加する必要があります。

Azure では高度な仮想マシン サービスも利用できます。

- 同じように構成された VM で同じアプリまたはアプリ セットの常に使用可能なインスタンスを実行する必要がある場合は、**Virtual Machine Scale Sets** オプションを使用します。 何千もの同一の VM が自動的に生成されてアプリケーションが分単位で読み込まれるので、ユーザーは待つ必要がありません。 また、仮想マシンを事前にプロビジョニングする必要がないため、いつでもアプリケーションで必要なコンピューティング リソースだけが使用されます。

- 何十、何百、または数千もの VM にスケーリングする機能を備えたクラウド規模のジョブ スケジューリングおよびコンピューティング管理が必要な場合は、**Batch** オプションを使用します。 手が加えられていないコンピューティング能力またはスーパーコンピューター レベルのコンピューティング パワーが必要な場合があります。Azure ではこれらの機能が提供されます。

## <a name="azure-containers"></a>Azure コンテナー

:::row:::
  :::column:::
    ![Azure コンテナーを表すイメージ](../media/3-azure-containers.png)
  :::column-end:::
  :::column span="3":::
単一の仮想マシンでアプリケーションの複数のインスタンスを実行したい場合は、コンテナーが優れた選択肢です。 コンテナー オーケストレーターで、必要に応じてアプリケーション インスタンスを開始、停止、スケールアウトできます。
  :::column-end:::
:::row-end:::

#### <a name="vms-versus-containers"></a>コンテナーと VM

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yuaq]

コンテナーは、ソリューションを小さな部分に分割するためによく使用されるため、マイクロサービス アーキテクチャを使用してソリューションを作成するのによく使用されます。 たとえば、1 つの Web サイトを、フロントエンドをホストするコンテナー、バックエンドをホストするコンテナー、ストレージ用の 3 つ目のコンテナーに分割できます。 これにより、独立して維持、スケーリング、更新できる論理的なセクションに、アプリの部分を分離することができます。

#### <a name="what-is-a-microservice"></a>マイクロサービスとは

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yual]

Web サイトのバックエンドは容量に達したけれども、フロントエンドとストレージはまだ余裕がある場合を想像してください。 バックエンドを個別にスケーリングして、パフォーマンスを向上させることも、別のストレージ サービスを使用することもできます。 または、アプリケーションの他の部分に影響を与えずに、ストレージ コンテナーを置き換えることもできます。

チームが Kubernetes コンテナー オーケストレーションを使い慣れている場合は、**Azure Kubernetes Service (AKS)** オプションを検討します。 このオプションは、Kubernetes オーケストレーションの管理、展開、操作を簡素化および自動化します。

#### <a name="what-is-kubernetes"></a>Kubernetes とは

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yEuX]

## <a name="azure-functions"></a>Azure Functions

:::row:::
  :::column:::
    ![Azure Functions を表すイメージ](../media/3-azure-functions.png)
  :::column-end:::
  :::column span="3":::
サービスを実行しているコードのみに関心があり、基になるプラットフォームやインフラストラクチャには関心がない場合は、Azure Functions が最適です。 REST 要求、タイマー、または別の Azure サービスからのメッセージによるイベントに応答して処理を実行する必要があり、数秒以内にすばやく処理を完了できる場合に、よく使用されます。
  :::column-end:::
:::row-end:::

Azure Functions は自動的にスケーリングされるので、需要が変化する場合に確実な選択肢であり、関数がトリガーされたときにのみ課金されます。 たとえば、配送車群を監視するために使用されている IoT ソリューションからのメッセージを受信するような場合があります。 業務時間中は受信データが増える可能性があります。

さらに、Azure Functions はステートレスであり、イベントに応答するたびに再起動されたかのように動作します。 これは、受信データを処理するために最適です。 状態が必要な場合は、Azure ストレージ サービスに接続できます。
