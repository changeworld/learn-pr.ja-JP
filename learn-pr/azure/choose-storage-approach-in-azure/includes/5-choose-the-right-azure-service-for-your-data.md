正しいストレージ ソリューションを選択することは、パフォーマンスの向上、コストの削減、管理性の向上につながります。 ここでは、オンライン小売りシナリオでのデータについて学習したことを適用して、各データ セットに最適な Azure サービスを見つけます。 

## <a name="product-catalog-data"></a>製品カタログ データ

**データ分類:** 新製品に向けてスキーマを拡張または変更する必要があるため、半構造化

**操作:**

- 顧客は、データベース内の多くのフィールドを照会する機能と共に、多数の読み取り操作を必要とします。
- 店側では、常に変化する在庫を追跡するために多数の書き込み操作が必要です。

**待機時間とスループット:** 高スループットと低遅延

**トランザクションのサポート:** 必須

### <a name="recommended-service-azure-cosmos-db"></a>推奨されるサービス: Azure Cosmos DB

Azure Cosmos DB では、設計上、半構造化データつまり NoSQL データがサポートされます。 そのため、"bluetooth"フィールドや、将来、必要な新しいフィールドなどの新しいフィールドをサポートしている、Azure Cosmos DB で指定します。

Azure Cosmos DB は、クエリの SQL をサポートし、既定ですべてのプロパティのインデックスを作成します。 クエリを作成するには、お客様は、カタログ内の任意のプロパティでフィルター処理できるようにします。

Azure Cosmos DB は ACID に準拠しているので、トランザクションは厳密な要件に従って完了します。

さらに、Azure Cosmos DB ではボタンをクリックするだけで世界中のどこにでもご利用のデータをレプリケートできます。 そのため、e コマース サイトに集中するが、米国、フランス、イングランドでユーザーがある場合は、ユーザーに近い位置でデータを物理的に移動したように、待機時間を短縮するこれらのデータ センターに、データをレプリケートできます。 

世界では、レプリケートされたデータを使用しても、5 つの一貫性レベルのいずれかから選択できます。 適切な整合性レベルを選択することで、整合性、可用性、待機時間、スループットの間のトレードオフを決定できます。 ショッピングが増える期間は高い顧客需要を処理するようにスケールアップし、少なくなったらコストを節約するためにスケールダウンすることができます。

### <a name="why-not-other-azure-services"></a>他の Azure サービスにしない理由

新製品ごとにスキーマを拡張する必要がない場合、Azure SQL Database がこのデータ セットに対する最適な選択となります。 Azure SQL Database では、すべてのデータをスキーマに準拠する必要があります。 Azure SQL Database は、Azure Cosmos DB と同じ利点の多くを指定できますが、異種データを処理できません。 

Azure Table Storage、HDInsight の一部としての Azure HBase、Azure Redis Cache などの他の Azure サービスも、NoSQL データを格納できます。 このシナリオでは、ユーザーが Azure Cosmos DB より適したように複数のフィールドに対してクエリを実行する必要があります。 Azure Cosmos DB では、すべてのフィールドは既定では、インデックス作成が、他のサービスは、インデックス データの制限とパフォーマンスの低下のフィールドのインデックスのない結果にクエリします。

## <a name="photos-and-videos"></a>写真とビデオ

**データの分類:** 非構造化

**操作:**

- ID による取得だけが必要です。
- お客様では、短い待機時間で多数の読み取り操作が必要です。
- 作成と更新はあまり頻繁ではなく、読み取り操作より待機時間が長くてもかまいません。

**待機時間とスループット**: ID による検索では、低遅延と高スループットをサポートする必要があります。 作成と更新は、読み取り操作より待機時間が長くてもかまいません。

**トランザクションのサポート:** 不要

### <a name="recommended-service-azure-blob-storage"></a>推奨されるサービス: Azure BLOB ストレージ

Azure BLOB ストレージでは、写真やビデオなどのファイルを格納できます。 Azure Content Delivery Network (CDN) では、最もよく使用されるコンテンツのキャッシュをエッジ サーバーに格納することもは機能します。 Azure CDN では、それらのイメージをユーザーに提供して待機時間が減少します。

Azure Blob storage を使用すると、クールまたはアーカイブ ストレージ層をホット ストレージ層からイメージを移動することも、コストの削減とフォーカスのスループット、最も頻繁に画像やビデオを表示します。

### <a name="why-not-other-azure-services"></a>他の Azure サービスにしない理由

アプリを実行しているのと同じサーバーが、イメージを提供しているようにを Azure App Service に、イメージをアップロードする可能性があります。 このソリューションは、多数のファイルを持っていない場合は有効です。 しかし、ファイルが多い場合、およびグローバルなユーザーに対しては、Azure BLOB ストレージと Azure CDN を使用した方が、より高いパフォーマンスの結果を得られます。

## <a name="business-data"></a>ビジネス データ

**データの分類:** 構造化

**操作:** 複数のデータベースにわたる読み取り専用の複雑な分析クエリ

**待機時間とスループット:** クエリの複雑さによっては、結果においてある程度の待機時間が予想されます。

**トランザクションのサポート:** 必須

### <a name="recommended-service-azure-sql-database"></a>推奨されるサービス: Azure SQL Database

ほとんどの場合、ビジネス データのクエリはビジネス アナリストによって行われ、アナリストは他のクエリ言語より SQL をよく知っていると思われます。 Azure SQL Database だけでもソリューションとして使用できますが、Azure SQL Database と Azure Analysis Services を組み合わせると、SQL Database 内のデータに対するセマンティック モデルをデータ分析によって作成することができます。 データ アナリストを共有できますが、ビジネス ユーザーのみをデータを探索して洞察をすぐに任意のビジネス インテリジェンス (BI) ツールからモデルに接続する必要があるため。 

### <a name="why-not-other-azure-services"></a>他の Azure サービスにしない理由

Azure SQL Data Warehouse では OLAP ソリューションと SQL クエリがサポートされます。 しかし、ビジネス アナリストはクロス データベース クエリを実行する必要がありますが、それは Azure SQL Data Warehouse ではサポートされていません。

Azure SQL Database に加えて Azure Analysis Services を使用することが可能です。 Power BI で操作するために、ビジネス アナリストはよりよりも SQL に精通します。 そのため、SQL クエリをサポートしているデータベースを好みますが、Azure Analysis Services ではそれはサポートされていません。 さらに、ビジネス データ セットに格納する財務データは、リレーショナルで多次元であるという性質を持っています。 Azure Analysis Services ではサービス自体に格納された表形式のデータはサポートされますが、多次元データはサポートされません。 Azure Analysis Services での多次元データを分析するには、SQL Database への直接クエリを使用できます。

Azure Stream Analytics はデータを分析して、それをアクションにつながる分析情報に変換する優れた手段ですが、それによって重視されるのはストリーミングされるリアルタイム データとなります。 このシナリオでビジネス アナリストは履歴データのみを検索します。

## <a name="summary"></a>まとめ

データの種類ごとに別の記憶域の要件と、ジョブに最適なソリューションを確認します。 常にデータを必要な操作の種類を考慮待機時間、およびトランザクションのサポートの必要性が必要です。