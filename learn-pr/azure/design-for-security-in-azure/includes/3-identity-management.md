Lamna Healthcare では、医師が患者の医療データを管理するための従来の内部アプリケーションと Web ポータルをホストしています。 組織では、多くの場合、オンサイトで患者を介護するため、ネットワーク外にいる介護士がこのアプリケーションを利用できるようにしてほしいという多くの要望を受けています。 

悪意のあるエージェントによる最近のデータ リークにより、企業はそのパスワード ポリシーを強化することを余儀なくされています。 ユーザーは現在、自分のパスワードをより頻繁に変更し、また、より長い複雑なパスワードを使用する必要があります。 ユーザーはさまざまな管理者ロール用に作成された複数の資格情報セットを覚えておくのに苦労するため、複雑なパスワードを安全でない方法で記録するという望ましくない副作用につながっています。 

内部および外部のアプリケーション、シングル サインオン (SSO) および多要素認証 (MFA) の利点がありますが、id のセキュリティを提供するためのセキュリティ層としての id について説明し、レプリケートを検討する理由オンプレミス id を Azure にここでは、Active Directory。

## <a name="identity-as-a-layer-of-security"></a>セキュリティ層としての ID

デジタル ID は、現在のオンプレミスとオンラインでのビジネスおよびソーシャル インタラクションの不可欠な部分です。 これまでは、ID およびアクセス サービスは、専用の Kerberos や LDAP などのプロトコルを使用する、会社の内部ネットワーク内での運用に限定されていました。 ここ最近では、モバイル デバイスが、ユーザーがデジタル サービスとやりとりする主な手段となっています。 顧客と従業員は同様にいつでもどこからでもサービスにアクセスできることを期待しています。このことが、多くのさまざまなデバイスとオペレーティング システムの間でインターネット規模で動作できる ID プロトコルの開発を促しています。

アーキテクチャの ID に関する機能が評価されるため、Lamna Healthcare ではアプリケーションに次の機能を導入できる方法を模索しています。

- アプリケーション ユーザーにシングル サインオンを提供する
- レガシ アプリケーションを強化して最小限の労力で先進認証を使用できるようにする
- 会社のネットワーク外でのすべてのログインに多要素認証を適用する
- 患者が自分のアカウント データを登録し、安全に管理できるようにアプリケーションを開発する

## <a name="single-sign-on"></a>シングル サインオン

ユーザーが管理する必要がある ID が多くなればなるほど、資格情報に関するセキュリティ インシデントのリスクが高まります。 ID が多くなると、覚えておく必要があり、また変更する必要があるパスワードが増えることになります。 パスワード ポリシーはアプリケーションによって異なる場合があり、複雑さの要件が増えるほど、ユーザーはパスワードを覚えておくことがより困難になります。

その一方で、それらすべての ID を管理する必要があります。 ヘルプ デスクにはさらに負担がかかります。アカウントのロックアウトやパスワードのリセット要求に対応する必要があるためです。 ユーザーが退職した場合、その ID をすべて追跡し、無効になっていることを確認することが困難である可能性があります。 ID を見落とした場合、除外しておくべきアクセスが許可される可能性があります。

シングル サインオンの場合、ユーザーは 1 つの ID と 1 つのパスワードを覚えておくだけで済みます。 アプリケーション間でのアクセスはユーザーに関連付けられている単一の ID に許可され、セキュリティ モデルが簡素化されます。 ユーザーがロールを変更したか、退職したときに、アクセス変更が単一の ID に関連付けられ、アカウントを変更したり、無効にするために必要な労力が大幅に減少します。 アカウントにシングル サインオンを利用することで、ユーザーは自分の ID を管理しやすくなり、ご利用の環境内でのセキュリティ機能が強化されます。

### <a name="sso-with-azure-active-directory"></a>Azure Active Directory での SSO

Azure Active Directory (AD) はクラウド ベースの ID サービスです。 既存のオンプレミスの Active Directory と同期するためのサポートが組み込まれています。スタンドアロンとして使用することもできます。

つまり、アプリケーションがオンプレミスであるか、クラウド (Office 365 を含む) にあるか、さらにはモバイルであるかに関係なく、すべてのアプリケーションで同じ資格情報を共有することができます。 

管理者と開発者は、Azure AD で構成され、一元管理されたルールとポリシーを使用して、データやアプリケーションへのアクセスを制御できます。

さらに、Microsoft では独自に複数のデータ ソースをインテリジェント セキュリティ グラフにまとめているため、Azure Active Directory のすべてのアカウント (お使いのオンプレミス AD から同期されているアカウントであっても) に対する脅威分析とリアルタイムの ID 保護を提供できます。

### <a name="synchronize-directories-with-ad-connect"></a>ディレクトリと AD Connect を同期させる

Azure AD Connect では、オンプレミスのディレクトリと Azure Active Directory を統合します。 Azure AD Connect では最新機能が提供されます。Azure AD Connect は、DirSync や Azure AD Sync などの古いバージョンの ID 統合ツールに代わるものです。

1 つのツールの同期を容易に展開できるエクスペリエンスを提供し、サインインすることをお勧めします。

![AAD Connect](../media-draft/AADCONNECTxprs_960.jpg)

Lamna Healthcare では、主にオンプレミスの DC に対する認証が必要ですが、ディザスター リカバリー シナリオでのクラウド認証も必要です。 Azure AD でまだサポートされていない要件はありません。

Lamna Healthcare は、次の構成で進めることにしました。

- Azure AD Connect を使用して、グループ、ユーザー アカウント、および Azure AD には、オンプレミス Active Directory に格納されているパスワード ハッシュを同期するには
  - パススルー認証を利用できない場合、これをバックアップとして使用できます
- オンプレミスの Windows Server 上にインストールされているオンプレミスの認証エージェントを使用するパススルー認証を構成します
- Azure AD のシームレス シングル サインオン機能を使用して、オンプレミスのドメインに参加している PC から自動的にユーザーにサインインします
  - 複数の認証要求を抑制することでユーザーの摩擦が軽減します

## <a name="authentication--access"></a>認証とアクセス

Lamna Healthcare のセキュリティ ポリシーでは、会社の境界ネットワーク外で行われるすべてのログインを追加の認証要素で認証することが求められます。 この要件は、Azure AD サービスの 2 つの側面を組み合わせた: 多要素認証と条件付きアクセス ポリシー。

### <a name="multi-factor-authentication"></a>多要素認証

多要素認証 (MFA) では、完全な認証のために 2 つ以上の要素を必要とすることで、ID のセキュリティが強化されます。 これらの要素は、次の 3 つのカテゴリに分類されます。

- *ユーザーが知っているもの*
- *ユーザーが持っているもの*
- *ユーザー自身*

**ユーザーが知っているもの**は、パスワード、あるいはセキュリティの質問に対する答えです。 **ユーザーが持っているもの**は、通知を受け取るモバイル アプリまたはトークンを生成するデバイスです。 **ユーザー自身**は通常、多くのモバイル デバイスで使用される指紋や顔スキャンなどの、ある種の生体認証です。

多要素認証を使用して、資格情報の露出の影響を限定することで、ID のセキュリティが強化されます。 ユーザーのパスワードを持つ攻撃者も、完全に認証するためには自分の電話や顔が必要になります。 確認された単一要素のみの認証では十分ではなく、攻撃者は資格情報を使用して認証できなくなります。 セキュリティにもたらされるこの利点は大きく、可能な限り、MFA を有効にするために十分に繰り返すことはできません。

Azure AD には MFA 機能が組み込まれており、他のサード パーティの MFA プロバイダーと統合されます。 これらは機密性の高いアカウントであるため、Azure AD の全体管理者ロールを持つすべてのユーザーに無料で提供されます。 その他のすべてのアカウントでは MFA を有効にすることができます。その場合、この機能を持つライセンスを購入し、ライセンスをアカウントに割り当てます。

### <a name="conditional-access-policies"></a>条件付きアクセス ポリシー

MFA と共に、アクセスを許可する前に追加の要件が満たされていることを確認することで、別の保護層を追加することができます。 不審な IP アドレスからログインをブロックまたはマルウェア保護されていないデバイスからのアクセスを拒否する可能性がありますから危険なアクセスを制限するサインインします。

Azure Active Directory では、グループ、場所、またはデバイスの状態に基づくアクセス ポリシーに関するサポートを含む、条件付きアクセス ポリシー (CAP) 機能が提供されます。 で場所の機能には、ネットワークに属していない IP アドレスを区別するために Lamna ができ、このようなすべての場所から多要素認証を要求するには、そのセキュリティ ポリシーを満たしています。

Lamna Healthcare では、ユーザーが会社のネットワーク外の IP アドレスからアクセスする際に MFA を求める[条件付きアクセス ポリシー](https://docs.microsoft.com/azure/active-directory/conditional-access/overview)が作成されています。

![条件付きアクセス](../media-draft/conditional-access.png)

## <a name="securing-legacy-applications"></a>レガシ アプリケーションのセキュリティ保護

Lamna Healthcar の従業員は、オンプレミスでホストされている管理アプリケーションに対するセキュリティで保護されたリモート アクセスが必要です。 ユーザーは現在、企業のファイアウォールの背後にある、ドメインに参加しているコンピューターから Windows 統合認証 (WIA) を使用してアプリケーションに対して認証を行っています。 アプリケーションに最新の認証メカニズムを組み込むプロジェクトを計画すると、できるだけ早く、リモート アクセス機能を有効にする大きなプレッシャーがあります。 Azure アプリケーション プロキシすばやく、簡単、かつ安全に許可できます、アプリケーションにコード変更なしでリモート アクセスできます。

Azure AD アプリケーション プロキシの特徴:

- シンプル
  - アプリケーション プロキシを使用するためにアプリケーションを変更または更新する必要はありません。
  - ユーザーに一貫性のある認証エクスペリエンスが提供されます。 MyApps ポータルを使用して、クラウド内の SaaS アプリとオンプレミスのアプリの両方でシングル サインオンを取得できます。
- セキュリティ保護
  - Azure AD アプリケーション プロキシを使用してアプリを発行するときは、Azure の豊富な承認制御とセキュリティ分析を活用できます。 クラウド スケールのセキュリティと、条件付きアクセスや 2 段階認証などの Azure セキュリティ機能が提供されます。
  - ユーザーにリモート アクセスを許可するためにファイアウォールを介した着信接続を開く必要はありません。
- 高いコスト効率
  - アプリケーション プロキシはクラウドで動作するため、時間とコストを節約できます。 オンプレミスのソリューションでは、通常、DMZ、エッジ サーバー、またはその他の複雑なインフラストラクチャを設定して維持する必要があります。

Azure AD アプリケーション プロキシは 2 つのコンポーネントで構成されます: 企業ネットワークと外部エンドポイント、MyApps ポータルまたは外部の URL 内での Windows サーバー上にあるコネクタ エージェント。 ユーザーはエンドポイントに移動したときに、Azure AD で認証され、コネクタ エージェント経由でオンプレミス アプリケーションにルーティングされます。

## <a name="working-with-consumer-identities"></a>コンシューマー ID の操作

以降、既存のアプリケーションと最新の認証の統合、Lamna 医療は迅速に確認して、電源管理対象 id システムなど、Azure AD は、自分の組織にもたらすことができます。 リーダーシップ チームが Microsoft id サービスがビジネス価値を追加するその他の方法の学習に関心があるようになりました。 外部の顧客や既存顧客とのやり取りの最新化でした Google、Facebook、LinkedIn などのサード パーティの id プロバイダーとの緊密な統合を提供する方法で、注意が重点を置いたがようになりました。

Azure AD B2C は、アプリケーション使用時の顧客のサインアップ、サインイン、プロファイル管理の方法をカスタマイズして制御できる Azure Active Directory の強固な基盤に築かれた ID 管理サービスです。 これには特に iOS、Android、.NET 用に開発されたアプリケーションが含まれます。 Azure AD B2C ではソーシャル ID ログイン エクスペリエンスが提供され、同時に顧客の ID プロファイル情報が保護されます。 Azure AD B2C ディレクトリは標準の Azure AD ディレクトリとは区別されており、Azure Portal で作成することができます。

## <a name="identity-management-at-lamna-healthcare"></a>Lamna Healthcare での ID 管理

ここでは、Lamna Healthcare で Azure の ID 管理ソリューションを使用して、環境のセキュリティを強化する方法について説明しました。 ユーザーが処理する必要があるアカウントを最小限に抑え、過度なアカウントによる運用の複雑さを減らすため、ユーザーにシングル サインオン エクスペリエンスを提供することから始めました。 アプリケーションへのアクセスに MFA を適用し、最小限の労力で先進認証を使用できるようにレガシ アプリケーションを更新しました。 また、顧客 ID を操作しやくして、患者がアプリケーションをより使いやすくする方法を学習しました。

## <a name="summary"></a>まとめ

このユニットでは、多くの Azure Active Directory 機能を組み合わせて、場所に関係なく、アプリケーションへのアクセスをセキュリティで保護するために強固な ID ソリューションを提供する方法を確認しました。 ID はセキュリティの重要な層です。 適切に設計し、アーキテクチャに組み込むことで、安全な環境を確保できます。