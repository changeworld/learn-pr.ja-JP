構築する環境用のコスト見積もりを作成する方法を確認し、いくつかのツールを使ってどの部分にコストがかかるかについて詳しく説明し、将来のコストを予想しました。 次の課題は、そのインフラストラクチャ コストを削減する方法の確認です。

## <a name="use-reserved-instances"></a>予約インスタンスを使用する

本質的に静的で予測可能な VM ワークロード、特にそれが年中無休で実行されている場合、予約インスタンスを使用することが、VM のサイズによっては最大 70% から 80% の節約が見込める素晴らしい方法です。 次の図では、Azure 予約インスタンスを使用することで最大 72% が節約され、予約インスタンスに加えて Azure ハイブリッド特典を使用することで最大 80% が節約されることを確認できます。

![Azure 予約インスタンスと Azure ハイブリッド特典を使用した場合のコスト面の長所を従量課金との比較で示した図。](../media-drafts/4-savings-coins.png)

予約インスタンスは 1 年または 3 年単位で購入でき、全額前払いとなります。 購入後、Microsoft ではその予約と実行中のインスタンスを突き合わせ、予約の時間を減らしていきます。 Azure portal から予約を購入することができます。 また、予約インスタンスはコンピューティング割引であるため、Windows と Linux の両方の VM で利用可能です。

## <a name="right-size-underutilized-virtual-machines"></a>使用率が低い仮想マシンのサイズを適切に設定する

Azure Cost Management と Azure Advisor によって VM の適切なサイズ設定またはシャットダウンが推奨される場合があるという、上記の説明を思い出してください。 仮想マシンの適切なサイズ設定は、仮想マシンを適切なサイズに変更するプロセスです。 たとえば、ドメイン コントローラーとして実行しているサーバーがあり、サイズは **Standard_D4sv3** として設定されていますが、多くの時間はご利用の VM が 90% アイドル状態にあるとします。 この VM のサイズを **Standard_D2sv3** に変更することで、コンピューティング コストを 50% 減らすことができます。 同じシリーズのより大きいサイズについては、コストはそれぞれ線形であり、2 倍になります。 この場合、インスタンス シリーズを変更することで、VM シリーズのコストが低くなる可能性もあります。 次の図では、同じシリーズ内で 1 つサイズを下げたことで 50% の節約を達成しています。

![使用率の低い仮想マシンのサイズを下げることで節約を達成したことを示す図。](../media-drafts/4-vm-resize.png)

サイズ超過の仮想マシンがあると、Azure に一般的な不要経費がかかりますが、簡単に修正できます。 Azure portal、Azure PowerShell、または Azure CLI を使用して、VM のサイズを変更することができます。

> [!NOTE]
> VM のサイズを変更するには、VM を停止し、サイズを変更してから再起動する必要があります。 サイズ変更の大きさによっては、数分かかる場合があります。 停止を計画するか、このタスクの実行中に別のインスタンスにトラフィックをシフトします。

## <a name="deallocate-virtual-machines-in-off-hours"></a>業務時間外に仮想マシンの割り当てを解除する

仮想マシンのワークロードが使用されるのは特定の期間のみであるにもかかわらず、毎日 1 時間ごとに実行している場合、コストの無駄になります。 このような VM については、使用していないときにシャットダウンし、スケジュールに従ってバックアップを開始することをお勧めします。そうすれば、VM の割り当てが解除されている間、コンピューティング コストを節約できます。

この方法は開発環境用の優れた戦略です。 業務時間外にシステムの割り当てを柔軟に解除し、コンピューティング コストが発生しないようにして、業務時間にのみ開発を行うことがよくあります。 Azure では、環境内で[自動ソリューション](https://docs.microsoft.com/azure/automation/automation-solution-vm-management)を完全に利用できるようになりました。

仮想マシンで自動シャットダウン機能を使用して、自動シャットダウンのスケジュールを設定することもできます。

![自動シャットダウン](../media-drafts/4-vm-auto-shutdown.png)

## <a name="delete-unused-virtual-machines"></a>使用されていない仮想マシンを削除する 

 このアドバイスは当たり前のことだと思われるかもしれませんが、サービスを使用しない場合は、シャットダウンする必要があります。 プロジェクトが不要になった後、非運用システムや概念実証システムがそのままになっていることに気付くのは珍しいことではありません。 定期的にご利用の環境を確認し、これらのシステムを特定するようにしてください。 これらのシステムをシャットダウンすることは、インフラストラクチャ コストの削減だけでなく、ライセンスや運用に関する潜在的なコストの削減にもつながり、多くの面で利点が得られます。

## <a name="migrate-to-paas-or-saas-services"></a>PaaS または SaaS サービスに移行する 

最後に、ワークロードをクラウドに移動します。その場合、サービスとしてのインフラストラクチャ (IaaS) サービスから開始し、必要に応じて、反復的なプロセスでそれをサービスとしてのプラットフォーム (PaaS) に移動するのが自然です。

PaaS サービスでは、通常、リソースと運用の両方のコストを大幅に削減できます。 課題は、サービスの種類によっては、時間とリソースの両方の観点から、これらのサービスの移動にはさまざまなレベルの労力が必要になることです。 Azure SQL Database には SQL Server データベースを簡単に移動できる場合がありますが、ご利用の多層アプリケーションをコンテナーやサーバーレス ベースのアーキテクチャに移動するにはかなりの労力が必要になる可能性があります。 PaaS サービスから得られる効率性があるかどうかを確認するために、ご利用のアプリケーションのアーキテクチャを継続的に評価することをお勧めします。  

Azure では少ないリスクでこれらのサービスを簡単にテストでき、新しいアーキテクチャ パターンを比較的簡単に試すことができます。 ただし、通常、これは長い道のりであり、コスト削減の観点から即効性のある成果を期待している場合、すぐには役立たないかもしれません。 Azure アーキテクチャ センターは、さまざまなアーキテクチャや Azure サービスにおけるベスト プラクティスだけでなく、アプリケーションの変換の発想を得る優れた場所です。 