Azure でのシステムの構築を依頼され、今後 12 か月間のコストを見積もるよう求められたものとします。 Azure の料金計算は完全に透過的であり、毎月使用したサービスについてのみ請求されることは、既に知っています。 それらのサービスをデプロイして実行することなく、または Azure サービスの価格ページを基にして各サービスの料金を手作業で計算することなく、その見積もりを得るにはどうすればよいでしょうか?

## <a name="introducing-the-azure-pricing-calculator"></a>Azure 料金計算ツールの概要

お客様が見積もりを作成しやすいように、**Azure 料金計算ツール**が作成されています。 Azure 料金計算ツールは Web ベースの無料ツールであり、Azure サービスを入力し、サービスのプロパティとオプションを変更できるようになっています。 サービスあたりのコストと、完全な見積もりの総コストが出力されます。

別のブラウザー ウィンドウまたはタブで、[Azure 料金計算ツール](https://azure.microsoft.com/pricing/calculator/)に移動します。 料金計算ツールのページには 3 つのタブがあります。

1. **[製品]**。 このタブでほとんどの作業を行います。 このタブには、すべての Azure サービスが一覧表示されます。このタブで見積もり式を作成するサービスを追加したり削除したりします。
2. **[見積もり]**。 このタブには、以前に保存した見積もりがすべて表示されます。 このプロセスについては後で説明します。
3. **[FAQ]**。 名前のとおり、このタブにはよく寄せられる質問に対する回答があります。

**[製品]** タブから始めます。左側にすべてのサービス カテゴリが一覧表示されています。 いずれかのカテゴリをクリックすると、そのカテゴリのサービスが表示されます。 検索ボックスもあり、すべてのサービスから探しているサービスを検索できます。 サービスをクリックすると、そのサービスが見積もりに追加されます。 1 つでも複数でも、必要な数のサービスを追加できます。同じサービスを複数追加することもできます (たとえば、複数の仮想マシン)。

サービスを追加した後は、その料金を計算します。 ページを下にスクロールすると、そのサービスの料金に適用されるカスタマイズ可能な詳細が表示されます。 たとえば、仮想マシンについては、リージョン、オペレーティング システム、インスタンス サイズなどの詳細を選択でき、そのすべてが VM の料金に影響します。 サービスの小計が表示されます。 さらに下にスクロールすると、見積もりに含まれるすべてのサービスの総計が表示されます。 合計と共に、見積もりをエクスポート、保存、共有するボタンが表示されます。

## <a name="estimate-a-solution"></a>ソリューションを見積もる

元のシナリオで、このシステムを 2 つの Azure VM 上で実行し、Azure SQL Database インスタンスに接続するものとします。 負荷分散の機能強化されていますかを確認するためにレイヤー 7 ファイアウォールがあるたいこともできます。 次の図では、1 つの Azure SQL Database インスタンスに接続されている 2 つの仮想マシンがアプリケーション ゲートウェイに接続されています。

![コスト見積もりを示す例として使用されるサンプル アーキテクチャの図。](../media/2-estimate-costs-architecture.png)

Azure 料金計算ツールを使用して、ソリューションのコストを計算し、チームと共有するために見積もりをエクスポートすることができます。

> [!TIP]
> 計算ツールを、見積もりに何も表示されていないクリーンな状態にします。 見積もりに何かある場合は、各項目のごみ箱アイコンをクリックして、見積もりをリセットします。

Azure 料金計算ツールの **[製品]** タブで、次のサービスをクリックして見積もりに追加します。

* [コンピューティング] カテゴリの仮想マシン
* [データベース] カテゴリの Azure SQL Database
* [ネットワーク] カテゴリのアプリケーション ゲートウェイ

**[見積もり]** タブで各サービスの詳細を構成し、コストの確実な見積もりを取得できます。 すべてのリソースに対し、**[米国西部]** リージョンを使用します。

* **Virtual Machines**。 これは ASP.NET アプリケーションなので、**Windows OS** VM を使用する必要があります。 このアプリケーションでは大量のコンピューティング パワーは必要ないので、**D2v3** インスタンス サイズを選択します。 2 つの仮想マシンを必要とし、それを常時 (730 時間/月) 実行します。 これらの VM に対しては Premium SSD ストレージを使用し、VM ごとにサイズ **E10** のディスクが 1 つだけ必要です (全部で 2 つのディスク)。

* **SQL Database**。 データベースについては、**仮想コア モデル**を使用して**単一データベース タイプ**をプロビジョニングします。 4 仮想コアの汎用 Gen 4 データベースが必要です。 32 GB のストレージが必要であり、平均 16 GB のストレージを保持します。 当社保有ポリシーは、8 週間、12 か月間、および 5 年間になります。

* **Application Gateway**。 Application Gateway については、Web Application Firewall レベルを使用するので、環境がある程度保護されます。 また、負荷が高くなることはないので、中サイズのインスタンスを 2 つだけ使用します。 1 か月のデータ処理量は 1 TB と予想されます。

見積もりに目を通すと、追加したサービスごとの小計コストと、見積もり全体の総計が表示されているはずです。 この場合、見積もりは **1 か月あたり 1,400.00 ドル**前後になるはずです。 一部のオプションを変更してみて、見積もりが増減することを確認できます。

## <a name="share-and-save-your-estimate"></a>見積もりを共有および保存する

ソリューションの見積もりができました。 この見積もりを保存しておき、後で必要に応じて戻って調整したり、さらに分析するために Excel にエクスポートしたり、URL を使用して見積もりを共有したりすることができます。

見積もりをエクスポートするには、見積もりの下部にある [`Export`] をクリックします。 見積もりが Excel (**.xlsx**) 形式でダウンロードされます。見積もりに追加したすべてのサービスが含まれます。

Excel スプレッドシートを共有することも、計算ツールの [`Share`] ボタンをクリックして共有することもできます。 ボタンをクリックすると、この見積もりを共有するために使用できる URL が示されます。 このリンクを提供されたユーザーは誰でもこの見積もりにアクセスでき、簡単にチームと共有できます。

Azure アカウントでログインしている場合は、見積もりを保存できるので、後で再び見積もりを表示できます。 ページの下部にある **[保存]** ボタンをクリックします。 サインインしている場合は、見積もりが保存されたことを示す通知が表示されます。 サインインしていない場合は、見積もりを保存するにはサインインする必要があることを示すメッセージが表示されます。 見積もりを保存した後、ページの先頭までスクロールして戻り、**[見積もり]** タブを選択します。見積もりが表示されます。 表示されている見積もりを選択して、再び詳細を見たり、不要になった場合は削除したりできます。

## <a name="summary"></a>まとめ

まったくお金を使わずに、Azure サービスのセットに対する料金の見積もりを作成しました。 何も作成せずに、さらに分析したり後で変更したりできる完全に共有可能な見積もりが手に入りました。 このツールを使うと、使用する予定の特定のサービスがわかっているシステムの見積もりを作成するだけでなく、さまざまなサービスが全体的なコストに与える影響を比較することもできます。 たとえば、VM 上の Microsoft SQL Server とAzure SQL Database を比較できます。 既にデプロイしてあるサービスについてコストの分析情報を入手する方法を見てみましょう。
