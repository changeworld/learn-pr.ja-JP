Text Analytics API の動作を表示するには、一部の呼び出しがツールを使用して、組み込み API テスト コンソールにあるオンライン リファレンス ドキュメントを作成します。 その前に、アクセス キーをそれらの呼び出しを行う必要があります。

## <a name="create-an-access-key"></a>アクセス キーを作成する

[!include[](../../../includes/azure-sandbox-activate.md)]

[!include[](../../../includes/azure-sandbox-regions-first-mention-note.md)]

Text Analytics API を呼び出すたびにサブスクリプション キーが必要です。 多くの場合、アクセス キーと呼ばれる、通話へのアクセスがあるかの検証に使用されます。 キーを取得するのに、Azure portal を使用します。 

1. [Azure portal](https://portal.azure.com/?azure-portal=true) にサインインします。

1. クリックして**リソースの作成**

1. Azure Marketplace では、選択**ai+machine Learning**利用可能な Api の一覧を表示します。 をクリックして**すべて表示**上で Cognitive Services APIs の全体の一覧を表示するページの右。

1. 検索**Text Analytics** Cognitive Services の一覧で選択します。
    ![スクリーン ショットの AI と機械学習 ウィンドウでは、一覧で選択、Text Analytics API を表示します。](../media/select-text-analytics.PNG)

1. 表示された [作成] ページでは、各フィールドに、次の値を入力します。

|プロパティ  | 値  | 説明  |
|---------|---------|---------|
|名前     |    MyTextAnalyticsAPIAccount     |  Cognitive Services アカウントの名前。 わかりやすい名前を使用することをお勧めします。 有効な文字は、`a-z`、`0-9`、および `-` です。    |
|サブスクリプション     |  お使いのサブスクリプション       |   この新しい Cognitive Services API アカウントとサブスクリプション**Text Analytics API**が作成されます。      |
|場所     |  米国西部       |  選択、[リージョン](https://azure.microsoft.com/regions/)近くです。       |
|[価格レベル]      | **F0 は無料**     |   Cognitive Services アカウントのコストは、実際の使用量と選択したオプションによって異なります。 ここで、free レベルを選択することをお勧めします。      |
|リソース グループ     |  選択**既存を使用して、** 選択<rgn>[サンド ボックス リソース グループ名]</rgn>       |  Cognitive Services Text Analytics API アカウントを作成するための新しいリソース グループの名前。       |

ここでは、何のスクリーン ショット、**作成**ページがいつ完了したようになります。

![すべてのフィールドで、Text Analytics アカウントを作成するためのユーザー インターフェイスのスクリーン ショットは、前の表で示されている値を持つ入力されます。](../media/create-text-analytics-account.PNG)

1. 選択**作成**アカウントの作成プロセスを開始するページの下部にあります。  展開が進行中という通知を監視します。 リソース グループにアカウントが正常に展開されたことを通知し、表示されます。

![展開には、リソースのボタンに移動し、ボタンのダッシュ ボードにピン留めを含む通知が成功しました。](../media/deploy-resource-group-success.PNG)

Cognitive Services アカウントをしたら、API の呼び出しを開始するにアクセス キーに探してみましょう。

1. をクリックして、**リソースに移動**のボタンでは、*デプロイメントに成功しました*通知します。 この操作は、クイック スタートのアカウントを開きます。

1. 選択、**キー**で、左側のメニューからメニュー項目、*キーを取得する*のクイック スタート セクション。  このアクションが表示されます、**キーの管理**ページ。

1. コピー ボタンを使用してキーの 1 つをコピーします。

![Cognitive Services アカウントとキー 1 と 2 のキーのエントリの名前を示すキー ユーザー インターフェイスを管理します。](../media/manage-keys.PNG)

> [!IMPORTANT]
> アクセス キーを常に安全し、共有することはありません。

1. このモジュールの残りの部分には、このキーを格納します。 テストのコンソールからの API 呼び出しを行い、残りの部分で、モジュールを od をすぐに使用します。

あるので、キーのテスト コンソール に進みをスピン API を実行できます。

## <a name="call-the-api-from-the-testing-console"></a>テストのコンソールから API を呼び出す

1. 移動し、 [Text Analytics API](https://westus.dev.cognitive.microsoft.com/docs/services/TextAnalytics.V2.0/operations/56f30ceeeda5650db055a3c7?azure-portal=true)お使いブラウザーでドキュメントを参照します。

    ランディング ページには、左側と右側にコンテンツをメニューが表示されます。 メニューには、Text Analytics API を呼び出すことができます、POST メソッドが表示されます。 これらのエンドポイントは**検出言語**、**エンティティ**、**キー フレーズ**、および**センチメント**します。  これらの操作のいずれかを呼び出すには、いくつかの作業を行う必要があります。

    - 呼び出すメソッドを選択します。
    - テストの地域に一致するコンソールまたはこのレッスンの前半で選択した場所を選択します。
    - 各呼び出しにレッスンの前半で保存されているアクセス キーを追加します。

1. 前面の左側のメニューで **センチメント**します。 この選択は、右側にセンチメントのドキュメントを開きます。 ドキュメントが示すように加える REST 呼び出しで、次の形式。

    `https://[location].api.cognitive.microsoft.com/text/analytics/v2.0/sentiment`

サブスクリプション キー、またはアクセス キーを渡す、 **ocp Apim サブスクリプション キー**ヘッダー。

## <a name="make-some-api-calls"></a>一部の API 呼び出しを行う

1. このレッスンの前半で、Cognitive Services アカウントを作成するときに選択場所と一致するこのページの一覧からリージョンを選択します。  たとえば、選択した場合*米国西部*以前の選択と、そのアカウントを作成し、ここで次のようにします。
    ![センチメントのメニュー項目の Text Analytics API のスクリーン ショット参照サイトでは、選択されている、米国西部で後にします。](../media/select-testing-console-region.png)

1. 表示された次のページは、API コンソールで、インタラクティブなライブです。  というラベルの付いたページ上のフィールドに以前保存したアクセス キーを貼り付ける**Ocp Apim サブスクリプション キー**します。 ヘッダー値として HTTP 要求ウィンドウに、キーが自動的に書き込まれることに注意してください。

1. ページの一番下までスクロールし、をクリックして**送信**します。 この画面の詳細を調べることでの動作を分割してみましょう。

ユーザー インターフェイスの [ヘッダー] セクションでは、要求のヘッダーにアクセス、またはサブスクリプションの場合、キーを設定します。

![ヘッダー セクションのスクリーン ショット。](../media/2-marker.PNG)

次に、要求本文があるどの保留のセクションを**ドキュメント**配列。 3 つのプロパティとして、配列内の各ドキュメント。 プロパティは、 *「言語」*、 *"id"*、 *"text"* します。 *"Id"* は、この例では数値ですが、ドキュメントの配列内で一意である限り、必要なものにすることができます。 この例では 3 つの異なる言語で記述されたドキュメントも渡しています。 Text Analytics API の感情機能では、15 を超える言語がサポートされています。 詳細については、チェック アウト[Text Analytics API でサポートされる言語](https://docs.microsoft.com//azure/cognitive-services/text-analytics/text-analytics-supported-languages)します。 1 つのドキュメントの最大サイズは、5,000 文字と 1 つの要求は、最大 1,000 個のドキュメントを持つことができます。

![要求本文のスクリーン ショット セクション](../media/3-marker.PNG)

次のセクションでは、ヘッダーと要求の URL を含む、完全な要求が表示されます。 この例で確認できますで始まる URL に要求がルーティングされる`westus`します。 URL は、選択したリージョンによって異なります。

![セクション番号 4 です。](../media/4-marker.PNG)
![数 5 つのセクションします。](../media/5-marker.PNG)

応答に関する情報があります。 私たちの例で、要求が成功したコードを参照してください`200`が返されました。 ラウンド トリップが 38 ms をしたこともわかります。

![セクション数 5 つです。](../media/6-marker.PNG)

最後に、この要求に対する応答がわかります。 応答は、Text Analytics API をに関するドキュメントが、その情報を保持します。 ドキュメントの配列は、元のテキストなしに、返されます。 返されます、 *"id"* と *"score"* ドキュメントごとにします。 API は、0 から 1 までの数値スコアを返します。 1 に近いスコアは正のセンチメントを表し、0 に近いスコアは負のセンチメントを表します。 スコアが 0.5 のでは、センチメント、ニュートラル ステートメントがないことを示します。 この例では、2 つの非常に肯定ドキュメントと負の値の 1 つのドキュメントがあります。

![セクション数 5 つです。](../media/7-marker.PNG)

お疲れさまでした。 コードを記述しなくても、最初の Text Analytics API の呼び出しを加えました。 自由に、コンソールより多くの呼び出しを再試行してください。 推奨事項を次に示します。

- セクション数 2 内のドキュメントを変更し、API が返しますを参照してください。
- 他の方法をお試しください**検出言語**、**エンティティ**と**キー フレーズ**、同じサブスクリプション キーを使用して。
- サブスクリプション別のリージョンからの呼び出しを行い、動作を確認してください。

API のテスト コンソールは、この API の機能を探索する優れた方法です。 自分で見てきました、これでは、このインテリジェンスを実際のシナリオに配置することに移りましょう。