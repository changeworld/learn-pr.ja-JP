 関数アプリでは、管理と、関数の実行のコンテキストを提供します。 それでは、関数アプリを作成し、関数を追加します。 

## <a name="create-a-function-app-to-host-our-function"></a>この関数をホストする Function App を作成します。

1. [Azure portal](https://portal.azure.com/?azure-portal=true) にサインインします。

1. 選択、**リソースの作成**ボタンで検出された、Azure portal の左上隅から選択**コンピューティング** > **Function App**します。

1. 次の表で指定されている function app の設定を入力します。

    | 設定      | 推奨値  | 説明                                        |
    | ------------ |  ------- | -------------------------------------------------- |
    | **アプリ名** | グローバルに一意の名前 | 新しい Function App を識別する名前。 有効な文字は、`a-z`、`0-9`、および `-` です。  | 
    | **サブスクリプション** | お使いのサブスクリプション | この新しい Function App が作成されるサブスクリプション。 | 
    | **リソース グループ**|  <rgn>[サンド ボックス リソース グループ名]</rgn> | Function app を作成するためのリソース グループの名前。<br/><br/>選択することを確認**既存を使用して、** 前回の演習からリソース グループを使用します。 これにより、このモジュールに加えられたすべてのリソースがまとめられます。 | 
    | **OS** | Windows | 関数アプリをホストするオペレーティング システム。  |
    | **ホストしています。** |   従量課金プラン | Function App にどのようにリソースが割り当てられるかを定義するホスティング プラン。 既定の **[従量課金プラン]** では、リソースは関数の必要に応じて動的に追加されます。 この[サーバーなしの](https://azure.microsoft.com/overview/serverless-computing/) ホスティングでは、関数が実行された時間にのみ課金されます。   |
    | **場所** | 一覧から選択します。 | ユーザーに近い[リージョン](https://azure.microsoft.com/regions/)、または関数がアクセスする他のサービスの近くのリージョンを選択します。<br/><br/>前回の演習で Text Analytics API アカウントの作成時に使用したのと同じリージョンを選択します。 |
    | **ストレージ アカウント** |  グローバルに一意の名前 |  Function App によって使用される新しいストレージ アカウントの名前。 ストレージ アカウント名の長さは 3 ～ 24 文字で、数字と小文字のみを使用できます。 このダイアログ ボックスで、フィールドが入力、アプリを指定した名前から派生した一意の名前。 ただし、自由に別の名前または既存のアカウントも使用できます。 |

1. **[作成]** を選択して、Function App をプロビジョニングし、デプロイします。

1. ポータルの右上隅の通知アイコンを選択し、監視、**進行中のデプロイ**次のようなメッセージ。

1. 展開時間がかかることができます。 そのため、通知ハブの状態を維持し、監視、**デプロイメントに成功しました**次のようなメッセージ。

1. お疲れさまでした。 作成し、関数アプリをデプロイしました。 **[リソースに移動]** を選択して、新しい関数アプリを確認します。

> [!TIP]
> 目的の関数アプリがポータルに見つからない場合は、[Azure Portal のお気に入りに Function Apps を追加](https://docs.microsoft.com/en-us/azure/azure-functions/functions-how-to-use-azure-function-app-settings#favorite)してみてください。

## <a name="create-a-function-to-execute-our-logic"></a>このロジックを実行する関数を作成します。

関数アプリが作成できた関数を作成する時間を勧めします。 関数は、トリガーをアクティブ化されます。 このモジュールには、キュー トリガーを使用します。 ランタイムは、キューをポーリングし、新しいメッセージを処理するには、この関数を開始します。

1. 新しい function app を展開し、マウス、**関数**コレクション。 追加を選択します (__+__) 関数の作成プロセスを開始するに表示されるときにボタンをクリックします。

1. **すぐに開始**選択ページなったが表示されたら、**カスタム関数**、使用可能な関数テンプレートの一覧が読み込まれます。

1. 選択**JavaScript**上、**キュー トリガー**テンプレート リストのエントリ。

![キューのトリガー エントリで選択されている JavaScript でのテンプレートを Azure Functions のスクリーン ショット。](../media/quickstart-select-queue-trigger.png)

4. **新しい関数**ダイアログが表示されたら、次の値を入力します。

|プロパティ  |値  |
|---------|---------|
|言語     |   **JavaScript**      |
|名前     |   **discover-sentiment-function**      |
|キュー名     |   **new-feedback-q**      |
|ストレージ アカウント接続        |  **AzureWebJobsDashboard**       |

![キューのトリガー エントリで選択されている JavaScript でのテンプレートを Azure Functions のスクリーン ショット。](../media/new-function-dialog.png)

5. 選択**作成**関数の作成プロセスを開始します。

1. 関数は、キュー トリガー関数のテンプレートを使用して、選択した言語で作成されます。 いずれかで関数を作成するには、このモジュールで、JavaScript では、関数を実装します、[サポートされている言語](https://docs.microsoft.com/azure/azure-functions/supported-languages)します。

ポータルと読み込みコード エディターが開き、作成プロセスが完了したら、 *index.js*ページ。 このファイルは、関数のロジックを記述する場所のコード ファイルです。

## <a name="try-it-out"></a>試してみる

これまでに何であるかをテストしてみましょう。 まだ作成されていないコードまだ、ここまでは、構成した確認するため、このテストが実行されます。

1. クリックして**実行**コード エディターの上部にあります。

1. 観察、**ログ**画面の下部に表示されるタブ。 すべては、計画どおりに動作する場合は、次のようなメッセージが表示されます。
    ![関数呼び出しは成功の応答メッセージのスクリーン ショット。](../media/func-default-run.PNG)

**実行**ボタンは、関数を開始し、渡された*キュー データをサンプル*から既定のテキスト、**テスト**を関数に要求ウィンドウ。

よくやりました! キューによってトリガーされる関数を関数アプリに追加され、想定どおりに動作を確認するテストが正常に! 多くの機能は、次の手順で関数を追加します。

その他のファイルを関数を簡単に外観が次の*function.json*構成ファイル。 このファイルから構成データが、次に示すように JSON の一覧。

```json
{
  "bindings": [
    {
      "name": "myQueueItem",
      "type": "queueTrigger",
      "direction": "in",
      "queueName": "new-feedback-q",
      "connection": "AzureWebJobsDashboard"
    }
  ],
  "disabled": false
}
```

この関数は、という名前のトリガー バインドと、 **myQueueItem**型の`queueTrigger`します。 したという名前のキューに新しいメッセージが到着すると**新しいフィードバック q**関数が呼び出されます。 MyQueueItem バインディング パラメーターで新しいメッセージを参照します。 バインドは、気にする面倒な作業のいくつかの私たちにとって!

次の手順では、Text Analytics API サービスを呼び出すコードを追加します。

> [!TIP]
> 展開して index.js と function.json を確認できます、**ファイルを表示する**Azure portal で関数のパネルの右側のメニュー。

この演習では、場所で、Azure Functions のインフラストラクチャの取得に関するあらゆるでした。 したという名前のキューに新しいメッセージを受信したときに実行される関数アプリでホストされている作業関数がある[!INCLUDE [input-q](./q-name-input.md)]します。 本当に面白くなるは、センチメント分析を行うための Microsoft Cognitive Service を呼び出すコードを追加する際、次の手順で開始します。