<span data-ttu-id="b65e6-101">このモジュールでは、Azure Key Vault でアプリのシークレット構成をセキュリティ保護しました。</span><span class="sxs-lookup"><span data-stu-id="b65e6-101">In this module, you secured an app's secret configuration in Azure Key Vault.</span></span> <span data-ttu-id="b65e6-102">このアプリ コードでは、マネージド サービス ID を使用してコンテナーへの認証が行われ、起動時にコンテナーから ASP.NET Core の構成システムにシークレットが自動的に読み込まれます。</span><span class="sxs-lookup"><span data-stu-id="b65e6-102">Our app code authenticates to the vault with Managed Service Identity and automatically loads the secrets from the vault into ASP.NET Core's configuration system at startup.</span></span>

## <a name="clean-up"></a><span data-ttu-id="b65e6-103">クリーンアップ</span><span class="sxs-lookup"><span data-stu-id="b65e6-103">Clean up</span></span>
<!---TODO: Do we need to include cleanup for the free education tier?--->

<span data-ttu-id="b65e6-104">Azure サブスクリプションをクリーンアップするには、Azure Cloud Shell で次を実行して、このモジュールで作成したすべてのリソースを含むリソース グループを削除します。</span><span class="sxs-lookup"><span data-stu-id="b65e6-104">To cleanup your Azure subscription, run the following in the Azure Cloud Shell to delete the resource group containing all the resources we created in this module.</span></span>

```console
az group delete --name keyvault-exercise-group
```

<span data-ttu-id="b65e6-105">Cloud Shell ストレージをクリーンアップするには、`KeyVaultDemoApp` ディレクトリを削除します。</span><span class="sxs-lookup"><span data-stu-id="b65e6-105">To cleanup your Cloud Shell storage, delete the `KeyVaultDemoApp` directory.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b65e6-106">次の手順</span><span class="sxs-lookup"><span data-stu-id="b65e6-106">Next steps</span></span>

<span data-ttu-id="b65e6-107">実際のアプリの場合、次の手順は何でしょうか。</span><span class="sxs-lookup"><span data-stu-id="b65e6-107">If this was a real app, what would come next?</span></span>

- <span data-ttu-id="b65e6-108">すべてのアプリ シークレットをコンテナーに配置することです!</span><span class="sxs-lookup"><span data-stu-id="b65e6-108">Put all your app secrets in your vaults!</span></span> <span data-ttu-id="b65e6-109">構成ファイル内に入れておく理由は何もありません。</span><span class="sxs-lookup"><span data-stu-id="b65e6-109">There's no longer any reason to have them in configuration files.</span></span>
- <span data-ttu-id="b65e6-110">引き続きアプリケーションを開発します。</span><span class="sxs-lookup"><span data-stu-id="b65e6-110">Continue to develop the application.</span></span> <span data-ttu-id="b65e6-111">運用環境はすべてセットアップ済みなので、今後のデプロイですべてのセットアップを繰り返す必要はありません。</span><span class="sxs-lookup"><span data-stu-id="b65e6-111">Your production environment is all set up, so for future deployments to it you don't need to repeat all the setup.</span></span>
- <span data-ttu-id="b65e6-112">開発をサポートするには、名前は同じでも値の異なるシークレットを含む開発環境コンテナーを作成します。</span><span class="sxs-lookup"><span data-stu-id="b65e6-112">To support development, create a development-environment vault that contains secrets with the same names but different values.</span></span> <span data-ttu-id="b65e6-113">アプリの開発環境構成ファイルで、開発チームにアクセス許可を付与し、コンテナー名を構成します。</span><span class="sxs-lookup"><span data-stu-id="b65e6-113">Grant permissions to the development team and configure the vault name in the app's development-environment configuration file.</span></span> <span data-ttu-id="b65e6-114">開発者がアプリをローカルで実行すると、`AddAzureKeyVault` は Visual Studio および Azure CLI のローカル インストールを自動的に検出し、それらのアプリケーションで構成されている Azure 資格情報を使用してサインインし、コンテナーにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="b65e6-114">When developers run the app locally, `AddAzureKeyVault` will automatically detect local installations of Visual Studio and the Azure CLI and use Azure credentials configured in those applications to sign in and access the vault.</span></span>
- <span data-ttu-id="b65e6-115">ユーザー受け入れテストなどの目的で追加の環境を作成します。</span><span class="sxs-lookup"><span data-stu-id="b65e6-115">Create additional environments for purposes like user acceptance testing.</span></span>
- <span data-ttu-id="b65e6-116">異なるサブスクリプションやリソース グループ間でコンテナーを別々にして、分離します。</span><span class="sxs-lookup"><span data-stu-id="b65e6-116">Separate vaults across different subscriptions and/or resource groups to isolate them.</span></span>
- <span data-ttu-id="b65e6-117">該当するユーザーに他の環境コンテナーへのアクセス権を付与します。</span><span class="sxs-lookup"><span data-stu-id="b65e6-117">Grant access to other environment vaults to the appropriate people.</span></span>

## <a name="further-reading"></a><span data-ttu-id="b65e6-118">参考資料</span><span class="sxs-lookup"><span data-stu-id="b65e6-118">Further reading</span></span>

- [<span data-ttu-id="b65e6-119">Key Vault のドキュメント</span><span class="sxs-lookup"><span data-stu-id="b65e6-119">Key Vault documentation</span></span>](https://docs.microsoft.com/azure/key-vault/)
- [<span data-ttu-id="b65e6-120">AddAzureKeyVault とその高度なオプションの詳細</span><span class="sxs-lookup"><span data-stu-id="b65e6-120">More about AddAzureKeyVault and its advanced options</span></span>](https://docs.microsoft.com/aspnet/core/security/key-vault-configuration?view=aspnetcore-2.1&tabs=aspnetcore2x)
- <span data-ttu-id="b65e6-121">[このチュートリアル](https://docs.microsoft.com/azure/key-vault/key-vault-use-from-web-application)では、MSI の代わりにクライアント シークレットを使用して Azure Active Directory への認証を手動で行う手順を含め、`KeyVaultClient` の使用手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="b65e6-121">[This tutorial](https://docs.microsoft.com/azure/key-vault/key-vault-use-from-web-application) walks through using `KeyVaultClient`, including manually authenticating it to Azure Active Directory using a client secret instead of MSI.</span></span>
- <span data-ttu-id="b65e6-122">認証ワークフローを自分で実装するための [MSI トークン サービスのドキュメント](https://docs.microsoft.com/azure/app-service/app-service-managed-service-identity#using-the-rest-protocol)</span><span class="sxs-lookup"><span data-stu-id="b65e6-122">[MSI token service documentation](https://docs.microsoft.com/azure/app-service/app-service-managed-service-identity#using-the-rest-protocol), for implementing the authentication workflow yourself</span></span>