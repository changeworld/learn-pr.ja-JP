<span data-ttu-id="26c79-101">Windows VM をデプロイして実行させましたが、作業を行うようには構成していません。</span><span class="sxs-lookup"><span data-stu-id="26c79-101">We have our Windows VM deployed and running, but it's not configured to do any work.</span></span>

<span data-ttu-id="26c79-102">これはビデオ処理システムのシナリオであることを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="26c79-102">Recall our scenario is a video processing system.</span></span> <span data-ttu-id="26c79-103">プラットフォームでは FTP 経由でファイルが受信されます。</span><span class="sxs-lookup"><span data-stu-id="26c79-103">Our platform receives files through FTP.</span></span> <span data-ttu-id="26c79-104">交通監視カメラでは、サーバー上のフォルダーにマップされる既知の URL にビデオ クリップがアップロードされます。</span><span class="sxs-lookup"><span data-stu-id="26c79-104">The traffic cameras upload video clips to a known URL, which is mapped to a folder on the server.</span></span> <span data-ttu-id="26c79-105">各 Windows VM 上のカスタム ソフトウェアはサービスとして実行されます。このソフトウェアではフォルダーが監視され、アップロードされた各クリップが処理されます。</span><span class="sxs-lookup"><span data-stu-id="26c79-105">The custom software on each Windows VM runs as a service and watches the folder and processes each uploaded clip.</span></span> <span data-ttu-id="26c79-106">その後、正規化されたビデオは、他の Azure サービスで実行されているアルゴリズムに渡されます。</span><span class="sxs-lookup"><span data-stu-id="26c79-106">It then passes the normalized video to our algorithms running on other Azure services.</span></span>

<span data-ttu-id="26c79-107">このシナリオをサポートするために構成する必要があるものがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="26c79-107">There are a few things we would need to configure to support this scenario:</span></span>

- <span data-ttu-id="26c79-108">FTP をインストールし、通信するために必要なポートを開きます。</span><span class="sxs-lookup"><span data-stu-id="26c79-108">Install FTP and open the ports it needs to communicate.</span></span>
- <span data-ttu-id="26c79-109">都市のカメラ システムに一意の専用ビデオ コーデックをインストールします。</span><span class="sxs-lookup"><span data-stu-id="26c79-109">Install the proprietary video codec unique to the city's camera system.</span></span>
- <span data-ttu-id="26c79-110">アップロードされたビデオを処理するトランスコーディング サービスをインストールします。</span><span class="sxs-lookup"><span data-stu-id="26c79-110">Install our transcoding service that processes uploaded videos.</span></span>

<span data-ttu-id="26c79-111">これらの多くは一般的な管理タスクであり、ここでは実際に取り上げないため、インストールするソフトウェアはありません。</span><span class="sxs-lookup"><span data-stu-id="26c79-111">Many of these are typical administrative tasks we won't actually cover here, and we don't have software to install.</span></span> <span data-ttu-id="26c79-112">代わりに、リモート デスクトップを使用してカスタムまたはサード パーティのソフトウェアをインストール_できる_手順を説明します。</span><span class="sxs-lookup"><span data-stu-id="26c79-112">Instead, we will walk through the steps and show you how you _could_ install custom or third-party software using Remote Desktop.</span></span> <span data-ttu-id="26c79-113">まず、接続情報を取得します。</span><span class="sxs-lookup"><span data-stu-id="26c79-113">Let's start by getting the connection information.</span></span>

## <a name="connect-to-the-vm-with-remote-desktop-protocol"></a><span data-ttu-id="26c79-114">リモート デスクトップ プロトコルを使用して VM に接続する</span><span class="sxs-lookup"><span data-stu-id="26c79-114">Connect to the VM with Remote Desktop Protocol</span></span>

<span data-ttu-id="26c79-115">RDP クライアントを使用して Azure VM に接続するには、次のものが必要です。</span><span class="sxs-lookup"><span data-stu-id="26c79-115">To connect to an Azure VM with an RDP client, you will need:</span></span>

- <span data-ttu-id="26c79-116">VM のパブリック IP アドレス (ユーザーのネットワークに接続するように VM が構成されている場合はプライベート)。</span><span class="sxs-lookup"><span data-stu-id="26c79-116">The public IP address of the VM (or private if the VM is configured to connect to your network).</span></span>
- <span data-ttu-id="26c79-117">ポート番号。</span><span class="sxs-lookup"><span data-stu-id="26c79-117">The port number.</span></span>

<span data-ttu-id="26c79-118">RDP クライアントにこの情報を入力したり、事前に構成されている **RDP** ファイルをダウンロードしたりすることができます。</span><span class="sxs-lookup"><span data-stu-id="26c79-118">You can enter this information into the RDP client, or download a pre-configured **RDP** file.</span></span>

### <a name="download-the-rdp-file"></a><span data-ttu-id="26c79-119">RDP ファイルをダウンロードする</span><span class="sxs-lookup"><span data-stu-id="26c79-119">Download the RDP file</span></span>

1. <span data-ttu-id="26c79-120">[Azure portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) 内で、以前に作成した仮想マシンの**概要**パネルが開かれていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="26c79-120">In the [Azure portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true), ensure the **Overview** panel for the virtual machine that you created earlier is open.</span></span> <span data-ttu-id="26c79-121">もしパネルを開く必要がある場合は、**すべてのリソース**下で VM を見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="26c79-121">You can find the VM under **All Resources** if you need to open it.</span></span> <span data-ttu-id="26c79-122">概要パネルには、VM に関する多くの情報があります。</span><span class="sxs-lookup"><span data-stu-id="26c79-122">The overview panel has a lot of information about the VM.</span></span>

    - <span data-ttu-id="26c79-123">VM が実行中かどうかを確認できます。</span><span class="sxs-lookup"><span data-stu-id="26c79-123">You can see whether the VM is running.</span></span>
    - <span data-ttu-id="26c79-124">VM を停止または再起動します。</span><span class="sxs-lookup"><span data-stu-id="26c79-124">Stop or restart it.</span></span>
    - <span data-ttu-id="26c79-125">VM に接続するためのパブリック IP アドレスを取得します。</span><span class="sxs-lookup"><span data-stu-id="26c79-125">Get the public IP address to connect to the VM.</span></span>
    - <span data-ttu-id="26c79-126">CPU、ディスク、ネットワークのアクティビティを確認します。</span><span class="sxs-lookup"><span data-stu-id="26c79-126">See the activity of the CPU, disk, and network.</span></span>

1. <span data-ttu-id="26c79-127">ウィンドウの上部にある **[接続]** ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="26c79-127">Click the **Connect** button at the top of the pane.</span></span>

1. <span data-ttu-id="26c79-128">**[仮想マシンへの接続]** ブレードで、**IP アドレス**と**ポート番号**の設定内容をメモしてから、**[RDP ファイルのダウンロード]** をクリックしてご利用のコンピューターに保存します。</span><span class="sxs-lookup"><span data-stu-id="26c79-128">In the **Connect to virtual machine** blade, note the **IP address** and **Port number** settings, then click **Download RDP File** and save it to your computer.</span></span>

1. <span data-ttu-id="26c79-129">接続する前に、設定をいくつか調整します。</span><span class="sxs-lookup"><span data-stu-id="26c79-129">Before we connect, let's adjust a few settings.</span></span> <span data-ttu-id="26c79-130">Windows では、エクスプローラーを使用してファイルを見つけ、右クリックして **[編集]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="26c79-130">On Windows, find the file using Explorer, right-click and select **Edit**.</span></span> <span data-ttu-id="26c79-131">macOS では、最初に RDP クライアントでファイルを開いてから、表示されるリストで項目を右クリックして **[編集]** を選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="26c79-131">On MacOS you will need to open the file first with the RDP client and then right-click on the item in the displayed list and select **Edit**.</span></span>

1. <span data-ttu-id="26c79-132">さまざまな設定を調整して、Azure VM への接続におけるエクスペリエンスを制御することができます。</span><span class="sxs-lookup"><span data-stu-id="26c79-132">You can adjust a variety of settings to control the experience in connecting to the Azure VM.</span></span> <span data-ttu-id="26c79-133">確認する設定は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="26c79-133">The settings you will want to examine are:</span></span>

    - <span data-ttu-id="26c79-134">**表示**: 既定では、全画面になります。</span><span class="sxs-lookup"><span data-stu-id="26c79-134">**Display**: By default, it will be full screen.</span></span> <span data-ttu-id="26c79-135">これを低解像度に変更することができ、モニターが複数ある場合、それらをすべて使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="26c79-135">You can change this to a lower resolution, or use all your monitors if you have more than one.</span></span>
    - <span data-ttu-id="26c79-136">**ローカル リソース**: ローカル ドライブを VM と共有し、ご利用の PC から VM にファイルをコピーすることができます。</span><span class="sxs-lookup"><span data-stu-id="26c79-136">**Local Resources**: You can share local drives with the VM - allowing you to copy files from your PC to the VM.</span></span> <span data-ttu-id="26c79-137">**[ローカル デバイスとリソース]** の下にある **[詳細]** ボタンをクリックして、共有するものを選択します。</span><span class="sxs-lookup"><span data-stu-id="26c79-137">Click the **More** button under **Local devices and resources** to select what is shared.</span></span>
    - <span data-ttu-id="26c79-138">**エクスペリエンス**: ネットワークの品質に基づいて視覚的効果を調整します。</span><span class="sxs-lookup"><span data-stu-id="26c79-138">**Experience**: Adjust the visual experience based on your network quality.</span></span>

1. <span data-ttu-id="26c79-139">ローカルの C: ドライブを共有して、VM に表示されるようにします。</span><span class="sxs-lookup"><span data-stu-id="26c79-139">Share your Local C: drive so it will be visible to the VM.</span></span>

1. <span data-ttu-id="26c79-140">**[全般]** タブに戻り、**[保存]** をクリックして変更内容を保存します。</span><span class="sxs-lookup"><span data-stu-id="26c79-140">Switch back to the **General** tab and click **Save** to save the changes.</span></span> <span data-ttu-id="26c79-141">後でいつでもこのファイルに戻り、編集して、他の設定を試すことができます。</span><span class="sxs-lookup"><span data-stu-id="26c79-141">You can always come back and edit this file later to try other settings.</span></span>

### <a name="connect-to-the-windows-vm"></a><span data-ttu-id="26c79-142">Windows VM に接続する</span><span class="sxs-lookup"><span data-stu-id="26c79-142">Connect to the Windows VM</span></span>

1. <span data-ttu-id="26c79-143">**[接続]** ボタンをクリックして、VM への接続を開始します。</span><span class="sxs-lookup"><span data-stu-id="26c79-143">Click the **Connect** button to start the connection to the VM.</span></span>

1. <span data-ttu-id="26c79-144">**[リモート デスクトップ接続]** ダイアログ ボックスで、セキュリティに関する警告とリモート コンピューターの IP アドレスをメモしてから **[接続]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="26c79-144">In the **Remote Desktop Connection** dialog box, note the security warning and the remote computer IP address, then click **Connect**.</span></span>

1. <span data-ttu-id="26c79-145">**[Windows セキュリティ]** ダイアログ ボックスに、手順 6 と 7 で使用したユーザー名とパスワードを入力します。</span><span class="sxs-lookup"><span data-stu-id="26c79-145">In the **Windows Security** dialog box, enter your username and password that you used in steps 6 and 7.</span></span>

    > [!NOTE]
    > <span data-ttu-id="26c79-146">Windows クライアントを使用して VM に接続する場合、既定でご利用のコンピューター上の既知の ID に設定されます。</span><span class="sxs-lookup"><span data-stu-id="26c79-146">If you are using a Windows client to connect to the VM, it will default to known identities on your machine.</span></span> <span data-ttu-id="26c79-147">**[すべての表示]** オプションをクリックし、[別のアカウントを使う] を選択して、別のユーザー名とパスワードの組み合わせを入力することができます。</span><span class="sxs-lookup"><span data-stu-id="26c79-147">You can click the **More choices** option and select "Use a different account" to let you enter a different username/password combination.</span></span>

1. <span data-ttu-id="26c79-148">2 番目の **[リモート デスクトップ接続]** ダイアログ ボックスで、証明書に関するエラーをメモしてから **[はい]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="26c79-148">In the second **Remote Desktop Connection** dialog box, note the certificate errors, then click **Yes**.</span></span>

### <a name="install-worker-roles"></a><span data-ttu-id="26c79-149">worker ロールをインストールする</span><span class="sxs-lookup"><span data-stu-id="26c79-149">Install worker roles</span></span>

<span data-ttu-id="26c79-150">最初に Windows サーバーの VM に接続するときに、サーバー マネージャーが起動します。</span><span class="sxs-lookup"><span data-stu-id="26c79-150">The first time you connect to a Windows server VM, it will launch Server Manager.</span></span> <span data-ttu-id="26c79-151">これにより、一般的な Web またはデータ タスク用の worker ロールを割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="26c79-151">This allows you to assign a worker role for common web or data tasks.</span></span> <span data-ttu-id="26c79-152">[スタート] メニューからサーバー マネージャーを起動することもできます。</span><span class="sxs-lookup"><span data-stu-id="26c79-152">You can also launch the Server Manager through the Start Menu.</span></span>

<span data-ttu-id="26c79-153">ここでサーバーに Web サーバー ロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="26c79-153">This is where we would add the Web Server role to the server.</span></span> <span data-ttu-id="26c79-154">これにより IIS がインストールされます。構成の一環として、HTTP 要求をオフにし、FTP サーバーを有効にします。</span><span class="sxs-lookup"><span data-stu-id="26c79-154">This will install IIS and as part of the configuration you would turn off HTTP requests and enable the FTP server.</span></span> <span data-ttu-id="26c79-155">または、IIS を無視して、サード パーティの FTP サーバーをインストールできます。</span><span class="sxs-lookup"><span data-stu-id="26c79-155">Or, we could ignore IIS and install a third-party FTP server.</span></span> <span data-ttu-id="26c79-156">その後、VM に追加したビッグ データ ドライブ上のフォルダーにアクセスできるように FTP サーバーを構成します。</span><span class="sxs-lookup"><span data-stu-id="26c79-156">We'd then configure the FTP server to allow access to a folder on our big data drive we added to the VM.</span></span>

<span data-ttu-id="26c79-157">実際にはここで構成しないため、単にサーバー マネージャーを閉じます。</span><span class="sxs-lookup"><span data-stu-id="26c79-157">Since we aren't going to actually configure that here, just close Server Manager.</span></span>

## <a name="install-custom-software"></a><span data-ttu-id="26c79-158">カスタム ソフトウェアをインストールする</span><span class="sxs-lookup"><span data-stu-id="26c79-158">Install custom software</span></span>

<span data-ttu-id="26c79-159">ソフトウェアをインストールするために使用できる 2 つのアプローチがあります。</span><span class="sxs-lookup"><span data-stu-id="26c79-159">We have two approaches we can use to install software.</span></span> <span data-ttu-id="26c79-160">1 つ目のアプローチでは、この VM がインターネットに接続されます。</span><span class="sxs-lookup"><span data-stu-id="26c79-160">First, this VM is connected to the Internet.</span></span> <span data-ttu-id="26c79-161">必要なソフトウェアのダウンロード可能なインストーラーがある場合は、RDP セッションで Web ブラウザーを開き、ソフトウェアをダウンロードしてインストールできます。</span><span class="sxs-lookup"><span data-stu-id="26c79-161">If the software you need has a downloadable installer, you can open a web browser in the RDP session, download the software, and install it.</span></span> <span data-ttu-id="26c79-162">2 つ目のアプローチでは、ソフトウェアがカスタム (カスタム サービスなど) である場合、ローカル コンピューターから VM にコピーしてインストールすることができます。</span><span class="sxs-lookup"><span data-stu-id="26c79-162">Second, if your software is custom - like our custom service, you can copy it from your local machine over to the VM to install it.</span></span> <span data-ttu-id="26c79-163">この後者のアプローチを見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="26c79-163">Let's look at this latter approach.</span></span>

1. <span data-ttu-id="26c79-164">エクスプローラーを開きます。</span><span class="sxs-lookup"><span data-stu-id="26c79-164">Open File Explorer.</span></span> <span data-ttu-id="26c79-165">サイドバーの **[この PC]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="26c79-165">Click on **This PC** in the sidebar.</span></span> <span data-ttu-id="26c79-166">ドライブがいくつか表示されます。</span><span class="sxs-lookup"><span data-stu-id="26c79-166">You should see several drives:</span></span>

    - <span data-ttu-id="26c79-167">OS を表す Windows (C:) ドライブ。</span><span class="sxs-lookup"><span data-stu-id="26c79-167">Windows (C:) drive representing the OS.</span></span>
    - <span data-ttu-id="26c79-168">一時ストレージ (D:) ドライブ。</span><span class="sxs-lookup"><span data-stu-id="26c79-168">Temporary Storage (D:) drive.</span></span>
    - <span data-ttu-id="26c79-169">ローカルの C: ドライブ (以下に示す名前とは異なります)。</span><span class="sxs-lookup"><span data-stu-id="26c79-169">Your local C: drive (it will have a different name than shown below).</span></span>

    ![Azure VM と共有するローカル ドライブを示すスクリーンショット。](../media/6-drive-list.png)

<span data-ttu-id="26c79-171">ローカル ドライブにアクセスしてカスタム ソフトウェア用のファイルを VM にコピーし、ソフトウェアをインストールできます。</span><span class="sxs-lookup"><span data-stu-id="26c79-171">With access to your local drive, you can copy the files for the custom software onto the VM and install the software.</span></span> <span data-ttu-id="26c79-172">これは単なるシミュレートされたシナリオであるため、実際には行いませんが、そのしくみを想像することはできます。</span><span class="sxs-lookup"><span data-stu-id="26c79-172">We won't actually do that since it's just a simulated scenario, but you can imagine how it would work.</span></span>

<span data-ttu-id="26c79-173">ドライブの一覧でさらに興味深いことは、_表示されていない_ものです。</span><span class="sxs-lookup"><span data-stu-id="26c79-173">The more interesting thing to observe in the list of drives is what is _missing_.</span></span> <span data-ttu-id="26c79-174">**データ** ドライブが存在しないことに注目してください。</span><span class="sxs-lookup"><span data-stu-id="26c79-174">Notice that our **Data** drive is not present.</span></span> <span data-ttu-id="26c79-175">Azure で VHD が追加されていますが、初期化はされていません。</span><span class="sxs-lookup"><span data-stu-id="26c79-175">Azure added a VHD but didn't initialize it.</span></span>

## <a name="initialize-data-disks"></a><span data-ttu-id="26c79-176">データ ディスクの初期化</span><span class="sxs-lookup"><span data-stu-id="26c79-176">Initialize data disks</span></span>

<span data-ttu-id="26c79-177">一から作成した追加ドライブはすべて、初期化してフォーマットする必要があります。</span><span class="sxs-lookup"><span data-stu-id="26c79-177">Any additional drives you create from scratch will need to be initialized and formatted.</span></span> <span data-ttu-id="26c79-178">これを行うためのプロセスは、物理ドライブと同じです。</span><span class="sxs-lookup"><span data-stu-id="26c79-178">The process for doing this is identical to a physical drive.</span></span>

1. <span data-ttu-id="26c79-179">[スタート] メニューから **[ディスクの管理]** ツールを起動します。</span><span class="sxs-lookup"><span data-stu-id="26c79-179">Launch the **Disk Management** tool from the Start Menu.</span></span> <span data-ttu-id="26c79-180">場合によっては先に [コンピューター管理] ツールに移動し、次に [ディスクの管理] に移動する必要があります。あるいは、スタート メニューで "ディスク管理" を検索してみてください。</span><span class="sxs-lookup"><span data-stu-id="26c79-180">You may have to go to the Computer Management tool first, then Disk Management, or try searching for "Disk Management" in the Start Menu.</span></span>

1. <span data-ttu-id="26c79-181">初期化されていないディスクが検出されたことを示す警告が表示されます。</span><span class="sxs-lookup"><span data-stu-id="26c79-181">It will display a warning that it has detected an uninitialized disk.</span></span>

    ![[ディスクの管理] ツールのスクリーンショット。VM で初期化されていないデータ ディスクに関する警告が表示されています。](../media/6-disk-management.png)

1. <span data-ttu-id="26c79-183">**[OK]** をクリックしてディスクを初期化します。</span><span class="sxs-lookup"><span data-stu-id="26c79-183">Click **OK** to initialize the disk.</span></span> <span data-ttu-id="26c79-184">フォーマットし、ドライブ文字を割り当てることができる場所がボリュームのリストに表示されます。</span><span class="sxs-lookup"><span data-stu-id="26c79-184">It will then show up in the list of volumes where you can format it and assign a drive letter.</span></span>

1. <span data-ttu-id="26c79-185">エクスプローラーを開くと、データ ドライブが表示されます。</span><span class="sxs-lookup"><span data-stu-id="26c79-185">Open File Explorer and you should now see your data drive.</span></span>

1. <span data-ttu-id="26c79-186">先に進み、RDP クライアントを閉じて VM からサインアウトします。</span><span class="sxs-lookup"><span data-stu-id="26c79-186">Go ahead and close the RDP client to sign out of the VM.</span></span> <span data-ttu-id="26c79-187">サーバーは引き続き実行されます。</span><span class="sxs-lookup"><span data-stu-id="26c79-187">The server will continue to run.</span></span>

<span data-ttu-id="26c79-188">RDP を使用すると、ローカル コンピューターと同じように Azure VM を操作できます。</span><span class="sxs-lookup"><span data-stu-id="26c79-188">RDP allows you to work with the Azure VM just like a local computer.</span></span> <span data-ttu-id="26c79-189">デスクトップ UI アクセスでは、Windows コンピューターと同じようにこの VM を管理することができ、ソフトウェアのインストール、ロールの構成、機能の調整、他の一般的なタスクを実行できます。</span><span class="sxs-lookup"><span data-stu-id="26c79-189">With Desktop UI access, you can administer this VM as you would any Windows computer: installing software, configuring roles, adjusting features and other common tasks.</span></span> <span data-ttu-id="26c79-190">しかし、それは手動プロセスです。常に一部のソフトウェアをインストールする必要がある場合は、スクリプトを使用してプロセスの自動化を検討してください。</span><span class="sxs-lookup"><span data-stu-id="26c79-190">However, it's a manual process - if we always need to install some software, you might consider automating the process using scripting.</span></span>