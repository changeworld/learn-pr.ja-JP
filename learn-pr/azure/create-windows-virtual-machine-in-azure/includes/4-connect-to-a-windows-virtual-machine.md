<span data-ttu-id="1f6af-101">これで、Azure 内に Windows VM を用意できました。次に、ご自分のアプリケーションとデータをそれらの VM に配置し、トラフィックのビデオを処理します。</span><span class="sxs-lookup"><span data-stu-id="1f6af-101">Now that we have a Windows VM in Azure, the next thing you’ll do is put your applications and data on those VMs to process our traffic videos.</span></span> 

<span data-ttu-id="1f6af-102">しかし、Azure に対してサイト間 VPN を設定していない場合、ご利用の Azure VM にはご自分のローカル ネットワークからアクセスできません。</span><span class="sxs-lookup"><span data-stu-id="1f6af-102">However, unless you’ve set up a site-to-site VPN to Azure, your Azure VMs won’t be accessible from your local network.</span></span> <span data-ttu-id="1f6af-103">Azure を使い始めたばかりの場合は、サイト間 VPN を設定している可能性は低いです。</span><span class="sxs-lookup"><span data-stu-id="1f6af-103">If you’re just getting started with Azure, it’s unlikely that you have a working site-to-site VPN.</span></span> <span data-ttu-id="1f6af-104">どのようにすればファイルを Azure VM に転送できるでしょうか? </span><span class="sxs-lookup"><span data-stu-id="1f6af-104">So how can you transfer files to Azure VMs?</span></span> <span data-ttu-id="1f6af-105">Azure のリモート デスクトップ接続の機能を使用して、ご自分の新しい Azure VM でローカル ドライブを共有するのが簡単な方法です。</span><span class="sxs-lookup"><span data-stu-id="1f6af-105">One easy way is to use Azure’s Remote Desktop Connections feature to share your local drives with your new Azure VMs.</span></span>

<span data-ttu-id="1f6af-106">新しい Windows 仮想マシンがあり、そこにカスタム ソフトウェアをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="1f6af-106">Now that we have a new Windows virtual machine, we need to install our custom software on to it.</span></span> <span data-ttu-id="1f6af-107">使用できる方法が 2 つあります。</span><span class="sxs-lookup"><span data-stu-id="1f6af-107">There are two ways we can use:</span></span>

- <span data-ttu-id="1f6af-108">リモート デスクトップ プロトコル (RDP)</span><span class="sxs-lookup"><span data-stu-id="1f6af-108">Remote Desktop Protocol (RDP)</span></span>
- <span data-ttu-id="1f6af-109">カスタム スクリプト</span><span class="sxs-lookup"><span data-stu-id="1f6af-109">Custom scripts</span></span>
- <span data-ttu-id="1f6af-110">カスタム VM イメージ (プレインストールされているソフトウェアを含む)</span><span class="sxs-lookup"><span data-stu-id="1f6af-110">Custom VM images (with the software preinstalled)</span></span>

<span data-ttu-id="1f6af-111">Windows VM における最も簡単な手法であるリモート デスクトップを見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="1f6af-111">Let's look at the simplest approach for Windows VMs: Remote Desktop.</span></span>

## <a name="what-is-the-remote-desktop-protocol"></a><span data-ttu-id="1f6af-112">リモート デスクトップ プロトコルとは</span><span class="sxs-lookup"><span data-stu-id="1f6af-112">What is the Remote Desktop Protocol?</span></span>

<span data-ttu-id="1f6af-113">リモート デスクトップ (RDP) は、Windows ベース コンピューターの UI へのリモート接続を提供します。</span><span class="sxs-lookup"><span data-stu-id="1f6af-113">Remote Desktop (RDP) provides remote connectivity to the UI of Windows-based computers.</span></span> <span data-ttu-id="1f6af-114">RDP を使用すると、離れた場所にある物理または仮想 Windows コンピューターにサインインし、まるでコンソールで操作しているかのようにそのコンピューターを制御できます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-114">RDP enables you to sign in to a remote physical or virtual Windows computer and control that computer as if you were seated at the console.</span></span> <span data-ttu-id="1f6af-115">RDP 接続を利用すると、電源とハードウェアに関連する一部の機能を除き、物理コンピューターのコンソールからできる作業のほとんどを実行できます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-115">An RDP connection enables you to carry out the vast majority of operations that you can do from the console of a physical computer, with the exception of some power and hardware-related functions.</span></span>

<span data-ttu-id="1f6af-116">RDP 接続には RDP クライアントが必要です。</span><span class="sxs-lookup"><span data-stu-id="1f6af-116">An RDP connection requires an RDP client.</span></span> <span data-ttu-id="1f6af-117">Microsoft では、次のオペレーティング システム用の RDP クライアントを提供しています。</span><span class="sxs-lookup"><span data-stu-id="1f6af-117">Microsoft provides RDP clients for the following operating systems:</span></span>

- <span data-ttu-id="1f6af-118">Windows (組み込み)</span><span class="sxs-lookup"><span data-stu-id="1f6af-118">Windows (built-in)</span></span>
- <span data-ttu-id="1f6af-119">MacOS</span><span class="sxs-lookup"><span data-stu-id="1f6af-119">MacOS</span></span>
- <span data-ttu-id="1f6af-120">iOS</span><span class="sxs-lookup"><span data-stu-id="1f6af-120">iOS</span></span>
- <span data-ttu-id="1f6af-121">Android</span><span class="sxs-lookup"><span data-stu-id="1f6af-121">Android</span></span>

<span data-ttu-id="1f6af-122">次のスクリーンショットは、Windows 10 でのリモート デスクトップ プロトコル クライアントを示しています。</span><span class="sxs-lookup"><span data-stu-id="1f6af-122">The following screenshot displays the Remote Desktop Protocol client in Windows 10.</span></span>

![リモート デスクトップ プロトコル クライアントのユーザー インターフェイスのスクリーンショット。](../media/4-rdp-client.png)

<span data-ttu-id="1f6af-124">また、オープンソースの Linux クライアントもあり、たとえば、Remmina を利用すれば、Ubuntu ディストリビューションから Windows PC に接続できます。また、オープンソースの Linux クライアントもあり、たとえば、Remmina を利用すれば、Ubuntu ディストリビューションから Windows PC に接続できます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-124">There are also open source Linux clients, such as Remmina that enable you to connect to a Windows PC from an Ubuntu distribution.</span></span>

## <a name="connecting-to-an-azure-vm"></a><span data-ttu-id="1f6af-125">Azure VM への接続</span><span class="sxs-lookup"><span data-stu-id="1f6af-125">Connecting to an Azure VM</span></span>

<span data-ttu-id="1f6af-126">少し前に説明したように、Azure VM は仮想ネットワーク経由で通信します。</span><span class="sxs-lookup"><span data-stu-id="1f6af-126">As we saw a moment ago, Azure VMs communicate on a virtual network.</span></span> <span data-ttu-id="1f6af-127">また、任意のパブリック IP アドレスを VM に割り当てることもできます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-127">They can also have an optional public IP address assigned to them.</span></span> <span data-ttu-id="1f6af-128">パブリック IP を使用すると、インターネット経由で VM と通信できます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-128">With a public IP, we can communicate with the VM over the Internet.</span></span> <span data-ttu-id="1f6af-129">または、オンプレミスのネットワークを Azure に接続する仮想プライベート ネットワーク (VPN) を設定できます。そうすれば、パブリック IP を公開することなく、安全に VM に接続できます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-129">Alternatively, we can setup a virtual private network (VPN) that connects our on-premises network to Azure - letting us securely connect to the VM without exposing a public IP.</span></span> <span data-ttu-id="1f6af-130">そのオプションを調べてみたい場合は、別のモジュールでこのアプローチが取り上げられており、詳細なドキュメントもあります。</span><span class="sxs-lookup"><span data-stu-id="1f6af-130">This approach is covered in another module and is fully documented if you are interested in exploring that option.</span></span>

<span data-ttu-id="1f6af-131">Azure でのパブリック IP アドレスに関して注意すべき 1 つの点は、多くの場合、それが動的に割り当てられることです。</span><span class="sxs-lookup"><span data-stu-id="1f6af-131">One thing to be aware of with public IP addresses in Azure is they are often dynamically allocated.</span></span> <span data-ttu-id="1f6af-132">つまり、時間が経つと IP アドレスが変わる可能性があります。VM の場合、これは VM の再起動時に行われます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-132">That means the IP address can change over time - for VMs this happens when the VM is restarted.</span></span> <span data-ttu-id="1f6af-133">名前ではなく IP アドレスに直接接続し、IP アドレスが変化しないようにする必要がある場合は、静的アドレスを割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-133">You can pay more to assign static addresses if you want to connect directly to an IP address instead of a name and need to ensure that the IP address will not change.</span></span>

### <a name="how-do-you-connect-to-a-vm-in-azure-using-rdp"></a><span data-ttu-id="1f6af-134">RDP を使用して Azure の VM に接続する方法</span><span class="sxs-lookup"><span data-stu-id="1f6af-134">How do you connect to a VM in Azure using RDP?</span></span>

<span data-ttu-id="1f6af-135">RDP を使用した Azure の VM への接続はシンプルなプロセスです。</span><span class="sxs-lookup"><span data-stu-id="1f6af-135">Connecting to a VM in Azure using RDP is a simple process.</span></span> <span data-ttu-id="1f6af-136">Azure portal で、お使いの VM のプロパティに移動し、一番上にある **[接続]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="1f6af-136">In the Azure portal, you go to the properties of your VM, and at the top, click **Connect**.</span></span> <span data-ttu-id="1f6af-137">これにより、その VM に割り当てられている IP アドレスが表示され、Windows が RDP クライアントで開かれる構成済みの **.rdp** ファイルをダウンロードするオプションが提供されます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-137">This will show you the IP addresses assigned to the VM and give you the option to download a preconfigured **.rdp** file that Windows then opens in the RDP client.</span></span> <span data-ttu-id="1f6af-138">RDP ファイルの VM のパブリック IP アドレス経由で接続するように選択できます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-138">You can choose to connect over the public IP address of the VM in the RDP file.</span></span> <span data-ttu-id="1f6af-139">あるいは、VPN または ExpressRoute 経由で接続する場合、内部 IP アドレスを選択できます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-139">Alternatively, if you're connecting over VPN or ExpressRoute, you can select the internal IP address.</span></span> <span data-ttu-id="1f6af-140">また、接続にポート番号も選択することもできます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-140">You can also select the port number for the connection.</span></span>

<span data-ttu-id="1f6af-141">VM に静的パブリック IP アドレスを使用している場合、**.rdp** ファイルをお使いのデスクトップに保存できます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-141">If you're using a static public IP address for the VM, you can save the **.rdp** file to your desktop.</span></span> <span data-ttu-id="1f6af-142">動的 IP アドレスを使用している場合、VM が実行されている間のみ、**.rdp** ファイルは有効となります。</span><span class="sxs-lookup"><span data-stu-id="1f6af-142">If you're using dynamic IP addressing, the **.rdp** file only remains valid while the VM is running.</span></span> <span data-ttu-id="1f6af-143">VM を停止し、再起動する場合、別の **.rdp** ファイルをダウンロードする必要があります。</span><span class="sxs-lookup"><span data-stu-id="1f6af-143">If you stop and restart the VM, you must download another **.rdp** file.</span></span>

> [!TIP]
> <span data-ttu-id="1f6af-144">Windows RDP クライアントに VM のパブリック IP アドレスを入力し、**[接続]** をクリックすることもできます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-144">You can also enter the public IP address of the VM into the Windows RDP client and click **Connect**.</span></span>

<span data-ttu-id="1f6af-145">接続すると、通常、2 つの警告が表示されます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-145">When you connect, you will typically receive two warnings.</span></span> <span data-ttu-id="1f6af-146">次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="1f6af-146">These are:</span></span>

<span data-ttu-id="1f6af-147">-**発行元警告** - **.rdp** ファイルに公的な署名がないことが警告の原因です。</span><span class="sxs-lookup"><span data-stu-id="1f6af-147">-**Publisher warning** - caused by the **.rdp** file not being publicly signed.</span></span>
- <span data-ttu-id="1f6af-148">**証明書警告** - コンピューター証明書が信頼されていないことが警告の原因です。</span><span class="sxs-lookup"><span data-stu-id="1f6af-148">**Certificate warning** - caused by the machine certificate not being trusted.</span></span>

<span data-ttu-id="1f6af-149">テスト環境では、これらの警告を無視できます。</span><span class="sxs-lookup"><span data-stu-id="1f6af-149">In test environments, these warnings can be ignored.</span></span> <span data-ttu-id="1f6af-150">運用環境では、**.rdp** ファイルに **RDPSIGN.EXE** を利用して署名し、コンピューター証明書をクライアントの**信頼されたルート証明機関**ストアに配置するということが可能です。</span><span class="sxs-lookup"><span data-stu-id="1f6af-150">In production environments, the **.rdp** file can be signed using **RDPSIGN.EXE** and the machine certificate placed in the client's **Trusted Root Certification Authorities** store.</span></span>

<span data-ttu-id="1f6af-151">RDP を使用して VM に接続してみましょう。</span><span class="sxs-lookup"><span data-stu-id="1f6af-151">Let's try using RDP to connect to our VM.</span></span>