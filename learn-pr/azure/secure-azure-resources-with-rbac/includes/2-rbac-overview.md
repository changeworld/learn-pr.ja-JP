開発者、エンジニアリング、およびマーケティング チームに対して、Azure 内のリソースへのアクセス許可を管理する必要があるとします。 アクセス権の要求を受け取り始めており、Azure 内でリソースに対するアクセス管理が機能する方法のスピードに追い付く必要があります。

## <a name="what-is-rbac"></a>RBAC とは何ですか?

ロールベースのアクセス制御 (RBAC) は、[Azure Resource Manager](/azure/azure-resource-manager/resource-group-overview) 上に構築された承認システムであり、Azure 内のリソースに対するアクセスをきめ細かく管理できます。 Azure には多くのリソースがありますが、例は少しで、仮想マシン、Web サイト、ネットワーク、ストレージなどが用意されています。

## <a name="what-can-i-do-with-rbac"></a>RBAC でできることは何ですか?

RBAC を使用すると、制御する Azure リソースに対し、1 人のユーザーまたはユーザー グループにアクセス許可を付与できます。

次に例をいくつか示します。
- あるユーザーにサブスクリプション内の仮想マシンの管理を許可し、別のユーザーに仮想ネットワークの管理を許可します
- データベース管理者グループにサブスクリプション内の SQL データベースの管理を許可します
- あるユーザーに、仮想マシン、Web サイト、サブネットなど、リソース グループ内のすべてのリソースの管理を許可します
- あるアプリケーションに、リソース グループ内のすべてのリソースへのアクセスを許可します

## <a name="rbac-in-the-azure-portal"></a>Azure portal での RBAC

Azure portal のいくつかの領域に、**[アクセス制御 (IAM)]** という名前のブレードが表示されます。これは、ID やアクセス管理とも呼ばれます。 このブレードでは、その領域へのアクセス権を持つユーザーとそのロールを確認できます。 この同じブレードを使用して、アクセス許可を付与または削除できます。

リソース グループに対する [アクセス制御 (IAM)] ブレードの例を次に示します。 この例で、Alain Charon には、このリソース グループのバックアップ オペレーター ロールが割り当てられています。

![Azure portal の [アクセス制御 (IAM)]](../media-draft/2-resource-group-access-control.png)

## <a name="how-does-rbac-work"></a>RBAC のしくみ

ロールの割り当てを作成することによって、RBAC を使用してリソースへのアクセスを制御します。これは、アクセス許可を適用する方法を制御します。 ロールの割り当てを作成するには、次の 3 つの要素が必要です。セキュリティ プリンシパル、ロールの定義、スコープです。 これらの要素を "だれが"、"何を"、"どこで" として考えることができます。

### <a name="1-security-principal-who"></a>1.セキュリティ プリンシパル (だれが)

*セキュリティ プリンシパル*は、アクセス許可を付与するユーザー、グループ、またはアプリケーションへの単に装飾的な名前です。

![セキュリティ プリンシパル](../media-draft/2-rbac-security-principal.png)

### <a name="2-role-definition-what-you-can-do"></a>2.ロールの定義 (実行できること)

*ロール定義*は、アクセス許可のコレクションです。 単にロールと呼ばれることもあります。 ロール定義には、実行できるアクセス許可 (読み取り、書き込み、削除など) が一覧表示されます。 ロールは、所有者のように高レベルにすることも、Virtual Machine Contributor のように限定することもできます。

![ロールの定義](../media-draft/2-rbac-role-definition.png)

Azure には、ユーザーが使用できる複数の[組み込みロール](/azure/role-based-access-control/built-in-roles)があります。 4 つの基本的な組み込みロールを次に示します。

- 所有者 - 他のユーザーにアクセス許可を委任する権限を含め、すべてのリソースへのフル アクセス権を持ちます。
- 共同作成者 - Azure リソースのすべてのタイプを作成および管理できますが、他のユーザーにアクセス許可を付与することはできません。
- 閲覧者 - 既存の Azure リソースを表示できます。
- ユーザー アクセス管理者 - ユーザーが Azure リソースへのユーザー アクセスを管理できるようにします。

組み込みロールが組織の特定のニーズを満たさない場合は、独自の[カスタム ロール](/azure/role-based-access-control/custom-roles)を作成することができます。

### <a name="3-scope-where"></a>3.スコープ (どこで)

*スコープ*は、アクセス許可が適用される場所です。 これは、1 つのリソース グループについてのみ、あるユーザーを Web サイトの共同作成者として指定する場合に便利です。

Azure では、複数のレベル (管理グループ、サブスクリプション、リソース グループ、リソース) でスコープを指定できます。 スコープは親子関係で構造化されています。 親スコープでアクセス権を付与すると、それらのアクセス許可が子スコープに継承されます。 たとえば、サブスクリプション スコープで共同作成者ロールをグループに割り当てる場合、そのロールはサブスクリプション内のすべてのリソース グループとリソースに継承されます。

![スコープ](../media-draft/2-rbac-scope.png)

### <a name="role-assignment"></a>ロールの割り当て

だれが、何を、どこで、を決定すると、アクセス許可を付与するそれらの要素を結合させることができます。 *ロールの割り当て*は、アクセスの許可を目的として、特定のスコープでサービス プリンシパルにロールをバインドするプロセスです。 アクセス権を付与するには、ロールの割り当てを作成します。 アクセス権を削除するには、ロールの割り当てを削除します。

この例では、マーケティング グループが、どのように営業リソース グループ スコープで共同作成者ロールを割り当てられているかを示しています。

![ロールの割り当て](../media-draft/2-rbac-overview.png)

## <a name="rbac-is-allow-only-with-no-deny"></a>RBAC は許可専用で、拒否はありません

現在、RBAC は拒否のない、許可専用モデルです。 つまり、これはロールを割り当てられたときに、RBAC では読み取り、書き込み、削除などの特定のアクションを実行できるということです。 RBAC では、明示的にアクセスを拒否することはありません。 そのため、1 つのロールの割り当てによってあるリソース グループへの読み取りアクセス許可が付与されていて、別のロールの割り当てによって同じリソース グループへの書き込みアクセス許可が付与されている場合、ユーザーはそのリソース グループで書き込みアクセス許可を持つことになります。

RBAC には、`NotActions` アクセス許可と呼ばれるものがあります。 `NotActions` は拒否ルールとは異なり、特定のアクセス許可を除外する必要があるときに、許可の対象となる一連のアクセス許可を作成しやすくすることを目的としたものに過ぎません。

## <a name="other-roles-in-azure"></a>Azure のその他のロール

Azure を操作するときに、全体管理者、アカウント管理者などのその他のロールが表示される可能性があります。 このようなその他のロールの多くは、ユーザーの作成、パスワードのリセット、ユーザー ライセンスの管理、ドメインの管理など、Azure Active Directory 管理に使用されます。 詳しく学習する必要がある場合は、参照できる詳細情報がありますが、RBAC ロールは Azure リソースへのアクセスを管理するために使用されるということを覚えておくことが重要です。

## <a name="summary"></a>まとめ

このユニットでは、RBAC のしくみの基本について学習しました。 これで、RBAC の基礎を理解できたので、RBAC の使用を始めることができます。 作業を開始するには、Azure portal を使用するのが最も簡単です。 このモジュールの残りで、RBAC に関連する実践的な演習を行えます。
