<span data-ttu-id="b2007-101">多くの場合、サービス企業の成功は、企業がその顧客と締結するサービス レベル アグリーメント (SLA) に直接関連します。</span><span class="sxs-lookup"><span data-stu-id="b2007-101">Often, the success of a services company is directly related to the service level agreements (SLA) the company has with its customers.</span></span> <span data-ttu-id="b2007-102">あなたのお客様は企業が提供するサービスが常に利用できること、自分のデータが安全に守られることを期待しています。</span><span class="sxs-lookup"><span data-stu-id="b2007-102">Your customers expect the services you provide always to be available and their data kept safe.</span></span> <span data-ttu-id="b2007-103">Microsoft はこのことを非常に深刻に受け止めています。</span><span class="sxs-lookup"><span data-stu-id="b2007-103">This is something that Microsoft takes very seriously.</span></span> <span data-ttu-id="b2007-104">お客様がサービスをいつでも利用できていることを確認できるように、可用性、データ セキュリティ、監視の管理に使用できるツールが Azure により提供されています。</span><span class="sxs-lookup"><span data-stu-id="b2007-104">Azure provides tools you can use to manage availability, data security, and monitoring, so you know your services are always available for your customers.</span></span>

<span data-ttu-id="b2007-105">Azure VM の管理は、VM で実行されるオペレーティング システムまたはソフトウェアの管理に限定されません。</span><span class="sxs-lookup"><span data-stu-id="b2007-105">Administration of an Azure VM is not limited to managing the operating system or software that runs on the VM.</span></span> <span data-ttu-id="b2007-106">サービスの可用性を確保し、自動化を支援する Azure サービスを把握する上で役立ちます。</span><span class="sxs-lookup"><span data-stu-id="b2007-106">It helps to know which services Azure provides that ensures service availability and supports automation.</span></span> <span data-ttu-id="b2007-107">このようなサービスは、事業継続とディザスター リカバリーの方針を計画するときに便利です。</span><span class="sxs-lookup"><span data-stu-id="b2007-107">These services help you to plan your organizations business continuity and disaster recovery strategy.</span></span>

<span data-ttu-id="b2007-108">ここでは、VM 可用性の改善、VM 管理作業の合理化、VM データのバックアップとセキュリティを支援する Azure サービスを紹介します。</span><span class="sxs-lookup"><span data-stu-id="b2007-108">Here, we will cover Azure service that helps you improve VM availability, streamlines VM management tasks and keep your VM data backed up and safe.</span></span> <span data-ttu-id="b2007-109">それでは可用性の定義から始めましょう。</span><span class="sxs-lookup"><span data-stu-id="b2007-109">Let's start by defining availability.</span></span>

## <a name="what-is-availability"></a><span data-ttu-id="b2007-110">可用性とは何ですか?</span><span class="sxs-lookup"><span data-stu-id="b2007-110">What is availability?</span></span>

<span data-ttu-id="b2007-111">可用性とは、あるサービスを利用できる時間の割合です。</span><span class="sxs-lookup"><span data-stu-id="b2007-111">Availability is the percentage of time a service is available for use.</span></span>

<span data-ttu-id="b2007-112">ある Web サイトを所有しているあなたはその情報に顧客がいつでもアクセスできるようにすることを望んでいるとします。</span><span class="sxs-lookup"><span data-stu-id="b2007-112">Let's assume you have a website and you want your customers to be able to access information at all times.</span></span> <span data-ttu-id="b2007-113">あなたは Web サイトのアクセスについて、100% の可用性を期待しています。</span><span class="sxs-lookup"><span data-stu-id="b2007-113">Your expectation is 100% availability concerning website access.</span></span>

### <a name="why-do-i-need-to-think-about-availability-when-using-azure"></a><span data-ttu-id="b2007-114">Azure を使用するとき、なぜ可用性について考慮する必要があるのですか?</span><span class="sxs-lookup"><span data-stu-id="b2007-114">Why do I need to think about availability when using Azure?</span></span>

<span data-ttu-id="b2007-115">Azure VM は Microsoft のデータ センター内でホストされている物理サーバー上で実行されています。</span><span class="sxs-lookup"><span data-stu-id="b2007-115">Azure VMs run on physical servers hosted within Microsoft's data centers.</span></span> <span data-ttu-id="b2007-116">多くの物理デバイスと同様に、故障が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b2007-116">As with most physical devices, there is a chance that there could be a failure.</span></span> <span data-ttu-id="b2007-117">物理サーバーが故障した場合、そのサーバーでホストされている仮想マシンも停止します。</span><span class="sxs-lookup"><span data-stu-id="b2007-117">If the physical server fails, the virtual machines hosted on that server will also fail.</span></span> <span data-ttu-id="b2007-118">その場合、Azure では、VM が正常なホスト サーバーに自動的に移動されます。</span><span class="sxs-lookup"><span data-stu-id="b2007-118">If this happens, Azure will move the VM to a healthy host server automatically.</span></span> <span data-ttu-id="b2007-119">しかし、この自己修復移行には数分かかることがあり、その間、その VM でホストされているアプリケーションが利用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="b2007-119">However, this self-healing migration could take several minutes, during which, the application(s) hosted on that VM will not be available.</span></span>

<span data-ttu-id="b2007-120">VM はまた、Azure 自体により開始される定期的な更新の影響を受ける場合があります。</span><span class="sxs-lookup"><span data-stu-id="b2007-120">The VMs could also be affected by periodic updates initiated by Azure itself.</span></span> <span data-ttu-id="b2007-121">このような保守管理イベントはソフトウェアの更新からハードウェア アップグレードにまでわたりますが、プラットフォームの信頼性とパフォーマンスを改善することが必要です。</span><span class="sxs-lookup"><span data-stu-id="b2007-121">These maintenance events range from software updates to hardware upgrades and are required to improve platform reliability and performance.</span></span> <span data-ttu-id="b2007-122">そうしたイベントは通常、ゲスト VM に影響を与えることなく実行されますが、更新またはアップグレードを完了するために仮想マシンが再起動されることがあります。</span><span class="sxs-lookup"><span data-stu-id="b2007-122">These events usually are performed without impacting any guest VMs, but sometimes the virtual machines will be rebooted to complete an update or upgrade.</span></span>

> [!NOTE]
> <span data-ttu-id="b2007-123">Microsoft がユーザーの VM OS またはソフトウェアを自動更新することはありません。</span><span class="sxs-lookup"><span data-stu-id="b2007-123">Microsoft does not automatically update your VMs OS or software.</span></span> <span data-ttu-id="b2007-124">更新はユーザーがすべてをコントロールし、その責任を負います。</span><span class="sxs-lookup"><span data-stu-id="b2007-124">You have complete control and responsibility for that.</span></span> <span data-ttu-id="b2007-125">ただし、信頼性と高いパフォーマンスを常に確保するために、基礎となるソフトウェア ホストとハードウェアには定期的にパッチが適用されます。</span><span class="sxs-lookup"><span data-stu-id="b2007-125">However, the underlying software host and hardware are periodically patched to ensure reliability and high performance at all times.</span></span>

<span data-ttu-id="b2007-126">サービスが中断されないようにするため、また、単一障害点を回避するために、VM ごとに 2 つのインスタンスをデプロイすることをお勧めします。この機能は_可用性セット_と呼ばれています。</span><span class="sxs-lookup"><span data-stu-id="b2007-126">To ensure your services are not interrupted and avoid a single point of failure, it's recommended to deploy at least two instances of each VM; this feature is called an _availability set_.</span></span>

### <a name="what-is-an-availability-set"></a><span data-ttu-id="b2007-127">可用性セットとは何ですか?</span><span class="sxs-lookup"><span data-stu-id="b2007-127">What is an availability set?</span></span>

<span data-ttu-id="b2007-128">**可用性セット**とは、全部が単一障害点の制限下に含まれないように、また、データ センターでホスト オペレーティング システムがアップグレードされるとき、全部が同時にアップグレードされないように、関連 VM のグループを確実にデプロイするための論理機能です。</span><span class="sxs-lookup"><span data-stu-id="b2007-128">An **availability set** is a logical feature used to ensure that a group of related VMs are deployed so that they are not all subject to a single point of failure and not all upgraded at the same time during a host operating system upgrade in the data center.</span></span> <span data-ttu-id="b2007-129">可用性セットに配置された VM では、同じ機能セットを実行し、同じソフトウェアをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b2007-129">VMs placed in an availability set should perform an identical set of functionalities and have the same software installed.</span></span>

> [!TIP]
> <span data-ttu-id="b2007-130">Microsoft は、ある可用性セットにデプロイされたマルチインスタンス VM に対して、99.95% の外部接続性サービス レベル アグリーメント (SLA) を提供します。</span><span class="sxs-lookup"><span data-stu-id="b2007-130">Microsoft offers a 99.95% external connectivity service level agreement (SLA) for multiple-instance VMs deployed in an availability set.</span></span> <span data-ttu-id="b2007-131">そのため、適用する SLA に対して、ある可用性セット内に少なくとも 2 つの VM インスタンスをデプロイする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b2007-131">That means that for the SLA to apply, there must be at least two instances of the VM deployed within an availability set.</span></span> 

<span data-ttu-id="b2007-132">可用性セットは Azure portal のディザスター リカバリー セクションから作成できます。</span><span class="sxs-lookup"><span data-stu-id="b2007-132">You can create availability sets through the Azure portal in the disaster recovery section.</span></span> <span data-ttu-id="b2007-133">また、リソース マネージャー テンプレート、任意のスクリプト ツール、任意の API ツールを利用して作成できます。</span><span class="sxs-lookup"><span data-stu-id="b2007-133">Also, you can build them using resource manager templates, or any of the scripting or API tools.</span></span> <span data-ttu-id="b2007-134">可用性セットに VM を配置するとき、Azure では、必ず**障害ドメイン**と**更新ドメイン**に分散されます。</span><span class="sxs-lookup"><span data-stu-id="b2007-134">When you place VMs into an availability set, Azure guarantees to spread them across **Fault Domains** and **Update Domains**.</span></span>

#### <a name="what-is-a-fault-domain"></a><span data-ttu-id="b2007-135">障害ドメインとは何ですか?</span><span class="sxs-lookup"><span data-stu-id="b2007-135">What is a fault domain?</span></span>

<span data-ttu-id="b2007-136">障害ドメインとは Azure のハードウェア論理グループであり、共通の電源とネットワーク スイッチを共有します。</span><span class="sxs-lookup"><span data-stu-id="b2007-136">A fault domain is a logical group of hardware in Azure that share a common power source and network switch.</span></span> <span data-ttu-id="b2007-137">オンプレミス データセンター内のラックのようなものであるとお考えください。</span><span class="sxs-lookup"><span data-stu-id="b2007-137">You can think of it as a rack within an on-premises datacenter.</span></span> <span data-ttu-id="b2007-138">1 つのラックでネットワークまたは電源に障害が発生しても、影響を受ける VM が 1 つだけになるように、可用性セットの最初の 2 つの VM が 2 つの異なるラックにプロビジョニングされます。</span><span class="sxs-lookup"><span data-stu-id="b2007-138">The first two VMs in an availability set will be provisioned into two different racks so that if the network or the power failed in a rack, only one VM would be affected.</span></span> <span data-ttu-id="b2007-139">障害ドメインも、VM に接続されているマネージド ディスクに対して定義されます。</span><span class="sxs-lookup"><span data-stu-id="b2007-139">Fault domains are also defined for managed disks attached to VMs.</span></span>

![障害ドメイン](../media-draft/5-fault-domains.png)

#### <a name="what-is-an-update-domain"></a><span data-ttu-id="b2007-141">更新ドメインとは何ですか?</span><span class="sxs-lookup"><span data-stu-id="b2007-141">What is an update domain?</span></span>

<span data-ttu-id="b2007-142">更新ドメインとは、メンテナンスや再起動が同時に行われる可能性のあるハードウェアの論理グループです。</span><span class="sxs-lookup"><span data-stu-id="b2007-142">An update domain is a logical group of hardware that can undergo maintenance or be rebooted at the same time.</span></span> <span data-ttu-id="b2007-143">Azure では、Azure プラットフォームでホスト オペレーティング システムが変更されるときの影響を最小限に抑える目的で、可用性セットが更新ドメインに自動的に配置されます。</span><span class="sxs-lookup"><span data-stu-id="b2007-143">Azure will automatically place availability sets into update domains to minimize the impact when the Azure platform introduces host operating system changes.</span></span> <span data-ttu-id="b2007-144">Azure ではその後、一度に 1 つずつ各更新ドメインが処理されます。</span><span class="sxs-lookup"><span data-stu-id="b2007-144">Azure then processes each update domain one at a time.</span></span>

<span data-ttu-id="b2007-145">可用性セットは、VM で実行されているサービスを顧客が常に利用できるようにする高度な機能です。</span><span class="sxs-lookup"><span data-stu-id="b2007-145">Availability sets are a powerful feature to ensure the services running in your VMs are always available to your customers.</span></span> <span data-ttu-id="b2007-146">ただし、完全に確実なものではありません。</span><span class="sxs-lookup"><span data-stu-id="b2007-146">However, they aren't foolproof.</span></span> <span data-ttu-id="b2007-147">VM 自体で実行されているデータやソフトウェアに何か発生した場合、どうなりますか?</span><span class="sxs-lookup"><span data-stu-id="b2007-147">What if something happens to the data or the software running on the VM itself?</span></span> <span data-ttu-id="b2007-148">それに関しては、ディザスター リカバリーとバックアップに関する他の手法を考察する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b2007-148">For that, we will need to look at other disaster recovery and backup techniques.</span></span>

## <a name="failover-across-locations"></a><span data-ttu-id="b2007-149">場所の間におけるフェールオーバー</span><span class="sxs-lookup"><span data-stu-id="b2007-149">Failover across locations</span></span>

<span data-ttu-id="b2007-150">サイト間でインフラストラクチャを複製し、リージョン内でフェールオーバーすることもできます。</span><span class="sxs-lookup"><span data-stu-id="b2007-150">You can also replicate your infrastructure across sites to handle regional failover.</span></span> <span data-ttu-id="b2007-151">**Azure Site Recovery** (ASR) では、プライマリ サイトからセカンダリの場所にワークロードが複製されます。</span><span class="sxs-lookup"><span data-stu-id="b2007-151">**Azure Site Recovery** (ASR) replicates workloads from a primary site to a secondary location.</span></span> <span data-ttu-id="b2007-152">プライマリ サイトで停電が発生した場合、セカンダリの場所にフェールオーバーできます。</span><span class="sxs-lookup"><span data-stu-id="b2007-152">If an outage happens at your primary site, you can fail over to a secondary location.</span></span> <span data-ttu-id="b2007-153">このフェールオーバーにより、中断なく、引き続きアプリケーションにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="b2007-153">This failover allows users to continue to access your applications without interruption.</span></span> <span data-ttu-id="b2007-154">その後、再び起動し実行されたら、プライマリの場所にフェールバックできます。</span><span class="sxs-lookup"><span data-stu-id="b2007-154">You can then fail back to the primary location once it's up and running again.</span></span> <span data-ttu-id="b2007-155">Azure Site Recovery の目標は仮想マシンまたは物理マシンの複製にあります。停電時、ワークロードの可用性を維持します。</span><span class="sxs-lookup"><span data-stu-id="b2007-155">Azure Site Recovery is about replication of virtual or physical machines; it keeps your workloads available in an outage.</span></span>

<span data-ttu-id="b2007-156">ASR には優れた技術的特徴がいろいろありますが、ビジネスにおいては利点が少なくとも 2 つあります。</span><span class="sxs-lookup"><span data-stu-id="b2007-156">While there are many attractive technical features to ASR, there are at least two significant business advantages:</span></span>

1. <span data-ttu-id="b2007-157">ASR を利用すれば、Azure を復元先として利用できます。そのため、第二の物理データセンターを保守するためのコストと煩雑さから解放されます。</span><span class="sxs-lookup"><span data-stu-id="b2007-157">ASR enables the use of Azure as a destination for recovery, thus eliminating the cost and complexity of maintaining a secondary physical datacenter.</span></span>

2. <span data-ttu-id="b2007-158">ASR では、運用環境に影響を与えることなく、復旧演習でフェールオーバーを極めてシンプルにテストできます。</span><span class="sxs-lookup"><span data-stu-id="b2007-158">ASR makes it incredibly simple to test failovers for recovery drills without impacting production environments.</span></span> <span data-ttu-id="b2007-159">そのため、計画フェールオーバーや計画外フェールオーバーを簡単にテストできます。</span><span class="sxs-lookup"><span data-stu-id="b2007-159">This makes it easy to test your planned or unplanned failovers.</span></span> <span data-ttu-id="b2007-160">結局のところ、フェールオーバーを試したことがなければ、適切なディザスター リカバリーを計画できません。</span><span class="sxs-lookup"><span data-stu-id="b2007-160">After all, you don’t have a good disaster recovery plan if you’ve never tried to failover.</span></span>

<span data-ttu-id="b2007-161">ASR で作成した復元計画は、シナリオで求められるなら、シンプルにも複雑にもすることができます。</span><span class="sxs-lookup"><span data-stu-id="b2007-161">The recovery plans you create with ASR can be as simple or as complex as your scenario requires.</span></span> <span data-ttu-id="b2007-162">計画にはカスタム PowerShell スクリプト、Azure Automation Runbook、手動介入手順を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="b2007-162">They can include custom PowerShell scripts, Azure Automation runbooks, or manual intervention steps.</span></span> <span data-ttu-id="b2007-163">復元計画を活用してワークロードを Azure に複製できるため、新たな移行、急増時の一時的なバースト、新しいアプリケーションの開発やテストが簡単になります。</span><span class="sxs-lookup"><span data-stu-id="b2007-163">You can leverage the recovery plans to replicate workloads to Azure, easily enabling new opportunities for migration, temporary bursts during surge periods, or development and testing of new applications.</span></span>

<span data-ttu-id="b2007-164">Azure Site Recovery は Azure リソース、Hyper-V、VMware、オンプレミス インフラストラクチャの物理サーバーと連動します。また、複製、フェールオーバー、プライマリの場所に障害が発生した場合のワークロードとアプリケーションの復元を調整することで、組織の BCDR (事業継続とディザスター リカバリー) 方針の重要な部分となります。</span><span class="sxs-lookup"><span data-stu-id="b2007-164">Azure Site Recovery works with Azure resources, or Hyper-V, VMware, and physical servers in your on-premise infrastructure and can be a key part of your organization’s business continuity and disaster recovery (BCDR) strategy by orchestrating the replication, failover, and recovery of workloads and applications if the primary location fails.</span></span>
