トラフィックの急増により中間層に負荷がかかることがわかりました。 これに対処するため、アーティクル アップロード アプリケーションのフロントエンドと中間層の間にキューを追加することにしました。

キューを作成するための最初の手順は、データを格納する Azure ストレージ アカウントの作成です。

## <a name="create-a-storage-account-with-the-azure-cli"></a>Azure CLI を使用してストレージ アカウントを作成する

最初に、ストレージ アカウントを保持する Azure リソース グループを作成しましょう。

1. 右側の Cloud shell で選択肢が与えられている場合は、Bash を選択します。

1. `az group create` の Azure CLI コマンドを使用して新しいリソース グループを作成します。 これに、**ExerciseResources** という名前を付け、自分から近い場所に配置します。 
    - 次の例では、場所として "eastus" を使用しています。

    ```azurecli
    az group create -n ExerciseResources --location eastus
    ```
        
1. 次に、`az storage account create` のコマンドを使用して、実際のストレージ アカウントを作成します。 いくつかのパラメーターを指定する必要があります。

| パラメーター | 値 |
|-----------|-------|
| `--name`  | 名前を設定します。 ストレージ アカウントはその名前を使用してパブリック URL を生成するため、一意でなければなりません。 また、アカウント名の長さは 3 から 24 文字で、数字と小文字のみを使用できます。 **articles** のプレフィックスとランダムな数値のサフィックスを使用することをお勧めしますが、使用するかどうかは任意です。 |
| `-g`        | リソース グループを指定します。値として **ExerciseResources** を使用します。 |
| `--kind`    | ストレージ アカウントの種類を設定します。**StorageV2** を使用して汎用 V2 アカウントを作成します。 |
| `-l`        | リソース グループの所有者に依存しない場所を設定します。 これは省略可能ですが、これにより、リソース グループとは異なるリージョンにキューを配置できるようになります。 |
| `--sku`     | アカウントの種類を設定します。**Standard_RAGRS** がデフォルトに設定されますが、これはこのデモには不適切です。 単にデータ センター内でローカルで冗長になる、**Standard_LRS** を使用しましょう。 |

上記のパラメーターを使用するコマンドラインの例を次に示します。 このコマンドをコピー/貼り付ける場合は、`--name` パラメーターを一意のものに変更してください。

```azurecli
az storage account create --name <name> -g ExerciseResources --kind StorageV2 -l eastus --sku Standard_LRS
```