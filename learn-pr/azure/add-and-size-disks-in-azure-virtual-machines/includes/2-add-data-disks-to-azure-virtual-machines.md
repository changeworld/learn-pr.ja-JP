Azure の仮想マシンでは、その他のコンピューターとまったく同じように、オペレーティング システム、アプリケーション、およびデータを格納するための場所としてディスクを使用します。 これらのディスクは、仮想ハード_ディスク (Vhd) と呼ばれます。

履歴に依存する、法律事務所のデータベースをホストする、Azure での仮想マシン (VM) の作成があるとします。 適切に設計されたディスクの構成は良好なパフォーマンス、および SQL Server の回復力です。

このユニットでは、ディスクの適切な構成値を選択する方法とそれらのディスクを VM にアタッチする方法を学びます。

## <a name="how-disks-are-used-by-vms"></a>Vm でのディスクの使用方法

Vm は、次の 3 つのさまざまな目的のディスクを使用します。

- **オペレーティング システムの記憶域**します。 すべての VM には、オペレーティング システムを格納する 1 つのディスクが含まれています。 このドライブは SATA ドライブとして登録されていると Windows で c: ドライブとしてラベル付けし、Unix 系オペレーティング システムである「/」をマウントします。 最大容量は 2,048 ギガバイト (GB) があり、そのコンテンツは、VM を作成するために使用する VM イメージから実行されます。
- **一時的なストレージ**します。 すべての VM には、ページとスワップ ファイルに使用される一時的な VHD が含まれています。 このドライブ上のデータは、メンテナンス イベントや再デプロイ中に失われる可能性があります。 既定では、ドライブが Windows VM 上の d: 付いています。 失われるしたくない重要なデータを格納するのに、このドライブを使用しないでください。
- **データ ストレージ**。 データ ディスクは、他のディスクを VM に接続します。 データ ディスクを使用して、ファイル、データベース、および再起動の間で保持する必要があるその他のデータを格納します。 いくつかの VM イメージには、既定でデータ ディスクが含まれます。 VM のサイズで指定された最大数まで、独自のデータ ディスクを追加することもできます。 各データ ディスクは SCSI ドライブとして登録であり、最大容量は 4,095 GB を使います。 ドライブ文字を選択したり、データ ドライブのマウント ポイント。

## <a name="storing-vhd-files"></a>VHD ファイルを保存します。

として、Azure ストレージ アカウントに Azure では、Vhd が格納されている**ページ blob**します。

次の表は各種のストレージ アカウントと、それぞれのストレージ アカウントで使用できるオブジェクトとを示したものです。

|**ストレージ アカウントの種類**|**汎用 (standard)**|**汎用 (premium)**|**Blob Storage (ホット アクセス レベルとクール アクセス レベル)**|
|-----|-----|-----|-----|
|**サポートされるサービス**| Azure Blob storage、Azure Files、Azure Queue storage | Blob Storage | Blob Storage|
|**サポートされる BLOB の種類**|ブロック BLOB、ページ BLOB、追加 BLOB | ページ BLOB | ブロック BLOB と追加 BLOB|

両方汎用の standard と premium storage はページ blob をサポートします。 コストを最も重視する場合は、standard storage アカウントを選択します。 Premium storage は、さらに多くの料金がかかりますが、くらい高い I/O 操作数/秒 (IOPS) も提供します。 データのパフォーマンスは、VM に必要な場合は、premium storage を好みます。

## <a name="attach-data-disks-to-vms"></a>データ ディスクを Vm に接続します。

VM にアタッチすることにより、いつでも仮想マシンにデータ ディスクを追加できます。 ディスクを接続、VM と VHD ファイルを関連付けます。 

アタッチされているときに、VHD をストレージから削除することはできません。

### <a name="attach-an-existing-data-disk-to-an-azure-vm"></a>Azure VM への既存のデータ ディスクをアタッチします。

Azure VM で使用するデータを格納する VHD が既にあります。 法律企業シナリオで変換など、おそらくするした既に、物理ディスクを Vhd にローカルです。 PowerShell を使用するこの例では、`Add-AzureRmVhd`コマンドレットは、ストレージ アカウントにアップロードします。 このコマンドレットは、VHD ファイルの転送には最適化され、他の方法よりも高速アップロードを完了することがあります。 複数のスレッドを最適なパフォーマンスを使用して、転送が完了します。 VHD がアップロードされた後は、データ ディスクとして既存の VM に関連付けること。 これは、方法は、すべての種類のデータを Azure Vm にデプロイする優れた方法です。 データは、VM に自動的に存在して、パーティションの作成や、新しいディスクをフォーマットする必要はありません。

### <a name="attach-a-new-data-disk-to-an-azure-vm"></a>Azure VM に新しいデータ ディスクを接続します。

Azure portal を使用すると、新しい空のデータ ディスクを VM に追加します。 

このプロセスを作成、 **.vhd**ストレージ アカウントを指定して、その .vhd ファイルをデータ ディスクとして VM にアタッチことで、ページ blob としてファイル。

データを格納する、新しい VHD を使用することができます、前に、初期化、パーティション、および新しいディスクをフォーマットする必要があります。 次の手順を次の手順で練習をします。

物理的なオンプレミスのサーバーでは、物理ハード_ディスクにデータを格納します。 仮想ハード_ディスク (Vhd) で Azure 仮想マシン (VM) では、データを格納します。 これらの Vhd は、Azure storage アカウントにページ blob として格納されます。 たとえば、履歴の法律事務所のデータベースを Azure に移行する場合は、データベース ファイルが保存される Vhd を作成する必要があります。
