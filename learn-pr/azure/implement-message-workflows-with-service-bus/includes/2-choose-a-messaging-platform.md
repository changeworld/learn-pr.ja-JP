<span data-ttu-id="c3248-101">Azure 内のいくつかを含め、分散アプリケーションの信頼性向上に役立つ通信プラットフォームは数多くあります。</span><span class="sxs-lookup"><span data-stu-id="c3248-101">There are many communications platforms that can help improve the reliability of a distributed application, including several within Azure.</span></span> <span data-ttu-id="c3248-102">これらのツールはそれぞれ別の目的で動作します。適切なものを選択できるように Azure 内の各ツールを確認しましょう。</span><span class="sxs-lookup"><span data-stu-id="c3248-102">Each of these tools serves a different purpose; let's review each tool in Azure to help choose the right one.</span></span>

<span data-ttu-id="c3248-103">ピザの注文と追跡アプリケーションのアーキテクチャでは、Web サイト、データ ストレージ、バックエンド サービスなどいくつかのコンポーネントが必要です。アプリケーションのコンポーネントはさまざまな方法でまとめてバインドでき、単一のアプリケーションで複数の手法を利用できます。</span><span class="sxs-lookup"><span data-stu-id="c3248-103">The architecture of our pizza ordering and tracking application requires several components: a website, data storage, back-end service, etc. We can bind the components of our application together in many different ways, and a single application can take advantage of multiple techniques.</span></span> 

<span data-ttu-id="c3248-104">Contoso Slices アプリケーションでは、どの手法を使用するかを決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c3248-104">We need to decide which techniques to use in the Contoso Slices application.</span></span> <span data-ttu-id="c3248-105">最初の手順は、複数のパート間に通信が存在する場所それぞれを評価することです。</span><span class="sxs-lookup"><span data-stu-id="c3248-105">The first step is to evaluate each place where there is communication between multiple parts.</span></span> <span data-ttu-id="c3248-106">アプリケーションでそのジョブを実行するには、一部のコンポーネントが適切なタイミングで実行される_必要があります_。</span><span class="sxs-lookup"><span data-stu-id="c3248-106">Some components _must_ run in a timely manner for our application to be doing its job at all.</span></span> <span data-ttu-id="c3248-107">時間はある程度重要ですが、クリティカルではありません。</span><span class="sxs-lookup"><span data-stu-id="c3248-107">Some may be important, but not time-critical.</span></span> <span data-ttu-id="c3248-108">最後に、モバイル アプリ通知などの他のコンポーネントです。これらはもう少し任意的になります。</span><span class="sxs-lookup"><span data-stu-id="c3248-108">Finally, other components, like our mobile app notifications, are a bit more optional.</span></span>

<span data-ttu-id="c3248-109">ここでは、Azure で使用できる通信プラットフォームについて学習し、アプリケーションの各要件にあったプラットフォームを選択できるようにします。</span><span class="sxs-lookup"><span data-stu-id="c3248-109">Here, you will learn about the communications platforms available in Azure, so that you can choose the right one for each requirement in your application.</span></span>

## <a name="decide-between-messages-and-events"></a><span data-ttu-id="c3248-110">メッセージとイベントを決定する</span><span class="sxs-lookup"><span data-stu-id="c3248-110">Decide between messages and events</span></span>

<span data-ttu-id="c3248-111">メッセージとイベントの両方が**データグラム**: 1 つのコンポーネントから別のコンポーネントに送信されたデータのパッケージ。</span><span class="sxs-lookup"><span data-stu-id="c3248-111">Messages and events are both **datagrams**: packages of data sent from one component to another.</span></span> <span data-ttu-id="c3248-112">これらの違いは一見したところわずかなようですが、アプリケーションを設計する方法には大きな違いとなる場合があります。</span><span class="sxs-lookup"><span data-stu-id="c3248-112">They are different in ways that at first seem subtle, but can make significant differences in how you architect your application.</span></span>

### <a name="messages"></a><span data-ttu-id="c3248-113">メッセージ</span><span class="sxs-lookup"><span data-stu-id="c3248-113">Messages</span></span>

<span data-ttu-id="c3248-114">アプリケーションの全体的な整合性は受信するメッセージによって異なる場合があります。これは分散アプリケーションの用語において、メッセージの特性をよく表しています。</span><span class="sxs-lookup"><span data-stu-id="c3248-114">In the terminology of distributed applications, the defining characteristic of a message is that the overall integrity of the application may rely on messages being received.</span></span> <span data-ttu-id="c3248-115">メッセージを送信することを、ワークフローのバトンを別のコンポーネントに渡す1つのコンポーネントとして考えることができます。</span><span class="sxs-lookup"><span data-stu-id="c3248-115">You can think of sending a message as one component passing the baton of a workflow to a different component.</span></span> <span data-ttu-id="c3248-116">ワークフロー全体が重要なビジネス プロセスとなる可能性があり、メッセージはコンポーネントをまとめて保持するモルタルです。</span><span class="sxs-lookup"><span data-stu-id="c3248-116">The entire workflow may be a vital business process, and the message is the mortar that holds the components together.</span></span>

<span data-ttu-id="c3248-117">一般的にメッセージはデータそのものを含み、(ID や URL のような) 単なるデータの参照ではありません。</span><span class="sxs-lookup"><span data-stu-id="c3248-117">A message generally contains the data itself, not just a reference (like an ID or URL) to data.</span></span> <span data-ttu-id="c3248-118">データをデータグラムの一部として送信することは、参照を送信することよりも不安定さが軽減されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-118">Sending the data as part of the datagram is less brittle than sending a reference.</span></span> <span data-ttu-id="c3248-119">メッセージングのアーキテクチャではメッセージの配信が保証され、追加の参照は不要であるため、メッセージが確実に処理されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-119">The messaging architecture guarantees delivery of the message, and because no additional lookups are required, the message is reliably handled.</span></span> <span data-ttu-id="c3248-120">しかし、アプリケーションの送信では、含めるデータを正確に把握し、過度のデータ送信を回避する必要があるため、受信側のコンポーネントで不要な作業を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="c3248-120">However, the sending application needs to know exactly what data to include, to avoid sending too much data, which requires the receiving component to do unnecessary work.</span></span> <span data-ttu-id="c3248-121">このような意味で、メッセージの送信側と受信側は、多くの場合、厳格なデータ コントラクトで結合されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-121">In this sense, the sender and receiver of a message are often coupled by a strict data contract.</span></span>

<span data-ttu-id="c3248-122">Contoso Slices の新しいアーキテクチャでは、ピザの注文を入力する場合、メッセージが使用されることが考えられます。</span><span class="sxs-lookup"><span data-stu-id="c3248-122">In Contoso Slices new architecture, when a pizza order is entered, they would likely use messages.</span></span> <span data-ttu-id="c3248-123">Web フロントエンドまたはモバイル アプリでは、バックエンド処理コンポーネントにメッセージが送信されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-123">The web front end or mobile app would send a message to the back-end processing components.</span></span> <span data-ttu-id="c3248-124">顧客の近くの店へのルーティングやクレジット カードへの課金などのバックエンドの手順が行われます。</span><span class="sxs-lookup"><span data-stu-id="c3248-124">In the back end, steps like routing to the store near the customer and charging the credit card would take place.</span></span>

### <a name="events"></a><span data-ttu-id="c3248-125">イベント</span><span class="sxs-lookup"><span data-stu-id="c3248-125">Events</span></span>

<span data-ttu-id="c3248-126">イベントによって、何かが発生したことを知らせる通知がトリガーされます。</span><span class="sxs-lookup"><span data-stu-id="c3248-126">An event triggers notification that something has occurred.</span></span> <span data-ttu-id="c3248-127">イベントはメッセージよりも "軽量" で、ほとんどの場合はブロードキャスト通信に使用されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-127">Events are "lighter" than messages and are most often used for broadcast communications.</span></span>

<span data-ttu-id="c3248-128">イベントには次の特性があります。</span><span class="sxs-lookup"><span data-stu-id="c3248-128">Events have the following characteristics:</span></span>

* <span data-ttu-id="c3248-129">送信されたイベントの受信者が複数のこともあれば、まったくいないこともあります。</span><span class="sxs-lookup"><span data-stu-id="c3248-129">The event may be sent to multiple receivers, or to none at all</span></span>
* <span data-ttu-id="c3248-130">多くの場合、イベントは "ファンアウト" を意図しています。つまり、パブリッシャーのそれぞれに対して多数のサブスクライバーが存在します。</span><span class="sxs-lookup"><span data-stu-id="c3248-130">Events are often intended to "fan out," or have a large number of subscribers for each publisher</span></span>
* <span data-ttu-id="c3248-131">イベントのパブリッシャーは、受信側コンポーネントがどのようなアクションを実行するかについて何も想定していません。</span><span class="sxs-lookup"><span data-stu-id="c3248-131">The publisher of the event has no expectation about the action a receiving component takes</span></span>

<span data-ttu-id="c3248-132">ピザのチェーン店では、イベントを使用して状態変更をユーザーに通知することが考えられます。</span><span class="sxs-lookup"><span data-stu-id="c3248-132">Our pizza chain would likely use events for notifications to users about status changes.</span></span> <span data-ttu-id="c3248-133">状態変更イベントは、Azure Event Grid に送信でき、その後、Azure Functions、Azure Notification Hubs の順に送信され、完全に_サーバーレス_なソリューションが実現します。</span><span class="sxs-lookup"><span data-stu-id="c3248-133">Status change events could be sent to Azure Event Grid, then on to Azure Functions, and to Azure Notification Hubs for a completely _serverless_ solution.</span></span>

<span data-ttu-id="c3248-134">通信プラットフォームは一般的にどちらか一方を処理するように設計されているため、このイベントとメッセージの違いは根本的なものです。</span><span class="sxs-lookup"><span data-stu-id="c3248-134">This difference between events and messages is fundamental because communications platforms are generally designed to handle one or the other.</span></span> <span data-ttu-id="c3248-135">Service Bus はメッセージを処理するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="c3248-135">Service Bus is designed to handle messages.</span></span> <span data-ttu-id="c3248-136">イベントを送信する場合は、Event Grid を選択することが考えられます。</span><span class="sxs-lookup"><span data-stu-id="c3248-136">If you want to send events, you would likely choose Event Grid.</span></span>

<span data-ttu-id="c3248-137">Azure には Azure Event Hubs もありますが、これは分析のために使用される通信の特定の種類の高フロー ストリームで使用されることがほとんどです。</span><span class="sxs-lookup"><span data-stu-id="c3248-137">Azure also has Azure Event Hubs, but it is most often used for a specific type of high-flow stream of communications used for analytics.</span></span> <span data-ttu-id="c3248-138">たとえば、ピザ オーブンにネットワーク接続されたセンサーを取り付けていた場合、Azure Stream Analytics と結合された Event Hubs を使用して、望ましくない火災やコンポーネントの摩耗を示す可能性のある温度変化のパターンを監視できます。</span><span class="sxs-lookup"><span data-stu-id="c3248-138">For example, if we had networked sensors on our pizza ovens, we could use Event Hubs coupled with Azure Stream Analytics to watch for patterns in the temperature changes that might indicate an unwanted fire or component wear.</span></span>

## <a name="service-bus-topics-queues-and-relays"></a><span data-ttu-id="c3248-139">Service Bus のトピック、キュー、リレー</span><span class="sxs-lookup"><span data-stu-id="c3248-139">Service Bus topics, queues, and relays</span></span>

<span data-ttu-id="c3248-140">Azure Service Bus では、キュー、トピック、およびリレーという 3 つの異なる方法でメッセージを交換することができます。</span><span class="sxs-lookup"><span data-stu-id="c3248-140">Azure Service Bus can exchange messages in three different ways: queues, topics, and relays.</span></span>

### <a name="what-is-a-queue"></a><span data-ttu-id="c3248-141">キューとは</span><span class="sxs-lookup"><span data-stu-id="c3248-141">What is a queue?</span></span>

<span data-ttu-id="c3248-142">**キュー**はメッセージ用のシンプルな一時保存場所です。</span><span class="sxs-lookup"><span data-stu-id="c3248-142">A **queue** is a simple temporary storage location for messages.</span></span> <span data-ttu-id="c3248-143">コンポーネントを送信することで、キューにメッセージが追加されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-143">A sending component adds a message to the queue.</span></span> <span data-ttu-id="c3248-144">送信先コンポーネントでは、キューの先頭にあるメッセージが取得されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-144">A destination component picks up the message at the front of the queue.</span></span> <span data-ttu-id="c3248-145">通常の状況では、メッセージはそれぞれ 1 人の受信者のみが受信します。</span><span class="sxs-lookup"><span data-stu-id="c3248-145">Under ordinary circumstances, each message is received by only one receiver.</span></span>

![1 人の送信者がキューにメッセージを送信し、1 人の受信者がキューから 1 つずつメッセージを受信している、メッセージ キューの例を示す図。](../media/2-service-bus-queue.png)

<span data-ttu-id="c3248-147">キューでは、需要が高い状況から送信先コンポーネントを隔離するために、送信元と送信先のコンポーネントを分離します。</span><span class="sxs-lookup"><span data-stu-id="c3248-147">Queues decouple the source and destination components to insulate destination components from high demand.</span></span> 

<span data-ttu-id="c3248-148">ピーク時間帯では、送信先コンポーネントで処理できるよりも速くメッセージが着信する場合があります。</span><span class="sxs-lookup"><span data-stu-id="c3248-148">During peak times, messages may come in faster than destination components can handle them.</span></span> <span data-ttu-id="c3248-149">送信元コンポーネントは送信先に直接接続されないため、送信元が影響を受けることはなく、キューが増大します。</span><span class="sxs-lookup"><span data-stu-id="c3248-149">Because source components have no direct connection to the destination, the source is unaffected and the queue will grow.</span></span> <span data-ttu-id="c3248-150">送信先コンポーネントでは、メッセージの処理が可能になると、キューからそのメッセージが削除されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-150">Destination components will remove messages from the queue as they are able to handle them.</span></span> <span data-ttu-id="c3248-151">混み具合が解消すると、送信先コンポーネントは追いつくことができ、キューが短くなります。</span><span class="sxs-lookup"><span data-stu-id="c3248-151">When demand drops, destination components can catch up and the queue shortens.</span></span>

<span data-ttu-id="c3248-152">キューは、システムにリソースを追加することなく、このように込み合った状況に対応します。</span><span class="sxs-lookup"><span data-stu-id="c3248-152">A queue responds to high demand like this without needing to add resources to the system.</span></span> <span data-ttu-id="c3248-153">ただし、比較的迅速に処理する必要があるメッセージについては、送信先コンポーネントにインスタンスを追加することで負荷を共有させることができます。</span><span class="sxs-lookup"><span data-stu-id="c3248-153">However, for messages that need to be handled relatively quickly, adding additional instances of your destination component can allow them to share the load.</span></span> <span data-ttu-id="c3248-154">各メッセージは 1 つのインスタンスのみで処理されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-154">Each message would be handled by only one instance.</span></span> <span data-ttu-id="c3248-155">これは、実際に必要なコンポーネントのみにリソースを追加しながら、アプリケーション全体をスケーリングする効果的な方法です。</span><span class="sxs-lookup"><span data-stu-id="c3248-155">This is an effective way to scale your entire application while only adding resources to the components that actually need it.</span></span>

### <a name="what-is-a-topic"></a><span data-ttu-id="c3248-156">トピックとは</span><span class="sxs-lookup"><span data-stu-id="c3248-156">What is a topic?</span></span>

<span data-ttu-id="c3248-157">**トピック**はキューに似ていますが、複数のサブスクリプションを持つことができます。</span><span class="sxs-lookup"><span data-stu-id="c3248-157">A **topic** is similar to a queue but can have multiple subscriptions.</span></span> <span data-ttu-id="c3248-158">つまり、複数の送信先コンポーネントは、1 つのトピックにサブスクライブできるため、各メッセージは複数の受信者に配信されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-158">This means that multiple destination components can subscribe to a single topic, so each message is delivered to multiple receivers.</span></span> <span data-ttu-id="c3248-159">サブスクリプションでは、トピック内のメッセージをフィルター処理して関連するメッセージのみを受信することもできます。</span><span class="sxs-lookup"><span data-stu-id="c3248-159">Subscriptions can also filter the messages in the topic to receive only messages that are relevant.</span></span> <span data-ttu-id="c3248-160">サブスクリプションはキューと同じ分離された通信を提供し、込み合った状況にも同じ方法で対応します。</span><span class="sxs-lookup"><span data-stu-id="c3248-160">Subscriptions provide the same decoupled communications as queues and respond to high demand in the same way.</span></span> <span data-ttu-id="c3248-161">各メッセージを複数の送信先コンポーネントに配信する場合はトピックを使用します。</span><span class="sxs-lookup"><span data-stu-id="c3248-161">Use a topic if you want each message to be delivered to more than one destination component.</span></span>

<span data-ttu-id="c3248-162">トピックは Basic 価格レベルではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="c3248-162">Topics are not supported in the Basic pricing tier.</span></span>

![1 人の送信者が、3 つのサブスクリプションを含むトピックを介して、複数の受信者にメッセージを送信しているようすを示す図。](../media/2-service-bus-topic.png)

### <a name="what-is-a-relay"></a><span data-ttu-id="c3248-165">リレーとは</span><span class="sxs-lookup"><span data-stu-id="c3248-165">What is a relay?</span></span>

<span data-ttu-id="c3248-166">**リレー**とは、アプリケーション間の同期双方向通信を実行するオブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="c3248-166">A **relay** is an object that performs synchronous, two-way communication between applications.</span></span> <span data-ttu-id="c3248-167">キューやトピックのような、メッセージ用の一時保存場所ではありません。</span><span class="sxs-lookup"><span data-stu-id="c3248-167">It is not a temporary storage location for messages like queues and topics.</span></span> <span data-ttu-id="c3248-168">代わりに、ファイアウォールなどのネットワーク境界越しにバッファーなしの双方向の接続が提供されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-168">Instead, it provides bidirectional, unbuffered connections across network boundaries such as firewalls.</span></span> <span data-ttu-id="c3248-169">同じネットワーク セグメントに配置されているが、ネットワーク セキュリティ デバイスで区切られているかのように、コンポーネント間での直接通信する場合はリレーを使用します。</span><span class="sxs-lookup"><span data-stu-id="c3248-169">Use a relay when you want direct communications between components as if they were located on the same network segment but separated by network security devices.</span></span>

> [!NOTE]
> <span data-ttu-id="c3248-170">リレーは Azure Service Bus の一部ですが、疎結合メッセージング ワークフローは実装されず、このモジュールではこれ以上触れません。</span><span class="sxs-lookup"><span data-stu-id="c3248-170">Although relays are part of Azure Service Bus, they do not implement loosely coupled messaging workflows and are not considered further in this module.</span></span>

## <a name="service-bus-queues-and-storage-queues"></a><span data-ttu-id="c3248-171">Service Bus キューとストレージ キュー</span><span class="sxs-lookup"><span data-stu-id="c3248-171">Service Bus queues and storage queues</span></span>

<span data-ttu-id="c3248-172">メッセージ キューを含む Azure 機能には Service Bus と Azure ストレージ アカウントの 2 つがあります。</span><span class="sxs-lookup"><span data-stu-id="c3248-172">There are two Azure features that include message queues: Service Bus and Azure Storage accounts.</span></span> <span data-ttu-id="c3248-173">一般的なガイドとして、Service Bus キューに比べると、ストレージ キューの方が使用は簡単ですが、あまり洗練されておらず、柔軟性に欠けます。</span><span class="sxs-lookup"><span data-stu-id="c3248-173">As a general guide, storage queues are simpler to use but are less sophisticated and flexible than Service Bus queues.</span></span>

<span data-ttu-id="c3248-174">Service Bus キューの主な利点は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="c3248-174">Key advantages of Service Bus queues include:</span></span>

* <span data-ttu-id="c3248-175">大きなメッセージ サイズ (メッセージあたり 64 KB に対して 256 KB) をサポートしています</span><span class="sxs-lookup"><span data-stu-id="c3248-175">Supports larger messages size (256 KB per message versus 64 KB)</span></span>
* <span data-ttu-id="c3248-176">At-Least-Once と At-Most-Once の両方の配信がサポートされます。メッセージが失われるという極めて低い可能性と、メッセージが 2 回処理されるという極めて低い可能性のいずれかを選択できます</span><span class="sxs-lookup"><span data-stu-id="c3248-176">Supports both at-least-once and at-most-once delivery - choose between a very small chance that a message is lost or a very small chance it is handled twice</span></span>
* <span data-ttu-id="c3248-177">**最初先出し (FIFO)** 順序を保証 - メッセージは追加された順序で処理されます (FIFO はキューの通常の動作ですが、すべてのメッセージに対して保証されるわけではありません)</span><span class="sxs-lookup"><span data-stu-id="c3248-177">Guarantees **first-in-first-out (FIFO)** order - messages are handled in the same order they are added (although FIFO is the normal operation of a queue, it is not guaranteed for every message)</span></span>
* <span data-ttu-id="c3248-178">トランザクションに複数のメッセージをグループ化できます - トランザクションの 1 つのメッセージの配信に失敗すると、トランザクションのすべてのメッセージが配信されなくなります</span><span class="sxs-lookup"><span data-stu-id="c3248-178">Can group multiple messages into a transaction - if one message in the transaction fails to be delivered, all messages in the transaction will not be delivered</span></span>
* <span data-ttu-id="c3248-179">ロールベースのセキュリティをサポート</span><span class="sxs-lookup"><span data-stu-id="c3248-179">Supports role-based security</span></span>
* <span data-ttu-id="c3248-180">送信先コンポーネントで継続的にキューをポーリングする必要はありません</span><span class="sxs-lookup"><span data-stu-id="c3248-180">Does not require destination components to continuously poll the queue</span></span>

<span data-ttu-id="c3248-181">ストレージ キューの利点は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="c3248-181">Advantages of storage queues:</span></span>

* <span data-ttu-id="c3248-182">無制限のキュー サイズがサポートされます (これに対して、Service Bus キューでは 80 GB に制限されています)</span><span class="sxs-lookup"><span data-stu-id="c3248-182">Supports unlimited queue size (versus 80-GB limit for Service Bus queues)</span></span>
* <span data-ttu-id="c3248-183">すべてのメッセージのログが維持されます</span><span class="sxs-lookup"><span data-stu-id="c3248-183">Maintains a log of all messages</span></span>

## <a name="how-to-choose-a-communications-technology"></a><span data-ttu-id="c3248-184">通信テクノロジを選択する方法</span><span class="sxs-lookup"><span data-stu-id="c3248-184">How to choose a communications technology</span></span>

<span data-ttu-id="c3248-185">Azure が提供するまざまな概念と実装について説明しました。</span><span class="sxs-lookup"><span data-stu-id="c3248-185">We've seen the different concepts and the implementations Azure provides.</span></span> <span data-ttu-id="c3248-186">ここからは通信毎に私たちの意思決定プロセスがどのようにあるべきかについて説明します。</span><span class="sxs-lookup"><span data-stu-id="c3248-186">Let's discuss what our decision process should look like for each of our communications.</span></span>

#### <a name="consider-the-following-questions"></a><span data-ttu-id="c3248-187">次のクエリについて考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="c3248-187">Consider the following questions:</span></span>

1. <span data-ttu-id="c3248-188">通信はイベントですか? </span><span class="sxs-lookup"><span data-stu-id="c3248-188">Is the communication an event?</span></span> <span data-ttu-id="c3248-189">そうである場合は、Event Grid または Event Hubs の使用を検討してください。</span><span class="sxs-lookup"><span data-stu-id="c3248-189">If so, consider using Event Grid or Event Hubs.</span></span>

1. <span data-ttu-id="c3248-190">単一のメッセージを複数の送信先に配信する必要がありますか? </span><span class="sxs-lookup"><span data-stu-id="c3248-190">Should a single message be delivered to more than one destination?</span></span> <span data-ttu-id="c3248-191">必要がある場合は、Service Bus トピックを使用します。</span><span class="sxs-lookup"><span data-stu-id="c3248-191">If so, use a Service Bus topic.</span></span> <span data-ttu-id="c3248-192">それ以外の場合は、キューを使用します。</span><span class="sxs-lookup"><span data-stu-id="c3248-192">Otherwise, use a queue.</span></span>

<span data-ttu-id="c3248-193">キューが必要であると判断した場合:</span><span class="sxs-lookup"><span data-stu-id="c3248-193">If you decide that you need a queue:</span></span>

#### <a name="choose-service-bus-queues-if"></a><span data-ttu-id="c3248-194">次の場合は、Service Bus キューを選択します。</span><span class="sxs-lookup"><span data-stu-id="c3248-194">Choose Service Bus queues if:</span></span>

* <span data-ttu-id="c3248-195">At-Most-Once 配信保証が必要である</span><span class="sxs-lookup"><span data-stu-id="c3248-195">You need an at-most-once delivery guarantee</span></span>
* <span data-ttu-id="c3248-196">FIFO 保証が必要である</span><span class="sxs-lookup"><span data-stu-id="c3248-196">You need a FIFO guarantee</span></span>
* <span data-ttu-id="c3248-197">メッセージをトランザクションにグループ化する必要がある</span><span class="sxs-lookup"><span data-stu-id="c3248-197">You need to group messages into transactions</span></span>
* <span data-ttu-id="c3248-198">キューをポーリングせずにメッセージを受信する必要がある</span><span class="sxs-lookup"><span data-stu-id="c3248-198">You want to receive messages without polling the queue</span></span>
* <span data-ttu-id="c3248-199">キューへのロールベースのアクセスを提供する必要がある</span><span class="sxs-lookup"><span data-stu-id="c3248-199">You need to provide role-based access to the queues</span></span>
* <span data-ttu-id="c3248-200">64 KB より大きいが 256 KB よりも小さいメッセージを処理する必要がある</span><span class="sxs-lookup"><span data-stu-id="c3248-200">You need to handle messages larger than 64 KB but smaller than 256 KB</span></span>
* <span data-ttu-id="c3248-201">キューのサイズが 80 GB より大きくなることはない</span><span class="sxs-lookup"><span data-stu-id="c3248-201">Your queue size will not grow larger than 80 GB</span></span>
* <span data-ttu-id="c3248-202">バッチ メッセージを発行および使用できる必要がある</span><span class="sxs-lookup"><span data-stu-id="c3248-202">You would like to be able to publish and consume batches of messages</span></span>

#### <a name="choose-queue-storage-if"></a><span data-ttu-id="c3248-203">次の場合は、キュー ストレージを選択します。</span><span class="sxs-lookup"><span data-stu-id="c3248-203">Choose queue storage if:</span></span>

* <span data-ttu-id="c3248-204">特定の追加要件のないシンプルなキューが必要である</span><span class="sxs-lookup"><span data-stu-id="c3248-204">You need a simple queue with no particular additional requirements</span></span>
* <span data-ttu-id="c3248-205">キューを通ったすべてのメッセージの監査証跡が必要である</span><span class="sxs-lookup"><span data-stu-id="c3248-205">You need an audit trail of all messages that pass through the queue</span></span>
* <span data-ttu-id="c3248-206">キューのサイズが 80 GB を超えると予想される</span><span class="sxs-lookup"><span data-stu-id="c3248-206">You expect the queue to exceed 80 GB in size</span></span>
* <span data-ttu-id="c3248-207">キュー内のメッセージ処理に関する進行状況を追跡する必要がある</span><span class="sxs-lookup"><span data-stu-id="c3248-207">You want to track progress for processing a message inside of the queue</span></span>

<span data-ttu-id="c3248-208">分散アプリケーションのコンポーネントで直接通信できますが、多くの場合、Azure Service Bus や Azure Event Grid など、中間通信プラットフォームを使用してその通信の信頼性を高めることができます。</span><span class="sxs-lookup"><span data-stu-id="c3248-208">Although the components of a distributed application can communicate directly, you can often increase the reliability of that communication by using an intermediate communication platform such as Azure Service Bus or Azure Event Grid.</span></span>

<span data-ttu-id="c3248-209">Event Grid はイベント向けに設計されており、イベントは受信者のみに通知され、そのイベントに関連付けられた生データは含まれません。</span><span class="sxs-lookup"><span data-stu-id="c3248-209">Event Grid is designed for events, which notify recipients only of an event and do not contain the raw data associated with that event.</span></span> <span data-ttu-id="c3248-210">Azure Event Hubs は高フローの分析タイプ イベント向けに設計されています。</span><span class="sxs-lookup"><span data-stu-id="c3248-210">Azure Event Hubs is designed for high-flow analytics types of events.</span></span> <span data-ttu-id="c3248-211">Azure Service Bus とストレージ キューはメッセージ用であり、アプリケーション ワークフローの中核部分をバインドするために使用できます。</span><span class="sxs-lookup"><span data-stu-id="c3248-211">Azure Service Bus and storage queues are for messages, which can be used for binding the core pieces of any application workflow.</span></span>

<span data-ttu-id="c3248-212">要件がシンプルな場合、1 つの送信先のみに各メッセージを送信する場合、または可能な限り早くコードを記述する場合は、ストレージ キューが最適なオプションである可能性があります。</span><span class="sxs-lookup"><span data-stu-id="c3248-212">If your requirements are simple, if you want to send each message to only one destination, or if you want to write code as quickly as possible, a storage queue may be the best option.</span></span> <span data-ttu-id="c3248-213">それ以外の場合、Service Bus キューによって、より多くのオプションや柔軟性が提供されます。</span><span class="sxs-lookup"><span data-stu-id="c3248-213">Otherwise, Service Bus queues provide many more options and flexibility.</span></span>

<span data-ttu-id="c3248-214">複数のサブスクライバーにメッセージを送信する場合は、Service Bus トピックを使用します。</span><span class="sxs-lookup"><span data-stu-id="c3248-214">If you want to send messages to multiple subscribers, use a Service Bus topic.</span></span>
