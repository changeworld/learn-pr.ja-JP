<span data-ttu-id="6b17e-101">Azure 内でさまざまな分散アプリケーションの信頼性を向上させるのに役立つ多くの通信プラットフォームがあります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-101">There are many communications platforms that can help improve the reliability of a distributed application, including several within Azure.</span></span> <span data-ttu-id="6b17e-102">これらのツールはそれぞれ別の目的で動作します。適切なものを選択できるように Azure 内の各ツールを確認しましょう。</span><span class="sxs-lookup"><span data-stu-id="6b17e-102">Each of these tools serves a different purpose; let's review each tool in Azure to help choose the right one.</span></span>

<span data-ttu-id="6b17e-103">ピザの順序付けと管理アプリケーションのアーキテクチャには、いくつかのコンポーネントが必要です。 web サイト、データ ストレージ、バックエンド サービスなどです。アプリケーションのコンポーネントはさまざまな方法でまとめてバインドでき、1 つのアプリケーションで複数の手法を利用できます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-103">The architecture of our pizza ordering and tracking application requires several components: a website, data storage, back-end service, etc. We can bind the components of our application together in many different ways, and a single application can take advantage of multiple techniques.</span></span> 

<span data-ttu-id="6b17e-104">Contoso Slices アプリケーションでは、どの手法を使用するかを決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-104">We need to decide which techniques to use in the Contoso Slices application.</span></span> <span data-ttu-id="6b17e-105">最初の手順は、複数のパート間に通信が存在する場所それぞれを評価することです。</span><span class="sxs-lookup"><span data-stu-id="6b17e-105">The first step is to evaluate each place where there is communication between multiple parts.</span></span> <span data-ttu-id="6b17e-106">アプリケーションがそのジョブを実行するために一部のコンポーネントは、適切なタイミングで実行する_必要があります_。</span><span class="sxs-lookup"><span data-stu-id="6b17e-106">Some components _must_ run in a timely manner for our application to be doing its job at all.</span></span> <span data-ttu-id="6b17e-107">いくつかは、重要ですが、時間の重要でない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-107">Some may be important, but not time-critical.</span></span> <span data-ttu-id="6b17e-108">最後に、モバイル アプリ通知など、他のコンポーネントは、さらに若干随意的です。</span><span class="sxs-lookup"><span data-stu-id="6b17e-108">Finally, other components, like our mobile app notifications, are a bit more optional.</span></span>

<span data-ttu-id="6b17e-109">ここでは、Azure で使用できる通信プラットフォームについて学習し、アプリケーションの各要件にあったプラットフォームを選択できるようにします。</span><span class="sxs-lookup"><span data-stu-id="6b17e-109">Here, you will learn about the communications platforms available in Azure, so that you can choose the right one for each requirement in your application.</span></span>

## <a name="decide-between-messages-and-events"></a><span data-ttu-id="6b17e-110">メッセージとイベントを決定する</span><span class="sxs-lookup"><span data-stu-id="6b17e-110">Decide between messages and events</span></span>

<span data-ttu-id="6b17e-111">メッセージとイベントの両方が**データグラム**: 1 つのコンポーネントから別のコンポーネントに送信されたデータのパッケージ。</span><span class="sxs-lookup"><span data-stu-id="6b17e-111">Messages and events are both **datagrams**: packages of data sent from one component to another.</span></span> <span data-ttu-id="6b17e-112">これらの違いは一見したところわずかなようですが、アプリケーションを設計する方法には大きな違いとなる場合があります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-112">They are different in ways that at first seem subtle, but can make significant differences in how you architect your application.</span></span> 

### <a name="messages"></a><span data-ttu-id="6b17e-113">メッセージ</span><span class="sxs-lookup"><span data-stu-id="6b17e-113">Messages</span></span>

<span data-ttu-id="6b17e-114">アプリケーションの全体的な整合性は受信するメッセージによって異なる場合があります。これは分散アプリケーションの用語において、メッセージの特性をよく表しています。</span><span class="sxs-lookup"><span data-stu-id="6b17e-114">In the terminology of distributed applications, the defining characteristic of a message is that the overall integrity of the application may rely on messages being received.</span></span> <span data-ttu-id="6b17e-115">メッセージを送信することを、ワークフローのバトンを別のコンポーネントに渡す1つのコンポーネントとして考えることができます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-115">You can think of sending a message as one component passing the baton of a workflow to a different component.</span></span> <span data-ttu-id="6b17e-116">ワークフロー全体が重要なビジネス プロセスとなる可能性があり、メッセージはコンポーネントをまとめて保持するモルタルです。</span><span class="sxs-lookup"><span data-stu-id="6b17e-116">The entire workflow may be a vital business process, and the message is the mortar that holds the components together.</span></span>

<span data-ttu-id="6b17e-117">メッセージには、だけでなく、ID または URL) (などデータへの参照、データ自体には、一般に含まれています。</span><span class="sxs-lookup"><span data-stu-id="6b17e-117">A message generally contains the data itself, not just a reference (like an ID or URL) to data.</span></span> <span data-ttu-id="6b17e-118">データをデータグラムの一部として送信することは、参照を送信することよりも不安定さは軽減されます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-118">Sending the data as part of the datagram is less brittle than sending a reference.</span></span> <span data-ttu-id="6b17e-119">メッセージングのアーキテクチャは、メッセージの配信を保証し、メッセージが確実に処理された必要な追加の参照がないため、します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-119">The messaging architecture guarantees delivery of the message, and because no additional lookups are required, the message is reliably handled.</span></span> <span data-ttu-id="6b17e-120">ただし、送信元アプリケーションに含める、不要な作業を行う、受信側のコンポーネントを必要とする大量のデータの送信を回避するためにデータを正確に把握する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-120">However, the sending application needs to know exactly what data to include, to avoid sending too much data, which requires the receiving component to do unnecessary work.</span></span> <span data-ttu-id="6b17e-121">この意味で、メッセージの送信者と受信者は、多くの場合、厳格なデータ コントラクトで結合されます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-121">In this sense, the sender and receiver of a message are often coupled by a strict data contract.</span></span>

<span data-ttu-id="6b17e-122">Contoso のスライスの新しいアーキテクチャでは、ピザの注文を入力したら、それらは可能性がありますメッセージを使用してください。</span><span class="sxs-lookup"><span data-stu-id="6b17e-122">In Contoso Slices new architecture, when a pizza order is entered, they would likely use messages.</span></span> <span data-ttu-id="6b17e-123">Web フロント エンドまたはモバイル アプリは、バックエンド処理コンポーネントにメッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-123">The web front end or mobile app would send a message to the back-end processing components.</span></span> <span data-ttu-id="6b17e-124">バックエンドで、顧客の近くのストアにルーティングし、クレジット_カードに課金のような手順が行われます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-124">In the back end, steps like routing to the store near the customer and charging the credit card would take place.</span></span>

### <a name="events"></a><span data-ttu-id="6b17e-125">イベント</span><span class="sxs-lookup"><span data-stu-id="6b17e-125">Events</span></span>

<span data-ttu-id="6b17e-126">イベントは、何かが発生したことの通知をトリガーします。</span><span class="sxs-lookup"><span data-stu-id="6b17e-126">An event triggers notification that something has occurred.</span></span> <span data-ttu-id="6b17e-127">イベントは、「軽量」メッセージよりもブロードキャストの通信に使用されるほとんどの場合。</span><span class="sxs-lookup"><span data-stu-id="6b17e-127">Events are "lighter" than messages and are most often used for broadcast communications.</span></span>

<span data-ttu-id="6b17e-128">イベントには次の特性があります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-128">Events have the following characteristics:</span></span>
* <span data-ttu-id="6b17e-129">送信されたイベントの受信者が複数のこともあれば、まったくいないこともあります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-129">The event may be sent to multiple receivers, or to none at all</span></span>
* <span data-ttu-id="6b17e-130">多くの場合、イベントは "ファンアウト" を意図しています。つまり、パブリッシャーのそれぞれに対して多数のサブスクライバーが存在します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-130">Events are often intended to "fan out," or have a large number of subscribers for each publisher</span></span>
* <span data-ttu-id="6b17e-131">イベントのパブリッシャーは、受信側コンポーネントがどのようなアクションを実行するかについて何も想定していません。</span><span class="sxs-lookup"><span data-stu-id="6b17e-131">The publisher of the event has no expectation about the action a receiving component takes</span></span>

<span data-ttu-id="6b17e-132">ピザのチェーン店は、イベントを使用して、状態変更をユーザーに通知できます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-132">Our pizza chain would likely use events for notifications to users about status changes.</span></span> <span data-ttu-id="6b17e-133">状態変更イベントは、Azure Functions にログオンし、Azure Event grid との Azure Notification Hubs に送信でしたを完全に_サーバーレス_ソリューション。</span><span class="sxs-lookup"><span data-stu-id="6b17e-133">Status change events could be sent to Azure Event Grid, then on to Azure Functions, and to Azure Notification Hubs for a completely _serverless_ solution.</span></span>

<span data-ttu-id="6b17e-134">通信プラットフォームは一般的にどちらか一方を処理するように設計されているため、このイベントとメッセージの違いは根本的なものです。</span><span class="sxs-lookup"><span data-stu-id="6b17e-134">This difference between events and messages is fundamental because communications platforms are generally designed to handle one or the other.</span></span> <span data-ttu-id="6b17e-135">Service Bus はメッセージを処理するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="6b17e-135">Service Bus is designed to handle messages.</span></span> <span data-ttu-id="6b17e-136">イベントを送信する場合、Event Grid を選択することになるでしょう。</span><span class="sxs-lookup"><span data-stu-id="6b17e-136">If you want to send events, you would likely choose Event Grid.</span></span> 

<span data-ttu-id="6b17e-137">Azure Event Hubs もありますは、特定の種類の分析のために使用される通信の高フロー ストリームでよく使用されます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-137">Azure also has Azure Event Hubs, but it is most often used for a specific type of high-flow stream of communications used for analytics.</span></span> <span data-ttu-id="6b17e-138">たとえば、ピザ レンジのセンサーをネットワークいますが場合、は、可能性が、不要な火災やコンポーネント wear 気温の変化のパターンを監視する Azure Stream Analytics と組み合わせると、Event Hubs を使用します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-138">For example, if we had networked sensors on our pizza ovens, we could use Event Hubs coupled with Azure Stream Analytics to watch for patterns in the temperature changes that might indicate an unwanted fire or component wear.</span></span>

## <a name="service-bus-topics-queues-and-relays"></a><span data-ttu-id="6b17e-139">Service Bus のトピック、キュー、およびリレー</span><span class="sxs-lookup"><span data-stu-id="6b17e-139">Service Bus topics, queues, and relays</span></span>

<span data-ttu-id="6b17e-140">Azure Service Bus は、次の 3 つの異なる方法でメッセージを交換できます。 キュー、トピック、およびリレーします。</span><span class="sxs-lookup"><span data-stu-id="6b17e-140">Azure Service Bus can exchange messages in three different ways: queues, topics, and relays.</span></span>

### <a name="what-is-a-queue"></a><span data-ttu-id="6b17e-141">キューは何ですか。</span><span class="sxs-lookup"><span data-stu-id="6b17e-141">What is a queue?</span></span>

<span data-ttu-id="6b17e-142">**キュー**はメッセージの単純な一時記憶の場所です。</span><span class="sxs-lookup"><span data-stu-id="6b17e-142">A **queue** is a simple temporary storage location for messages.</span></span> <span data-ttu-id="6b17e-143">コンポーネントを送信することで、キューにメッセージが追加されます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-143">A sending component adds a message to the queue.</span></span> <span data-ttu-id="6b17e-144">宛先コンポーネントは、キューの先頭にあるメッセージを取得します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-144">A destination component picks up the message at the front of the queue.</span></span> <span data-ttu-id="6b17e-145">通常の状況では、各メッセージは、1 つだけのレシーバーによって受信されます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-145">Under ordinary circumstances, each message is received by only one receiver.</span></span>

![Azure Service Bus キュー](../media/2-service-bus-queue.png)

<span data-ttu-id="6b17e-147">キューは、非常に込み合っている状況から送信先コンポーネントを隔離するために、送信元と送信先のコンポーネントを分離します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-147">Queues decouple the source and destination components to insulate destination components from high demand.</span></span> 

<span data-ttu-id="6b17e-148">ピーク時間帯にメッセージは変換先コンポーネントが処理できるよりも高速は可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-148">During peak times, messages may come in faster than destination components can handle them.</span></span> <span data-ttu-id="6b17e-149">変換元コンポーネントがある、変換先に直接接続はありません、ため、ソースが影響を受ける、キューが拡張されます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-149">Because source components have no direct connection to the destination, the source is unaffected and the queue will grow.</span></span> <span data-ttu-id="6b17e-150">送信先コンポーネントは、処理が可能になるとキューからメッセージを削除します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-150">Destination components will remove messages from the queue as they are able to handle them.</span></span> <span data-ttu-id="6b17e-151">混み具合が解消すると、送信先コンポーネントは追いつくことができ、キューが短くなります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-151">When demand drops, destination components can catch up and the queue shortens.</span></span> 

<span data-ttu-id="6b17e-152">キューは、システムにリソースを追加することなく、このように込み合った状況に対応します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-152">A queue responds to high demand like this without needing to add resources to the system.</span></span> <span data-ttu-id="6b17e-153">ただし、比較的迅速に処理する必要があるメッセージについては、送信先コンポーネントにインスタンスを追加することで負荷を共有させることができます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-153">However, for messages that need to be handled relatively quickly, adding additional instances of your destination component can allow them to share the load.</span></span> <span data-ttu-id="6b17e-154">各メッセージは 1 つのインスタンスのみで処理されます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-154">Each message would be handled by only one instance.</span></span> <span data-ttu-id="6b17e-155">これは、実際に必要なコンポーネントのみにリソースを追加しながら、アプリケーション全体を拡張する効果的な方法です。</span><span class="sxs-lookup"><span data-stu-id="6b17e-155">This is an effective way to scale your entire application while only adding resources to the components that actually need it.</span></span>

### <a name="what-is-a-topic"></a><span data-ttu-id="6b17e-156">トピックとは何ですか。</span><span class="sxs-lookup"><span data-stu-id="6b17e-156">What is a topic?</span></span>

<span data-ttu-id="6b17e-157">**トピック**はキューに似ていますが、複数のサブスクリプションを持つことができます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-157">A **topic** is similar to a queue but can have multiple subscriptions.</span></span> <span data-ttu-id="6b17e-158">つまり、複数の送信先コンポーネントは、1 つのトピックにサブスクライブできるため、各メッセージは複数の受信者に配信されます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-158">This means that multiple destination components can subscribe to a single topic, so each message is delivered to multiple receivers.</span></span> <span data-ttu-id="6b17e-159">サブスクリプションでは、トピック内のメッセージをフィルター処理して関連するメッセージのみを受信することもできます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-159">Subscriptions can also filter the messages in the topic to receive only messages that are relevant.</span></span> <span data-ttu-id="6b17e-160">サブスクリプションはキューと同じ分離された通信を提供し、込み合った状況にも同じ方法で対応します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-160">Subscriptions provide the same decoupled communications as queues and respond to high demand in the same way.</span></span> <span data-ttu-id="6b17e-161">各メッセージを複数の送信先コンポーネントに配信する場合はトピックを使用します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-161">Use a topic if you want each message to be delivered to more than one destination component.</span></span>

<span data-ttu-id="6b17e-162">トピックは Basic 価格レベルでは、サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="6b17e-162">Topics are not supported in the Basic pricing tier.</span></span>

![Azure Service Bus トピック](../media/2-service-bus-topic.png)

### <a name="what-is-a-relay"></a><span data-ttu-id="6b17e-164">リレーとは何ですか。</span><span class="sxs-lookup"><span data-stu-id="6b17e-164">What is a relay?</span></span>

<span data-ttu-id="6b17e-165">**リレー**とはアプリケーション間の同期双方向通信を実行するオブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="6b17e-165">A **relay** is an object that performs synchronous, two-way communication between applications.</span></span> <span data-ttu-id="6b17e-166">キューやトピックなどの一時記憶域の場所ではありません。</span><span class="sxs-lookup"><span data-stu-id="6b17e-166">It is not a temporary storage location for messages like queues and topics.</span></span> <span data-ttu-id="6b17e-167">代わりに、双方向、ファイアウォールなどのネットワーク境界を越えてバッファリングされていない接続を提供します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-167">Instead, it provides bidirectional, unbuffered connections across network boundaries such as firewalls.</span></span> <span data-ttu-id="6b17e-168">これらが同じネットワーク セグメント上にあるがネットワーク セキュリティ デバイスで区切られたかのようにコンポーネント間で直接通信する場合は、リレーを使用します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-168">Use a relay when you want direct communications between components as if they were located on the same network segment but separated by network security devices.</span></span>

> [!NOTE]
> <span data-ttu-id="6b17e-169">リレーには、Azure Service Bus の一部が、疎結合メッセージング ワークフローを実装しないと、このモジュールでは考慮されません。</span><span class="sxs-lookup"><span data-stu-id="6b17e-169">Although relays are part of Azure Service Bus, they do not implement loosely coupled messaging workflows and are not considered further in this module.</span></span>

## <a name="service-bus-queues-and-storage-queues"></a><span data-ttu-id="6b17e-170">Service Bus キューとストレージ キュー</span><span class="sxs-lookup"><span data-stu-id="6b17e-170">Service Bus queues and storage queues</span></span>

<span data-ttu-id="6b17e-171">メッセージ キューを含む 2 つの Azure 機能があります。 Service Bus と Azure Storage アカウント。</span><span class="sxs-lookup"><span data-stu-id="6b17e-171">There are two Azure features that include message queues: Service Bus and Azure Storage accounts.</span></span> <span data-ttu-id="6b17e-172">一般的なガイドラインとしてストレージ キューは簡単に使用しますが、低い高度で Service Bus のキューよりも柔軟性。</span><span class="sxs-lookup"><span data-stu-id="6b17e-172">As a general guide, storage queues are simpler to use but are less sophisticated and flexible than Service Bus queues.</span></span>

<span data-ttu-id="6b17e-173">Service Bus キューの主な利点は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="6b17e-173">Key advantages of Service Bus queues include:</span></span>

* <span data-ttu-id="6b17e-174">大きなメッセージ サイズ (メッセージあたり 64 KB に対して 256 KB) をサポートしています</span><span class="sxs-lookup"><span data-stu-id="6b17e-174">Supports larger messages size (256 KB per message versus 64 KB)</span></span>
* <span data-ttu-id="6b17e-175">At-Least-Once と At-Most-Once の両方の配信をサポートしています。メッセージが失われるという極めて低い可能性と、メッセージが 2 回処理されるという極めて低い可能性のいずれかを選択します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-175">Supports both at-least-once and at-most-once delivery - choose between a very small chance that a message is lost or a very small chance it is handled twice</span></span>
* <span data-ttu-id="6b17e-176">保証**最初先出し (FIFO)** 順序 - メッセージが追加されたのと同じ順序で処理されます (FIFO キューの通常の動作ですが、保証はありませんすべてのメッセージに対して)</span><span class="sxs-lookup"><span data-stu-id="6b17e-176">Guarantees **first-in-first-out (FIFO)** order - messages are handled in the same order they are added (although FIFO is the normal operation of a queue, it is not guaranteed for every message)</span></span>
* <span data-ttu-id="6b17e-177">トランザクションに複数のメッセージをグループ化できます - トランザクションの 1 つのメッセージの配信に失敗すると、トランザクションのすべてのメッセージが配信されません。</span><span class="sxs-lookup"><span data-stu-id="6b17e-177">Can group multiple messages into a transaction - if one message in the transaction fails to be delivered, all messages in the transaction will not be delivered</span></span>
* <span data-ttu-id="6b17e-178">ロールベースのセキュリティをサポート</span><span class="sxs-lookup"><span data-stu-id="6b17e-178">Supports role-based security</span></span>
* <span data-ttu-id="6b17e-179">継続的にキューをポーリングするために送信先コンポーネントは不要です。</span><span class="sxs-lookup"><span data-stu-id="6b17e-179">Does not require destination components to continuously poll the queue</span></span>

<span data-ttu-id="6b17e-180">ストレージ キューの利点があります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-180">Advantages of storage queues:</span></span>

* <span data-ttu-id="6b17e-181">無制限のキュー サイズ (と Service Bus キューの 80 GB の制限) をサポートしています</span><span class="sxs-lookup"><span data-stu-id="6b17e-181">Supports unlimited queue size (versus 80-GB limit for Service Bus queues)</span></span>
* <span data-ttu-id="6b17e-182">すべてのメッセージのログを維持します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-182">Maintains a log of all messages</span></span>

## <a name="how-to-choose-a-communications-technology"></a><span data-ttu-id="6b17e-183">通信テクノロジを選択する方法</span><span class="sxs-lookup"><span data-stu-id="6b17e-183">How to choose a communications technology</span></span>

<span data-ttu-id="6b17e-184">Azure が提供するまざまな概念と実装について説明しました。</span><span class="sxs-lookup"><span data-stu-id="6b17e-184">We've seen the different concepts and the implementations Azure provides.</span></span> <span data-ttu-id="6b17e-185">ここからは通信毎に私たちの意思決定プロセスがどのようにあるべきかについて説明します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-185">Let's discuss what our decision process should look like for each of our communications.</span></span>

#### <a name="consider-the-following-questions"></a><span data-ttu-id="6b17e-186">次のクエリについて考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="6b17e-186">Consider the following questions:</span></span>

1. <span data-ttu-id="6b17e-187">通信イベントですか。</span><span class="sxs-lookup"><span data-stu-id="6b17e-187">Is the communication an event?</span></span> <span data-ttu-id="6b17e-188">そうである場合は、Event Grid または Event Hubs の使用を検討してください。</span><span class="sxs-lookup"><span data-stu-id="6b17e-188">If so, consider using Event Grid or Event Hubs.</span></span>

1. <span data-ttu-id="6b17e-189">1 つのメッセージを複数の送信先に配信する必要がありますか。</span><span class="sxs-lookup"><span data-stu-id="6b17e-189">Should a single message be delivered to more than one destination?</span></span> <span data-ttu-id="6b17e-190">その場合は、Service Bus トピックを使用します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-190">If so, use a Service Bus topic.</span></span> <span data-ttu-id="6b17e-191">それ以外の場合、キューを使用します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-191">Otherwise, use a queue.</span></span>

<span data-ttu-id="6b17e-192">キューが必要であると判断した場合：</span><span class="sxs-lookup"><span data-stu-id="6b17e-192">If you decide that you need a queue:</span></span>

#### <a name="choose-service-bus-queues-if"></a><span data-ttu-id="6b17e-193">次の場合は、Service Bus キューを選択します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-193">Choose Service Bus queues if:</span></span>

- <span data-ttu-id="6b17e-194">ほとんどの 1 回の配信保証する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-194">You need an at-most-once delivery guarantee</span></span>
- <span data-ttu-id="6b17e-195">FIFO 保証が必要である</span><span class="sxs-lookup"><span data-stu-id="6b17e-195">You need a FIFO guarantee</span></span>
- <span data-ttu-id="6b17e-196">メッセージをトランザクションにグループ化する必要がある</span><span class="sxs-lookup"><span data-stu-id="6b17e-196">You need to group messages into transactions</span></span>
- <span data-ttu-id="6b17e-197">キューをポーリングせずにメッセージを受信する必要がある</span><span class="sxs-lookup"><span data-stu-id="6b17e-197">You want to receive messages without polling the queue</span></span>
- <span data-ttu-id="6b17e-198">キューにロールベースのアクセスを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-198">You need to provide role-based access to the queues</span></span>
- <span data-ttu-id="6b17e-199">256 KB 未満ですが 64 KB を超えるメッセージを処理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-199">You need to handle messages larger than 64 KB but smaller than 256 KB</span></span>
- <span data-ttu-id="6b17e-200">キューのサイズが 80 GB を超えることがない</span><span class="sxs-lookup"><span data-stu-id="6b17e-200">Your queue size will not grow larger than 80 GB</span></span>
- <span data-ttu-id="6b17e-201">バッチ メッセージを発行および使用できる必要がある</span><span class="sxs-lookup"><span data-stu-id="6b17e-201">You would like to be able to publish and consume batches of messages</span></span>

#### <a name="choose-queue-storage-if"></a><span data-ttu-id="6b17e-202">場合は、キュー ストレージを選択します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-202">Choose queue storage if:</span></span>
- <span data-ttu-id="6b17e-203">特定の追加要件のない単純なキューが必要である</span><span class="sxs-lookup"><span data-stu-id="6b17e-203">You need a simple queue with no particular additional requirements</span></span>
- <span data-ttu-id="6b17e-204">キューを通ったすべてのメッセージの監査証跡が必要である</span><span class="sxs-lookup"><span data-stu-id="6b17e-204">You need an audit trail of all messages that pass through the queue</span></span>
- <span data-ttu-id="6b17e-205">キューのサイズが 80 GB を超えると予想される</span><span class="sxs-lookup"><span data-stu-id="6b17e-205">You expect the queue to exceed 80 GB in size</span></span>
- <span data-ttu-id="6b17e-206">キュー内のメッセージ処理の進行状況を追跡する必要がある</span><span class="sxs-lookup"><span data-stu-id="6b17e-206">You want to track progress for processing a message inside of the queue</span></span>

<span data-ttu-id="6b17e-207">分散アプリケーションのコンポーネントは、直接通信できるよう、Azure Service Bus または Azure Event Grid など、中間通信プラットフォームを使用してその通信の信頼性を緩和することができます多くの場合。</span><span class="sxs-lookup"><span data-stu-id="6b17e-207">Although the components of a distributed application can communicate directly, you can often increase the reliability of that communication by using an intermediate communication platform such as Azure Service Bus or Azure Event Grid.</span></span>

<span data-ttu-id="6b17e-208">Event Grid は、イベントのイベントのみの受信者に通知し、そのイベントに関連付けられた生データが含まれていない場合に設計されています。</span><span class="sxs-lookup"><span data-stu-id="6b17e-208">Event Grid is designed for events, which notify recipients only of an event and do not contain the raw data associated with that event.</span></span> <span data-ttu-id="6b17e-209">Azure Event Hubs は、イベントの種類の高フローの分析に適しています。</span><span class="sxs-lookup"><span data-stu-id="6b17e-209">Azure Event Hubs is designed for high-flow analytics types of events.</span></span> <span data-ttu-id="6b17e-210">Azure Service Bus と Storage キューはメッセージ用であり、アプリケーションのワークフローの中核部分をバインドするために使用できます。</span><span class="sxs-lookup"><span data-stu-id="6b17e-210">Azure Service Bus and storage queues are for messages, which can be used for binding the core pieces of any application workflow.</span></span>

<span data-ttu-id="6b17e-211">お客様の要件は、単純な場合、1 つだけ先には、各メッセージを送信する場合、または可能な限り早くコードを記述する場合、ストレージ キューが最善の方法にあります。</span><span class="sxs-lookup"><span data-stu-id="6b17e-211">If your requirements are simple, if you want to send each message to only one destination, or if you want to write code as quickly as possible, a storage queue may be the best option.</span></span> <span data-ttu-id="6b17e-212">それ以外では、Service Bus キューが、より多くのオプションや柔軟性を備えています。</span><span class="sxs-lookup"><span data-stu-id="6b17e-212">Otherwise, Service Bus queues provide many more options and flexibility.</span></span>

<span data-ttu-id="6b17e-213">複数のサブスクライバーにメッセージを送信する場合は、Service Bus トピックを使用します。</span><span class="sxs-lookup"><span data-stu-id="6b17e-213">If you want to send messages to multiple subscribers, use a Service Bus topic.</span></span>
