<span data-ttu-id="7d56c-101">Azure 内のいくつかを含め、分散アプリケーションの信頼性向上に役立つ通信プラットフォームは多数あります。</span><span class="sxs-lookup"><span data-stu-id="7d56c-101">There are many communications platforms can help improve the reliability of a distributed application, including several within Azure.</span></span> <span data-ttu-id="7d56c-102">これらのツールはそれぞれ別の目的で動作します。適切なものを選択できるように Azure 内の各ツールを確認しましょう。</span><span class="sxs-lookup"><span data-stu-id="7d56c-102">Each of these tools serves a different purpose; let's review each tool in Azure to help choose the right one.</span></span>

<span data-ttu-id="7d56c-103">ピザの注文と追跡アプリケーションのアーキテクチャでは、Web サイト、データ ストレージ、バックエンド サービスなどいくつかのコンポーネントが必要です。</span><span class="sxs-lookup"><span data-stu-id="7d56c-103">The architecture of our pizza ordering and tracking application requires several components: a website, data storage, backend service, etc..</span></span> <span data-ttu-id="7d56c-104">アプリケーションのコンポーネントはさまざまな方法でまとめてバインドでき、1 つのアプリケーションで複数の手法を利用できます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-104">We can bind the components of our application together in many different ways, and a single application can take advantage of multiple techniques.</span></span> 

<span data-ttu-id="7d56c-105">Contoso Slices アプリケーションでは、どの手法を使用するかを決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7d56c-105">We need to decide which techniques to use in the Contoso Slices application.</span></span> <span data-ttu-id="7d56c-106">最初の手順は、複数のパート間に通信が存在する場所それぞれを評価することです。</span><span class="sxs-lookup"><span data-stu-id="7d56c-106">The first step is to evaluate each place where there is communication between multiple parts.</span></span> <span data-ttu-id="7d56c-107">アプリケーションがそのジョブを実行するために一部のコンポーネントは、適切なタイミングで実行する_必要があります_。</span><span class="sxs-lookup"><span data-stu-id="7d56c-107">Some components _must_ run in a timely manner for our application to be doing its job at all.</span></span> <span data-ttu-id="7d56c-108">時間はある程度重要ですが、クリティカルではありません。</span><span class="sxs-lookup"><span data-stu-id="7d56c-108">Some may be important, but not time critical.</span></span> <span data-ttu-id="7d56c-109">最後に、モバイル アプリ通知など、他のコンポーネントは、さらに若干随意的です。</span><span class="sxs-lookup"><span data-stu-id="7d56c-109">Finally, other components, like our mobile app notifications, are a bit more optional.</span></span>

<span data-ttu-id="7d56c-110">ここでは、Azure で使用できる通信プラットフォームについて学習し、アプリケーションの各要件にあったプラットフォームを選択できるようにします。</span><span class="sxs-lookup"><span data-stu-id="7d56c-110">Here, you will learn about the communications platforms available in Azure, so that you can choose the right one for each requirement in your application.</span></span>

## <a name="decide-between-messages-and-events"></a><span data-ttu-id="7d56c-111">メッセージとイベントを決定する</span><span class="sxs-lookup"><span data-stu-id="7d56c-111">Decide between messages and events</span></span>

<span data-ttu-id="7d56c-112">メッセージとイベントの両方が**データグラム**: 1 つのコンポーネントから別のコンポーネントに送信されたデータのパッケージ。</span><span class="sxs-lookup"><span data-stu-id="7d56c-112">Messages and events are both **datagrams**: packages of data sent from one component to another.</span></span> <span data-ttu-id="7d56c-113">これらの違いは一見したところわずかなようですが、アプリケーションを設計する方法には大きな違いとなる場合があります。</span><span class="sxs-lookup"><span data-stu-id="7d56c-113">They are different in ways that at first seem subtle, but can make significant differences in how you architect your application.</span></span> 

### <a name="messages"></a><span data-ttu-id="7d56c-114">メッセージ</span><span class="sxs-lookup"><span data-stu-id="7d56c-114">Messages</span></span>

<span data-ttu-id="7d56c-115">アプリケーションの全体的な整合性は受信するメッセージによって異なる場合があります。これは分散アプリケーションの用語において、メッセージの特性をよく表しています。</span><span class="sxs-lookup"><span data-stu-id="7d56c-115">In the terminology of distributed applications, the defining characteristic of a message is that the overall integrity of the application may rely on messages being received.</span></span> <span data-ttu-id="7d56c-116">メッセージを送信することを、ワークフローのバトンを別のコンポーネントに渡す1つのコンポーネントとして考えることができます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-116">You can think of sending a message as one component passing the baton of a workflow to a different component.</span></span> <span data-ttu-id="7d56c-117">ワークフロー全体が重要なビジネス プロセスとなる可能性があり、メッセージはコンポーネントをまとめて保持するモルタルです。</span><span class="sxs-lookup"><span data-stu-id="7d56c-117">The entire workflow may be a vital business process, and the message is the mortar that holds the components together.</span></span>

<span data-ttu-id="7d56c-118">一般的にメッセージはデータそのものを含み、(ID や URL のような) 単なるデータの参照ではありません。</span><span class="sxs-lookup"><span data-stu-id="7d56c-118">A message generally contains the data itself, not just a reference (like an ID or Url) to data.</span></span> <span data-ttu-id="7d56c-119">データをデータグラムの一部として送信することは、参照を送信することよりも不安定さは軽減されます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-119">Sending the data as part of the datagram is less brittle than sending a reference.</span></span> <span data-ttu-id="7d56c-120">メッセージングのアーキテクチャはメッセージの配信を保証し、追加の参照は不要であるため、メッセージは確実に処理されます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-120">The messaging architecture guarantees delivery of the message, and since no additional lookups are required, the message is reliably handled.</span></span> <span data-ttu-id="7d56c-121">ただし、アプリケーションの送信では、含めるデータが正確に何であるかを知り、大量データ送信を回避する必要があるため、受信側のコンポーネントは不必要な作業を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7d56c-121">However, the sending application needs to know exactly what data to include, to avoid sending too much data, which requires the recieving compontent to do unessesary work.</span></span> <span data-ttu-id="7d56c-122">この意味で、メッセージの送信者と受信者は、多くの場合、厳格なデータ コントラクトで結合されます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-122">In this sense, the sender and receiver of a message are often coupled by a strict data contract.</span></span>

<span data-ttu-id="7d56c-123">Contoso Slice の新しいアーキテクチャでは、ピザの注文を入力する場合、注文者はメッセージを使用するに違いありません。</span><span class="sxs-lookup"><span data-stu-id="7d56c-123">In Contoso Slice's new architecture, when a pizza order is entered, they would likely use messages.</span></span> <span data-ttu-id="7d56c-124">Web フロントエンドまたはモバイル アプリはバックエンド処理コンポーネントにメッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-124">The web front-end or mobile app would send a message to the back-end processing components.</span></span> <span data-ttu-id="7d56c-125">顧客近くのストアへのルーティングやクレジット カードへの課金などのバックエンドの手順が実行されます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-125">In the back-end steps like routing to the store near the customer, and charging the credit card would take place.</span></span>

### <a name="events"></a><span data-ttu-id="7d56c-126">イベント</span><span class="sxs-lookup"><span data-stu-id="7d56c-126">Events</span></span>

<span data-ttu-id="7d56c-127">イベントは、何かが発生したことを通知します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-127">An event notifies that something has occurred.</span></span> <span data-ttu-id="7d56c-128">イベントはメッセージよりも軽量で、ほとんどの場合はブロードキャスト通信に使用されます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-128">Events are "lighter" than messages, and are most often used for broadcast communications.</span></span>
<span data-ttu-id="7d56c-129">イベントには次の特性があります。</span><span class="sxs-lookup"><span data-stu-id="7d56c-129">Events have the following characteristics:</span></span>
* <span data-ttu-id="7d56c-130">送信されたイベントの受信者が複数のこともあれば、まったくいないこともあります。</span><span class="sxs-lookup"><span data-stu-id="7d56c-130">The event may be sent to multiple receivers, or to none at all</span></span>
* <span data-ttu-id="7d56c-131">多くの場合、イベントは "ファンアウト" を意図しています。つまり、パブリッシャーのそれぞれに対して多数のサブスクライバーが存在します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-131">Events are often intended to "fan out," or have a large number of subscribers for each publisher</span></span>
* <span data-ttu-id="7d56c-132">イベントのパブリッシャーは、受信側コンポーネントがどのようなアクションを実行するかについて何も想定していません。</span><span class="sxs-lookup"><span data-stu-id="7d56c-132">The publisher of the event has no expectation about the action a receiving component takes</span></span>

<span data-ttu-id="7d56c-133">ピザのチェーン店は、イベントを使用して、状態変更をユーザーに通知できます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-133">Our pizza chain would likely use events for notifications to users about status changes.</span></span> <span data-ttu-id="7d56c-134">状態変更イベントは、Azure Event Grid に送信でき、次に Azure 関数、そして通知ハブへと送信され、完全に_サーバーレス_なソリューションです。</span><span class="sxs-lookup"><span data-stu-id="7d56c-134">Status change event could be sent to Azure Event Grid, then on to an Azure Function, and to Notification Hub for a completely _serverless_ solution.</span></span>

<span data-ttu-id="7d56c-135">通信プラットフォームは一般的にどちらか一方を処理するように設計されているため、このイベントとメッセージの違いは根本的なものです。</span><span class="sxs-lookup"><span data-stu-id="7d56c-135">This difference between events and messages is fundamental because communications platforms are generally designed to handle one or the other.</span></span> <span data-ttu-id="7d56c-136">Service Bus はメッセージを処理するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="7d56c-136">Service Bus is designed to handle messages.</span></span> <span data-ttu-id="7d56c-137">イベントを送信する場合、Event Grid を選択することになるでしょう。</span><span class="sxs-lookup"><span data-stu-id="7d56c-137">If you want to send events, you would likely choose Event Grid.</span></span> 

<span data-ttu-id="7d56c-138">Azure には Azure イベント ハブもありますが、これは分析のために使用される通信の高フロー・ストリームの特定タイプで使用されることがほとんどです。</span><span class="sxs-lookup"><span data-stu-id="7d56c-138">Azure also has Azure Event Hub, but it is most often used for a specific type of high flow stream of communications used for analytics.</span></span> <span data-ttu-id="7d56c-139">たとえば、ピザ オーブンにネットワーク接続されたセンサーを取り付けていた場合、Azure Stream Analytics と結合された Event Hub を使用して、望ましくない火災やコンポーネントの摩耗を示す温度変化のパターンを監視できます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-139">For example, if we had networked sensors on our pizza ovens we could use Event Hub coupled with Azure Stream Analytics to watch for patterns in the temperature changes that might indicate an unwanted fire, or component wear.</span></span>

## <a name="service-bus-topics-queues-and-relays"></a><span data-ttu-id="7d56c-140">Service Bus のトピック、キュー、リレー</span><span class="sxs-lookup"><span data-stu-id="7d56c-140">Service Bus Topics, Queues, and Relays</span></span>

<span data-ttu-id="7d56c-141">Azure Service Bus は、キュー、トピック、およびリレーを通じた、3 つの異なる方法でメッセージを交換することができます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-141">Azure Service Bus can exchange messages in three different ways, through queues, topics, and relays.</span></span>

### <a name="what-is-a-queue"></a><span data-ttu-id="7d56c-142">キューとは何ですか。</span><span class="sxs-lookup"><span data-stu-id="7d56c-142">What is a Queue?</span></span>

<span data-ttu-id="7d56c-143">**キュー**はメッセージの単純な一時記憶の場所です。</span><span class="sxs-lookup"><span data-stu-id="7d56c-143">A **queue** is a simple temporary storage location for messages.</span></span> <span data-ttu-id="7d56c-144">コンポーネントを送信することで、キューにメッセージが追加されます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-144">A sending component adds a message to the queue.</span></span> <span data-ttu-id="7d56c-145">宛先コンポーネントは、キューの先頭にあるメッセージを取得します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-145">A destination component picks up the message at the front of the queue.</span></span> <span data-ttu-id="7d56c-146">通常の状況では、メッセージはそれぞれ、1 人の受信者のみが受信します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-146">Under ordinary circumstances, each message is recieved by only one receiver.</span></span>

![Azure Service Bus キュー](../media-draft/2-service-bus-queue.png)

<span data-ttu-id="7d56c-148">キューは、非常に込み合っている状況から送信先コンポーネントを隔離するために、送信元と送信先のコンポーネントを分離します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-148">Queues decouple the source and destination components to insulate destination components from high demand.</span></span> 

<span data-ttu-id="7d56c-149">ピーク時間帯では、メッセージは送信先コンポーネントが処理できるよりも速く着信する場合があります。</span><span class="sxs-lookup"><span data-stu-id="7d56c-149">During peak times, messages may come in faster than destination component can handle them.</span></span> <span data-ttu-id="7d56c-150">送信元コンポーネントには、送信先への直接的な接続がないため、送信元が影響を受けることはなく、キューが増大します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-150">Since source components have no direct connection to the destination, the source is unaffected and the queue will grow.</span></span> <span data-ttu-id="7d56c-151">送信先コンポーネントは、処理が可能になるとキューからメッセージを削除します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-151">Destination components will remove messages from the queue as they are able to handle them.</span></span> <span data-ttu-id="7d56c-152">混み具合が解消すると、送信先コンポーネントは追いつくことができ、キューが短くなります。</span><span class="sxs-lookup"><span data-stu-id="7d56c-152">When demand drops, destination components can catch up and the queue shortens.</span></span> 

<span data-ttu-id="7d56c-153">キューは、システムにリソースを追加することなく、このように込み合った状況に対応します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-153">A queue responds to high demand like this without needing to add resources to the system.</span></span> <span data-ttu-id="7d56c-154">ただし、比較的迅速に処理する必要があるメッセージについては、送信先コンポーネントにインスタンスを追加することで負荷を共有させることができます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-154">However, for messages that need to be handled relatively quickly, adding additional instances of your destination component can allow them to share the load.</span></span> <span data-ttu-id="7d56c-155">各メッセージは 1 つのインスタンスのみで処理されます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-155">Each message would be handled by only one instance.</span></span> <span data-ttu-id="7d56c-156">これは、実際に必要なコンポーネントのみにリソースを追加しながら、アプリケーション全体を拡張する効果的な方法です。</span><span class="sxs-lookup"><span data-stu-id="7d56c-156">This is an effective way to scale your entire application while only adding resources to the components that actually need it.</span></span>

### <a name="what-is-a-topic"></a><span data-ttu-id="7d56c-157">トピックとは何ですか。</span><span class="sxs-lookup"><span data-stu-id="7d56c-157">What is a Topic?</span></span>

<span data-ttu-id="7d56c-158">**トピック**はキューに似ていますが、複数のサブスクリプションを持つことができます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-158">A **topic** is similar to a queue but can have multiple subscriptions.</span></span> <span data-ttu-id="7d56c-159">つまり、複数の送信先コンポーネントは、1 つのトピックにサブスクライブできるため、各メッセージは複数の受信者に配信されます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-159">This means that multiple destination components can subscribe to a single topic, so each message is delivered to multiple receivers.</span></span> <span data-ttu-id="7d56c-160">サブスクリプションでは、トピック内のメッセージをフィルター処理して関連するメッセージのみを受信することもできます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-160">Subscriptions can also filter the messages in the topic to receive only messages that are relevant.</span></span> <span data-ttu-id="7d56c-161">サブスクリプションはキューと同じ分離された通信を提供し、込み合った状況にも同じ方法で対応します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-161">Subscriptions provide the same decoupled communications as queues and respond to high demand in the same way.</span></span> <span data-ttu-id="7d56c-162">各メッセージを複数の送信先コンポーネントに配信する場合はトピックを使用します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-162">Use a topic if you want each message to be delivered to more than one destination component.</span></span>

<span data-ttu-id="7d56c-163">トピックは Basic 価格レベルでは、サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="7d56c-163">Topics are not supported in the Basic pricing tier.</span></span>

![Azure Service Bus Topic](../media-draft/2-service-bus-topic.png)

### <a name="what-is-a-relay"></a><span data-ttu-id="7d56c-165">リレーとは何ですか?</span><span class="sxs-lookup"><span data-stu-id="7d56c-165">What is a Relay?</span></span>

<span data-ttu-id="7d56c-166">**リレー**とはアプリケーション間の同期双方向通信を実行するオブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="7d56c-166">A **relay** is an object that performs synchronous, two-way communication between applications.</span></span> <span data-ttu-id="7d56c-167">キューやトピックなどの一時記憶域の場所ではありません。</span><span class="sxs-lookup"><span data-stu-id="7d56c-167">It is not a temporary storage location for messages like queues and topics.</span></span> <span data-ttu-id="7d56c-168">代わりに、ファイアウォールなどのネットワーク境界越しにバッファーなしの双方向の接続を提供します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-168">Instead it provides bi-directional, unbuffered connections across network boundaries such as firewalls.</span></span> <span data-ttu-id="7d56c-169">同じネットワーク セグメントに配置されているが、ネットワーク セキュリティ デバイスで区切られているかのように、コンポーネント間での直接通信する場合はリレーを使用します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-169">Use a relay when you want direct communications between components as if they were located on the same network segment but are separated by network security devices.</span></span>

> [!NOTE]
> <span data-ttu-id="7d56c-170">リレーには、Azure Service Bus の一部ですが、疎結合メッセージング ワークフローを実装せず、このモジュールではこれ以上は言及しません。</span><span class="sxs-lookup"><span data-stu-id="7d56c-170">Although relays are part of Azure Service Bus, they do not implement loosely-couple messaging workflows and are not considered further in this module.</span></span>

## <a name="service-bus-queues-and-storage-queues"></a><span data-ttu-id="7d56c-171">Service Bus キューと Storage キューの比較</span><span class="sxs-lookup"><span data-stu-id="7d56c-171">Service Bus Queues and Storage Queues</span></span>

<span data-ttu-id="7d56c-172">メッセージ キューを含む Azure 機能には Service Bus と Storage Account の 2 つがあります。</span><span class="sxs-lookup"><span data-stu-id="7d56c-172">There are two Azure features that include message queues: Service Bus and Storage Accounts.</span></span> <span data-ttu-id="7d56c-173">一般的なガイドラインとして、Storage キューの方が簡単に使用できますが、あまり高度ではなく、Service Bus キューより柔軟です。</span><span class="sxs-lookup"><span data-stu-id="7d56c-173">As a general guide, storage queues are simpler to use but less sophisticated and flexible than Service Bus queues.</span></span>

<span data-ttu-id="7d56c-174">Service Bus キューの主な利点は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="7d56c-174">Key advantages of Service Bus queues include:</span></span>

* <span data-ttu-id="7d56c-175">大きなメッセージ サイズ (メッセージあたり 64 KB に対して 256 KB) をサポートしています</span><span class="sxs-lookup"><span data-stu-id="7d56c-175">Supports larger messages size (256 KB per message versus 64 KB)</span></span>
* <span data-ttu-id="7d56c-176">At-Least-Once と At-Most-Once の両方の配信をサポートしています。メッセージが失われるという極めて低い可能性と、メッセージが 2 回処理されるという極めて低い可能性のいずれかを選択します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-176">Supports both at-least-once and at-most-once delivery - choose between a very small chance that a message is lost or a very small chance it is handled twice</span></span>
* <span data-ttu-id="7d56c-177">**最初先出し (FIFO)** 順序を保証 - メッセージは追加された順序で処理されます (ただし FIFO はキューの通常の動作であり、すべてのメッセージに保証されてはいません)</span><span class="sxs-lookup"><span data-stu-id="7d56c-177">Guarantees **First-In-First-Out (FIFO)** order - messages are handled in the same order they are added (Though FIFO is the normal operation of a queue, it is not guaranteed for every message)</span></span>
* <span data-ttu-id="7d56c-178">トランザクションに複数のメッセージをグループ化できます - トランザクションの 1 つのメッセージの配信に失敗すると、トランザクションのすべてのメッセージが配信されません。</span><span class="sxs-lookup"><span data-stu-id="7d56c-178">Can group multiple messages into a transaction - if one message in the transaction fails to be delivered, all messages in the transaction will not be delivered</span></span>
* <span data-ttu-id="7d56c-179">ロールベースのセキュリティをサポート</span><span class="sxs-lookup"><span data-stu-id="7d56c-179">Supports role-based security</span></span>
* <span data-ttu-id="7d56c-180">継続的にキューをポーリングするために送信先コンポーネントは不要です。</span><span class="sxs-lookup"><span data-stu-id="7d56c-180">Does not require destination components to continuously poll the queue</span></span>

<span data-ttu-id="7d56c-181">Storage キューの利点は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="7d56c-181">Advantages of Storage queues:</span></span>

* <span data-ttu-id="7d56c-182">無制限のキュー サイズ (これに対して Service Bus キューは 80 GB に制限されている) をサポートしています</span><span class="sxs-lookup"><span data-stu-id="7d56c-182">Supports unlimited queue size (versus 80GB limit for Service Bus queues)</span></span>
* <span data-ttu-id="7d56c-183">すべてのメッセージのログを維持します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-183">Maintains a log of all messages</span></span>

## <a name="how-to-choose-a-communications-technology"></a><span data-ttu-id="7d56c-184">通信テクノロジを選択する方法</span><span class="sxs-lookup"><span data-stu-id="7d56c-184">How to choose a communications technology</span></span>

<span data-ttu-id="7d56c-185">Azure が提供するまざまな概念と実装について説明しました。</span><span class="sxs-lookup"><span data-stu-id="7d56c-185">We've seen the different concepts and the implementations Azure provides.</span></span> <span data-ttu-id="7d56c-186">ここからは通信毎に私たちの意思決定プロセスがどのようにあるべきかについて説明します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-186">Let's discuss what our decision process should look like for each of our communications.</span></span>

#### <a name="consider-the-following-questions"></a><span data-ttu-id="7d56c-187">次のクエリについて考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="7d56c-187">Consider the following questions:</span></span>

1. <span data-ttu-id="7d56c-188">通信イベントですか。</span><span class="sxs-lookup"><span data-stu-id="7d56c-188">Is the communication an event?</span></span> <span data-ttu-id="7d56c-189">その場合は、Event Grid またはイベント ハブの使用を検討してください。</span><span class="sxs-lookup"><span data-stu-id="7d56c-189">If so consider using Event Grid or Event Hub.</span></span>

1. <span data-ttu-id="7d56c-190">1 つのメッセージを複数の送信先に配信する必要がありますか。</span><span class="sxs-lookup"><span data-stu-id="7d56c-190">Should a single message be delivered to more than one destination?</span></span> <span data-ttu-id="7d56c-191">その場合は、Service Bus トピックを使用します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-191">If so, use a Service Bus topic.</span></span> <span data-ttu-id="7d56c-192">それ以外の場合はキューを使用します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-192">Otherwise use a queue.</span></span>

<span data-ttu-id="7d56c-193">キューが必要であると判断した場合：</span><span class="sxs-lookup"><span data-stu-id="7d56c-193">If you decide that you need a queue:</span></span>

#### <a name="choose-service-bus-queues-if"></a><span data-ttu-id="7d56c-194">次の場合は、Service Bus キューを選択します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-194">Choose Service Bus queues if:</span></span>

- <span data-ttu-id="7d56c-195">At-Most-Once 配信保証が必要である</span><span class="sxs-lookup"><span data-stu-id="7d56c-195">You need an At-Most-Once delivery guarantee</span></span>
- <span data-ttu-id="7d56c-196">FIFO 保証が必要である</span><span class="sxs-lookup"><span data-stu-id="7d56c-196">You need a FIFO guarantee</span></span>
- <span data-ttu-id="7d56c-197">メッセージをトランザクションにグループ化する必要がある</span><span class="sxs-lookup"><span data-stu-id="7d56c-197">You need to group messages into transactions</span></span>
- <span data-ttu-id="7d56c-198">キューをポーリングせずにメッセージを受信する必要がある</span><span class="sxs-lookup"><span data-stu-id="7d56c-198">You want to receive messages without polling the queue</span></span>
- <span data-ttu-id="7d56c-199">キューにロール ベースのアクセスを提供する必要がある</span><span class="sxs-lookup"><span data-stu-id="7d56c-199">You need to provide a role-based access to the queues</span></span>
- <span data-ttu-id="7d56c-200">64 KB を超えるが 256 KB 未満のメッセージを処理する必要がある</span><span class="sxs-lookup"><span data-stu-id="7d56c-200">You need to handle messages larger than 64 KB but less than 256 KB</span></span>
- <span data-ttu-id="7d56c-201">キューのサイズが 80 GB を超えることがない</span><span class="sxs-lookup"><span data-stu-id="7d56c-201">Your queue size will not grow larger than 80 GB</span></span>
- <span data-ttu-id="7d56c-202">バッチ メッセージを発行および使用できる必要がある</span><span class="sxs-lookup"><span data-stu-id="7d56c-202">You would like to be able to publish and consume batches of messages</span></span>

#### <a name="choose-queue-storage-if"></a><span data-ttu-id="7d56c-203">次の場合は、Queue Storage を選択します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-203">Choose Queue storage if:</span></span>
- <span data-ttu-id="7d56c-204">特定の追加要件のない単純なキューが必要である</span><span class="sxs-lookup"><span data-stu-id="7d56c-204">You need a simple queue with no particular additional requirements</span></span>
- <span data-ttu-id="7d56c-205">キューを通ったすべてのメッセージの監査証跡が必要である</span><span class="sxs-lookup"><span data-stu-id="7d56c-205">You need an audit trail of all messages that pass through the queue</span></span>
- <span data-ttu-id="7d56c-206">キューのサイズが 80 GB を超えると予想される</span><span class="sxs-lookup"><span data-stu-id="7d56c-206">You expect the queue to exceed 80 GB in size</span></span>
- <span data-ttu-id="7d56c-207">キュー内のメッセージ処理の進行状況を追跡する必要がある</span><span class="sxs-lookup"><span data-stu-id="7d56c-207">You want to track progress for processing a message inside of the queue</span></span>

<span data-ttu-id="7d56c-208">分散アプリケーションのコンポーネントは、直接通信できますが、多くの場合、Azure Service Bus や Event Grid など、中間通信プラットフォームを使用してその通信の信頼性を高めることができます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-208">Although the components of a distributed application can communicate directly, you can often increase the reliability of that communication by using an intermediate communication platform such as Azure Service Bus or Event Grid.</span></span>

<span data-ttu-id="7d56c-209">Event Grid はイベント向けに設計されており、イベントの受信者に通知して、そのイベントに関連付けられた生データを含みません。</span><span class="sxs-lookup"><span data-stu-id="7d56c-209">Event Grid is designed for events, which only notify recipients of an event and do not contain the raw data associated with that event.</span></span> <span data-ttu-id="7d56c-210">イベント ハブは高フローの分析タイプ イベント向けに設計されています。</span><span class="sxs-lookup"><span data-stu-id="7d56c-210">Event Hub is designed for high flow analytics type events.</span></span> <span data-ttu-id="7d56c-211">Azure Service Bus と Storage キューはメッセージ用であり、アプリケーションのワークフローの中核部分をバインドするために使用できます。</span><span class="sxs-lookup"><span data-stu-id="7d56c-211">Azure Service Bus and storage queues are for messages, which can be used for binding the core pieces of any application workflow.</span></span>

<span data-ttu-id="7d56c-212">要件が単純な場合、1 つの宛先のみに各メッセージを送信する場合、または可能な限り早くコードを記述する場合は、Storage キューが最善の選択肢となります。</span><span class="sxs-lookup"><span data-stu-id="7d56c-212">If your requirements are simple, if you want to send each message to only one destination, or if you want to write code as quickly as possible, a Storage queue may be the best option.</span></span> <span data-ttu-id="7d56c-213">それ以外では、Service Bus キューが、より多くのオプションや柔軟性を備えています。</span><span class="sxs-lookup"><span data-stu-id="7d56c-213">Otherwise, Service Bus queues provide many more options and flexibility.</span></span>

<span data-ttu-id="7d56c-214">複数のサブスクライバーにメッセージを送信する場合は、Service Bus トピックを使用します。</span><span class="sxs-lookup"><span data-stu-id="7d56c-214">If you want to send messages to multiple subscribers, use a Service Bus topic.</span></span>
