バックアップは、永久的なデータ損失に対する最終かつ最強の防衛線です。 効果的なバックアップ戦略では、単に複数のデータのコピーを作成する必要があります。 アプリケーションのデータのアーキテクチャとインフラストラクチャを考慮する必要があります。 アプリでは、さまざまな種類のファイル システム、データベース、およびその他の記憶域サービスの両方で、クラウドとオンプレミス全体に広がる、さまざまな重要度のデータを管理できます。 ジョブで適切なサービスや製品を使用することにより、バックアップ プロセスは簡素化されます。バックアップを復元する必要がある場合は、復旧時間が増加します。

## <a name="establish-backup-and-restoration-requirements"></a>バックアップおよび復元の要件を確定する

ディザスター リカバリー戦略では、費用便益分析に基づいてバックアップ要件を決定します。 アプリのデータの分析は、データの保有期間の法律など、外部の要件と、アプリが管理対象のデータのさまざまなカテゴリの相対的な重要度によって実行する必要があります。

アプリのバックアップの要件を確立するために、アプリケーション データを吟味し、以下の要件に基づいて分析およびグループ化します。

* この種類のデータが失われても許容できる期間
* この種類のデータの復元にかけられる最大時間
* バックアップのリテンション期間の要件: どのくらいの期間およびどのような頻度でバックアップする必要はご利用いただけます

これらの概念は、回復ポイントの目標と復旧時間の目標 (RPO および RTO) の概念に一直線に並べるにマップします。 一般に、損失許容期間は、必要となるバックアップ間隔と RPO に直接変換できます。 復元にかかる最大時間は、アプリケーションのデータ コンポーネントの RTO に対応します。 それらを実現するためのコストに対して両方の要件を開発する必要があります。 すべての組織は、本当に余裕はありませんが失われると答えてたい*任意*のデータを多くの場合、その要件を実現するためのコストと見なされるとそうでないです。

もちろん、バックアップにはディザスター リカバリー (DR) という役割がありますが、バックアップや復元、およびそれに関連するシナリオは DR だけではありません。 バックアップを含め、災害以外の状況で復元する必要があります RTO と RPO を大きな懸念はありません。 など少量のバックアップの間隔よりも古いデータが破損しているか、削除すると、アプリケーションのダウンタイムが発生しない場合は、アプリケーションが、その SLA が不足しているの危険性あるならない可能性があり、データが失われた成功した復元が発生します。 ディザスター リカバリー計画には、災害以外の状況で復元を行う際のガイダンスを含めても含めなくても構いません。

> [!TIP]
> *アーカイブ*、*レプリケーション*、*バックアップ*を混同しないようにしてください。 アーカイブは長期的な保護と読み取りアクセス用のデータのストレージです。 レプリケーションは、高可用性をサポートするためにレプリカと特定のディザスター リカバリー シナリオの間でデータをほぼリアルタイムのコピーです。 データの保有期間の法律などのいくつかの要件では、これらの問題の 3 つすべてのお客様の戦略に影響を与える可能性があります。 アーカイブ、レプリケーション、およびバックアップが必要に個別に分析および実装します。

## <a name="azure-backup-and-restore-capabilities"></a>Azure のバックアップと復元の機能

Azure では、Azure 内のデータやオンプレミスのデータなど、さまざまなシナリオに対応したいくつかのバックアップ関連サービスや機能を提供しています。 ほとんどの Azure サービスでは、何種類かのバックアップ機能が提供されています。 ここでは、特に人気のあるバックアップ関連 Azure サービスをいくつか紹介します。

### <a name="azure-backup"></a>Azure Backup

Azure Backup は、保管と復旧を目的として Azure Recovery Services コンテナーにデータをバックアップするバックアップ製品のファミリです。 Recovery Service コンテナーは、専用の Azure のストレージ リソースで、仮想マシン、サーバー、および個々のワークステーションやワークロードのデータと構成のバックアップを保持します。

> [!NOTE]
> Azure Backup と Azure Site Recovery は、どちらもストレージとして Azure Recovery Service コンテナーを使用しています。 Azure Backup は、汎用的なバックアップ ソリューションです。 Azure Site Recovery がレプリケーションを調整し、フェールオーバーとサポートが低い RPO と RTO のディザスター リカバリー操作します。

Azure Backup は、VM または物理サーバー上で動作するクラウドおよびオンプレミス ワークフロー用の汎用バックアップ ソリューションとして機能します。 従来型のバックアップ ソリューションのドロップイン置換として設計されており、アーカイブ テープなどのローカル物理メディアではなく Azure にデータを格納します。

Azure Backup を使用してバックアップを作成できるのは、次の 4 つの製品およびサービスです。

* **Azure Backup エージェント**小規模の Windows アプリケーション ファイル、フォルダー、およびシステム状態のバックアップ、Windows VM またはサーバーがインストールされているからです。 多くコンシューマー クラウド ベース バックアップ ソリューションに似ていますが、Azure Recovery コンテナーの構成が必要な方法で動作します。 ダウンロードして Windows サーバーまたは VM にインストールすると、1 日に 3 回までバックアップを作成するように構成できます。
* **System Center Data Protection Manager**は、あらゆる機能を備えた堅牢なエンタープライズ レベルのバックアップおよび回復システムです。 Data Protection Manager は、Windows Server アプリケーションをバックアップするファイル システムと仮想マシン (Windows および Linux)、物理サーバーのベア メタル バックアップを作成および SQL などの多くの Microsoft サーバー製品のアプリケーション対応バックアップを実行します。サーバーと交換します。 Data Protection Manager の System Center ファミリ製品の一部であるとライセンスがあり、System Center の販売が、Azure Recovery コンテナーにバックアップを格納できるため、Azure Backup ファミリーの一部と見なされます。
* **Azure Backup Server**は、Azure サブスクリプションの一部としてライセンス供与で Data Protection Manager に似ており、System Center のライセンスは必要ありません。 Azure Backup Server には、ローカル テープのバックアップとその他の System Center 製品との統合を除くと同じ機能としては、Data Protection Manager がサポートしています。
* **Azure IaaS VM バックアップ**は、Azure 仮想マシンのターンキー型のバックアップおよび復元機能です。 VM のバックアップは、Windows および Linux 仮想マシンの 1 日 1 回のバックアップをサポートします。 個々 のファイル、ディスク容量の不足、および全体の Vm の回復をサポートし、アプリケーション整合性バックアップを実行することがもできます。 個々 のアプリケーションでは、バックアップ操作を認識を実行でき、スナップショットを作成する前に、一貫性のある状態に、ファイル システム リソースを取得します。

![Azure Backup](../media/azure-backup.png)

Azure Backup は、価値を追加し、ほぼすべてのサイズと形状の IaaS やオンプレミス アプリケーションのバックアップおよび復元戦略に貢献します。

### <a name="azure-blob-storage"></a>Azure BLOB ストレージ

Azure Storage には、自動化されたバックアップ機能が含まれていませんが、blob は、さまざまなソースからのすべての種類のデータのバックアップによく使用されます。 バックアップ機能を提供するサービスの多くは、そのデータを格納する BLOB を使用します。BLOB は、あらゆる種類のバックアップ シナリオにおいて、スクリプトやツールの一般的なターゲットとなります。

General Purpose v2 ストレージ アカウントは、パフォーマンスやコストが異なる 3 種類の BLOB ストレージ階層をサポートします。 **クール**ストレージではなく、ほとんどのバックアップの最適なコストの性能比を提供する**ホット**ストレージより低いアクセス コストしますが、より高いストレージ コストを提供します。 **アーカイブ**-階層のストレージは、復旧時間の低い予測でセカンダリ バックアップまたはデータのバックアップに適していること。 低コストですが、リード タイムにアクセスするには最大 15 時間が必要です。

不変 BLOB ストレージは、ユーザーが指定した期間、消去不可や変更不可に構成することができます。 不変 blob ストレージは、特定の種類のデータ、財務データなどの厳格な要件を満たすために主に設計されています。 バックアップが誤って削除されたり変更に対して保護されていることを確認するための優れたオプションになります。

### <a name="azure-sql-database"></a>Azure SQL Database

Azure SQL Database では、追加料金なしで包括的な自動バックアップ機能を利用できます。 完全バックアップが毎週作成され、差分バックアップが 12 時間ごと、ログ バックアップが 5 分ごとに作成されます。 このサービスによって作成されたバックアップは、特定の時点にデータベースを復元するために使用できます。データベースが削除された場合でも復元できます。 復元には、Azure portal、PowerShell、または REST API を使用できます。 Transparent Data Encryption で暗号化されているデータベースは、バックアップも暗号化されます。この機能は、既定で有効になっています。

SQL Database のバックアップは、エンタープライズ グレードで運用環境に使用できる準備が整っており、既定で有効になっています。 アプリの別のデータベース オプションを評価する場合は必要がある、費用便益分析の一部として含まれるサービスの重要な利点があるため。 ディザスター リカバリー計画やバックアップ/復元手順に Azure SQL Database を使用するすべてのアプリを含め、そのメリットを活用するようにしてください。

### <a name="azure-app-service"></a>Azure App Service

サポート ターンキー スケジュールされたバックアップと手動バックアップ、Azure App Service Standard および Premium レベルでホストされている web アプリケーション。 バックアップには、構成とファイルの内容に加え、アプリが使用するデータベースの内容も含まれます。 また、ファイルを除外する簡単なフィルターをサポートしています。 復元操作の対象 App Service を別に 1 つのアプリのコンテンツを移動する簡単な方法をバックアップする別の App Service インスタンス。

App Service バックアップは、アプリとデータベースの内容を含め、合計 10 GB に制限されます。 開発中の新しいアプリや小規模なアプリに適したソリューションです。 さらに成熟したアプリケーションは、App Service のバックアップを一般的に使用しません。 堅牢な展開とロールバックの手順、アプリケーションのディスク記憶域を使用していない記憶域の戦略とデータベースと永続的なストレージ専用のバックアップ方法に依存しているが代わりにします。

## <a name="verify-backups-and-test-restore-procedures"></a>バックアップの確認と復元手順のテスト

バックアップの確認と復元手順のテストを行う戦略なしに完成するバックアップ システムはありません。 バックアップ専用のサービスまたは製品を使用する場合でもする必要がありますもドキュメントとプラクティスの復旧手順をよく理解しているされ、システムを想定された状態に戻すことを確認します。

バックアップを確認するための戦略はさまざまで、インフラストラクチャの性質に依存します。 アプリケーションの新しい展開を作成、バックアップを復元する、2 つのインスタンスの状態を比較するなどの手法を検討する必要がある可能性があります。 多くの場合、この手法は、実際のディザスター リカバリー手順を正確に模倣します。 バックアップを作成した直後に、バックアップ データとライブ データのサブセットを比較するだけでも十分です。 バックアップの検証の一般的なコンポーネントが引き続き利用可能で、運用しているし、バックアップ システムが互換性のない表示にする方法で変更されていないことを確認する古いバックアップを復元しようとしています。

災害から復旧する際に、バックアップが破損していたり、不完全だったりすることがわかることに比べれば、どのような戦略も優れています。

バックアップと復元の戦略は、アーキテクチャが確実にデータの損失や破損を復旧できるようにする上で重要な一部となります。 アーキテクチャを確認して、バックアップと復元の要件を定義してください。 Azure は、すべてのアーキテクチャにバックアップおよび復元機能を提供するために、いくつかのサービスと機能を提供しています。
