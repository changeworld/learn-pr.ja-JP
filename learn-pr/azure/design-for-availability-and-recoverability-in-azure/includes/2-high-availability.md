<span data-ttu-id="2b4b8-101">高可用性 (HA) では、アーキテクチャによって障害に確実に対処することができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-101">High availability (HA) ensures your architecture can handle failures.</span></span> <span data-ttu-id="2b4b8-102">常に完全な動作状態になければならないシステムを担当しているとします。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-102">Imagine you are responsible for a system that must be always fully operational.</span></span> <span data-ttu-id="2b4b8-103">障害はいつか発生する可能性があります。したがって、何か問題が発生しても、システムが確実にオンライン状態に維持されるようにするにはどうすればよいでしょうか。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-103">Failures can and will happen, so how do you ensure that your system can remain online when something goes wrong?</span></span> <span data-ttu-id="2b4b8-104">メンテナンス イベントの処理方法</span><span class="sxs-lookup"><span data-stu-id="2b4b8-104">How do you handle maintenance events?</span></span>

<span data-ttu-id="2b4b8-105">ここでは、高可用性の必要性を説明し、アプリケーションの高可用性の要件を評価し、さらに設定した可用性の目標を満たすソリューションに、Azure プラットフォームによって対応し、それを実現する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-105">Here, you'll learn the need for high availability, evaluate application high availability requirements, and learn how the Azure platform accommodates and provides solutions to meet your availability goals.</span></span>

## <a name="what-is-high-availability"></a><span data-ttu-id="2b4b8-106">高可用性とは</span><span class="sxs-lookup"><span data-stu-id="2b4b8-106">What is high availability?</span></span>

<span data-ttu-id="2b4b8-107">高可用性サービスは、依存型のサービスおよびハードウェアでの可用性および負荷の変動と、一時的な障害を緩和するアプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-107">A highly available service is an application that absorbs fluctuations in availability, load, and temporary failures in dependent services and hardware.</span></span> <span data-ttu-id="2b4b8-108">アプリケーションは良好なパフォーマンスで動作しながら、オンラインのまま利用可能な状態 (またはその外観) が維持されます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-108">The application remains online and available (or maintains the appearance of it) while performing acceptably.</span></span> <span data-ttu-id="2b4b8-109">この可用性は、多くの場合、ビジネス要件またはアプリケーションのサービス レベル アグリーメントによって定義されます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-109">This availability is often defined by business requirements or application service-level agreements.</span></span>

<span data-ttu-id="2b4b8-110">高可用性は、最終的には、システムのコンポーネントの損失または大幅なパフォーマンス低下に対処する機能に関するものです。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-110">High availability is ultimately about the ability to handle the loss or severe degradation of a component of a system.</span></span> <span data-ttu-id="2b4b8-111">このような状況になる原因としては、ホストで障害が発生したためにアプリケーションをホストしている仮想マシンがオフラインになることが考えられます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-111">This might be due to a virtual machine hosting an application going offline because the host failed.</span></span> <span data-ttu-id="2b4b8-112">システム アップグレードのための計画メンテナンスが原因となる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-112">It could be due to planned maintenance for a system upgrade.</span></span> <span data-ttu-id="2b4b8-113">クラウド内でのサービスの障害によって発生する場合もあります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-113">It could even be caused by the failure of a service in the cloud.</span></span> <span data-ttu-id="2b4b8-114">システムで障害が発生していると考えられる場所を特定し、それらの障害に対処する機能を組み込むことで、顧客に提供しているサービスが確実にオンラインに維持されるようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-114">Identifying the places where your system can fail, and building in the capabilities to handle those failures, will ensure that the services you offer to your customers can stay online.</span></span>

<span data-ttu-id="2b4b8-115">通常、サービスの高可用性を実現するには、サービスを構成するコンポーネントの高可用性が必要です。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-115">High availability of a service typically requires high availability of the components that make up the service.</span></span> <span data-ttu-id="2b4b8-116">アイテムを購入するためのオンライン マーケットプ レースを提供する Web サイトについて考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-116">Think of a web site that offers an online marketplace to purchase items.</span></span> <span data-ttu-id="2b4b8-117">顧客に提供しているサービスには、アイテムをオンラインで一覧表示、購入、および販売する機能が用意されています。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-117">The service offered to your customers is the ability to list, buy, and sell items online.</span></span> <span data-ttu-id="2b4b8-118">このサービスを提供するために、データベース、Web サーバー、アプリケーション サーバーなど複数のコンポーネントを備えることになります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-118">To provide this service, you'll have multiple components: a database, web servers, application servers, and so on.</span></span> <span data-ttu-id="2b4b8-119">このような各コンポーネントでは障害が発生する可能性があるため、障害点がどこにどのように存在するかを識別し、アーキテクチャ内でそれらの障害点に対処する方法を決める必要があります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-119">Each of these components could fail, so you have to identify how and where your failure points are, and determine how to address these failure points in your architecture.</span></span>

## <a name="evaluate-high-availability-for-your-architecture"></a><span data-ttu-id="2b4b8-120">ご利用のアーキテクチャの高可用性を評価する</span><span class="sxs-lookup"><span data-stu-id="2b4b8-120">Evaluate high availability for your architecture</span></span>

<span data-ttu-id="2b4b8-121">アプリケーションの高可用性を評価するには 3 つの手順があります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-121">There are three steps to evaluating an application for high availability:</span></span>

1. <span data-ttu-id="2b4b8-122">ご利用のアプリケーションのサービス レベル アグリーメントを特定する</span><span class="sxs-lookup"><span data-stu-id="2b4b8-122">Determine the service-level agreement of your application</span></span>
1. <span data-ttu-id="2b4b8-123">アプリケーションの HA 機能を評価する</span><span class="sxs-lookup"><span data-stu-id="2b4b8-123">Evaluate the HA capabilities of the application</span></span>
1. <span data-ttu-id="2b4b8-124">依存するアプリケーションの HA 機能を評価する</span><span class="sxs-lookup"><span data-stu-id="2b4b8-124">Evaluate the HA capabilities of dependent applications</span></span>

<span data-ttu-id="2b4b8-125">これらの手順を詳しく見ていきましょう。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-125">Let's explore these steps in detail.</span></span>

### <a name="determine-the-service-level-agreement-of-your-application"></a><span data-ttu-id="2b4b8-126">ご利用のアプリケーションのサービス レベル アグリーメントを特定する</span><span class="sxs-lookup"><span data-stu-id="2b4b8-126">Determine the service-level agreement of your application</span></span>

<span data-ttu-id="2b4b8-127">サービス レベル アグリーメント (SLA) は、サービス プロバイダーとサービス コンシューマーとの間で結ばれる契約であり、その中でサービス プロバイダーは、測定可能なメトリックと定義された責任に基づいてサービスの標準をコミットします。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-127">A service-level agreement (SLA) is an agreement between a service provider and a service consumer in which the service provider commits to a standard of service based on measurable metrics and defined responsibilities.</span></span> <span data-ttu-id="2b4b8-128">SLA は、法律に従った厳密な契約上の合意であり、顧客による可用性の期待とみなすことができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-128">SLAs can be strict, legally bound, contractual agreements, or assumed expectations of availability by customers.</span></span> <span data-ttu-id="2b4b8-129">サービスのメトリックでは、通常、サービスのスループット、容量、および可用性に重点が置かれ、そのすべてをさまざまな方法で測定することができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-129">Service metrics typically focus on service throughput, capacity, and availability, all of which can be measured in various ways.</span></span> <span data-ttu-id="2b4b8-130">SLA を構成する特定のメトリックに関係なく、SLA を達成する過程で発生する障害は、サービス プロバイダーに対して財務的に深刻な影響を与えます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-130">Regardless of the specific metrics that make up the SLA, failure to meet the SLA can have serious financial ramifications for the service provider.</span></span> <span data-ttu-id="2b4b8-131">サービス契約の一般的なコンポーネントでは、SLA が達成されなかった場合、財務的な払戻しが保証されます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-131">A common component of service agreements is guaranteed financial reimbursement for missed SLAs.</span></span>

![SLA のハンドシェイク](../media-draft/SLAHandshake.png)

<span data-ttu-id="2b4b8-133">ご利用のアーキテクチャで必要となる高可用性機能を決める場合は、SLA を明らかにすることが重要な第一ステップとなります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-133">Identifying SLAs is an important first step when determining the high availability capabilities your architecture will require.</span></span> <span data-ttu-id="2b4b8-134">これらの機能は、ご利用のアプリケーションを高可用性にするために使用する手法を形成するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-134">These will help shape the methods you'll use to make your application highly available.</span></span>

### <a name="evaluate-the-ha-capabilities-of-the-application"></a><span data-ttu-id="2b4b8-135">アプリケーションの HA 機能を評価する</span><span class="sxs-lookup"><span data-stu-id="2b4b8-135">Evaluate the HA capabilities of the application</span></span>

<span data-ttu-id="2b4b8-136">使用するアプリケーションの HA 機能を評価するには、障害解析を実行します。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-136">To evaluate the HA capabilities of your application, perform a failure analysis.</span></span> <span data-ttu-id="2b4b8-137">重点を置くのは、単一障害と重要なコンポーネント (これらに到達不可能な場合、構成が正しくない場合、または予期しない動作を開始した場合にアプリケーションに大きな影響を与える) です。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-137">Focus on single points of failure and critical components that would have a large impact on the application if they were unreachable, misconfigured, or started behaving unexpectedly.</span></span> <span data-ttu-id="2b4b8-138">冗長性がある領域については、アプリケーションがエラー状態を検出して、自己復旧できるかどうかを判断します。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-138">For areas that do have redundancy, determine whether the application is capable of detecting error conditions and self-healing.</span></span>

<span data-ttu-id="2b4b8-139">ご利用のアプリケーションのすべてのコンポーネントについて、慎重に評価する必要があります。たとえば、ロード バランサーなどの HA 機能を提供するように設計されている部分があります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-139">You'll need to carefully evaluate all components of your application, including the pieces designed to provide HA functionality, such as load balancers.</span></span> <span data-ttu-id="2b4b8-140">単一障害点は、HA 機能を統合するように変更するか、または HA 機能を提供できるサービスに置換する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-140">Single points of failure will either need to be modified to have HA capabilities integrated, or will need to be replaced with services that can provide HA capabilities.</span></span>

### <a name="evaluate-the-ha-capabilities-of-dependent-applications"></a><span data-ttu-id="2b4b8-141">依存するアプリケーションの HA 機能を評価する</span><span class="sxs-lookup"><span data-stu-id="2b4b8-141">Evaluate the HA capabilities of dependent applications</span></span>

<span data-ttu-id="2b4b8-142">コンシューマーに対するご利用のアプリケーションの SLA 要件だけでなく、ご利用のアプリケーションが依存する場合がある任意のリソースの指定された SLA も理解する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-142">You will need to understand not only your application’s SLA requirements to your consumer, but also the provided SLAs of any resource your application may depend on.</span></span> <span data-ttu-id="2b4b8-143">顧客に対して 99.9% のアップタイムをコミットしているが、ご利用のアプリケーションが依存しているサービスの SLA が 99% しかない場合、顧客に対して SLA を満足できないリスクが発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-143">If you are committing an uptime to your customers of 99.9%, but a service your application depends on only has an SLA of 99%, this could put you at risk of not meeting your SLA to your customers.</span></span> <span data-ttu-id="2b4b8-144">依存サービスによって十分な SLA を提供することができない場合は、独自の SLA を変更するか、依存関係を別のものに置換するか、または依存関係が利用できない間に SLA を満たす方法を見つけることが必要な場合があります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-144">If a dependent service is unable to provide a sufficient SLA, you may need to modify your own SLA, replace the dependency with an alternative, or find ways to meet your SLA while the dependency is unavailable.</span></span> <span data-ttu-id="2b4b8-145">シナリオとの依存関係の性質によっては、キャッシュや作業キューなどのソリューションを使用して、失敗した依存関係を一時的に回避することができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-145">Depending on the scenario and the nature of the dependency, failing dependencies can be temporarily worked around with solutions like caches and work queues.</span></span>

## <a name="azures-highly-available-platform"></a><span data-ttu-id="2b4b8-146">Azure の可用性の高いプラットフォーム</span><span class="sxs-lookup"><span data-stu-id="2b4b8-146">Azure's highly available platform</span></span>

<span data-ttu-id="2b4b8-147">Azure クラウド プラットフォームは、そのすべてのサービスを通して高可用性を実現できるように設計されています。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-147">The Azure cloud platform has been designed to provide high availability throughout all its services.</span></span> <span data-ttu-id="2b4b8-148">システムの場合と同様に、アプリケーションもハードウェアとソフトウェアの両方のプラットフォーム イベントの影響を受ける場合があります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-148">Like any system, applications may be affected by both hardware and software platform events.</span></span> <span data-ttu-id="2b4b8-149">障害に対処できるようにアプリケーション アーキテクチャを設計することの必要性は重要です。Azure クラウド プラットフォームには、アプリケーションの可用性を高めるためのツールおよび機能が用意されています。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-149">The need to design your application architecture to handle failures is critical, and the Azure cloud platform provides you the tools and capabilities make your application highly available.</span></span> <span data-ttu-id="2b4b8-150">Azure 上でご利用のアーキテクチャ用の HA を検討する場合は、いくつかの主要な概念を把握しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-150">There are several core concepts when considering HA for your architecture on Azure:</span></span>

* <span data-ttu-id="2b4b8-151">可用性セット</span><span class="sxs-lookup"><span data-stu-id="2b4b8-151">Availability sets</span></span>
* <span data-ttu-id="2b4b8-152">可用性ゾーン</span><span class="sxs-lookup"><span data-stu-id="2b4b8-152">Availability zones</span></span>
* <span data-ttu-id="2b4b8-153">負荷分散</span><span class="sxs-lookup"><span data-stu-id="2b4b8-153">Load balancing</span></span>
* <span data-ttu-id="2b4b8-154">PaaS HA 機能</span><span class="sxs-lookup"><span data-stu-id="2b4b8-154">PaaS HA capabilities</span></span>

### <a name="availability-sets"></a><span data-ttu-id="2b4b8-155">可用性セット</span><span class="sxs-lookup"><span data-stu-id="2b4b8-155">Availability sets</span></span>

<span data-ttu-id="2b4b8-156">可用性セットは、同じアプリケーション ワークロードに属する VM を分散することでハードウェア障害および予定メンテナンスから同時に影響を受けるのを防ぐ必要があることを Azure に通知する方法です。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-156">Availability sets are a way for you to inform Azure that VMs that belong to the same application workload should be distributed to prevent simultaneous impact from hardware failure and scheduled maintenance.</span></span> <span data-ttu-id="2b4b8-157">可用性セットは、*更新ドメイン*と*障害ドメイン*で構成されています。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-157">Availability sets are made up of *update domains* and *fault domains*.</span></span>

![可用性セット](../media-draft/AzAvailSets.png)

<span data-ttu-id="2b4b8-159">Azure データ センター内の仮想マシン ホストがメンテナンスのためにダウンタイムを必要とする場合でも、更新ドメインにより、ご利用のアプリケーションのサブセットは常に実行状態を確実に維持します。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-159">Update domains ensure that a subset of your application's servers always remain running when the virtual machine hosts in an Azure datacenter require downtime for maintenance.</span></span> <span data-ttu-id="2b4b8-160">ほとんどの更新プログラムは、それらに対して稼働している VM に影響を及ぼさずに実行することができますが、このことが不可能な場合があります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-160">Most updates can be performed with no impact to the VMs running on them, but there are times when this is not possible.</span></span> <span data-ttu-id="2b4b8-161">更新プログラムがデータ センターに対して一度に実行されないようにするために、Azure データ センターは論理的に更新ドメイン (UD) に区分されています。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-161">To ensure that updates do not happen to a whole datacenter at once, the Azure datacenter is logically sectioned into update domains (UD).</span></span> <span data-ttu-id="2b4b8-162">パフォーマンス更新プログラムや重要なセキュリティ パッチなどのメンテナンス イベントをホストに適用する必要がある場合、更新プログラムは更新ドメインを経由してシーケンス処理されます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-162">When a maintenance event such as a performance update and critical security patch is needed to be applied to the host, the update is sequenced through update domains.</span></span> <span data-ttu-id="2b4b8-163">更新ドメインを使用して更新プログラムをシーケンス処理することにより、プラットフォームの更新中およびパッチ適用中もデータセンター全体が利用不可能になることはありません。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-163">The use of sequencing updates using update domains ensures the whole datacenter is not unavailable during platform updates and patching.</span></span>

<span data-ttu-id="2b4b8-164">更新ドメインがデータ センターの論理セクションを表す一方で、障害ドメイン (FD) はデータ センターの物理的なセクションを表し、これにより可用性セット内でのサーバーのラック多様性が確保されます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-164">While update domains represent a logical section of the datacenter, fault domains (FD) represent physical sections of the datacenter, ensuring rack diversity of servers in an availability set.</span></span> <span data-ttu-id="2b4b8-165">障害ドメインは、データ センター内の共有ハードウェアの物理的な分離に合わせて整列されます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-165">Fault Domains align to the physical separation of shared hardware in the datacenter.</span></span> <span data-ttu-id="2b4b8-166">これには、サーバー ラック内に設置された物理サーバーをサポートする電源、冷却装置、およびネットワーク ハードウェアが含まれます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-166">This includes power, cooling, and network hardware that supports the physical servers located in server racks.</span></span> <span data-ttu-id="2b4b8-167">サーバー ラックをサポートするハードウェアが利用できなくなった場合は、そのサーバー ラックのみが障害の影響を受けます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-167">In the event the hardware that supports a server rack has become unavailable, only that rack of servers would be affected by the outage.</span></span>

<span data-ttu-id="2b4b8-168">可用性セットを使用すると、影響の大きいメンテナンス イベントが必要とされる場合やハードウェア障害が発生した場合でも、ご利用のアプリケーションがオンライン状態で確実に維持されるようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-168">With availability sets, you can ensure your application remains online if a high-impact maintenance event is required or hardware failures occur.</span></span>

### <a name="availability-zones"></a><span data-ttu-id="2b4b8-169">可用性ゾーン</span><span class="sxs-lookup"><span data-stu-id="2b4b8-169">Availability zones</span></span>

<span data-ttu-id="2b4b8-170">可用性ゾーンは、独自の電源、冷却装置、およびネットワークを備えた、リージョン内にある独立した物理的なデータ センターの場所です。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-170">Availability zones are independent physical datacenter locations within a region that include their own power, cooling, and networking.</span></span> <span data-ttu-id="2b4b8-171">リソースをデプロイする際に可用性ゾーンを考慮に入れることにより、特定のリージョンでのプレゼンスを維持しながら、データ センターの障害からワークロードを保護することができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-171">By taking availability zones into account when deploying resources, you can protect workloads from datacenter outages while retaining presence in a particular region.</span></span> <span data-ttu-id="2b4b8-172">仮想マシンのようなサービスは、*ゾーン サービス*です。これらは、リージョン内の特定のゾーンにデプロイすることができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-172">Services like virtual machines are *zonal services* and allow you to deploy them to specific zones within a region.</span></span> <span data-ttu-id="2b4b8-173">他のサービスは*ゾーン冗長サービス*であり、特定の Azure リージョン内の複数の可用性ゾーンにわたってレプリケートされます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-173">Other services are *zone-redundant services* and will replicate across the availability zones in the specific Azure region.</span></span> <span data-ttu-id="2b4b8-174">両方の種類のサービスにより、Azure リージョン内では単一障害点が発生することはありません。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-174">Both types ensure that within an Azure region there are no single points of failure.</span></span>

![可用性ゾーン](../media-draft/AzAvailZones.png)

<span data-ttu-id="2b4b8-176">サポートされているリージョンには、最低でも 3 つの可用性ゾーンが含まれています。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-176">Supported regions contain a minimum of three availability zones.</span></span> <span data-ttu-id="2b4b8-177">それらのリージョン内にゾーン サービス リソースを作成する場合は、リソースを作成する必要があるゾーンを選択することができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-177">When creating zonal service resources in those regions, you will have the ability to select the zone in which the resource should be created.</span></span> <span data-ttu-id="2b4b8-178">これにより、アプリケーションを別の Azure リージョンに退避させなくても済むように、ゾーンの障害に耐え、Azure リージョン内で引き続き動作可能なようにアプリケーションを設計することができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-178">This will allow you to design your application to withstand a zonal outage and continue to operate in an Azure region before having to evacuate your application to another Azure region.</span></span>

<span data-ttu-id="2b4b8-179">可用性ゾーンは、Azure リージョン向けのより新しい高可用性構成サービスであり、現時点では特定のリージョンで使用することができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-179">Availability zones are a newer high availability configuration service for Azure regions and are currently available for certain regions.</span></span> <span data-ttu-id="2b4b8-180">この機能を検討する場合は、アプリケーションのデプロイ先に予定しているリージョン内で、このサービスの可用性を確認することが重要です。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-180">It is important to check the availability of this service in the region you are planning to deploy your application if you want to consider this functionality.</span></span> <span data-ttu-id="2b4b8-181">可用性ゾーンは、仮想マシンを使用する場合のほか、いくつかの PaaS サービスを使用する場合もサポートされます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-181">Availability zones are supported when using virtual machines, as well as several PaaS services.</span></span> <span data-ttu-id="2b4b8-182">サポートされているリージョンでは、可用性セットが可用性ゾーンがに置き換えられます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-182">Availability zones replace availability sets in supported regions.</span></span>

### <a name="load-balancing"></a><span data-ttu-id="2b4b8-183">負荷分散</span><span class="sxs-lookup"><span data-stu-id="2b4b8-183">Load balancing</span></span>

<span data-ttu-id="2b4b8-184">ロード バランサーでは、ネットワーク トラフィックをアプリケーション全体に分散する方法が管理されます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-184">Load balancers manage how network traffic is distributed across an application.</span></span> <span data-ttu-id="2b4b8-185">ロード バランサーは、個々のコンポーネントでの障害に対するご利用のアプリケーションの回復力を維持する上で、また要求の処理でご利用のアプリケーションを確実に使用できるようにする上で不可欠です。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-185">Load balancers are essential in keeping your application resilient to individual component failures and ensuring your application is available to process requests.</span></span> <span data-ttu-id="2b4b8-186">サービス検出が組み込まれていないアプリケーションの場合は、可用性セットと可用性ゾーンの両方に対して負荷分散が必要です。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-186">For applications that do not have service discovery built in, load balancing is required for both availability sets and availability zones.</span></span>

<span data-ttu-id="2b4b8-187">Azure には 3 つの負荷分散テクノロジ サービスがあります。これらは、ネットワーク トラフィックをルーティングする機能で区別されます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-187">Azure possesses three load balancing technology services that are distinct in their abilities to route network traffic:</span></span>

* <span data-ttu-id="2b4b8-188">**Azure Traffic Manager** は、グローバルな DNS 負荷分散機能を備えています。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-188">**Azure Traffic Manager** provides global DNS load balancing.</span></span> <span data-ttu-id="2b4b8-189">Traffic Manager を使用して Azure リージョン内または Azure リージョン間での DNS エンドポイントの負荷分散を行うことを検討します。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-189">You would consider using Traffic Manager to provide load balancing of DNS endpoints within or across Azure regions.</span></span>
* <span data-ttu-id="2b4b8-190">**Azure Application Gateway** では、着信トラフィックのラウンド ロビン分散、Cookie ベースのセッション アフィニティ、URL パス ベースのルーティング、および単一のアプリケーション ゲートウェイの背後で複数の Web サイトをホストする機能など、レイヤー 7 の負荷分散機能が用意されています。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-190">**Azure Application Gateway** provides Layer 7 load balancing capabilities such as round-robin distribution of incoming traffic, cookie-based session affinity, URL path-based routing, and the ability to host multiple websites behind a single application gateway.</span></span>
* <span data-ttu-id="2b4b8-191">**Azure Load Balancer** は、レイヤー 4 のロード バランサーです。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-191">**Azure Load Balancer** is a layer 4 load balancer.</span></span> <span data-ttu-id="2b4b8-192">負荷分散されるパブリックおよび内部のエンドポイントを構成したり、TCP を使用して受信接続をバックエンド プールの送信先にマッピングする規則や、サービスの可用性を管理するための HTTP の正常性プローブ オプションを定義したりできます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-192">You can configure public and internal load-balanced endpoints and define rules to map inbound connections to back-end pool destinations by using TCP and HTTP health-probing options to manage service availability.</span></span>

<span data-ttu-id="2b4b8-193">この 3 つの Azure 負荷分散テクノロジのいずれか 1 つまたは 3 つすべての組み合わせにより、ご利用のアプリケーションを介してネットワーク トラフィックをルーティングする高可用性のソリューションを構築する場合に必要なオプションを確実に利用できるようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-193">One or a combination of all three Azure load balancing technologies can ensure you have the necessary options available to architect a highly available solution to route network traffic through your application.</span></span>

![スクリーンショット](../media-draft/AzLBOptions.png)

### <a name="paas-ha-capabilities"></a><span data-ttu-id="2b4b8-195">PaaS HA 機能</span><span class="sxs-lookup"><span data-stu-id="2b4b8-195">PaaS HA capabilities</span></span>

<span data-ttu-id="2b4b8-196">高可用性が組み込まれた PaaS サービス。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-196">PaaS services come with high availability built in.</span></span> <span data-ttu-id="2b4b8-197">Azure SQL Database、Azure App Service、および Azure Service Bus などのサービスには、高可用性機能が含まれています。これにより、サービスの個々のコンポーネントの障害は、アプリケーションに対して確実にシームレスになります。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-197">Services such as Azure SQL Database, Azure App Service, and Azure Service Bus include high availability features, ensuring that failures of an individual component of the service will be seamless to your application.</span></span> <span data-ttu-id="2b4b8-198">PaaS サービスを使用することは、ご利用のアーキテクチャが確実に高可用性になるようにするための最善の方法の 1 つです。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-198">Using PaaS services is one of the best ways to ensure that your architecture is highly available.</span></span>

<span data-ttu-id="2b4b8-199">高可用性のための設計を行う場合は、顧客にコミットする SLA を理解することが必要です。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-199">When architecting for high availability, you will want to understand the SLA you are committing to your customers.</span></span> <span data-ttu-id="2b4b8-200">ご利用のアプリケーションで用意されている HA 機能と、依存システムの HA 機能および SLA をいずれも評価します。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-200">Then evaluate both the HA capabilities your application has, and the HA capabilities and SLAs of dependent systems.</span></span> <span data-ttu-id="2b4b8-201">それらが確定されたら、可用性セット、可用性ゾーン、およびさまざまな負荷分散テクノロジを使用して、ご利用のアプリケーションに HA 機能を追加します。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-201">Once those have been established, use Azure features such as availability sets, availability zones, and various load balancing technologies to add HA capabilities to your application.</span></span> <span data-ttu-id="2b4b8-202">任意の PaaS サービスを使用するように選択すると、HA 機能が組み込まれます。</span><span class="sxs-lookup"><span data-stu-id="2b4b8-202">Any PaaS services you should choose to use will have HA capabilities built in.</span></span>
