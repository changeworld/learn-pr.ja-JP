以前に、高可用性を実現し、ダウンタイムを最小限に抑えるのに **Azure Load Balancer** がどのように役立つかについて説明しました。

あなたの e コマース サイトの可用性はさらに向上しましたが、それによって待機時間の問題が解決したり、地理的リージョン全体での回復性が高くなったりするわけではありません。

ヨーロッパやアジアのユーザーのために、米国にあるサイトの読み込みを高速化するにはどうすればよいですか?

## <a name="what-is-network-latency"></a>ネットワーク待ち時間とは何ですか?

:::row:::
  :::column:::
    ![待ち時間を表すストップウォッチ](../media/4-latency.png) :::column-end:::: :::column span="3"::: _待ち時間_は、ネットワーク経由でデータが送信されるのにかかる時間を指します。 通常、待ち時間はミリ秒単位で測定されます。

待ち時間を帯域幅と比較します。 帯域幅は、その接続に収めることができるデータ量を指します。 待ち時間は、データが送信先に到達するまでにかかる時間を指します。
  :::column-end:::
:::row-end:::

使用する接続の種類やアプリケーションの設計方法などの要因が、待ち時間に影響する場合もありますが、 最も大きな要因は距離です。

米国東部リージョンに配置されている Azure にあるあなたの e コマース サイトについて考えてみましょう。 通常、アトランタ (約 640 キロメートルの距離) にデータを転送する時間は、ロンドン (約 6,400 キロメートル) にデータを転送する時間よりも短くて済みます。

あなたの e コマース サイトでは、標準的な HTML、CSS、JavaScript、およびイメージを配信しています。 ファイルが増えるほどネットワーク待ち時間は長くなる可能性があります。 地理的に遠く離れた場所にいるユーザーへの待ち時間を短くするには、どうすればよいですか?

## <a name="scale-out-to-different-regions"></a>異なるリージョンへのスケール アウト

Azure では、世界中のさまざまなリージョンでデータ センターを提供していることを思い出してください。

:::row:::
  :::column:::
    ![A globe representing region scale-out](../media/4-scale-out-regions.png) :::column-end:::: :::column span="3"::: データ センターを建設する場合の費用を考えてください。 機器のコストだけではありません。 電源、冷却装置、および各場所でシステムを常に稼働させるための人員を提供する必要があります。 データ センター全体をレプリケートするには、多額のコストがかかる場合があります。 しかし、Azure には既に機器と人員が用意されているため、Azure を使用すれば、ずっと少ないコストでこれを行うことができます。
  :::column-end:::
:::row-end:::

待ち時間を短縮する 1 つの方法は、サービスの正確なコピーを複数のリージョンに提供することです。 グローバルなデプロイの例を次の図に示します。

![3 か所の Azure データ センターが強調表示された世界地図を示す図。 各データ センターは一意のドメイン名でラベル付けされます。](../media/4-global-deployment.png)

図では、Azure の 3 つのリージョン (米国東部、北ヨーロッパ、および東アジア) で実行されている eコマース サイトが示されています。 それぞれの DNS 名に注目してください。 contoso.com ドメインの下で、地理的に最も近いサービスにユーザーを接続させるにはどうすればよいですか?

## <a name="use-traffic-manager-to-route-users-to-the-closest-endpoint"></a>Traffic Manager を使用して最も近いエンドポイントにユーザーをルーティングする

:::row:::
  :::column:::
    ![Azure Traffic Manager を表す指標](../media/4-sign-post.png) :::column-end:::: :::column span="3"::: 答えの 1 つが **Azure Traffic Manager** です。 Traffic Manager は、ユーザーに最も近い DNS サーバーを使用して、ユーザー トラフィックを世界中に分散されたエンドポイントに送信します。
  :::column-end:::
:::row-end:::

次の図は、Traffic Manager のロールを示しています。

![最も近いデータ センターにユーザー要求をルーティングしている Azure Traffic Manager を示す図。 ](../media/4-traffic-manager.png)

Traffic Manager では、クライアントとサーバー間を通過するトラフィックを認識することはありません。 代わりに、クライアントの Web ブラウザーを優先エンドポイントに送信します。 Traffic Manager は、待ち時間が最も短いエンドポイントなどに、いくつかの異なる方法でトラフィックをルーティングすることができます。

ここには示されていませんが、このセットアップには、カリフォルニアで実行されているオンプレミスのデプロイも含めることができます。 Traffic Manager を自分のオンプレミスのネットワークに接続して、既存のデータ センターへの投資を維持することができます。 または、アプリケーションを完全にクラウドに移行することもできます。 選ぶのはあなた自身です。

## <a name="compare-load-balancer-to-traffic-manager"></a>Load Balancer と Traffic Manager を比較する

:::row:::
  :::column:::
    ![拡大鏡](../media/4-magnifying-glass.png) :::column-end:::: :::column span="3"::: Azure Load Balancer は、サービスの可用性と回復性をより高めるため、同じリージョン内でトラフィックを分散させます。 Traffic Manager は、DNS レベルで動作し、優先エンドポイントにクライアントを送信します。 このエンドポイントは、ユーザーに最も近いリージョンにすることができます。

Load Balancer と Traffic Manager はどちらもサービスの回復性を高めるのに役立ちますが、その方法は若干異なります。 Load Balancer では、応答していない VM を検出すると、プール内の別の VM にトラフィックを送信します。 Traffic Manager では、エンドポイントの正常性を監視します。 これに対し、Traffic Manager が応答していないエンドポイントを検出すると、次に最も近い応答しているエンドポイントにトラフィックを送信します。
  :::column-end:::
:::row-end:::

## <a name="summary"></a>まとめ

地理的な距離は、待ち時間に影響する最も大きな要因の 1 つです。 Traffic Manager を配置すると、サービスの正確なコピーを複数の地理的リージョンでホストすることができます。 これにより、米国、ヨーロッパ、およびアジアのユーザーすべてが、あなたの e コマース サイトの使用に対して良好なエクスペリエンスを持つことができます。
