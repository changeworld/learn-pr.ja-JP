<span data-ttu-id="8f167-101">以前に、高可用性を実現し、ダウンタイムを最小限に抑えるのに **Azure Load Balancer** がどのように役立つかについて説明しました。</span><span class="sxs-lookup"><span data-stu-id="8f167-101">Previously, you saw how **Azure Load Balancer** helps you achieve high availability and minimize downtime.</span></span>

<span data-ttu-id="8f167-102">あなたの e コマース サイトの可用性はさらに向上しましたが、それによって待機時間の問題が解決したり、地理的リージョン全体での回復性が高くなったりするわけではありません。</span><span class="sxs-lookup"><span data-stu-id="8f167-102">Although your e-commerce site is more highly available, it doesn't solve the issue of latency or create resiliency across geographic regions.</span></span>

<span data-ttu-id="8f167-103">ヨーロッパやアジアのユーザーのために、米国にあるサイトの読み込みを高速化するにはどうすればよいですか?</span><span class="sxs-lookup"><span data-stu-id="8f167-103">How can you make your site, which is located in the United States, load faster for users located in Europe or Asia?</span></span>

## <a name="what-is-network-latency"></a><span data-ttu-id="8f167-104">ネットワーク待ち時間とは何ですか?</span><span class="sxs-lookup"><span data-stu-id="8f167-104">What is network latency?</span></span>

:::row:::
  :::column:::
    <span data-ttu-id="8f167-105">![待ち時間を表すストップウォッチ](../media/4-latency.png) :::column-end:::: :::column span="3"::: _待ち時間_は、ネットワーク経由でデータが送信されるのにかかる時間を指します。</span><span class="sxs-lookup"><span data-stu-id="8f167-105">![A stopwatch representing latency](../media/4-latency.png) :::column-end:::: :::column span="3"::: _Latency_ refers to the time it takes for data to travel over the network.</span></span> <span data-ttu-id="8f167-106">通常、待ち時間はミリ秒単位で測定されます。</span><span class="sxs-lookup"><span data-stu-id="8f167-106">Latency is typically measured in milliseconds.</span></span>

<span data-ttu-id="8f167-107">待ち時間を帯域幅と比較します。</span><span class="sxs-lookup"><span data-stu-id="8f167-107">Compare latency to bandwidth.</span></span> <span data-ttu-id="8f167-108">帯域幅は、その接続に収めることができるデータ量を指します。</span><span class="sxs-lookup"><span data-stu-id="8f167-108">Bandwidth refers to the amount of data that can fit on the connection.</span></span> <span data-ttu-id="8f167-109">待ち時間は、データが送信先に到達するまでにかかる時間を指します。</span><span class="sxs-lookup"><span data-stu-id="8f167-109">Latency refers to the time it takes for that data to reach its destination.</span></span>
  :::column-end:::
:::row-end:::

<span data-ttu-id="8f167-110">使用する接続の種類やアプリケーションの設計方法などの要因が、待ち時間に影響する場合もありますが、</span><span class="sxs-lookup"><span data-stu-id="8f167-110">Factors such as the type of connection you use and how your application is designed can affect latency.</span></span> <span data-ttu-id="8f167-111">最も大きな要因は距離です。</span><span class="sxs-lookup"><span data-stu-id="8f167-111">But perhaps the biggest factor is distance.</span></span>

<span data-ttu-id="8f167-112">米国東部リージョンに配置されている Azure にあるあなたの e コマース サイトについて考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="8f167-112">Think about your e-commerce site on Azure, which is in the East US region.</span></span> <span data-ttu-id="8f167-113">通常、アトランタ (約 640 キロメートルの距離) にデータを転送する時間は、ロンドン (約 6,400 キロメートル) にデータを転送する時間よりも短くて済みます。</span><span class="sxs-lookup"><span data-stu-id="8f167-113">It would typically take less time to transfer data to Atlanta (a distance of around 400 miles) than to transfer data to London (a distance of around 4,000 miles).</span></span>

<span data-ttu-id="8f167-114">あなたの e コマース サイトでは、標準的な HTML、CSS、JavaScript、およびイメージを配信しています。</span><span class="sxs-lookup"><span data-stu-id="8f167-114">Your e-commerce site delivers standard HTML, CSS, JavaScript, and images.</span></span> <span data-ttu-id="8f167-115">ファイルが増えるほどネットワーク待ち時間は長くなる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8f167-115">The network latency for many files can add up.</span></span> <span data-ttu-id="8f167-116">地理的に遠く離れた場所にいるユーザーへの待ち時間を短くするには、どうすればよいですか?</span><span class="sxs-lookup"><span data-stu-id="8f167-116">How can you reduce latency for users located far away geographically?</span></span>

## <a name="scale-out-to-different-regions"></a><span data-ttu-id="8f167-117">異なるリージョンへのスケール アウト</span><span class="sxs-lookup"><span data-stu-id="8f167-117">Scale out to different regions</span></span>

<span data-ttu-id="8f167-118">Azure では、世界中のさまざまなリージョンでデータ センターを提供していることを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="8f167-118">Recall that Azure provides data centers in regions across the globe.</span></span>

:::row:::
  :::column:::
    <span data-ttu-id="8f167-119">![A globe representing region scale-out](../media/4-scale-out-regions.png) :::column-end:::: :::column span="3"::: データ センターを建設する場合の費用を考えてください。</span><span class="sxs-lookup"><span data-stu-id="8f167-119">![A globe representing region scale-out](../media/4-scale-out-regions.png) :::column-end:::: :::column span="3"::: Think about the cost of building a data center.</span></span> <span data-ttu-id="8f167-120">機器のコストだけではありません。</span><span class="sxs-lookup"><span data-stu-id="8f167-120">Equipment costs aren't the only factor.</span></span> <span data-ttu-id="8f167-121">電源、冷却装置、および各場所でシステムを常に稼働させるための人員を提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f167-121">You need to provide the power, cooling, and personnel to keep your systems running at each location.</span></span> <span data-ttu-id="8f167-122">データ センター全体をレプリケートするには、多額のコストがかかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="8f167-122">It might be prohibitively expensive to replicate your entire data center.</span></span> <span data-ttu-id="8f167-123">しかし、Azure には既に機器と人員が用意されているため、Azure を使用すれば、ずっと少ないコストでこれを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="8f167-123">But doing so with Azure can cost much less, because Azure already has the equipment and personnel in place.</span></span>
  :::column-end:::
:::row-end:::

<span data-ttu-id="8f167-124">待ち時間を短縮する 1 つの方法は、サービスの正確なコピーを複数のリージョンに提供することです。</span><span class="sxs-lookup"><span data-stu-id="8f167-124">One way to reduce latency is to provide exact copies of your service in more than one region.</span></span> <span data-ttu-id="8f167-125">グローバルなデプロイの例を次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="8f167-125">The following illustration shows an example of global deployment.</span></span>

![3 か所の Azure データ センターが強調表示された世界地図を示す図。](../media/4-global-deployment.png)

<span data-ttu-id="8f167-128">図では、Azure の 3 つのリージョン (米国東部、北ヨーロッパ、および東アジア) で実行されている eコマース サイトが示されています。</span><span class="sxs-lookup"><span data-stu-id="8f167-128">The diagram shows your e-commerce site running in three Azure regions: East US, North Europe, and East Asia.</span></span> <span data-ttu-id="8f167-129">それぞれの DNS 名に注目してください。</span><span class="sxs-lookup"><span data-stu-id="8f167-129">Notice the DNS name for each.</span></span> <span data-ttu-id="8f167-130">contoso.com ドメインの下で、地理的に最も近いサービスにユーザーを接続させるにはどうすればよいですか?</span><span class="sxs-lookup"><span data-stu-id="8f167-130">How can you connect users to the service that's closest geographically, but under the contoso.com domain?</span></span>

## <a name="use-traffic-manager-to-route-users-to-the-closest-endpoint"></a><span data-ttu-id="8f167-131">Traffic Manager を使用して最も近いエンドポイントにユーザーをルーティングする</span><span class="sxs-lookup"><span data-stu-id="8f167-131">Use Traffic Manager to route users to the closest endpoint</span></span>

:::row:::
  :::column:::
    <span data-ttu-id="8f167-132">![Azure Traffic Manager を表す指標](../media/4-sign-post.png) :::column-end:::: :::column span="3"::: 答えの 1 つが **Azure Traffic Manager** です。</span><span class="sxs-lookup"><span data-stu-id="8f167-132">![A sign post representing Azure Traffic Manager](../media/4-sign-post.png) :::column-end:::: :::column span="3"::: One answer is **Azure Traffic Manager**.</span></span> <span data-ttu-id="8f167-133">Traffic Manager は、ユーザーに最も近い DNS サーバーを使用して、ユーザー トラフィックを世界中に分散されたエンドポイントに送信します。</span><span class="sxs-lookup"><span data-stu-id="8f167-133">Traffic Manager uses the DNS server that's closest to the user to direct user traffic to a globally distributed endpoint.</span></span>
  :::column-end:::
:::row-end:::

<span data-ttu-id="8f167-134">次の図は、Traffic Manager のロールを示しています。</span><span class="sxs-lookup"><span data-stu-id="8f167-134">The following illustration shows the role of the Traffic Manager.</span></span>

![<span data-ttu-id="8f167-135">最も近いデータ センターにユーザー要求をルーティングしている Azure Traffic Manager を示す図。</span><span class="sxs-lookup"><span data-stu-id="8f167-135">An illustration showing Azure Traffic Manager routing a user request to the nearest data center.</span></span> ](../media/4-traffic-manager.png)

<span data-ttu-id="8f167-136">Traffic Manager では、クライアントとサーバー間を通過するトラフィックを認識することはありません。</span><span class="sxs-lookup"><span data-stu-id="8f167-136">Traffic Manager doesn't see the traffic that's passed between the client and server.</span></span> <span data-ttu-id="8f167-137">代わりに、クライアントの Web ブラウザーを優先エンドポイントに送信します。</span><span class="sxs-lookup"><span data-stu-id="8f167-137">Rather, it directs the client web browser to a preferred endpoint.</span></span> <span data-ttu-id="8f167-138">Traffic Manager は、待ち時間が最も短いエンドポイントなどに、いくつかの異なる方法でトラフィックをルーティングすることができます。</span><span class="sxs-lookup"><span data-stu-id="8f167-138">Traffic Manager can route traffic in a few different ways, such as to the endpoint with the lowest latency.</span></span>

<span data-ttu-id="8f167-139">ここには示されていませんが、このセットアップには、カリフォルニアで実行されているオンプレミスのデプロイも含めることができます。</span><span class="sxs-lookup"><span data-stu-id="8f167-139">Although not shown here, this setup could also include your on-premises deployment running in California.</span></span> <span data-ttu-id="8f167-140">Traffic Manager を自分のオンプレミスのネットワークに接続して、既存のデータ センターへの投資を維持することができます。</span><span class="sxs-lookup"><span data-stu-id="8f167-140">You can connect Traffic Manager to your own on-premises networks, enabling you to maintain your existing data center investments.</span></span> <span data-ttu-id="8f167-141">または、アプリケーションを完全にクラウドに移行することもできます。</span><span class="sxs-lookup"><span data-stu-id="8f167-141">Or you can move your application entirely to the cloud.</span></span> <span data-ttu-id="8f167-142">選ぶのはあなた自身です。</span><span class="sxs-lookup"><span data-stu-id="8f167-142">The choice is yours.</span></span>

## <a name="compare-load-balancer-to-traffic-manager"></a><span data-ttu-id="8f167-143">Load Balancer と Traffic Manager を比較する</span><span class="sxs-lookup"><span data-stu-id="8f167-143">Compare Load Balancer to Traffic Manager</span></span>

:::row:::
  :::column:::
    <span data-ttu-id="8f167-144">![拡大鏡](../media/4-magnifying-glass.png) :::column-end:::: :::column span="3"::: Azure Load Balancer は、サービスの可用性と回復性をより高めるため、同じリージョン内でトラフィックを分散させます。</span><span class="sxs-lookup"><span data-stu-id="8f167-144">![A magnifying glass](../media/4-magnifying-glass.png) :::column-end:::: :::column span="3"::: Azure Load Balancer distributes traffic within the same region to make your services more highly available and resilient.</span></span> <span data-ttu-id="8f167-145">Traffic Manager は、DNS レベルで動作し、優先エンドポイントにクライアントを送信します。</span><span class="sxs-lookup"><span data-stu-id="8f167-145">Traffic Manager works at the DNS level, and directs the client to a preferred endpoint.</span></span> <span data-ttu-id="8f167-146">このエンドポイントは、ユーザーに最も近いリージョンにすることができます。</span><span class="sxs-lookup"><span data-stu-id="8f167-146">This endpoint can be to the region that's closest to your user.</span></span>

<span data-ttu-id="8f167-147">Load Balancer と Traffic Manager はどちらもサービスの回復性を高めるのに役立ちますが、その方法は若干異なります。</span><span class="sxs-lookup"><span data-stu-id="8f167-147">Load Balancer and Traffic Manager both help make your services more resilient, but in slightly different ways.</span></span> <span data-ttu-id="8f167-148">Load Balancer では、応答していない VM を検出すると、プール内の別の VM にトラフィックを送信します。</span><span class="sxs-lookup"><span data-stu-id="8f167-148">When Load Balancer detects an unresponsive VM, it directs traffic to other VMs in the pool.</span></span> <span data-ttu-id="8f167-149">Traffic Manager では、エンドポイントの正常性を監視します。</span><span class="sxs-lookup"><span data-stu-id="8f167-149">Traffic Manager monitors the health of your endpoints.</span></span> <span data-ttu-id="8f167-150">これに対し、Traffic Manager が応答していないエンドポイントを検出すると、次に最も近い応答しているエンドポイントにトラフィックを送信します。</span><span class="sxs-lookup"><span data-stu-id="8f167-150">In contrast, when Traffic Manager finds an unresponsive endpoint, it directs traffic to the next closest endpoint that is responsive.</span></span>
  :::column-end:::
:::row-end:::

## <a name="summary"></a><span data-ttu-id="8f167-151">まとめ</span><span class="sxs-lookup"><span data-stu-id="8f167-151">Summary</span></span>

<span data-ttu-id="8f167-152">地理的な距離は、待ち時間に影響する最も大きな要因の 1 つです。</span><span class="sxs-lookup"><span data-stu-id="8f167-152">Geographic distance is one of the biggest factors that contributes to latency.</span></span> <span data-ttu-id="8f167-153">Traffic Manager を配置すると、サービスの正確なコピーを複数の地理的リージョンでホストすることができます。</span><span class="sxs-lookup"><span data-stu-id="8f167-153">With Traffic Manager in place, you can host exact copies of your service in multiple geographic regions.</span></span> <span data-ttu-id="8f167-154">これにより、米国、ヨーロッパ、およびアジアのユーザーすべてが、あなたの e コマース サイトの使用に対して良好なエクスペリエンスを持つことができます。</span><span class="sxs-lookup"><span data-stu-id="8f167-154">That way, users in the United States, Europe, and Asia will all have a good experience using your e-commerce site.</span></span>
