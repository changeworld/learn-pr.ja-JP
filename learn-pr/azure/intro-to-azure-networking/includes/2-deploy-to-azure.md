<span data-ttu-id="56cdb-101">大抵の場合、最初の手順は、クラウドに自分のオンプレミス構成を再作成することです。</span><span class="sxs-lookup"><span data-stu-id="56cdb-101">Your first step will likely be to recreate your on-premise configuration in the cloud.</span></span>

<span data-ttu-id="56cdb-102">この基本的な構成により、ネットワークがどのように構成され、ネットワーク トラフィックが Azure をどのように出入りしているかについての感覚をつかむことができます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-102">This basic configuration will give you a sense of how networks are configured and how network traffic moves in and out of Azure.</span></span>

## <a name="your-e-commerce-site-at-a-glance"></a><span data-ttu-id="56cdb-103">e コマース サイトの概要</span><span class="sxs-lookup"><span data-stu-id="56cdb-103">Your e-commerce site at a glance</span></span>

<span data-ttu-id="56cdb-104">[n 層アーキテクチャ](https://docs.microsoft.com/en-us/azure/architecture/guide/architecture-styles/n-tier)は、アプリケーションを 2 つ以上の論理層に分割します。</span><span class="sxs-lookup"><span data-stu-id="56cdb-104">An [n-tier architecture](https://docs.microsoft.com/en-us/azure/architecture/guide/architecture-styles/n-tier) divides an application into two or more logical tiers.</span></span> <span data-ttu-id="56cdb-105">アーキテクチャ上は、上の階層は下の階層からのサービスにアクセスすることができますが、下の階層が上の階層にアクセスすることはできません。</span><span class="sxs-lookup"><span data-stu-id="56cdb-105">Architecturally, higher tier can access services from a lower tier, but a lower tier should never access a higher tier.</span></span>

<span data-ttu-id="56cdb-106">階層は問題を切り離すのに役立ちます。再利用できるように設計するのが理想的です。</span><span class="sxs-lookup"><span data-stu-id="56cdb-106">Tiers help separate concerns and are ideally designed to be reusable.</span></span> <span data-ttu-id="56cdb-107">階層は個別に更新または置換することも、必要に応じて新しい階層を挿入することもできるため、階層型アーキテクチャを使用すると、メンテナンスも簡素化できます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-107">Using a tiered architecture also simplifies maintenance, tiers can be updated or replaced independently, and new tiers can be inserted if needed.</span></span>

<span data-ttu-id="56cdb-108">_3 層_とは、3 つの階層がある n 層アプリケーションを指します。</span><span class="sxs-lookup"><span data-stu-id="56cdb-108">_Three-tier_ refers to an n-tier application that has three tiers.</span></span> <span data-ttu-id="56cdb-109">あなたの e コマース Web アプリケーションは、この 3 層アーキテクチャに沿っています。</span><span class="sxs-lookup"><span data-stu-id="56cdb-109">Your e-commerce web application follows this three-tier architecture:</span></span>

* <span data-ttu-id="56cdb-110">**Web 層**: ブラウザーを介してユーザーに Web インターフェイスを提供</span><span class="sxs-lookup"><span data-stu-id="56cdb-110">The **web tier** provides the web interface to your users through a browser</span></span>
* <span data-ttu-id="56cdb-111">**アプリケーション層**: ビジネス ロジックを実行</span><span class="sxs-lookup"><span data-stu-id="56cdb-111">The **application tier** runs business logic</span></span>
* <span data-ttu-id="56cdb-112">**データ層**: データベースと製品情報と顧客の注文を保持するその他のストレージが含まれる</span><span class="sxs-lookup"><span data-stu-id="56cdb-112">The **data tier** includes databases and other storage that hold product information and customer orders</span></span>

<span data-ttu-id="56cdb-113">ダイアグラムを次に示します。</span><span class="sxs-lookup"><span data-stu-id="56cdb-113">Here's a diagram.</span></span> <span data-ttu-id="56cdb-114">ユーザーからデータ層へのフローをトレースします。</span><span class="sxs-lookup"><span data-stu-id="56cdb-114">Trace the flow from the user to the data tier.</span></span>

![基本的な 3 層 Web アプリ](../media-draft/three-tier.png)

<span data-ttu-id="56cdb-116">ユーザーが発注ボタンをクリックすると、その要求がユーザーの住所と支払い情報と共に Web 層に送信されます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-116">When the user clicks the button to place the order, the request is sent to the web tier, along with the user's address and payment information.</span></span> <span data-ttu-id="56cdb-117">Web 層は、この情報を支払い情報の検証と在庫チェックが行われるアプリケーション層に渡します。</span><span class="sxs-lookup"><span data-stu-id="56cdb-117">The web tier passes this information to the application tier, which would validate payment information and check inventory.</span></span> <span data-ttu-id="56cdb-118">アプリケーション層では、後で受注処理のために取得されるように、注文をデータ層に格納することができます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-118">The application tier might then store the order in the data tier to be picked up later for fulfillment.</span></span>

## <a name="your-e-commerce-site-running-on-azure"></a><span data-ttu-id="56cdb-119">Azure で実行されているあなたの e コマース サイト</span><span class="sxs-lookup"><span data-stu-id="56cdb-119">Your e-commerce site running on Azure</span></span>

<span data-ttu-id="56cdb-120">Azure では、コードをホストする完全に事前構成された環境から、自分で構成、カスタマイズ、管理を行う仮想マシンまで、Web アプリケーションをホストするためのさまざまな方法を提供しています。</span><span class="sxs-lookup"><span data-stu-id="56cdb-120">Azure provides many different ways to host your web applications, from fully pre-configured environments that host your code to virtual machines that you configure, customize and manage.</span></span>

<span data-ttu-id="56cdb-121">たとえば、あなたは自分の e コマース サイトを仮想マシンで実行することを選択したとします。</span><span class="sxs-lookup"><span data-stu-id="56cdb-121">Let's say you choose to run your e-commerce site on virtual machines.</span></span> <span data-ttu-id="56cdb-122">Azure で実行されているテスト環境は、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="56cdb-122">Here's what that might look like in your test environment running on Azure.</span></span>

![Azure で実行されている基本的な 3 層 Web アプリ](../media-draft/test-deployment.png)

<span data-ttu-id="56cdb-124">これを分解してみましょう。</span><span class="sxs-lookup"><span data-stu-id="56cdb-124">Let's break this down.</span></span>

## <a name="what-is-an-azure-region"></a><span data-ttu-id="56cdb-125">Azure リージョンとは何ですか?</span><span class="sxs-lookup"><span data-stu-id="56cdb-125">What is an Azure region?</span></span>

<span data-ttu-id="56cdb-126">_リージョン_とは、特定の地理的な場所内にある Azure データ センターのことです。</span><span class="sxs-lookup"><span data-stu-id="56cdb-126">A _region_ is an Azure data center within a specific geographic location.</span></span> <span data-ttu-id="56cdb-127">米国東部、米国西部、北ヨーロッパなどがリージョンの例です。</span><span class="sxs-lookup"><span data-stu-id="56cdb-127">East US, West US, and North Europe are examples of regions.</span></span> <span data-ttu-id="56cdb-128">アプリケーションが米国東部リージョンで実行されていることがわかります。</span><span class="sxs-lookup"><span data-stu-id="56cdb-128">You see that the application is running in the East US region.</span></span>

## <a name="what-is-a-virtual-network"></a><span data-ttu-id="56cdb-129">仮想ネットワークとは何ですか?</span><span class="sxs-lookup"><span data-stu-id="56cdb-129">What is a virtual network?</span></span>

<span data-ttu-id="56cdb-130">_仮想ネットワーク_とは、Azure 上で論理的に分離されたネットワークのことです。</span><span class="sxs-lookup"><span data-stu-id="56cdb-130">A _virtual network_ is a logically isolated network on Azure.</span></span> <span data-ttu-id="56cdb-131">Hyper-V、VMware、または他のパブリック クラウドでネットワークを設定したことがあれば、Azure 仮想ネットワークにすぐに慣れることができます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-131">Azure virtual networks will be familiar to you if you’ve set up networks on Hyper-V, VMware, or even on other public clouds.</span></span>

<span data-ttu-id="56cdb-132">Web 層、アプリケーション層、およびデータ層にはそれぞれ 1 つの VM があります。</span><span class="sxs-lookup"><span data-stu-id="56cdb-132">The web, application, and data tiers each have a single VM.</span></span> <span data-ttu-id="56cdb-133">各 VM は仮想ネットワークに属しています。</span><span class="sxs-lookup"><span data-stu-id="56cdb-133">Each VM belongs to a virtual network.</span></span>

<span data-ttu-id="56cdb-134">ユーザーは Web 層と直接やり取りするため、Web 層の VM にはパブリック IP アドレスがあります。</span><span class="sxs-lookup"><span data-stu-id="56cdb-134">Users interact with the web tier directly, so that VM has a public IP address.</span></span> <span data-ttu-id="56cdb-135">ユーザーがアプリケーション層とデータ層とやり取りすることはありません。</span><span class="sxs-lookup"><span data-stu-id="56cdb-135">Users don't interact with the application or data tiers.</span></span> <span data-ttu-id="56cdb-136">そのため、これらの VM にはそれぞれプライベート IP アドレスがあります。</span><span class="sxs-lookup"><span data-stu-id="56cdb-136">So these VMs each have a private IP address.</span></span>

<span data-ttu-id="56cdb-137">物理ハードウェアは、Azure データ センターで管理されます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-137">Azure data centers manage the physical hardware for you.</span></span> <span data-ttu-id="56cdb-138">仮想ネットワークは、ソフトウェアを通じて構成します。これにより、仮想ネットワークを独自のネットワークと同じように扱うことができます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-138">You configure virtual networks through software, which enables you to treat a virtual network just like your own network.</span></span> <span data-ttu-id="56cdb-139">たとえば、ネットワークでの IP アドレスの割り当てをより細かく制御するため、仮想ネットワークをサブネットに分割することができます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-139">For example, you can divide a virtual network into subnets to better control how the network assigns IP addresses.</span></span> <span data-ttu-id="56cdb-140">また、仮想ネットワークが到達できる他のネットワークを選択することもできます。それがパブリック インターネットであっても、プライベート IP アドレス空間内の他のネットワークであってもかまいません。</span><span class="sxs-lookup"><span data-stu-id="56cdb-140">You also choose which other networks your virtual network can reach; whether that’s the public Internet or other networks in the private IP address space.</span></span>

### <a name="whats-a-network-security-group"></a><span data-ttu-id="56cdb-141">ネットワーク セキュリティ グループとは何ですか?</span><span class="sxs-lookup"><span data-stu-id="56cdb-141">What's a network security group?</span></span>

<span data-ttu-id="56cdb-142">_ネットワーク セキュリティ グループ_ (NSG) は、Azure リソースへの着信ネットワーク トラフィックを許可または拒否します。</span><span class="sxs-lookup"><span data-stu-id="56cdb-142">A _network security group_, or NSG, allows or denies inbound network traffic to your Azure resources.</span></span> <span data-ttu-id="56cdb-143">ネットワーク セキュリティ グループを、自分のネットワークのクラウド レベルのファイアウォールとして考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="56cdb-143">Think of a network security group as a cloud-level firewall for your network.</span></span>

<span data-ttu-id="56cdb-144">たとえば、Web 層の VM は、ポート 22 (SSH) と 80 (HTTP) で着信トラフィックを許可していることに注目してください。</span><span class="sxs-lookup"><span data-stu-id="56cdb-144">For example, notice that the VM in the web tier allows inbound traffic on ports 22 (SSH) and 80 (HTTP).</span></span> <span data-ttu-id="56cdb-145">ここでは、各ネットワーク セキュリティ グループがすべてのソースからのトラフィックを許可しています。</span><span class="sxs-lookup"><span data-stu-id="56cdb-145">Each network security group here allows traffic from all sources.</span></span> <span data-ttu-id="56cdb-146">信頼できる IP アドレスなど、既知のソースからのみトラフィックを受け入れるようにネットワーク セキュリティ グループを構成することができます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-146">You can configure a network security group to accept traffic only from known sources, such as IP addresses that you trust.</span></span>

> [!NOTE]
> <span data-ttu-id="56cdb-147">ポート 22 では、SSH 経由で Linux システムに直接接続することができます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-147">Port 22 enables you to connect directly to Linux systems over SSH.</span></span> <span data-ttu-id="56cdb-148">ここでは、学習目的のために、ポート 22 を開いています。</span><span class="sxs-lookup"><span data-stu-id="56cdb-148">Here we show port 22 open for learning purposes.</span></span> <span data-ttu-id="56cdb-149">実際には、セキュリティを強化するために、仮想ネットワークに VPN アクセスを構成します。</span><span class="sxs-lookup"><span data-stu-id="56cdb-149">In practice, you might configure VPN access to your virtual network to increase security.</span></span>

## <a name="summary"></a><span data-ttu-id="56cdb-150">まとめ</span><span class="sxs-lookup"><span data-stu-id="56cdb-150">Summary</span></span>

<span data-ttu-id="56cdb-151">あなたの 3 層アプリケーションは現在、米国東部リージョンの Azure で実行されています。</span><span class="sxs-lookup"><span data-stu-id="56cdb-151">Your three-tier application is now running on Azure in the East US region.</span></span> <span data-ttu-id="56cdb-152">_リージョン_とは、特定の地理的な場所内にある Azure データ センターのことです。</span><span class="sxs-lookup"><span data-stu-id="56cdb-152">A _region_ is an Azure data center within a specific geographic location.</span></span>

<span data-ttu-id="56cdb-153">各階層は、下の階層からのサービスにのみアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-153">Each tier can access services only from a lower tier.</span></span> <span data-ttu-id="56cdb-154">Web 層で実行されている VM は、インターネットからトラフィックを受信するため、パブリック IP アドレスがあります。</span><span class="sxs-lookup"><span data-stu-id="56cdb-154">The VM running in the web tier has a public IP address because it receives traffic from the Internet.</span></span> <span data-ttu-id="56cdb-155">それより下の階層 (アプリケーション層とデータ層) の VM は、インターネット経由で直接通信することはないため、それぞれプライベート IP アドレスを持っています。</span><span class="sxs-lookup"><span data-stu-id="56cdb-155">The VMs in the lower tiers,are the application and data tiers and each have private IP addresses because they don't communicate directly over the internet.</span></span>

<span data-ttu-id="56cdb-156">_仮想ネットワーク_を使用すると、関連するシステムをグループ化したり分離したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="56cdb-156">_Virtual networks_ enable you to group and isolate related systems.</span></span> <span data-ttu-id="56cdb-157">_ネットワーク セキュリティ グループ_を定義して、仮想ネットワーク内を流れることができるトラフィックを制御します。</span><span class="sxs-lookup"><span data-stu-id="56cdb-157">You define _network security groups_ to control what traffic can flow through a virtual network.</span></span>

<span data-ttu-id="56cdb-158">ここで説明したこの構成は、出発点としては有効ですが、</span><span class="sxs-lookup"><span data-stu-id="56cdb-158">This configuration you saw here is a good start.</span></span> <span data-ttu-id="56cdb-159">あなたの e コマース サイトをクラウドで運用環境にデプロイするときに、オンプレミス デプロイで経験したのと同じ問題にぶつかる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="56cdb-159">But when you deploy your e-commerce site to production in the cloud, you'll likely run into the same problems as you did in your on-premise deployment.</span></span>
