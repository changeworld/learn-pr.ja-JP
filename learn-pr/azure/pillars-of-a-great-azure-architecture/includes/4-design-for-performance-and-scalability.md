自分の会社の驚くべきがんの治療が、第一面のニュースになっているところを想像してみてください。 これはすばらしい通過点であり、間違いなく会社の web サイトに大量のアクセスが流れるでしょう。 その Web サイトは、このアクセスの増加に対応できますか。サイトの反応の低下や停止を引き起こすでしょうか。

ここでは、スケーリングと最適化の原則を使用して優れたアプリケーション パフォーマンスを確保する基本原理を見ていきます。

## <a name="what-is-scaling-and-performance-optimization"></a>スケーリングとパフォーマンスの最適化とは何ですか。

スケーリングとパフォーマンスの最適化とは、利用可能なリソースと受信要求を持つアプリケーションを適合させることです。 パフォーマンスの最適化には、リソースをスケーリングすること、潜在的なボトルネックを識別して最適化すること、最高のパフォーマンスを出すアプリケーション コードを最適化することが含まれています。

### <a name="scaling"></a>スケーリング

コンピューティング リソースは、2 つの方向にスケーリングできます。

* スケーリング*アップ*は他のリソースを 1 つのインスタンスに追加する操作です。
* スケーリング*アウト*とはインスタンスの追加です。

![スケール アップとスケール アウト](../media-draft/scale-up-scale-out.png)

スケール アップでは CPU やメモリなどの他のリソースを 1 つのインスタンスに追加します。 このインスタンスは、仮想マシンまたは PaaS サービスである場合があります。 インスタンスへより多くの容量を追加する機能により、アプリケーションで使用できるリソースが向上しますが、制限があります。 仮想マシンは実行中のホストの容量に限られ、ホスト自体に物理的な制限があります。 最終的には、インスタンスをスケール アップを行う時に、これらの制限にぶつかり、インスタンスにさらにリソースを追加する機能が限られてしまいます。

スケール アウトには、サービスに追加のインスタンスを加えることが関係しています。 仮想マシンや PaaS サービスともなり得ますが、1 つのインスタンスをより強力にすることで多くの容量を追加する代わりに、インスタンスの合計数を増やすことで容量を増加させます。 スケール アウトのメリットは、アーキテクチャに追加する複数のマシンがあれば、考える限り永久にスケール アウトが可能です。 スケール アウトには、何らかの種類の負荷分散が必要です。 利用可能なサーバー全体で負荷バランス分散リクエストの形を取ることもありますが、リクエストを送信するアクティブなサーバーを識別するためのサービス検出メカニズムであることも考えられます。

どちらの場合も、画像にコストの最適化を持ち込み、リソースを削減できます。

### <a name="performance-optimization"></a>パフォーマンスの最適化

パフォーマンスを最適化するときには、ネットワークとストレージがパフォーマンスを許容できるかを確かめてください。 両方ともアプリケーションの応答時間に影響を与えかねません。 お使いのアーキテクチャに適切なネットワークとストレージテクノロジー選択すると、消費者に最高のエクスペリエンスを提供することができます。

パフォーマンスの最適化には、アプリケーション自体がどのように実行されているかを理解することも含まれます。 依存システム内でのエラー、不具合のあるコード、ボトルネックはすべて、アプリケーション パフォーマンス管理ツールで明らかになります。 たいていの場合、これらの問題はエンドユーザーや開発者、管理者にはわからなかったり、難読化されていたりしていますが、アプリケーションの全体的なパフォーマンスには悪影響があります。

## <a name="scalability-and-performance-best-practices"></a>拡張性とパフォーマンスのベスト プラクティス

アプリケーションのすべての階層を確認して、アプリケーションでのパフォーマンスボトルネックを識別して修復します。 お使いのアプリケーションで、または、データベースにインデックスを追加するプロセスでも、これらのボトルネックが低いメモリ処理を行っている可能性があります。 反復的なプロセスとなり、１つのボトルネックを解決すると、今まで気が付かなかった別のボトルネックを見つけてしまうことがあります。

アーキテクチャでキャッシュを使用すると、パフォーマンスを向上させることができます。 キャッシングは、頻繁に使用されるストアのデータやアセット (web ページ、画像)をより速く回復するために保存するメカニズムです。 アプリケーションのさまざまなレイヤーで、キャッシュを使用できます。 アプリケーション サーバーとデータベース間でキャッシュを使用することができ、データの取得時間を短縮することができます。 静的なコンテンツをユーザーの近くに配置して、エンドユーザーがweb ページに戻るのにかかる時間を短縮し、エンドユーザーと web サーバー間でキャッシュを使用することもできます。 これには、他のリクエストへのパフォーマンスを向上して、データベースまたは web サーバーからのリクエストをオフロードするという二次的な影響もあります。

複数のタスクを実行する 1 つの大規模なアプリケーションとしてビルドされたレガシー アプリケーションを表示することは珍しくありません。 このアーキテクチャは、スケール アップのみに制限されていることが多く、スケール アウトに対応していません。このようなタイプのアーキテクチャでは、アプリケーションの最新化し、サービスを他から分離します。 分離とは、アプリケーションの主要な機能を別のアプリケーションに切り離す操作です。 分離されると、必要に応じて各サービスがそれぞれ個別にスケール アウトまたはスケールインされることができます、

分離と合わせて、サービス間でのメッセージング レイヤーの追加がパフォーマンスに役立つことがあります。 メッセージング レイヤーを追加すると、アプリケーションがサポートできない場合でもリクエストがエラーなく継続できるようサービス間のリクエストへのバッファーが作成されます。 リクエストを通じてアプリケーションが動作するので、受信した順序で解消されます。

アーキテクチャによっては、さまざまなアプリケーションのパフォーマンスを最適化するために見るべき幅広い階層があります。 アプリケーションのパフォーマンスを評価し、最適に実行できていない部分を見つける必要があります。
