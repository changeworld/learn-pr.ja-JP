このユニットでは、Azure portal を使用して Azure Web アプリを作成します。

## <a name="sign-in-to-the-azure-portal"></a>Azure portal にサインインする

まず、Azure portal にサインインします。

ブラウザーを開いて [Azure portal](https://portal.azure.com/?azure-portal=true) に移動します。

## <a name="create-an-azure-web-app"></a>Azure Web アプリを作成する

Azure portal にログインできたので、テンプレートを使用して Azure Web アプリを作成しましょう。

1. 左側のナビゲーションの上部にある **[リソースの作成]** リンクをクリックします。 Azure 上で作成するすべてのものがリソースです。

1. ポータルの表示が **[Marketplace]** ブレードに変わります。 ここから、作成するリソースを検索したり、ユーザーが Azure portal で作成した人気のあるリソースの 1 つを選択したりすることができます。

1. **[Web]** > **[Web アプリ]** リソースをクリックします。 ポータルの表示が **[新しい Web アプリを作成する]** ブレードにリダイレクトされます。

1. 新しい Web アプリを作成すると、Azure portal では自動的にアプリを作成するために情報が要求されます。 このセクションでは、次の基本情報を提供する必要があります。

    1. **アプリ名**: クライアントは、アプリケーションを `BestBike` という名前にする必要があります。 このフィールドにその名前を入力します。 この値は、Azure でホストされている他のすべての Web アプリの間でグローバルに一意である必要があり、他の Web アプリがそのアプリ名を使用していないことが確認されます。 名前を確実に一意にするには、一意のバリアントが見つかるまで、アプリ名にいくつかの数字を追加します。

    2. **サブスクリプション**: このフィールドでは、ドロップダウン リストからアクティブな Azure サブスクリプションを選択する必要があります。

    3. **OS**: このフィールドでは、新しい Web アプリをホストするために、**Windows** または **Linux** のいずれかを使用することを決定する必要があります。 この設定は、以下で選択または作成する App Service プランに直接影響します。 ご記憶のとおり、App Service プランでは仮想マシンを使用します。これは、ご自分のアプリケーションを実行するマシン上で必要なすべてのリソース (CPU、RAM など) を含むオペレーティング システムです。 この場合、クライアントは Windows マシンで Web アプリをホストすることを選びます。 そのため、**[Windows]** を選択します。

    4. **Application Insights**: Azure Application Insights は、ご自分の Web app と Web サービスでの品質の問題を検出および診断するのに役立ち、ユーザーがそれを使って実際に行う内容を解釈するのに役立ちます。 クライアントの要件の 1 つは、クライアントの Web サイトからのトラフィックに関する分析情報レポートを表示し、トラフィックが多いときと少ないときの傾向を調べる機能です。 ここでは、**[オン]** オプションを選択して、この Web アプリに対して Application Insights を有効にします。 **[オン]** オプションを選択すると、Application Insights データを保存する場所またはリージョンを選択する必要もあります。 Application Insights は、限られた数のリージョンでのみ使用できることに注意してください。 このデモでは、**[Application Insights の場所]** フィールドで **[米国東部]** リージョンを選択します。

## <a name="create-a-new-resource-group"></a>新しいリソース グループを作成する

Azure Web アプリは、リソース グループの一部である必要があります。 リソース グループを作成して、任意の関連するリソースをグループ化しましょう。

**[新規作成]** オプション (既定で選択済み) を選択します。 選択したアプリ名に基づいて、一意のリソース グループ名が自動的に生成されます。 自由にリソース グループ名を変更するか、Azure が生成した名前をそのまま保持するができます。 ここでは、Azure によって生成された名前を保持します。

## <a name="create-an-app-service-plan"></a>App Service プランを作成する

このフィールドでは、ご自分のアプリケーションを実行する App Service プランを選択する必要があります。 既定では、お客様が以前に作成した最新の App Service プランがポータルで選択されます。 **[App Service プラン/場所]** フィールドをクリックして、**[App Service プラン]** ブレードに移動します。

**[新規作成]** リンクをクリックして、**[新しい App Service プラン]** ブレードに移動します。 ポータルでは、新しい App Service プランを作成するために、ユーザーから一部の情報を要求します。

1. **App Service プラン**: このフィールドには、新しい App Service プランのグローバルに一意の名前を指定します。 このアプリの場合、上記で選択した Web アプリ名を入力し、このリソースを他のリソースと簡単に区別できるように、`-app-service-plan` というサフィックスを追加します。

2. **場所**: このフィールドでは、この App Service プランが存在するリージョンを選択する必要があります。 つまり、App Service プランでご自分のアプリケーションの実行に必要な仮想マシンを設定する、地理的な場所を選択します。 この場合は、一覧で任意の操作を選択できます。 クライアントは、そのクライアントの多くが帰属している、東海岸に近い場所のホスティング サーバーを選んでいます。 そのため、値として **[米国東部]** を選択します。

3. **価格レベル**: このフィールドでは、ご自分のアプリケーションをホストする仮想マシンのサイズを選択する必要があります。 **>** 記号をクリックし、**[価格レベル]** ブレードに移動します。

    ここでは、多くのオプションから選択できます。 このポータルでは、必要なワークロードのレベルによってそれらのオプションがグループ化されます。 利用できる 3 つのワークロード カテゴリは、Dev/Test、Production、Isolated です。 Azure でホストするアプリケーションの要件に応じて、関連するワークロード カテゴリを選択します。 **BestBike** アプリケーションがビルドされ、調整中であるため、自分に適した最小ワークロード カテゴリから開始します。 クライアントの要件の 1 つは、アプリケーションからの任意の新しい変更をライブでテストする機能でした。 次のユニットでは、この要件を実現するために、**デプロイ スロット**を追加する必要があります。 デプロイ スロットは、最小価格レベルの **S1** から利用できます。 そのため、**[運用ワークロード]** カテゴリの下で **[S1]** の価格レベルを選択します。 次に、**[適用]** をクリックして、上で選択した価格レベルを確認します。

    > [!NOTE]
    > このモジュールから、**[Production]** と **[Isolated]** ワークロード カテゴリのみで **デプロイ スロット**をご自分の Web アプリに追加できることが通知されます。

    **[新しい App Service プラン]** ブレードに戻ります。

    ![設定にこの演習のサンプル値を使用した [新しい App Service プラン] ブレードを示すスクリーンショット。](../media/3-new-app-service-plan.PNG)

4. **[OK]** をクリックして、新しい App Service プランを使用します。

    ポータルの表示がメインの **[Web アプリの作成]** ブレードに戻ります。

    ![Web アプリ リソースの検索の進行状況が強調表示された、Azure の新しいリソース ブレードを示すスクリーンショット。](../media/3-new-web-app.png)

5. **[作成]** をクリックして、Web アプリの作成プロセスを開始します。

    > [!NOTE]
    > Web アプリが作成され、使用できる状態になるまで数秒かかることがあります。

ダッシュボード ページにリダイレクトされ、Web アプリが作成されると通知されます。

アプリの準備ができたら、Azure portal で新しいアプリに移動します。

1. 左側のナビゲーションで **[すべてのリソース]** メニューをクリックします。 **[すべてのリソース]** ブレードに、Azure portal で作成されたすべてのリソースが一覧表示されます。

2. 先ほど作成された BestBike App Service をクリックします。

    > [!NOTE]
    > "BestBike" という名前でアプリを検索すると、新しい Web アプリ用に作成された Application Insights リソースと App Service プラン リソースも見つかる場合があります。 必ず、種類が **App Service** であるリソースをクリックしてください。

    ![新しく作成された BestBike123 App Service が強調表示された、[すべてのリソース] ブレード内の検索結果の例を示すスクリーンショット。](../media/3-web-app.PNG)

**[概要]** セクションが選択された、Web アプリ サービスのホーム ページが開きます。

![[概要] セクションの URL リンクが強調表示された BestBike App Service ブレードを示すスクリーンショット。](../media/3-web-app-home.PNG)

新しい Web アプリの既定のコンテンツをプレビューするには、Azure portal の右上にある **URL** をクリックします。 プレースホルダー Web ページが表示された場合は、Web アプリが正常に作成されたことを示しています。
