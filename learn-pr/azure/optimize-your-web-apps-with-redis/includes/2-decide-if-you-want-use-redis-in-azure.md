<span data-ttu-id="628c4-101">あなたのスポーツ Web サイトの背後にはデータベースがあり、クエリを実行することでデータが返されます。</span><span class="sxs-lookup"><span data-stu-id="628c4-101">Behind your sports website is a database, which returns data by executing queries.</span></span> <span data-ttu-id="628c4-102">しかし、特に大規模なスポーツ イベント中など、負荷が高くなると、パフォーマンスが低下します。</span><span class="sxs-lookup"><span data-stu-id="628c4-102">However, performance slows down when the load is high, particularly during large sporting events.</span></span> <span data-ttu-id="628c4-103">ホスト環境では、リソース使用量の増加はコストの増加につながります。</span><span class="sxs-lookup"><span data-stu-id="628c4-103">In hosted environments, increased resource usage translates into higher costs.</span></span> <span data-ttu-id="628c4-104">データをキャッシュすることで、Web サイトが適切かつ経済的に実行されるようになります。</span><span class="sxs-lookup"><span data-stu-id="628c4-104">Caching data ensures your website will perform well and run economically.</span></span>

## <a name="what-is-caching"></a><span data-ttu-id="628c4-105">キャッシュとは</span><span class="sxs-lookup"><span data-stu-id="628c4-105">What is caching?</span></span>

<span data-ttu-id="628c4-106">キャッシュは、データを使用するアプリケーションに非常に近いメモリに、アクセス頻度の高いデータを格納する機能です。</span><span class="sxs-lookup"><span data-stu-id="628c4-106">Caching is the act of storing frequently-accessed data in memory that is very close to the application that consumes the data.</span></span> <span data-ttu-id="628c4-107">キャッシュを使用すると、パフォーマンスが向上し、サーバーの負荷が軽減されます。</span><span class="sxs-lookup"><span data-stu-id="628c4-107">Caching is used to increase performance and reduce the load on your servers.</span></span> <span data-ttu-id="628c4-108">Redis を使用して、メモリ内キャッシュを作成します。メモリ内キャッシュにより、待機時間を短縮することができ、パフォーマンスが向上する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="628c4-108">We use Redis to create an in-memory cache that can provide excellent latency and potentially improve performance.</span></span>

## <a name="what-is-a-redis-cache"></a><span data-ttu-id="628c4-109">Redis Cache とは</span><span class="sxs-lookup"><span data-stu-id="628c4-109">What is a Redis cache?</span></span>

<span data-ttu-id="628c4-110">Redis (**RE**mote **DI**ctionary **S**erver) Cache は、オープン ソースのメモリ内キー/値ペア ストアです。</span><span class="sxs-lookup"><span data-stu-id="628c4-110">Redis (**RE**mote **DI**ctionary **S**erver) cache is an open-source, in-memory key value pair store.</span></span> <span data-ttu-id="628c4-111">Redis Cache は高速であり、文字列、ハッシュ、セットなどの一般的なデータ型を格納および操作できるため、一般に普及しています。</span><span class="sxs-lookup"><span data-stu-id="628c4-111">It's popular because it's fast and can store and manipulate common data types such as strings, hashes, and sets.</span></span> <span data-ttu-id="628c4-112">また、Python、C、C++、C#、Java、JavaScript などの複数の言語をサポートしているので、開発者フレンドリと見なされています。</span><span class="sxs-lookup"><span data-stu-id="628c4-112">It's also considered developer friendly as it supports multiple languages such as Python, C, C++, C#, Java, and JavaScript among others.</span></span>

## <a name="what-is-azure-redis-cache"></a><span data-ttu-id="628c4-113">Azure Redis Cache とは</span><span class="sxs-lookup"><span data-stu-id="628c4-113">What is Azure Redis Cache?</span></span>

<span data-ttu-id="628c4-114">Microsoft Azure Redis Cache は、広く支持されているオープン ソースの Redis キャッシュがベースとなっています。</span><span class="sxs-lookup"><span data-stu-id="628c4-114">Microsoft Azure Redis Cache is based on the popular open-source Redis cache.</span></span> <span data-ttu-id="628c4-115">マイクロソフトによって管理されている、セキュリティで保護された専用の Redis キャッシュにアクセスすることができます。</span><span class="sxs-lookup"><span data-stu-id="628c4-115">It gives you access to a secure, dedicated Redis cache, managed by Microsoft.</span></span> <span data-ttu-id="628c4-116">Azure Redis Cache を使用して作成されたキャッシュには、Microsoft Azure 内のあらゆるアプリケーションからアクセスすることができます。</span><span class="sxs-lookup"><span data-stu-id="628c4-116">A cache created using Azure Redis Cache is accessible from any application within Microsoft Azure.</span></span> <span data-ttu-id="628c4-117">Azure Redis Cache は通常、バックエンドのデータストアに大きく依存するシステムのパフォーマンスを向上させるために使用されます。</span><span class="sxs-lookup"><span data-stu-id="628c4-117">Azure Redis Cache is typically used to improve the performance of systems that rely heavily on back-end data stores.</span></span>

<span data-ttu-id="628c4-118">キャッシュされたデータは、データベースによってディスクから読み込まれるのではなく、Redis キャッシュを実行している Azure サーバーのメモリ内に配置されます。</span><span class="sxs-lookup"><span data-stu-id="628c4-118">Your cached data is located in-memory on an Azure server running the Redis cache as opposed to being loaded from disk by a database.</span></span> <span data-ttu-id="628c4-119">キャッシュには高い拡張性もあります。</span><span class="sxs-lookup"><span data-stu-id="628c4-119">Your cache is also highly scalable.</span></span> <span data-ttu-id="628c4-120">サイズと価格レベルはいつでも変更できます。</span><span class="sxs-lookup"><span data-stu-id="628c4-120">You can alter the size and pricing tier at any time.</span></span>

## <a name="what-type-of-data-can-be-stored-in-the-cache"></a><span data-ttu-id="628c4-121">キャッシュに格納できるデータ型</span><span class="sxs-lookup"><span data-stu-id="628c4-121">What type of data can be stored in the cache?</span></span>

<span data-ttu-id="628c4-122">Redis では、"_バイナリ セーフな_" 文字列を中心としてさまざまなデータ型がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="628c4-122">Redis supports a variety of data types all oriented around _binary safe_ strings.</span></span> <span data-ttu-id="628c4-123">つまり、"i-love-rocky-road" のような文字列から画像ファイルの内容まで、値に任意のバイナリ シーケンスを使用できます。</span><span class="sxs-lookup"><span data-stu-id="628c4-123">This means that you can use any binary sequence for a value, from a string like "i-love-rocky-road" to the contents of an image file.</span></span> <span data-ttu-id="628c4-124">空の文字列も有効な値です。</span><span class="sxs-lookup"><span data-stu-id="628c4-124">An empty string is also a valid value.</span></span>

- <span data-ttu-id="628c4-125">バイナリ セーフな文字列 (最も一般的)</span><span class="sxs-lookup"><span data-stu-id="628c4-125">Binary-safe strings (most common)</span></span>
- <span data-ttu-id="628c4-126">文字列のリスト</span><span class="sxs-lookup"><span data-stu-id="628c4-126">Lists of strings</span></span>
- <span data-ttu-id="628c4-127">順序付けられていない文字列セット</span><span class="sxs-lookup"><span data-stu-id="628c4-127">Unordered sets of strings</span></span>
- <span data-ttu-id="628c4-128">ハッシュ</span><span class="sxs-lookup"><span data-stu-id="628c4-128">Hashes</span></span>
- <span data-ttu-id="628c4-129">並べ替えられた文字列セット</span><span class="sxs-lookup"><span data-stu-id="628c4-129">Sorted sets of strings</span></span>
- <span data-ttu-id="628c4-130">文字列のマップ</span><span class="sxs-lookup"><span data-stu-id="628c4-130">Maps of strings</span></span>

<span data-ttu-id="628c4-131">各データ値は、キャッシュから値を検索する際に使用できる_キー_に関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="628c4-131">Each data value is associated to a _key_ which can be used to lookup the value from the cache.</span></span> <span data-ttu-id="628c4-132">値が小さいほど (100 K 以下) Redis のパフォーマンスが向上するため、大きなデータは複数のキーに分割することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="628c4-132">Redis works best with smaller values (100k or less), so consider chopping up bigger data into multiple keys.</span></span> <span data-ttu-id="628c4-133">大きな値 (最大 500 MB) を格納することは可能ですが、ネットワーク待ち時間が増加します。また、キャッシュが古い値を期限切れにするように構成されていない場合、キャッシュとメモリ不足の問題が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="628c4-133">Storing larger values is possible (up to 500 MB), but increases network latency and can cause caching and out-of-memory issues if the cache isn't configured to expire old values.</span></span>

## <a name="what-is-a-redis-key"></a><span data-ttu-id="628c4-134">Redis キーとは</span><span class="sxs-lookup"><span data-stu-id="628c4-134">What is a Redis key?</span></span>
<span data-ttu-id="628c4-135">Redis キーもバイナリ セーフな文字列です。</span><span class="sxs-lookup"><span data-stu-id="628c4-135">Redis keys are also binary safe strings.</span></span> <span data-ttu-id="628c4-136">キーの選択に関するガイドラインを次に示します。</span><span class="sxs-lookup"><span data-stu-id="628c4-136">Here are some guidelines for choosing keys:</span></span>

- <span data-ttu-id="628c4-137">長いキーは避けます。</span><span class="sxs-lookup"><span data-stu-id="628c4-137">Avoid long keys.</span></span> <span data-ttu-id="628c4-138">長いキーはバイト単位で比較する必要があるため、メモリの消費量が増え、必要な検索時間も長くなります。</span><span class="sxs-lookup"><span data-stu-id="628c4-138">They take up more memory and require longer lookup times because they have to be compared byte-by-byte.</span></span> <span data-ttu-id="628c4-139">バイナリ BLOB をキーとして使用する場合は、一意のハッシュを生成し、それをキーとして代わりに使用します。</span><span class="sxs-lookup"><span data-stu-id="628c4-139">If you want to use a binary blob as the key, generate a unique hash and use that as the key instead.</span></span> <span data-ttu-id="628c4-140">キーの最大サイズは 512 MB ですが、このサイズのキーを_使用しないでください_。</span><span class="sxs-lookup"><span data-stu-id="628c4-140">The maximum size of a key is 512 MB, but you should _never_ use a key that size.</span></span>
- <span data-ttu-id="628c4-141">データを識別できるキーを使用します。</span><span class="sxs-lookup"><span data-stu-id="628c4-141">Use keys which can identify the data.</span></span> <span data-ttu-id="628c4-142">たとえば、"sport:football;date:2008-02-02" は "fb:8-2-2" よりも優れたキーと言えます。</span><span class="sxs-lookup"><span data-stu-id="628c4-142">For example, "sport:football;date:2008-02-02" would be a better key than "fb:8-2-2".</span></span> <span data-ttu-id="628c4-143">前者の方が読みやすく、余分なサイズはごくわずかです。</span><span class="sxs-lookup"><span data-stu-id="628c4-143">The former is more readable and the extra size is negligible.</span></span> <span data-ttu-id="628c4-144">サイズと読みやすさのバランスを取ります。</span><span class="sxs-lookup"><span data-stu-id="628c4-144">Find the balance between size and readability.</span></span>
- <span data-ttu-id="628c4-145">規則を使用します。</span><span class="sxs-lookup"><span data-stu-id="628c4-145">Use a convention.</span></span> <span data-ttu-id="628c4-146">"sport:football" のように、"object:id" という規則をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="628c4-146">A good one is "object:id", as in "sport:football".</span></span> 

## <a name="how-is-data-stored-in-a-redis-cache"></a><span data-ttu-id="628c4-147">Redis Cache にデータが格納されるしくみ</span><span class="sxs-lookup"><span data-stu-id="628c4-147">How is data stored in a Redis cache?</span></span>

<span data-ttu-id="628c4-148">Redis のデータは、_**ノード**_ と_**クラスター**_ に格納されます。</span><span class="sxs-lookup"><span data-stu-id="628c4-148">Data in Redis is stored in _**nodes**_ and _**clusters**_.</span></span>

<span data-ttu-id="628c4-149">**ノード**は、データが格納されている Redis 内の領域です。</span><span class="sxs-lookup"><span data-stu-id="628c4-149">**Nodes** are a space in Redis where your data is stored.</span></span>

<span data-ttu-id="628c4-150">**クラスター**は、データセットが分割される 3 つ以上のノードのセットです。</span><span class="sxs-lookup"><span data-stu-id="628c4-150">**Clusters** are sets of three or more nodes your dataset is split across.</span></span> <span data-ttu-id="628c4-151">クラスターは、ノードに障害が発生した場合、またはノードがクラスターの残りの部分と通信できない場合に操作を続行できるため、有用です。</span><span class="sxs-lookup"><span data-stu-id="628c4-151">Clusters are useful because your operations will continue if a node fails or is unable to communicate to the rest of the cluster.</span></span>

## <a name="what-are-redis-caching-architectures"></a><span data-ttu-id="628c4-152">Redis キャッシュ アーキテクチャとは</span><span class="sxs-lookup"><span data-stu-id="628c4-152">What are Redis caching architectures?</span></span>

<span data-ttu-id="628c4-153">Redis キャッシュ アーキテクチャは、データをキャッシュ内に分散させる方法です。</span><span class="sxs-lookup"><span data-stu-id="628c4-153">Redis caching architecture is how we distribute our data in the cache.</span></span> <span data-ttu-id="628c4-154">Redis では、3 つの主要な方法でデータを分散させます。</span><span class="sxs-lookup"><span data-stu-id="628c4-154">Redis distributes data in three major ways:</span></span>

1. <span data-ttu-id="628c4-155">**単一ノード**</span><span class="sxs-lookup"><span data-stu-id="628c4-155">**Single node**</span></span>
1. <span data-ttu-id="628c4-156">**複数ノード**</span><span class="sxs-lookup"><span data-stu-id="628c4-156">**Multiple node**</span></span>
1. <span data-ttu-id="628c4-157">**クラスター化**</span><span class="sxs-lookup"><span data-stu-id="628c4-157">**Clustered**</span></span>

<span data-ttu-id="628c4-158">Redis キャッシュ アーキテクチャは、階層によって Azure 全体に分割されます。</span><span class="sxs-lookup"><span data-stu-id="628c4-158">Redis caching architectures are split across Azure by tiers:</span></span>

### <a name="basic-cache"></a><span data-ttu-id="628c4-159">Basic キャッシュ</span><span class="sxs-lookup"><span data-stu-id="628c4-159">Basic cache</span></span>

<span data-ttu-id="628c4-160">Basic キャッシュでは、_**単一ノード**_ の Redis キャッシュが提供されます。</span><span class="sxs-lookup"><span data-stu-id="628c4-160">A basic cache provides you with a _**single node**_ Redis cache.</span></span> <span data-ttu-id="628c4-161">すべてのデータセットが 1 つのノードに格納されます。</span><span class="sxs-lookup"><span data-stu-id="628c4-161">The complete dataset will be stored in a single node.</span></span> <span data-ttu-id="628c4-162">この階層は、開発、テスト、および重要ではないワークロードに最適です。</span><span class="sxs-lookup"><span data-stu-id="628c4-162">This tier is ideal for development, testing, and non-critical workloads.</span></span>

### <a name="standard-cache"></a><span data-ttu-id="628c4-163">Standard キャッシュ</span><span class="sxs-lookup"><span data-stu-id="628c4-163">Standard cache</span></span>

<span data-ttu-id="628c4-164">Standard キャッシュでは、_**複数ノード**_ アーキテクチャが作成されます。</span><span class="sxs-lookup"><span data-stu-id="628c4-164">The standard cache creates _**multiple node**_ architectures.</span></span> <span data-ttu-id="628c4-165">Redis によって、2 ノード プライマリ/セカンダリの構成でキャッシュがレプリケートされます。</span><span class="sxs-lookup"><span data-stu-id="628c4-165">Redis replicates a cache in a two-node primary/secondary configuration.</span></span> <span data-ttu-id="628c4-166">2 つのノード間のレプリケーションは、Azure によって管理されます。</span><span class="sxs-lookup"><span data-stu-id="628c4-166">Azure manages the replication between the two nodes.</span></span> <span data-ttu-id="628c4-167">これは、マスター/スレーブ レプリケーションで運用可能なキャッシュです。</span><span class="sxs-lookup"><span data-stu-id="628c4-167">This is a production-ready cache with master/slave replication.</span></span>

### <a name="premium-tier"></a><span data-ttu-id="628c4-168">Premium レベル</span><span class="sxs-lookup"><span data-stu-id="628c4-168">Premium tier</span></span>

<span data-ttu-id="628c4-169">Premium レベルには、Standard レベルの機能に加え、データの永続化、スナップショットの作成、およびデータのバックアップ機能が含まれます。</span><span class="sxs-lookup"><span data-stu-id="628c4-169">The premium tier includes the features of the standard tier but adds the ability to persist data, take snapshots, and back up data.</span></span> <span data-ttu-id="628c4-170">このレベルでは、データを複数の Redis ノードにシャード化する Redis クラスターを作成して、使用可能なメモリを増やすことができます。</span><span class="sxs-lookup"><span data-stu-id="628c4-170">With this tier, you can create a Redis cluster that shards data across multiple Redis nodes to increase available memory.</span></span> <span data-ttu-id="628c4-171">Premium レベルでは、接続、サブネット、IP アドレス指定、およびネットワークの分離を完全に制御するための Azure Virtual Network もサポートしています。</span><span class="sxs-lookup"><span data-stu-id="628c4-171">The premium tier also supports an Azure Virtual Network to give you complete control over your connections, subnets, IP addressing, and network isolation.</span></span> <span data-ttu-id="628c4-172">このレベルには、geo レプリケーションも含まれているため、データをそれを使用するアプリの近くに確実に配置することができます。</span><span class="sxs-lookup"><span data-stu-id="628c4-172">This tier also includes geo-replication, so you can ensure your data is close to the app that's consuming it.</span></span>

## <a name="summary"></a><span data-ttu-id="628c4-173">まとめ</span><span class="sxs-lookup"><span data-stu-id="628c4-173">Summary</span></span>

<span data-ttu-id="628c4-174">データベースは大量のデータを格納するには適していますが、データの検索時に固有の待機時間があります。</span><span class="sxs-lookup"><span data-stu-id="628c4-174">A database is great for storing large amounts of data, but there is an inherent latency when looking up data.</span></span> <span data-ttu-id="628c4-175">クエリを送信すると、</span><span class="sxs-lookup"><span data-stu-id="628c4-175">You send a query.</span></span> <span data-ttu-id="628c4-176">サーバーはそのクエリを解釈して、データを検索して結果を返します。</span><span class="sxs-lookup"><span data-stu-id="628c4-176">The server interprets the query, looks up the data, and returns it.</span></span> <span data-ttu-id="628c4-177">サーバーには、要求を処理するための容量制限もあります。</span><span class="sxs-lookup"><span data-stu-id="628c4-177">Servers also have capacity limits for handling requests.</span></span> <span data-ttu-id="628c4-178">要求が多すぎると、データの取得速度が低下する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="628c4-178">If too many requests are made, data retrieval will likely slow down.</span></span> <span data-ttu-id="628c4-179">キャッシュすると、頻繁に要求されるデータがメモリに格納されます。これにより、データベースのクエリを実行するよりも速くデータを返すことができるため、待機時間が短くなり、パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="628c4-179">Caching will store frequently requested data in memory that can be returned faster than querying a database, which should lower latency and increase performance.</span></span> <span data-ttu-id="628c4-180">Azure Redis Cache を使用すると、セキュリティで保護され、スケーラブルな専用 Redis Cache にアクセスできます。これは Microsoft が管理し、Azure でホストされています。</span><span class="sxs-lookup"><span data-stu-id="628c4-180">Azure Redis Cache gives you access to a secure, dedicated, and scalable Redis cache, hosted in Azure, and managed by Microsoft.</span></span>
