あなたのスポーツ Web サイトの背後にはデータベースがあり、クエリを実行することでデータが返されます。 ただし、パフォーマンスは、特に大規模なスポーツ イベント時に負荷が高く、低下します。 ホスト環境では、リソース使用量の増加はコストの増加につながります。 データをキャッシュすることで、Web サイトが適切かつ経済的に実行されるようになります。

## <a name="what-is-caching"></a>キャッシュとは

キャッシュは、非常にデータを使用するアプリケーションの近くにあるメモリ内で頻繁にアクセスされるデータを格納する機能です。 キャッシュは、パフォーマンスを向上し、サーバーの負荷を減らすために使用されます。 Redis を使用して優れた待機時間を提供したり、パフォーマンスが向上するメモリ内キャッシュを作成します。

## <a name="what-is-a-redis-cache"></a>Redis キャッシュとは

Redis (**RE**mote **DI**ctionary **S**erver) キャッシュは、オープン ソースのメモリ内キー値ペアのストアです。 これは高速およびを格納して文字列、ハッシュ、およびセットなどの一般的なデータ型を操作するため人気のあります。 見なされます開発者フレンドリ Python、C#、C++、c#、Java、JavaScript など他のユーザーの間での複数の言語をサポートします。

## <a name="what-is-azure-redis-cache"></a>Azure Redis Cache とは

Microsoft Azure Redis Cache は、広く支持されているオープン ソースの Redis キャッシュがベースとなっています。 マイクロソフトによって管理されている、セキュリティで保護された専用の Redis キャッシュにアクセスすることができます。 Azure Redis Cache を使用して作成されたキャッシュには、Microsoft Azure 内のあらゆるアプリケーションからアクセスすることができます。 Azure Redis Cache は通常、バックエンドのデータストアに大きく依存するシステムのパフォーマンスを向上させるために使用されます。

キャッシュされたデータは、データベースによってディスクから読み込まれるのではなく、Redis キャッシュを実行している Azure サーバーのメモリ内に配置されます。 キャッシュには高い拡張性もあります。 サイズと価格レベルはいつでも変更できます。

## <a name="what-type-of-data-can-be-stored-in-the-cache"></a>データの種類は、キャッシュに格納できますか。

Redis をサポートしているすべてのデータ型を中心に_セーフ バイナリ_文字列。 つまり、「i-愛-ロッキー - への道」画像ファイルの内容などの文字列からの値の任意のバイナリのシーケンスを使用することができます。 空の文字列は、有効な値です。

- バイナリの安全な文字列 (最も一般的です)
- 文字列のリスト
- 文字列の順序なしのセット
- ハッシュ
- 文字列の並べ替えられたセット
- 文字列のマップ

各データ値が関連付けられている、_キー_キャッシュから値の参照に使用できます。 Redis の小さな値 (100 k 未満)、複数のキーに大きなデータを分割するようにしてください。 可能なより大きな値を保存することは (最大 500 MB) が、ネットワーク待機時間が増加し、キャッシュが期限切れの古い値に構成されていない場合にキャッシュとメモリ不足の問題が発生することができます。

## <a name="what-is-a-redis-key"></a>Redis のキーとは何ですか。
Redis キーもバイナリの安全な文字列。 キーを選択するためのガイドラインを次に示します。

- 長いキーを回避します。 多くのメモリを占有され、長い参照がバイト単位で比較する必要があるために時間が必要です。 バイナリの blob をキーとして使用する場合は、一意のハッシュを生成し、代わりに、キーとして使用します。 キーの最大サイズは 512 MB が行う必要があります_決して_そのサイズのキーを使用します。
- データを識別できますキーを使用します。 たとえば、"スポーツ: フットボール; 日: 2008-02-02"より優れたキーになります"fb:8-2-2" です。 前者は読みやすくし、余分なサイズはごくわずかです。 サイズと読みやすさのバランスを見つけます。
- 規則を使用します。 適切なものは"オブジェクト: id"、"スポーツ: football"のようにです。 

## <a name="how-is-data-stored-in-a-redis-cache"></a>Redis キャッシュでのデータの格納方法

Redis のデータは、_**ノード**_ と_**クラスター**_ に格納されます。

**ノード**は、データが格納されている Redis 内の領域です。

**クラスター**は、データセットが分割される 3 つ以上のノードのセットです。 クラスターは、ノードに障害が発生した場合、またはノードがクラスターの残りの部分と通信できない場合に操作を続行できるため、有用です。

## <a name="what-are-redis-caching-architectures"></a>Redis キャッシュ アーキテクチャとは

Redis キャッシュ アーキテクチャは、データをキャッシュ内に分散させる方法です。 Redis は、3 つの主要な方法でデータを分散します。

1. **単一ノード**
1. **複数ノード**
1. **クラスター化**

Redis キャッシュ アーキテクチャは、階層によって Azure 全体に分割されます。

### <a name="basic-cache"></a>Basic キャッシュ

Basic キャッシュでは、_**単一ノード**_ の Redis キャッシュが提供されます。 すべてのデータセットが 1 つのノードに格納されます。 この階層は、開発、テスト、および重要ではないワークロードに最適です。

### <a name="standard-cache"></a>Standard キャッシュ

Standard キャッシュでは、_**複数ノード**_ アーキテクチャが作成されます。 Redis によって、2 ノード プライマリ/セカンダリの構成でキャッシュがレプリケートされます。 2 つのノード間のレプリケーションは、Azure によって管理されます。 これは、マスター/スレーブ レプリケーションで運用可能なキャッシュです。

### <a name="premium-tier"></a>Premium レベル

Premium レベルには、Standard レベルの機能に加え、データの永続化、スナップショットの作成、およびデータのバックアップ機能が含まれます。 このレベルでは、データを複数の Redis ノードにシャード化する Redis クラスターを作成して、使用可能なメモリを増やすことができます。 Premium レベルでは、接続、サブネット、IP アドレス指定、およびネットワークの分離を完全に制御するための Azure Virtual Network もサポートしています。 このレベルには、geo レプリケーションも含まれているため、データをそれを使用するアプリの近くに確実に配置することができます。

## <a name="summary"></a>まとめ

データベースは大量のデータを格納するには適していますが、データの検索時に固有の待機時間があります。 クエリを送信すると、 サーバーはそのクエリを解釈して、データを検索して結果を返します。 サーバーには、要求を処理するための容量制限もあります。 要求が多すぎると、データの取得速度が低下する可能性があります。 キャッシュすると、頻繁に要求されるデータがメモリに格納されます。これにより、データベースのクエリを実行するよりも速くデータを返すことができるため、待機時間が短くなり、パフォーマンスが向上します。 Azure Redis Cache を使用すると、セキュリティで保護され、スケーラブルな専用 Redis Cache にアクセスできます。これは Microsoft が管理し、Azure でホストされています。
