> [!TIP]
> VM にサインインする際に必要なユーザー名とパスワードは **[リソース]** タブにあります。

> [!NOTE]
> Mac ユーザーであれば場合によっては、VM の起動後、ツール バーでライトニング アイコンを使用するか、指示の隣にある **[リソース]** タブから **Ctrl + Alt + Delete** オプションを使用し、VM のロックを解除する必要があります。


このモジュールでは、サーバーレス バックエンドでクロスプラットフォームの Xamarin.Forms アプリを作成します。 このアプリではデバイスからユーザーの場所を取得し、電話番号の一覧とともに Azure 関数に送信します。 その後、関数ではサード パーティ サービス (Twilio) へのバインドを使用して、提供されるすべての電話番号に SMS メッセージとして場所を送信します。

この処理では、以下の手順に従います。

1. アプリでは、デバイス固有の場所 API の抽象化として Xamarin.Essentials を使用して場所をキャプチャします。

1. 場所と電話番号は JSON ペイロードにパッケージ化され、Azure 関数に送信されます。

1. Azure 関数では JSON ペイロードをデコードし、SMS メッセージを作成します。

1. SMS メッセージは [Twilio](https://www.twilio.com/?azure-portal=true) を介して送信されます。

次の図で、この処理の概要を示します。

![テキスト メッセージを通じて、ロケーションを共有する処理の高水準アーキテクチャを示す図。](../media/1-architecture.png)

## <a name="create-a-twilio-account"></a>Twilio アカウントを作成する

Azure 関数から SMS メッセージを送信できるようにするには、Twilio アカウントが必要になります。 作業を開始するには無料アカウントで十分です。

1. [twilio.com](https://www.twilio.com?azure-portal=true) に移動します。

1. 右上隅にある **[サインアップ]** という赤いボタンをクリックします。

1. 詳細を入力し、**[作業開始]** をクリックします。

1. ご自分の電話番号を確認する必要があります。 Twilio の無料アカウントでは、スパムに使用されないように確認済みの電話番号にのみメッセージを送信できます。 Twilio によって、電話番号を確認するために入力する必要がある確認コードが送信されます。

1. **[製品]** タブを選択し、**[プログラム可能 SMS]** をクリックし、**[続行]** をクリックします。

1. "I'm here" など、最初のプロジェクト用の名前を指定し、**[続行]** をクリックします。

1. チーム メイトを招待する手順はスキップします。

1. Twilio メッセージング ダッシュボードから、**[プロジェクト情報]** パネルを展開します。

1. 自分の **[アカウント SID]** と **[認証トークン]** をメモしておいてください。これらの値は後で必要になります。

    Twilio アカウントを作成すると、メッセージの送信元として使用する電話番号が割り当てられます。 この電話番号は、Twilio の **[Phone Numbers]\(電話番号\)** ダッシュ ボードで確認できます。

1. Twilio サイトで、左側のメニューの下部にある省略記号を選択します。 次に、*[SUPER NETWORK]\(スーパー ネットワーク\) -> [Phone Numbers]\(電話番号\)* の順に選択します。 ピン アイコンを使用して、左側のメニューにこのダッシュ ボードをピン留めすることができます。 *[Manage Numbers]\(番号の管理\) -> [Active Numbers]\(有効な番号\)* の下に、Twilio 番号が表示されます。

    ![Twilio 番号を検索する](../media/7-twilio-find-number.png)

    > [!TIP]
    > 有効な番号がまだ与えられていない場合、[Active Numbers]\(有効な番号\) ページの **[開始]** を選択し、番号作成プロセスを開始します。

1. 有効な電話番号をメモしておいてください。 このモジュールの後半で使用します。


> [!NOTE]
> サインアップすると、SMS メッセージの送信に使用される Twilio 電話番号が割り当てられます。 一部の国では、これらの番号では SMS メッセージを送信できない場合があります。 Twilio のドキュメントに、[制限がある国](https://support.twilio.com/hc/articles/223183068-Twilio-international-phone-number-availability-and-their-capabilities?azure-portal=true)の一覧と、[国際番号または英数字の送信者 ID](https://support.twilio.com/hc/articles/226690868-Using-Twilio-when-SMS-numbers-are-unavailable-in-your-country?azure-portal=true) を使用して SMS メッセージを送信する方法が示されています。

## <a name="launch-visual-studio"></a>Visual Studio を起動する

このモジュールでは、仮想マシンを介して利用可能な、Visual Studio 2017 を使用してモバイル アプリと Azure Functions アプリを開発します。 Xamarin.Forms アプリをビルドして iOS、Android、ユニバーサル Windows プラットフォーム (UWP) を実行できますが、このモジュールでは UWP のみに焦点を合わせ、ラボの仮想マシン内で動作するようにします。

VM の [スタート] メニューまたはデスクトップのショートカットから Visual Studio 2017 を起動します。

## <a name="summary"></a>まとめ

このユニットでは、SMS メッセージを送信するために使用する Twilio アカウントを作成し、Visual Studio を起動しました。 次は、Xamarin.Forms アプリを作成し、Xamarin.Essentials NuGet パッケージを追加する方法を学習します。

> [!IMPORTANT]
> このモジュールで集めた Twilio の **アカウント SID**、**認証トークン**、**有効な電話番号**のメモを保存してください。この値は後で必要になります。
