お客様によって管理されているデータセンターからクラウド データセンターへのコンピューティング環境の移行時に、セキュリティの責任も移行されます。 現在、セキュリティはクラウド プロバイダーとお客様の両方に共通の懸念事項です。 すべてのアプリケーションとソリューションにおいて、お客様が負う責任と、お客様に代わって Azure 側で処理される内容を理解しておくことが重要です。 

## <a name="share-security-responsibility-with-azure"></a>セキュリティの責任を Azure と共有する

最初の移行は、オンプレミスのデータ センターからサービスとしてのインフラストラクチャ (IaaS) への移行です。 IaaS の場合は、最下位レベルのサービスを利用します。そして Azure で仮想マシン (VM) と仮想ネットワークを作成します。 このレベルでは、オペレーティング システムおよびソフトウェアに対してパッチを適用すること、これらをセキュリティで保護すること、さらにセキュリティで保護されるようにネットワークを構成することはお客様側の責任です。 Contoso Shipping では、自社のオンプレミスの物理サーバーに代えて Azure VM の使用を開始するときから、IaaS を活用しています。 運用上の利点に加えて、ネットワークの物理的な部分の保護に対する懸念を外部委託できるというセキュリティ上の利点があります。

サービスとしてのプラットフォーム (PaaS) への移行によって、セキュリティ上の懸念事項の多くが外部に委託されます。 このレベルでは、オペレーティング システムおよび最も基本的なソフトウェア (データベース管理システムなど) に対応します。 すべてが最新のセキュリティ パッチで更新されます。また、すべてを Active Directory に統合してアクセス制御を行うことができます。 PaaS には、数多くの運用上の利点があります。 ご利用の環境に合わせてインフラストラクチャおよびサブネット全体を手動で構築するのではなく、Azure portal 内で "ポイントしてクリック" するか、または自動化されたスクリプトを実行することで、セキュリティで保護された複雑なシステムをアップまたはダウン状態にしたり、必要に応じてそれらのシステムをスケーリングしたりすることができます。 Contoso では、トラックの利用統計情報を取り込むためにイベント ハブを使用しています。 CosmosDb バック エンドとモバイル アプリを備えた Web アプリを使用しています。 これらのサービスはすべて PaaS の例です。

サービスとしてのソフトウェア (SaaS) の場合は、ほぼすべてを外部委託できます。 SaaS はインターネット インフラストラクチャで実行されるソフトウェアです。そのコードはベンダーによって管理されますが、お客様が使用できるように構成されます。 多くの企業と同様に Contoso でも、SaaS の良い例である Office 365 を使用しています。

<!--TODO: replace with final media which was submitted for Design-for-security-in-azure -->
![shared_responsibility.png](../media-COPIED-FROM-DESIGNFORSECURITY/shared_responsibilities.png)

## <a name="a-layered-approach-to-security"></a>セキュリティへの階層型アプローチ

*多層防御*は、情報への不正なアクセスを目的とする攻撃の進行を遅らせる一連のメカニズムを採用する戦略です。 各層で保護が提供されるため、1 つの層が破られた場合、後続の層は既に備えができており、さらなる露出を防ぐことができます。 Microsoft では、自社の物理データセンター内と Azure サービス間の両方でのセキュリティに階層型アプローチを適用しています。 多層防御の目的は、情報を保護し、情報へのアクセスが許可されていない個人から盗まれないようにすることです。

多層防御は、同心円状の輪のセットとして視覚化でき、データは中央でセキュリティ保護されます。 各輪では、データに関するセキュリティ層が追加されます。 このアプローチでは、単一の保護層に依存する必要がなくなり、攻撃速度を落とすことができます。また、自動または手動によるアラート テレメトリが提供されます。 それでは各層を見ていきましょう。

<!--TODO: replace with final media which was submitted for Design-for-security-in-azure -->
![多層防御](../media-COPIED-FROM-DESIGNFORSECURITY/defense_in_depth_layers_small.PNG)

### <a name="data"></a>データ

ほとんどすべての場合、攻撃者は次のようなデータを狙っています。

- データベースに格納されたデータ
- 仮想マシン内のディスク上に格納されたデータ
- Office 365 などの SaaS アプリケーションに格納されたデータ
- クラウド ストレージに格納されたデータ

適切にセキュリティで保護されるように、データを格納し、データへのアクセスを制御する必要があります。 多くの場合、データの機密性、整合性、可用性を確保するために適用する必要がある制御とプロセスを示す規制上の要件があります。

### <a name="applications"></a>アプリケーション

- アプリケーションがセキュリティで保護されており、脆弱性がないようにします
- 機密性の高いアプリケーション シークレットをセキュリティで保護されたストレージ メディアに格納します
- すべてのアプリケーション開発に関する設計要件を安全なものにします

アプリケーション開発のライフ サイクルにセキュリティを統合することは、コードにおける脆弱性の数を減らすのに役立ちます。 すべての開発チームが既定でアプリケーションをセキュリティで保護するようにし、セキュリティ要件を交渉の余地のないものにします。

### <a name="compute"></a>コンピューティング

- 仮想マシンへのアクセスをセキュリティで保護します
- エンドポイント保護を実装し、システムにパッチを適用して最新の状態に保ちます

マルウェア、パッチが適用されていないシステム、適切にセキュリティ保護されていないシステムのために、環境が攻撃を受けやすくなってしまいます。 この層では、ご利用のコンピューティング リソースが安全であり、セキュリティの問題を最小限に抑えるために適切に制御していることを確認することに重点を置きます。

### <a name="networking"></a>ネットワーク

- リソース間の通信を制限します
- 既定で拒否します
- 必要に応じて、インバウンド インターネット アクセスを限定し、アウトバウンドを制限します
- オンプレミス ネットワークへのセキュリティで保護された接続を実装します

この層では、すべてのリソース間でのネットワーク接続を制限し、必要なもののみを許可することに重点を置きます。 この通信を制限することで、ネットワーク全体の侵入拡大のリスクを軽減することができます。

### <a name="perimeter"></a>境界

- 分散型サービス拒否 (DDoS) 保護を使用して、エンド ユーザーに対するサービス拒否が発生する前に大規模な攻撃をフィルター処理します
- 境界ファイアウォールを使用して、ネットワークに対する悪意のある攻撃を識別し、警告します

ネットワーク境界で、リソースに対するネットワークベースの攻撃から保護する目的があります。 これらの攻撃を識別し、影響を排除し、警告することは、ネットワークを安全に保つために重要なことです。

### <a name="policies--access"></a>ポリシーとアクセス

- インフラストラクチャへのアクセスを制御し、変更を制御します
- シングル サインオンと多要素認証を使用します
- イベントと変更を監査します

ポリシーとアクセス層では、ID がセキュリティで保護されていることと、付与されたアクセス権のみが必要であることと、変更がログに記録されていることを確認することに集中します。

### <a name="physical-security"></a>物理的なセキュリティ

- 物理的なセキュリティを構築し、データ センター内のコンピューティング ハードウェアへのアクセスを制御することが、防御の最前線となります。

物理的なセキュリティの目的は、資産へのアクセスに対する物理的な保護措置を講じることです。 これにより、他の層をバイパスできなくなり、損失や盗難が適切に処理されるようになります。

ここでは、セキュリティに関するお客様の懸念事項の解消に Azure が大いに役立っていることを見てきました。 しかし、セキュリティは引き続き、**共有する責任**となります。 背負う必要がある責任の程度は、Azure で使用するモデルの種類によって異なります。

データや環境に適切な保護を検討するためのガイドラインとして、"*多層防御*" リングを使用します。