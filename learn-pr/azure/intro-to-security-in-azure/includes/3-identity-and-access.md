ネットワーク境界、そのファイアウォール、物理アクセス制御はかつて企業データの基本的保護手段でした。 しかしながら、Bring Your Own Devices (BYOD)、モバイル アプリ、クラウド アプリケーションの急増に伴い、ネットワーク境界はますます穴だらけになっています。 

そこで、ID が新しい基本的セキュリティ境界になりました。 そのため、特権の適切な認証と割り当ては、データに対する支配力を維持する上で不可欠です。

あなたが勤める Contoso Shipping では、このような問題に直ちに対処することを重視しています。 あなたが所属するチームの新しいハイブリッド クラウド ソリューションでは、事業の最適化に不可欠な利用統計情報データを出荷車両で継続的に送信するだけでなく、認められたユーザーが &mdash; にサインインしているとき、シークレット データにアクセスできるモバイル アプリを管理しなければなりません。

## <a name="single-sign-on"></a>シングル サインオン

ユーザーが管理する必要がある ID が多くなればなるほど、資格情報に関するセキュリティ インシデントのリスクが高まります。 ID が多くなると、覚えたり、変更したりするパスワードが増えることになります。 パスワード ポリシーはアプリケーションによって異なる場合があり、複雑さの要件が増えるほど、ユーザーにとってパスワードを覚えておくことが一層困難になります。

そこで、すべての ID を管理するロジスティクスを検討します。 ヘルプ デスクにはさらに負担がかかります。アカウントのロックアウトやパスワードのリセット要求に対応する必要があるためです。 ユーザーが退職した場合、その ID をすべて追跡し、無効になっていることを確認することが困難である可能性があります。 ID を見落とした場合、除外しておくべきアクセスが許可される可能性があります。

シングル サインオン (SSO) の場合、ユーザーは 1 つの ID と 1 つのパスワードを覚えておくだけで済みます。 アプリケーション間でのアクセスはユーザーに関連付けられている単一の ID に許可され、セキュリティ モデルが簡素化されます。 ユーザーがロールを変更したか、退職したとき、アクセス変更が単一の ID に関連付けられます。アカウントを変更したり、無効にしたりするための労力が大幅に減少します。 アカウントにシングル サインオンを利用することで、ユーザーは自分の ID を管理しやすくなり、ご利用の環境内でのセキュリティ機能が強化されます。

:::row:::
  :::column:::
    ![Azure Active Directory を表す拇印](../media/3-sso-with-azure-ad.png)
  :::column-end:::
    :::column span="3"::: **Azure Active Directory での SSO**

Azure Active Directory (AD) はクラウド ベースの ID サービスです。 既存のオンプレミスの Active Directory と同期するためのサポートが組み込まれています。スタンドアロンとして使用することもできます。 つまり、アプリケーションがオンプレミスであるか、クラウド (Office 365 を含む) にあるか、さらにはモバイルであるかに関係なく、すべてのアプリケーションで同じ資格情報を共有することができます。 管理者と開発者は、Azure AD で構成され、一元管理されたルールとポリシーを使用して、データやアプリケーションへのアクセスを制御できます。

SSO に対して Azure AD を活用することで、複数のデータ ソースを 1 つのインテリジェントなセキュリティ グラフに統合することもできます。 このセキュリティ グラフによって、Azure AD 内のすべてのアカウントに対する脅威の分析とリアルタイムの ID 保護が可能になります。対象のアカウントには、オンプレミスの AD から同期されているものも含まれます。 一元化された ID プロバイダーを使用することで、ID インフラストラクチャのセキュリティ コントロール、レポート、アラート、管理が一元化されます。

Contoso Shipping は既存の Active Directory インスタンスと Azure AD を統合しているため、組織全体でアクセスを一貫して制御できます。 また、その統合により、電子メールや Office 365 ドキュメントにサインインする機能が大幅に簡素化されます。再認証する必要がありません。
  :::column-end:::
:::row-end:::

## <a name="multi-factor-authentication"></a>多要素認証

多要素認証 (MFA) では、完全な認証のために 2 つ以上の要素を必須とすることで、ID のセキュリティが強化されます。 これらの要素は、次の 3 つのカテゴリに分類されます。

- *ユーザーが知っているもの*
- *ユーザーが持っているもの*
- *ユーザー自身*

**ユーザーが知っているもの**は、パスワード、あるいはセキュリティの質問に対する答えです。 **ユーザーが持っているもの**は、通知を受け取るモバイル アプリまたはトークンを生成するデバイスです。 **ユーザー自身**は通常、多くのモバイル デバイスで使用される指紋や顔スキャンなどの、ある種の生体認証です。

MFA を使用することで、資格情報露出の影響が限られ、ID のセキュリティが強化されます。 あるユーザーのパスワードを持つ攻撃者が完全に認証を受けようとするなら、そのユーザーの電話や顔が必要になります。 1 つの要素が確認されただけでは認証として十分ではありません。その資格情報では攻撃者は認証を受けられません。 MFA がセキュリティにもたらす利点は限りなく、可能であれば MFA を有効にすることの重要性は強調しても強調しきれません。

Azure AD には MFA 機能が組み込まれており、他のサード パーティの MFA プロバイダーと統合されます。 取り扱いに慎重を要するアカウントであるため、Azure AD の全体管理者ロールを持つすべてのユーザーに無料で提供されます。 その他すべてのアカウントの場合、この機能が与えられるライセンスを購入し、ライセンスをアカウントに割り当てることで MFA を有効にできます。

Contoso Shipping では、運転手が使用するモバイルアプリを含め、ドメインに接続されていないコンピューターからユーザーがサインインしているときはいつでも MFA を有効にすることにします。

## <a name="providing-identities-to-services"></a>サービスへの ID の提供

一般的に、サービスに ID を与えることは大事です。 ベスト プラクティスには反しますが、資格情報はしばしば構成ファイルに埋め込まれています。 そのような構成ファイルはセキュリティで保護されていないので、システムやリポジトリにアクセスできるすべてのユーザーがこれらの資格情報にアクセスし、公開されてしまうリスクがあります。

Azure AD では、Azure サービス用のサービス プリンシパルとマネージド ID の 2 つの方法でこの問題を解決しています。

:::row:::
  :::column:::
    ![さまざまなロールを表すイメージ](../media/3-service-principals.png)
  :::column-end:::
    :::column span="3"::: **サービス プリンシパル**

サービス プリンシパルを理解するには、まず、**ID** と**プリンシパル**という用語を理解することをお勧めします。この 2 つの用語は ID 管理の世界で独自の解釈をされています。

**ID** とは認証できる何かです。 これには当然、ユーザー名とパスワードを持つユーザーが含まれますが、シークレット キーや証明書で認証されるアプリケーションやその他のサーバーも含まれます。 ついでながら、**アカウント**とは、ID と関連付けられているデータのことです。

**プリンシパル**とは、特定のロールや要求で機能する ID です。 通常、ID とプリンシパルを別々に考えるのは実際的ではありません。Linux の bash プロンプトで `sudo` を使用する場合や Windows で "管理者として実行" を使用する場合を考えてみてください。 いずれの場合も、ユーザーは前と同じ ID でログインしますが、ロールを変更し、そのロールで作業します。 権限を割り当てることができるため、多くの場合、グループもプリンシパルと見なされます。

したがって、**サービス プリンシパル**は文字どおり命名されています。 これはサービスまたはアプリケーションによって使用される ID です。 他の ID 同様、ロールを割り当てることができます。
  :::column-end:::
:::row-end:::

:::row:::
  :::column:::
    ![マネージド ID を表すイメージ](../media/3-managed-service-identities.png)
  :::column-end:::
    :::column span="3"::: **Azure サービスのマネージド ID**

サービス プリンシパルを作成するプロセスは退屈であり、それらの維持を困難にする可能性がある接点が多数あります。 Azure サービスのマネージド ID ははるかに簡単であり、作業のほとんどがユーザーに代わって実行されます。 

マネージド ID は、それをサポートするすべての Azure サービスですぐに作成できます。これをサポートするサービスは増え続けています。 ユーザーがあるサービスに対してマネージド ID を作成するとき、Azure AD テナントでアカウントを作成することになります。 Azure インフラストラクチャは、サービスの認証とアカウントの管理を自動で行ってくれます。 そのアカウントは、他のすべての Azure AD アカウントと同様に使用できます。これには、認証されているサービスが安全にその他の Azure リソースにアクセスできるようにすることも含まれます。
  :::column-end:::
:::row-end:::

## <a name="role-based-access-control"></a>ロールベースのアクセス制御

ロールとは、"読み取り専用" や "共同作成者" などのアクセス許可のセットです。これは Azure のサービス インスタンスにアクセスするためにユーザーに付与されます。 

ID は、ロールに直接マップするか、グループ メンバーシップを介してマップします。 セキュリティ プリンシパル、アクセス許可、およびリソースを分離すると、アクセスの管理が単純になり、きめ細やかな制御を行うことができるようになります。 管理者は、必要最小限のアクセス許可が付与されていることを確認できます。

ロールは、サービス インスタンス レベルで個々に付与することもできますが、Azure Resource Manager の階層で下位にも伝送されます。 サブスクリプション全体など、より高いスコープに割り当てられているロールは、サービス インスタンスなどの子スコープへ継承されます。 

![管理グループ](../media/3-role-assignment-scope.png)

:::row:::
  :::column:::
    ![ID 検証を表す画像](../media/3-privileged-identity-management.png)
  :::column-end:::
    :::column span="3"::: **Privileged Identity Management**

インフラストラクチャを包括的に管理する場合、Azure のリソースへのアクセスをロールベースのアクセス制御 (RBAC) を使用して管理することに加え、組織の変化や発展に伴い、ロールのメンバーを継続的に監査することも行われる必要があります。 追加の有料サービスに Azure AD Privileged Identity Management (PIM) があります。これを使用して、ロールの割り当て、セルフサービスやジャストインタイムでのロールのアクティブ化、Azure AD と Azure のリソースへのアクセス確認を監視できます。

![Privileged Identity Management](../media/PIM_Dashboard.png)

  :::column-end:::
:::row-end:::

## <a name="summary"></a>まとめ

ID により、ユーザーの物理的コントロール外でもセキュリティ境界を維持できます。 シングル サインオンと適切なロールベースのアクセス構成を使用することで、データとインフラストラクチャを表示し、操作できるユーザーを常に把握できます。