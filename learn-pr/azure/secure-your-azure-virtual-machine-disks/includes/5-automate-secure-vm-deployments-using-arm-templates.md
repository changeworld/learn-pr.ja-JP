<span data-ttu-id="57050-101">会社がクラウド移行の一環としていくつかのサーバーをデプロイしているとします。</span><span class="sxs-lookup"><span data-stu-id="57050-101">Suppose your company is deploying several servers as part of their cloud transition.</span></span> <span data-ttu-id="57050-102">デプロイ時には VM ディスクを暗号化する必要があるため、ディスクが攻撃を受けやすくなることはありません。</span><span class="sxs-lookup"><span data-stu-id="57050-102">VM disks must be encrypted during the deployment, so there's no time when the disks are vulnerable.</span></span> <span data-ttu-id="57050-103">このプロセスを自動化して、暗号化を自動的に有効化するように Azure Resource Manager テンプレートを変更することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="57050-103">You want to automate this process, and have to modify the Azure Resource Manager templates to automatically enable encryption.</span></span>

<span data-ttu-id="57050-104">ここでは、Azure Resource Manager テンプレートを使用して、新しい Windows VM の暗号化を自動的に有効にする方法を見ていきます。</span><span class="sxs-lookup"><span data-stu-id="57050-104">Here, we'll look at how to use an Azure Resource Manager template to automatically enable encryption for new Windows VMs.</span></span>

## <a name="what-are-azure-resource-manager-templates"></a><span data-ttu-id="57050-105">Azure Resource Manager テンプレートとは</span><span class="sxs-lookup"><span data-stu-id="57050-105">What are Azure Resource Manager templates?</span></span>

<span data-ttu-id="57050-106">これらのテンプレートは、仮想マシンなど、Azure にデプロイするリソースを定義するために使用される JSON ファイルです。</span><span class="sxs-lookup"><span data-stu-id="57050-106">These templates are JSON files used to define a resource to deploy to Azure, such as a virtual machine.</span></span> <span data-ttu-id="57050-107">新規作成することも、VM など一部の Azure リソースについては、Azure portal を使用して生成できます。</span><span class="sxs-lookup"><span data-stu-id="57050-107">You can write them from scratch, and for some Azure resources, including VMs, you can use the Azure portal to generate them.</span></span> <span data-ttu-id="57050-108">手動の VM デプロイでは必須情報を入力する必要がありますが、VM を Azure にデプロイする代わりに、テンプレートを保存します。</span><span class="sxs-lookup"><span data-stu-id="57050-108">You'll need to complete the required information for a manual VM deployment, but instead of deploying the VM to Azure, you save the template.</span></span>

<span data-ttu-id="57050-109">GitHub でサンプル テンプレートを入手できます。</span><span class="sxs-lookup"><span data-stu-id="57050-109">There are example templates available in GitHub.</span></span>

## <a name="using-github-templates"></a><span data-ttu-id="57050-110">GitHub のテンプレートの使用</span><span class="sxs-lookup"><span data-stu-id="57050-110">Using GitHub templates</span></span>

<span data-ttu-id="57050-111">GitHub には、**実行中の Windows VM ARM での暗号化の有効化**と呼ばれる、暗号化を有効にするためのテンプレートがあります。</span><span class="sxs-lookup"><span data-stu-id="57050-111">GitHub has a template for enabling encryption called the **Enable encryption on a running Windows VM ARM**.</span></span> <span data-ttu-id="57050-112">これは、[Azure クイック スタート テンプレート](https://github.com/Azure/azure-quickstart-templates) リポジトリにあります。</span><span class="sxs-lookup"><span data-stu-id="57050-112">You can find it in the [Azure Quickstart Templates](https://github.com/Azure/azure-quickstart-templates) repository.</span></span> <span data-ttu-id="57050-113">テンプレートの readme ページには **[Azure へのデプロイ]** ボタンがあり、これを使用すると Azure portal でテンプレートが開かれます。</span><span class="sxs-lookup"><span data-stu-id="57050-113">The readme page for the template provides a **Deploy to Azure** button that then opens the template in the Azure portal.</span></span>

<span data-ttu-id="57050-114">テンプレートを使用すると、暗号化が事前に有効化された Windows Server VM がデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="57050-114">The template enables you to deploy a Windows Server VM, with encryption pre-enabled.</span></span> <span data-ttu-id="57050-115">テンプレートを使用する前に、暗号化の前提条件がすべて揃っていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="57050-115">Before using the template, you must make sure that all of the encryption prerequisites are in place.</span></span> <span data-ttu-id="57050-116">前提条件スクリプトによって提供される構成情報 (Azure Active Directory クライアント ID や Azure Active Directory クライアント シークレットなど) も必要になります。</span><span class="sxs-lookup"><span data-stu-id="57050-116">You'll also need the configuration information that is provided by the prerequisites script, such as Azure Active Directory Client ID and Azure Active Directory Client Secret.</span></span>

<span data-ttu-id="57050-117">テンプレートに必要な情報を入力して新しい VM を作成します。</span><span class="sxs-lookup"><span data-stu-id="57050-117">You create a new VM by entering the required information on the template.</span></span> <span data-ttu-id="57050-118">**[購入]** をクリックすると、デプロイが開始します (通常、コストは標準の Azure コンピューティング料金)。</span><span class="sxs-lookup"><span data-stu-id="57050-118">You then initiate deployment by clicking **Purchase** (the cost is typically the normal Azure compute charge).</span></span>

## <a name="deploy-an-encrypted-vm-by-using-a-template"></a><span data-ttu-id="57050-119">暗号化された VM をテンプレートを使用してデプロイする</span><span class="sxs-lookup"><span data-stu-id="57050-119">Deploy an encrypted VM by using a template</span></span>

<span data-ttu-id="57050-120">暗号化された VM をテンプレートを使用してデプロイする主な手順は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="57050-120">The main steps involved in deploying an encrypted VM using a template are:</span></span>

1. <span data-ttu-id="57050-121">GitHub の**実行中の Windows VM ARM での暗号化の有効化**テンプレートにアクセスして実行します。</span><span class="sxs-lookup"><span data-stu-id="57050-121">Access and run the **Enable encryption on a running Windows VM ARM** template from GitHub.</span></span>

1. <span data-ttu-id="57050-122">スクリプトの構成ページに必須の詳細を追加します。</span><span class="sxs-lookup"><span data-stu-id="57050-122">Add the required details in the script configuration page.</span></span>

1. <span data-ttu-id="57050-123">**[購入]** をクリックし、スクリプトを使用して新しい VM をデプロイします。</span><span class="sxs-lookup"><span data-stu-id="57050-123">Deploy a new VM using the script by clicking **Purchase**.</span></span>

1. <span data-ttu-id="57050-124">Azure Portal を使用してディスク暗号化の状態を確認します。</span><span class="sxs-lookup"><span data-stu-id="57050-124">Use the Azure portal to verify disk encryption status.</span></span>
