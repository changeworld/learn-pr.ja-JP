<span data-ttu-id="c73c6-101">お客様の会社で、VM を使用して Azure 内の交通カメラからビデオ データを管理することになりました。</span><span class="sxs-lookup"><span data-stu-id="c73c6-101">Your company has decided to manage the video data from their traffic cameras in Azure using VMs.</span></span> <span data-ttu-id="c73c6-102">複数のコーデックを実行するために、まず VM を作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-102">In order to run the multiple codecs, we first need to create the VMs.</span></span> <span data-ttu-id="c73c6-103">また、VM に接続して操作する必要もあります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-103">We also need to connect and interact with the VMs.</span></span> <span data-ttu-id="c73c6-104">このユニットでは、Azure portal を使用して VM を作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-104">In this unit, you will learn how to create a VM using the Azure portal.</span></span> <span data-ttu-id="c73c6-105">リモート アクセス用に VM を構成し、VM イメージを選択して、適切なストレージ オプションを選びます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-105">You will configure the VM for remote access, select a VM image, and choose the proper storage option.</span></span>

## <a name="introduction-to-windows-virtual-machines-in-azure"></a><span data-ttu-id="c73c6-106">Azure における Windows 仮想マシンの概要</span><span class="sxs-lookup"><span data-stu-id="c73c6-106">Introduction to Windows virtual machines in Azure</span></span>

<span data-ttu-id="c73c6-107">Azure VM は、オンデマンドのスケーラブルなクラウド コンピューティング リソースです。</span><span class="sxs-lookup"><span data-stu-id="c73c6-107">Azure VMs are an on-demand scalable cloud computing resource.</span></span> <span data-ttu-id="c73c6-108">これは、Windows Hyper-V でホストされている仮想マシンと類似したものです。</span><span class="sxs-lookup"><span data-stu-id="c73c6-108">They're similar to virtual machines that are hosted in Windows Hyper-V.</span></span> <span data-ttu-id="c73c6-109">プロセッサ、メモリ、ストレージ、およびネットワーク リソースが含まれます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-109">They include processor, memory, storage, and networking resources.</span></span> <span data-ttu-id="c73c6-110">Hyper-V のように自由に仮想マシンを開始および停止し、Azure portal から、または Azure CLI を使用して仮想マシンを管理できます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-110">You can start and stop virtual machines at will, just like with Hyper-V, and manage them from the Azure portal or with the Azure CLI.</span></span> <span data-ttu-id="c73c6-111">また、リモート デスクトップ プロトコル (RDP) クライアントを使用して、ローカルの Windows コンピューターにサインインするのと同じように、直接 Windows デスクトップのユーザー インターフェイス (UI) に接続して VM を使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-111">You can also use a Remote Desktop Protocol (RDP) client to connect directly to the Windows desktop user interface (UI) and use the VM as if you were signed in to a local Windows computer.</span></span>

## <a name="creating-an-azure-vm"></a><span data-ttu-id="c73c6-112">Azure VM の作成</span><span class="sxs-lookup"><span data-stu-id="c73c6-112">Creating an Azure VM</span></span>

<span data-ttu-id="c73c6-113">VM を定義して Azure にデプロイするには、いくつかの方法があります。つまり、Azure portal、スクリプト (Azure CLI または Azure PowerShell を使用)、Azure Resource Manager テンプレートのいずれかを使用します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-113">VMs can be defined and deployed on Azure in several ways: the Azure portal, a script (using the Azure CLI or Azure PowerShell), or through an Azure Resource Manager template.</span></span> <span data-ttu-id="c73c6-114">いずれの場合も、いくつかの情報を指定する必要があります。それについては、この後すぐに説明します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-114">In all cases, you will need to supply several pieces of information which we'll cover shortly.</span></span>

<span data-ttu-id="c73c6-115">Azure Marketplace には、OS と特定のシナリオ用にインストールされた一般的なソフトウェア ツールの両方を含む、事前構成済みのイメージも用意されています。</span><span class="sxs-lookup"><span data-stu-id="c73c6-115">The Azure Marketplace also provides pre-configured images that include both an OS and popular software tools installed for specific scenarios.</span></span>

![Azure Marketplace の仮想マシン](../media-drafts/2-marketplace-vm-choices.png)

## <a name="resources-used-in-a-windows-vm"></a><span data-ttu-id="c73c6-117">Windows VM で使用されるリソース</span><span class="sxs-lookup"><span data-stu-id="c73c6-117">Resources used in a Windows VM</span></span>

<span data-ttu-id="c73c6-118">Azure 内に Windows VM を作成する場合、VM をホストするためのリソースも作成します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-118">When creating a Windows VM in Azure, you also create resources to host the VM.</span></span> <span data-ttu-id="c73c6-119">これらのリソースが連携することによってコンピューターが仮想化され、Windows オペレーティング システムが実行されます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-119">These resources work together to virtualize a computer and run the Windows operating system.</span></span> <span data-ttu-id="c73c6-120">これらのリソースは、存在しているか (VM の作成時に選択します)、または VM と共に作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-120">These must either exist (and be selected during VM creation), or they will be created with the VM.</span></span>

- <span data-ttu-id="c73c6-121">CPU とメモリ リソースを提供する仮想マシン。</span><span class="sxs-lookup"><span data-stu-id="c73c6-121">A Virtual machine that provides CPU and memory resources.</span></span>
- <span data-ttu-id="c73c6-122">仮想ハード ディスクを保持する Azure Storage アカウント。</span><span class="sxs-lookup"><span data-stu-id="c73c6-122">An Azure Storage account to hold the virtual hard disks.</span></span>
- <span data-ttu-id="c73c6-123">OS、アプリケーション、データを保持する仮想ディスク。</span><span class="sxs-lookup"><span data-stu-id="c73c6-123">Virtual disks to hold the OS, applications, and data.</span></span>
- <span data-ttu-id="c73c6-124">他の Azure サービスや独自のオンプレミスのハードウェアに VM を接続する仮想ネットワーク (VNet)。</span><span class="sxs-lookup"><span data-stu-id="c73c6-124">Virtual network (VNet) to connect the VM to other Azure services or your own on-premise hardware.</span></span>
- <span data-ttu-id="c73c6-125">VNet と通信するためのネットワーク インターフェイス。</span><span class="sxs-lookup"><span data-stu-id="c73c6-125">A network interface to communicate with the VNet.</span></span>
- <span data-ttu-id="c73c6-126">VM にアクセスできるようにするためのパブリック IP アドレス。</span><span class="sxs-lookup"><span data-stu-id="c73c6-126">A public IP address so you can access the VM.</span></span> <span data-ttu-id="c73c6-127">これは省略可能です。</span><span class="sxs-lookup"><span data-stu-id="c73c6-127">This is optional.</span></span>

<span data-ttu-id="c73c6-128">他の Azure サービスと同様に、VM を含む**リソース グループ**が必要になります (さらに、これらのリソースを管理するために必要に応じてグループ化します)。</span><span class="sxs-lookup"><span data-stu-id="c73c6-128">Like other Azure services, you'll need a **Resource Group** to contain the VM (and optionally group these resources together for administration).</span></span> <span data-ttu-id="c73c6-129">新しい VM を作成する場合、既存のリソース グループを使用することも、新しいリソース グループを作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-129">When you create a new VM, you can either use an existing resource group or create a new one.</span></span>

## <a name="choose-the-vm-image"></a><span data-ttu-id="c73c6-130">VM イメージを選択する</span><span class="sxs-lookup"><span data-stu-id="c73c6-130">Choose the VM image</span></span>

<span data-ttu-id="c73c6-131">イメージの選択は、VM を作成するときに行う最初の最も重要な決定事項の 1 つです。</span><span class="sxs-lookup"><span data-stu-id="c73c6-131">Selecting an image is one of the first and most important decisions you'll make when creating a VM.</span></span> <span data-ttu-id="c73c6-132">イメージとは、VM の作成に使用するテンプレートです。</span><span class="sxs-lookup"><span data-stu-id="c73c6-132">An image is a template that's used to create a VM.</span></span> <span data-ttu-id="c73c6-133">これらのテンプレートには、OS と、多くの場合はその他のソフトウェア (開発ツールや Web ホスティング環境など) が含まれています。</span><span class="sxs-lookup"><span data-stu-id="c73c6-133">These templates include an OS and often other software, such as development tools or web hosting environments.</span></span>

<span data-ttu-id="c73c6-134">コンピューターにインストールできるものはすべて、イメージに含めることができます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-134">Anything that a computer can have installed can be included in an image.</span></span> <span data-ttu-id="c73c6-135">イメージから VM を作成できます。このイメージは、ASP.Net Core アプリのホスティングなど、必要なタスクに対して正確に事前に構成されています。</span><span class="sxs-lookup"><span data-stu-id="c73c6-135">You can create a VM from an image that's pre-configured to exactly the tasks you need, such as hosting an ASP.Net Core app.</span></span>

> [!TIP]
> <span data-ttu-id="c73c6-136">独自のイメージをアップロードすることもできます。詳細については、ドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="c73c6-136">You can also create and upload your own images, check the documentation for more information.</span></span>

## <a name="sizing-your-vm"></a><span data-ttu-id="c73c6-137">VM のサイズを変更する</span><span class="sxs-lookup"><span data-stu-id="c73c6-137">Sizing your VM</span></span>
<span data-ttu-id="c73c6-138">物理マシンに一定量のメモリや CPU 電源があるように、仮想マシンにも同様にあります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-138">Just as a physical machine has a certain amount of memory and CPU power, so does a virtual machine.</span></span> <span data-ttu-id="c73c6-139">Azure では、さまざまな価格ポイントでサイズが異なるさまざまな VM が提供されます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-139">Azure offers a range of VMs of differing sizes at different price points.</span></span> <span data-ttu-id="c73c6-140">選択したサイズによって、VM の処理能力、メモリ、ストレージの最大容量などが決まります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-140">The size that you choose will determine the VMs processing power, memory, and max storage capacity.</span></span>

> [!WARNING]
> <span data-ttu-id="c73c6-141">各サブスクリプションには、VM の作成に影響するクォータ制限があります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-141">There are quota limits on each subscription that can impact VM creation.</span></span> <span data-ttu-id="c73c6-142">既定では、1 つのリージョン内のすべての VM 全体で、20 を超える数の仮想_コア_を使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="c73c6-142">By default, you cannot have more than 20 virtual _cores_ across all VMs within a region.</span></span> <span data-ttu-id="c73c6-143">複数のリージョンに VM を分けるか、制限値を引き上げるための[オンライン要求](https://docs.microsoft.com/en-us/azure/azure-supportability/resource-manager-core-quotas-request)を申請してください。</span><span class="sxs-lookup"><span data-stu-id="c73c6-143">You can either split up VMs across regions or file an [online request](https://docs.microsoft.com/en-us/azure/azure-supportability/resource-manager-core-quotas-request) to increase your limits.</span></span>

<span data-ttu-id="c73c6-144">VM のサイズは、基本的なテストと運用向けの B シリーズから、大規模なコンピューティング タスク向けの H シリーズまで、複数のカテゴリに分類されています。</span><span class="sxs-lookup"><span data-stu-id="c73c6-144">VM sizes are grouped into categories, starting with the B-series for basic testing and running up to the H-series for massive computing tasks.</span></span> <span data-ttu-id="c73c6-145">実行する必要があるワークロードに基づいて VM サイズを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-145">You should select the size of the VM based on the workload you want to perform.</span></span> <span data-ttu-id="c73c6-146">VM 作成後に VM のサイズを変更することは可能ですが、そのためにはまず VM を停止する必要があるので、可能であれば最初から適切なサイズを選択することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c73c6-146">It is possible to change the size of a VM after it's been created, but the VM must be stopped first so it's best to size it appropriately from the start if possible.</span></span>

#### <a name="here-are-some-guidelines-based-on-the-scenario-you-are-targeting"></a><span data-ttu-id="c73c6-147">対象とするシナリオに基づいたガイドラインを以下に示します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-147">Here are some guidelines based on the scenario you are targeting.</span></span>

| <span data-ttu-id="c73c6-148">シナリオ</span><span class="sxs-lookup"><span data-stu-id="c73c6-148">What are you doing?</span></span> | <span data-ttu-id="c73c6-149">考慮事項</span><span class="sxs-lookup"><span data-stu-id="c73c6-149">Consider these sizes</span></span>
|-------|------------------|
| <span data-ttu-id="c73c6-150">**汎用コンピューティング/Web**: テストと開発、小規模から中規模のデータベース、軽度から中程度のトラフィックの Web サーバー。</span><span class="sxs-lookup"><span data-stu-id="c73c6-150">**General use computing / web** Testing and development, small to medium databases, or low to medium traffic web servers.</span></span> | <span data-ttu-id="c73c6-151">B、Dsv3、Dv3、DSv2、Dv2</span><span class="sxs-lookup"><span data-stu-id="c73c6-151">B, Dsv3, Dv3, DSv2, Dv2</span></span> |
| <span data-ttu-id="c73c6-152">**高負荷の計算タスク**: トラフィックが中程度の Web サーバー、ネットワーク アプライアンス、バッチ処理、アプリケーション サーバー。</span><span class="sxs-lookup"><span data-stu-id="c73c6-152">**Heavy computational tasks** Medium traffic web servers, network appliances, batch processes, and application servers.</span></span> | <span data-ttu-id="c73c6-153">Fsv2、Fs、F</span><span class="sxs-lookup"><span data-stu-id="c73c6-153">Fsv2, Fs, F</span></span> |
| <span data-ttu-id="c73c6-154">**大容量のメモリ使用量**: リレーショナル データベース サーバー、中規模から大規模のキャッシュ、メモリ内分析。</span><span class="sxs-lookup"><span data-stu-id="c73c6-154">**Large memory usage** Relational database servers, medium to large caches, and in-memory analytics.</span></span> | <span data-ttu-id="c73c6-155">Esv3、Ev3、M、GS、G、DSv2、Dv2</span><span class="sxs-lookup"><span data-stu-id="c73c6-155">Esv3, Ev3, M, GS, G, DSv2, Dv2</span></span> |
| <span data-ttu-id="c73c6-156">**データ ストレージと処理**: 高いディスク スループットと IO を必要とするビッグ データ、SQL、NoSQL データベース。</span><span class="sxs-lookup"><span data-stu-id="c73c6-156">**Data storage and processing** Big Data, SQL, and NoSQL databases which need high disk throughput and IO.</span></span> | <span data-ttu-id="c73c6-157">Ls</span><span class="sxs-lookup"><span data-stu-id="c73c6-157">Ls</span></span> |
| <span data-ttu-id="c73c6-158">**負荷の高いグラフィックスのレンダリング**やビデオ編集、ディープ ラーニングを使用したモデル トレーニングと推論 (ND)。</span><span class="sxs-lookup"><span data-stu-id="c73c6-158">**Heavy graphics rendering** or video editing, as well as model training and inferencing (ND) with deep learning.</span></span> | <span data-ttu-id="c73c6-159">NV、NC、NCv2、NCv3、ND</span><span class="sxs-lookup"><span data-stu-id="c73c6-159">NV, NC, NCv2, NCv3, ND</span></span> |
| <span data-ttu-id="c73c6-160">**ハイ パフォーマンス コンピューティング (HPC)**: 高スループットのネットワーク インターフェイスのオプションを備えた、最も高速かつ強力な CPU 仮想マシンが必要な場合。</span><span class="sxs-lookup"><span data-stu-id="c73c6-160">**High-performance computing (HPC)** If you need the fastest and most powerful CPU virtual machines with optional high-throughput network interfaces.</span></span> | <span data-ttu-id="c73c6-161">H</span><span class="sxs-lookup"><span data-stu-id="c73c6-161">H</span></span> |

## <a name="choosing-storage-options"></a><span data-ttu-id="c73c6-162">ストレージ オプションを選択する</span><span class="sxs-lookup"><span data-stu-id="c73c6-162">Choosing storage options</span></span>

<span data-ttu-id="c73c6-163">次にストレージに関する一連の決定事項を示します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-163">The next set of decisions revolve around storage.</span></span> <span data-ttu-id="c73c6-164">まず、ディスク テクノロジを選択できます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-164">First, you can choose the disk technology.</span></span> <span data-ttu-id="c73c6-165">オプションには、従来の円盤状の記憶媒体ベースのハード ディスク ドライブ (HDD) や、より最新のソリッドステート ドライブ (SSD) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-165">Options include a traditional platter-based hard disk drive (HDD) or a more modern solid-state drive (SSD).</span></span> <span data-ttu-id="c73c6-166">ハードウェアを購入する場合と同じように、SSD ストレージは高コストですがパフォーマンスに優れています。</span><span class="sxs-lookup"><span data-stu-id="c73c6-166">Just like the hardware you purchase, SSD storage costs more but provides better performance.</span></span>

> [!TIP]
> <span data-ttu-id="c73c6-167">SSD ストレージには、standard と premium という 2 つのレベルがあります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-167">There are two levels of SSD storage available: standard and premium.</span></span> <span data-ttu-id="c73c6-168">Standard SSD ディスクは、ワークロードは標準的であるが、パフォーマンスを向上させたい場合に選択します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-168">Choose Standard SSD disks if you have normal workloads but want better performance.</span></span> <span data-ttu-id="c73c6-169">I/O 集中型ワークロードまたは非常に迅速にデータを処理する必要があるミッション クリティカルなシステムの場合は、Premium SSD ディスクを選択します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-169">Choose Premium SSD disks if you have I/O intensive workloads or mission-critical systems that need to process data very quickly.</span></span>

### <a name="mapping-storage-to-disks"></a><span data-ttu-id="c73c6-170">ディスクへのストレージのマッピング</span><span class="sxs-lookup"><span data-stu-id="c73c6-170">Mapping storage to disks</span></span>

<span data-ttu-id="c73c6-171">Azure では、VM 用の物理ディスクを表すために仮想ハード ディスク (VHD) が使用されます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-171">Azure uses Virtual hard disks (VHDs) to represent physical disks for the VM.</span></span> <span data-ttu-id="c73c6-172">VHD は、論理形式とディスク ドライブのデータをレプリケートしますが、Azure Storage アカウントにページ BLOB として格納されます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-172">VHDs replicate the logical format and data of a disk drive but are stored as page blobs in an Azure Storage account.</span></span> <span data-ttu-id="c73c6-173">ディスクごとに、使用するストレージの種類 (SSD または HDD) を選択できます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-173">You can choose on a per-disk basis what type of storage it should use (SSD or HDD).</span></span> <span data-ttu-id="c73c6-174">これにより、一般にはディスクで実行する予定の I/O に基づいて、各ディスクのパフォーマンスを制御することができます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-174">This allows you to control the performance of each disk, likely based on the I/O you plan to perform on it.</span></span>

<span data-ttu-id="c73c6-175">既定では、2 個の仮想ハード ディスク (VHD) が Windows VM に作成されます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-175">By default, two virtual hard disks (VHDs) will be created for your Windows VM:</span></span>

1. <span data-ttu-id="c73c6-176">**オペレーティング システム ディスク**。</span><span class="sxs-lookup"><span data-stu-id="c73c6-176">The **Operating System disk**.</span></span> <span data-ttu-id="c73c6-177">これはプライマリまたは C: ドライブであり、最大容量は 2048 GB です。</span><span class="sxs-lookup"><span data-stu-id="c73c6-177">This is your primary or C: drive and has a maximum capacity of 2048 GB.</span></span>

1. <span data-ttu-id="c73c6-178">**一時ディスク**。</span><span class="sxs-lookup"><span data-stu-id="c73c6-178">A **Temporary disk**.</span></span> <span data-ttu-id="c73c6-179">OS または任意のアプリ用の、一時的なストレージを提供します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-179">This provides temporary storage for the OS or any apps.</span></span> <span data-ttu-id="c73c6-180">既定では D: ドライブとして構成されており、VM サイズに基づいてサイズが決定します。そのため、Windows ページング ファイル用の場所として最適です。</span><span class="sxs-lookup"><span data-stu-id="c73c6-180">It is configured as the D: drive by default and is sized based on the VM size, making it an ideal location for the Windows paging file.</span></span>

> [!WARNING]
> <span data-ttu-id="c73c6-181">一時ディスクは永続的ではありません。</span><span class="sxs-lookup"><span data-stu-id="c73c6-181">The temporary disk is not persistent.</span></span> <span data-ttu-id="c73c6-182">このディスクには、いつ失われてもかまわないデータのみを書き込むようにしてください。</span><span class="sxs-lookup"><span data-stu-id="c73c6-182">You should only write data to this disk that you are willing to lose at any time.</span></span>

#### <a name="what-about-data"></a><span data-ttu-id="c73c6-183">データについて</span><span class="sxs-lookup"><span data-stu-id="c73c6-183">What about data?</span></span>

<span data-ttu-id="c73c6-184">データは、OS と一緒に C: ドライブに保存することもできますが、より優れたアプローチは、専用の_データ ディスク_を作成することです。</span><span class="sxs-lookup"><span data-stu-id="c73c6-184">You can store data on the C: drive along with the OS, but a better approach is to create dedicated _data disks_.</span></span> <span data-ttu-id="c73c6-185">追加のディスクを作成して VM にアタッチできます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-185">You can create and attach additional disks to the VM.</span></span> <span data-ttu-id="c73c6-186">各ディスクは最大 4095 GB のデータを保存でき、ストレージの最大容量は、選択した VM サイズによって決まります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-186">Each disk can hold up to 4095 GB of data, with the maximum amount of storage determined by the VM size you select.</span></span>

> [!NOTE]
> <span data-ttu-id="c73c6-187">興味深い機能として、実際のディスクから VHD イメージを作成する機能があります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-187">An interesting capability is to create a VHD image from a real disk.</span></span> <span data-ttu-id="c73c6-188">これにより、オンプレミスのコンピューターからクラウドに "_既存_" 情報を簡単に移行できます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-188">This allows you to easily migrate _existing_ information from an on-premise computer to the cloud.</span></span>

### <a name="unmanaged-vs-managed-disks"></a><span data-ttu-id="c73c6-189">アンマネージドまたはマネージド ディスク</span><span class="sxs-lookup"><span data-stu-id="c73c6-189">Unmanaged vs. Managed disks</span></span>

<span data-ttu-id="c73c6-190">最後に行うストレージの選択は、**アンマネージド** ディスクを使用するか、または**マネージド** ディスクを使用するかです。</span><span class="sxs-lookup"><span data-stu-id="c73c6-190">The final storage choice you'll make is whether to use **unmanaged** or **managed** disks.</span></span>

<span data-ttu-id="c73c6-191">アンマネージド ディスクを使用する場合、VM ディスクに対応する VHD を保持するために使用するストレージ アカウントを自分で管理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-191">With unmanaged disks, you are responsible for the storage accounts that are used to hold the VHDs that correspond to your VM disks.</span></span> <span data-ttu-id="c73c6-192">使用する領域の容量に対応したストレージ アカウントの料金を負担します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-192">You pay the storage account rates for the amount of space you use.</span></span> <span data-ttu-id="c73c6-193">1 つのストレージ アカウントには、I/O 操作数 20,000/秒という固定レート制限があります。これは、1 つのストレージ アカウントが最大スロットルで 40 個の標準仮想ハード ディスクをサポートできることを意味します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-193">A single storage account has a fixed rate limit of 20,000 I/O operations/sec. This means that a single storage account is capable of supporting 40 standard virtual hard disks at full throttle.</span></span> <span data-ttu-id="c73c6-194">スケールアウトする必要がある場合は、複数のストレージ アカウントが必要であり、複雑になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-194">If you need to scale out, then you need more than one storage account, which can get complicated.</span></span>

<span data-ttu-id="c73c6-195">マネージド ディスクは、より新しい、お勧めのディスク ストレージ モデルです。</span><span class="sxs-lookup"><span data-stu-id="c73c6-195">Managed disks are the newer and recommended disk storage model.</span></span> <span data-ttu-id="c73c6-196">ストレージ アカウントを管理する負担を Azure に移すことで、この複雑さを適切に解決します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-196">They elegantly solve this complexity by putting the burden of managing the storage accounts onto Azure.</span></span> <span data-ttu-id="c73c6-197">ユーザーはディスクの種類 (Premium または Standard) とディスクのサイズを指定し、ディスクおよびディスク用ストレージの "_両方_" の作成と管理は Azure によって行われます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-197">You specify the disk type (Premium or Standard) and the size of the disk and Azure creates and manages both the disk _and_ the storage it uses.</span></span> <span data-ttu-id="c73c6-198">ストレージ アカウント制限について気にする必要がないため、簡単にスケールアウトできます。その他にもいくつかの利点があります。</span><span class="sxs-lookup"><span data-stu-id="c73c6-198">You don't have to worry about storage account limits, which makes them easier to scale out. They also offer several other benefits:</span></span>

- <span data-ttu-id="c73c6-199">**信頼性の向上**: Azure では、高信頼性の VM に関連付けられた VHD が Azure ストレージのさまざまな部分に配置されて、同等のレベルの回復力が提供されます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-199">**Increased reliability**: Azure ensures that VHDs associated with high-reliability VMs will be placed in different parts of Azure storage to provide similar levels of resilience.</span></span>
- <span data-ttu-id="c73c6-200">**セキュリティの向上**: マネージド ディスクは、リソース グループで実際に管理されているリソースです。</span><span class="sxs-lookup"><span data-stu-id="c73c6-200">**Better security**: Managed disks are truly managed resources in the resource group.</span></span> <span data-ttu-id="c73c6-201">つまり、ロールベースのアクセス制御を使用して、VHD データを使用できるユーザーを制限することができます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-201">This means they can use role-based access control to restrict who can work with the VHD data.</span></span>
- <span data-ttu-id="c73c6-202">**スナップショットのサポート**: スナップショットを使用して、VHD の読み取り専用コピーを作成できます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-202">**Snapshot support**: Snapshots can be used to create a read-only copy of a VHD.</span></span> <span data-ttu-id="c73c6-203">所有している VM をシャットダウンする必要がありますが、スナップショットの作成に要する時間はわずか数秒です。</span><span class="sxs-lookup"><span data-stu-id="c73c6-203">You have to shut down the owning VM but creating the snapshot only takes a few seconds.</span></span> <span data-ttu-id="c73c6-204">完了したら VM の電源をオンにし、スナップショットを使って重複した VM を作成して、運用の問題のトラブルシューティングを行うことや、スナップショットが取得された特定の時点まで VM をロールバックすることができます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-204">Once it's done you can power on the VM and use the snapshot to create a duplicate VM to troubleshoot a production issue or rollback the VM to the point in time that the snapshot was taken.</span></span>
- <span data-ttu-id="c73c6-205">**バックアップのサポート**: Azure Backup を使用して、ディザスター リカバリーのために、マネージド ディスクを異なるリージョンに自動的にバックアップできます。VM のサービスに影響はありません。</span><span class="sxs-lookup"><span data-stu-id="c73c6-205">**Backup support**: Managed disks can be automatically backed up to different regions for disaster recovery with Azure Backup all without affecting the service of the VM.</span></span>

## <a name="network-communication"></a><span data-ttu-id="c73c6-206">ネットワーク通信</span><span class="sxs-lookup"><span data-stu-id="c73c6-206">Network communication</span></span>

<span data-ttu-id="c73c6-207">仮想マシンは、仮想ネットワーク (VNet) を使用して外部のリソースと通信します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-207">Virtual machines communicate with external resources using a virtual network (VNet).</span></span> <span data-ttu-id="c73c6-208">VNet は、リソースが通信を行う 1 つのリージョン内のプライベート ネットワークを表します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-208">The VNet represents a private network in a single region that your resources communicate on.</span></span> <span data-ttu-id="c73c6-209">仮想ネットワークは、ユーザーがオンプレミスで管理するネットワークと同じようなものです。</span><span class="sxs-lookup"><span data-stu-id="c73c6-209">A virtual network is just like the networks you manage on-premises.</span></span> <span data-ttu-id="c73c6-210">サブネットに分割してリソースを分離したり、他のネットワーク (オンプレミスのネットワークを含む) に接続したり、トラフィック規則を適用して受信および送信接続を管理したりできます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-210">You can divide them up with subnets to isolate resources, connect them to other networks (including your on-premises networks), and apply traffic rules to govern inbound and outbound connections.</span></span>

### <a name="planning-your-network"></a><span data-ttu-id="c73c6-211">ネットワークの計画</span><span class="sxs-lookup"><span data-stu-id="c73c6-211">Planning your network</span></span>

<span data-ttu-id="c73c6-212">新しい VM を作成するとき、新しい仮想ネットワークを作成するか、リージョン内の既存の VNet を使用するかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="c73c6-212">When you create a new VM, you will have the option of creating a new virtual network, or using an existing VNet in your region.</span></span>

<span data-ttu-id="c73c6-213">Azure によって VM とネットワークが作成されるようにすると簡単ですが、おそらくほとんどのシナリオにおいては最適ではありません。</span><span class="sxs-lookup"><span data-stu-id="c73c6-213">Having Azure create the network together with the VM is simple but it's likely not ideal for most scenarios.</span></span> <span data-ttu-id="c73c6-214">アーキテクチャ内のすべてのコンポーネントについて、ネットワーク要件を "_前もって_" 計画し、必要な VNet 構造を別個に作成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c73c6-214">It's better to plan your network requirements _up-front_ for all the components in your architecture and create the VNet structure you will need separately.</span></span> <span data-ttu-id="c73c6-215">その後、VM を作成して、既に作成されている VNet に配置します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-215">Then create the VMs and place them into the already-created VNets.</span></span>

<span data-ttu-id="c73c6-216">このモジュールでは、後でもう少し詳しく仮想ネットワークについて説明します。</span><span class="sxs-lookup"><span data-stu-id="c73c6-216">We'll look more at virtual networks a bit later in this module.</span></span> <span data-ttu-id="c73c6-217">この情報の一部を適用して、Azure で VM を作成してみましょう。</span><span class="sxs-lookup"><span data-stu-id="c73c6-217">Let's apply some of this knowledge and create a VM in Azure.</span></span>