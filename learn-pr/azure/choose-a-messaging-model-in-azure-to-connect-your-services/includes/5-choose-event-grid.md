<span data-ttu-id="21a14-101">多くのアプリケーションでは、何かが発生したときやいくつかのオブジェクトが変更されたとき、パブリックサブスクライブ モデルを使用して、分散されているコンポーネントに通知を行います。</span><span class="sxs-lookup"><span data-stu-id="21a14-101">Many applications use a public-subscribe model to notify distributed components that something happened, or that some object changed.</span></span> <span data-ttu-id="21a14-102">Azure で実行される Web API を使用する音楽共有アプリケーションがあるとします。</span><span class="sxs-lookup"><span data-stu-id="21a14-102">Suppose you have a music-sharing application with a Web API that runs in Azure.</span></span> <span data-ttu-id="21a14-103">あるユーザーから新しい曲がアップロードされた場合、アップロードされたジャンルに関心を持つ世界中のユーザーのデバイスを対象に、インストールされているすべてのモバイル アプリに通知する必要があります。</span><span class="sxs-lookup"><span data-stu-id="21a14-103">When a new song is uploaded by a user, you need to notify all the mobile apps installed on user devices around the world who are interested in the genre that was just uploaded.</span></span>

<span data-ttu-id="21a14-104">このようなアーキテクチャの場合、音声ファイルの発行者は、共有される音楽に関心を持つサブスクライバーを知っている必要はありません。</span><span class="sxs-lookup"><span data-stu-id="21a14-104">In this architecture, the publisher of the sound file doesn't need to know about any of the subscribers interested in the music being shared.</span></span> <span data-ttu-id="21a14-105">さらに、この新しい曲と、それに関心があるかどうかを任意で決めることができる複数のサブスクライバーという、一対多の関係を持たせたいところです。</span><span class="sxs-lookup"><span data-stu-id="21a14-105">In addition, we want to have a one-to-many relationship where we can have multiple subscribers who can optionally decide whether they are interested in this new song.</span></span> <span data-ttu-id="21a14-106">Azure Event Grid は、このようなアーキテクチャに最適なソリューションです。</span><span class="sxs-lookup"><span data-stu-id="21a14-106">Azure Event Grid is a perfect solution for this sort of architecture.</span></span>

## <a name="what-is-event-grid"></a><span data-ttu-id="21a14-107">Event Grid とは</span><span class="sxs-lookup"><span data-stu-id="21a14-107">What is Event Grid?</span></span>
<span data-ttu-id="21a14-108">Event Grid とは、Azure Blob Storage アカウントや Azure Media Services などのさまざまなソースから Azure Functions や Webhook などへのさまざまなサブスクライバーに_イベント_を配布するサービスです。</span><span class="sxs-lookup"><span data-stu-id="21a14-108">Event Grid is a service that distributes _events_ from different sources, such as Azure Blob storage accounts or Azure Media Services, to different subscribers, such as Azure Functions or Webhooks.</span></span>

### <a name="what-is-an-event-source"></a><span data-ttu-id="21a14-109">イベント ソースとは</span><span class="sxs-lookup"><span data-stu-id="21a14-109">What is an event source?</span></span>
<span data-ttu-id="21a14-110">イベント ソースとは、イベントを生成できるコンポーネントです ("パブリッシャー" とも呼ばれます)。</span><span class="sxs-lookup"><span data-stu-id="21a14-110">An event source is any component that can generate an event (sometimes referred to as a "publisher").</span></span> <span data-ttu-id="21a14-111">たとえば、ユーザーが Microsoft の Web API を介して BLOB ストレージ アカウントに新しい曲を追加するとします。</span><span class="sxs-lookup"><span data-stu-id="21a14-111">For example, a user might add a new song to a Blob storage account through our Web API.</span></span> <span data-ttu-id="21a14-112">その結果、Event Grid から関心のあるイベント サブスクライバーに配布できるイベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="21a14-112">This generates an event that Event Grid can distribute to interested event subscribers.</span></span> <span data-ttu-id="21a14-113">パブリッシャーはイベントを送信しますが、その受信側や処理側には何も期待していません。</span><span class="sxs-lookup"><span data-stu-id="21a14-113">Publishers send events, but have no expectation of what will receive or process them.</span></span>

### <a name="what-is-an-event-subscriber"></a><span data-ttu-id="21a14-114">イベント サブスクライバーとは</span><span class="sxs-lookup"><span data-stu-id="21a14-114">What is an event subscriber?</span></span>
<span data-ttu-id="21a14-115">イベント サブスクライバーとは、Event Grid からイベントを受け取ることができるすべてのコンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="21a14-115">An event subscriber is any component that can receive events from Event Grid.</span></span> <span data-ttu-id="21a14-116">たとえば、Azure Functions は、新しい曲が BLOB ストレージ アカウントに追加されたことに応答してコードを実行できます。</span><span class="sxs-lookup"><span data-stu-id="21a14-116">For example, Azure Functions can execute code in response to the new song being added to the Blob storage account.</span></span> <span data-ttu-id="21a14-117">サブスクライバーは、処理するイベントを決めることができます。新しいイベントが使用できるようになると、関心のある各サブスクライバーに Event Grid から効率的に通知されます。ポーリングは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="21a14-117">Subscribers can decide which events they want to handle and Event Grid will efficiently notify each interested subscriber when a new event is available - no polling required.</span></span>

<span data-ttu-id="21a14-118">Event Grid は、ほとんどの Azure サービスをパブリッシャーまたはサブスクライバーとしてサポートしています。また、サードパーティのサービスでも使用できます。</span><span class="sxs-lookup"><span data-stu-id="21a14-118">Event Grid supports most Azure services as a publisher or subscriber and can also be used with third-party services.</span></span> <span data-ttu-id="21a14-119">そのため、パブリッシャーからサブスクライバーに状態の変化について通知できる、動的にスケーラブルで低コストのメッセージング システムを実現できます。</span><span class="sxs-lookup"><span data-stu-id="21a14-119">It provides a dynamically scalable, low-cost, messaging system that allows publishers to notify subscribers about a status change.</span></span>

![Event Grid のソースとサブスクライバーの図](../media-draft/5-event-grid.png)

> [!NOTE]
> <span data-ttu-id="21a14-121">Event Grid は、何らかの変化について通知するイベントをサブスクライバーに送信しますが、変更された_実際のオブジェクト_はイベント配信には含まれません。</span><span class="sxs-lookup"><span data-stu-id="21a14-121">Event Grid sends an event to notify subscribers about something changing - however the _actual object_ that was changed is not part of the event delivery.</span></span>

## <a name="types-of-event-sources"></a><span data-ttu-id="21a14-122">イベント ソースの種類</span><span class="sxs-lookup"><span data-stu-id="21a14-122">Types of event sources</span></span>
<span data-ttu-id="21a14-123">イベントは、次の種類の Azure リソースを使用して生成することができます。</span><span class="sxs-lookup"><span data-stu-id="21a14-123">Events can be generated by the following Azure resource types:</span></span>

- <span data-ttu-id="21a14-124">**Azure サブスクリプションとリソース グループ。**</span><span class="sxs-lookup"><span data-stu-id="21a14-124">**Azure subscriptions and resource groups.**</span></span> <span data-ttu-id="21a14-125">サブスクリプションおよびリソース グループは、Azure の管理オプションに関連するイベントを生成します。</span><span class="sxs-lookup"><span data-stu-id="21a14-125">Subscriptions and resource groups generate events related to management operations in Azure.</span></span> <span data-ttu-id="21a14-126">たとえば、ユーザーが仮想マシンを作成した場合、このソースによってイベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="21a14-126">For example, when a user creates a virtual machine, this source generates an event.</span></span>
- <span data-ttu-id="21a14-127">**ストレージ アカウント。**</span><span class="sxs-lookup"><span data-stu-id="21a14-127">**Storage accounts.**</span></span> <span data-ttu-id="21a14-128">ストレージ アカウントは、ユーザーが BLOB、ファイル、テーブル エントリ、またはキュー メッセージを追加するときにイベントを生成します。</span><span class="sxs-lookup"><span data-stu-id="21a14-128">Storage accounts can generate events when users add blobs, files, table entries, or queue messages.</span></span> <span data-ttu-id="21a14-129">イベント ソースとしては、BLOB アカウントと汎用アカウントの両方を使用できます。</span><span class="sxs-lookup"><span data-stu-id="21a14-129">You can use both blob accounts and general-purpose accounts as event sources.</span></span>
- <span data-ttu-id="21a14-130">**Media Services。**</span><span class="sxs-lookup"><span data-stu-id="21a14-130">**Media Services.**</span></span> <span data-ttu-id="21a14-131">Media Services は、動画および音声メディアをホストし、メディア ファイルの高度な管理機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="21a14-131">Media Services hosts video and audio media, and provides advanced management features for media files.</span></span> <span data-ttu-id="21a14-132">Media Services では、エンコード ジョブが動画ファイルで開始されたときや完了したときに、イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="21a14-132">Media Services can generate events when an encoding job is started or completed on a video file.</span></span>
- <span data-ttu-id="21a14-133">**Azure IoT Hub。**</span><span class="sxs-lookup"><span data-stu-id="21a14-133">**Azure IoT Hub.**</span></span> <span data-ttu-id="21a14-134">IoT Hub は、IoT デバイスと通信し、それらからテレメトリを収集します。</span><span class="sxs-lookup"><span data-stu-id="21a14-134">IoT Hub communicates with and gathers telemetry from IoT devices.</span></span> <span data-ttu-id="21a14-135">そのような通信を受信すると、イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="21a14-135">It can generate events whenever such communications arrive.</span></span>
- <span data-ttu-id="21a14-136">**カスタム イベント。**</span><span class="sxs-lookup"><span data-stu-id="21a14-136">**Custom events.**</span></span> <span data-ttu-id="21a14-137">カスタム イベントは、REST API を使用するか、Java、GO、.NET、Node、Python および Ruby 上で Azure SDK を使用して生成されます。</span><span class="sxs-lookup"><span data-stu-id="21a14-137">Custom events can be generated using the REST API, or with the Azure SDK on Java, GO, .NET, Node, Python, and Ruby.</span></span> <span data-ttu-id="21a14-138">たとえば、Azure App Service の Web Apps 機能で、カスタム イベントを作成できます。</span><span class="sxs-lookup"><span data-stu-id="21a14-138">For example, you could create a custom event in the Web Apps feature of Azure App Service.</span></span> <span data-ttu-id="21a14-139">これは、ストレージ キューからメッセージがピックアップされると、ワーカー ロールで発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="21a14-139">This can happen in the worker role, when it picks up a message from a storage queue.</span></span>

<span data-ttu-id="21a14-140">Azure のさまざまなイベント ソースが広範囲に統合されていることにより、Event Grid がほぼすべての Azure リソースに関連するイベントを配信できることが保証されています。</span><span class="sxs-lookup"><span data-stu-id="21a14-140">This broad integration with diverse event sources within Azure ensures that Event Grid can distribute events that relate to almost any Azure resource.</span></span>

## <a name="topics"></a><span data-ttu-id="21a14-141">トピック</span><span class="sxs-lookup"><span data-stu-id="21a14-141">Topics</span></span>
<span data-ttu-id="21a14-142">Event Grid のトピックとは、関連イベントのコレクションです。</span><span class="sxs-lookup"><span data-stu-id="21a14-142">In Event Grid, a topic is a collection of related events.</span></span> <span data-ttu-id="21a14-143">ソースからイベントが発行されるとき、それらのイベントでトピックが 1 つのみ必要か、複数のトピックに分割するかを決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="21a14-143">When you publish events from a source, you decide whether those events need only a single topic or to be divided into multiple topics.</span></span> <span data-ttu-id="21a14-144">イベントを受信して処理するコンポーネントは、受信するイベントを決定するために、トピックにサブスクライブします。</span><span class="sxs-lookup"><span data-stu-id="21a14-144">Components that receive and handle events subscribe to topics to determine the events they will receive.</span></span>

## <a name="subscriptions"></a><span data-ttu-id="21a14-145">サブスクリプション</span><span class="sxs-lookup"><span data-stu-id="21a14-145">Subscriptions</span></span>
<span data-ttu-id="21a14-146">イベント ハンドラーはサブスクリプションを使用して、トピック内のどのイベントを受け取るか Event Grid に伝えます。</span><span class="sxs-lookup"><span data-stu-id="21a14-146">Event handlers use subscriptions to tell Event Grid which events in a topic they want to receive.</span></span> <span data-ttu-id="21a14-147">サブスクリプションは、Event Grid がイベント通知を送信する場所であるエンドポイントの修正も行います。</span><span class="sxs-lookup"><span data-stu-id="21a14-147">The subscription also fixes the endpoint - this is the location that Event Grid sends event notifications.</span></span> <span data-ttu-id="21a14-148">サブスクリプションでは、その種類またはその件名でイベントをフィルタリングして、イベント ハンドラーが該当するイベントのみを受け取るようにすることもできます。</span><span class="sxs-lookup"><span data-stu-id="21a14-148">A subscription can also filter events by their type or by their subject, so you can ensure an event handler only receives relevant events.</span></span>

## <a name="event-handlers"></a><span data-ttu-id="21a14-149">イベント ハンドラー</span><span class="sxs-lookup"><span data-stu-id="21a14-149">Event handlers</span></span>
<span data-ttu-id="21a14-150">Azure の次のオブジェクト型では、Event Grid からイベントを受け取ってそれを処理することができます。</span><span class="sxs-lookup"><span data-stu-id="21a14-150">The following object types in Azure can receive and handle events from Event Grid:</span></span>

- <span data-ttu-id="21a14-151">**Azure Functions。**</span><span class="sxs-lookup"><span data-stu-id="21a14-151">**Azure Functions.**</span></span> <span data-ttu-id="21a14-152">Azure Function は、ホスト仮想サーバーやコンテナーなしで Azure で実行されるカスタム コードで構成されます。</span><span class="sxs-lookup"><span data-stu-id="21a14-152">An Azure function consists of custom code that runs in Azure, with no host virtual server or container.</span></span> <span data-ttu-id="21a14-153">イベントに対する応答をコードでカスタマイズする場合、Azure Function をイベント ハンドラーとして使用します。</span><span class="sxs-lookup"><span data-stu-id="21a14-153">Use an Azure function as an event handler when you want to code a custom response to the event.</span></span>
- <span data-ttu-id="21a14-154">**Webhook。**</span><span class="sxs-lookup"><span data-stu-id="21a14-154">**Webhooks.**</span></span> <span data-ttu-id="21a14-155">Webhook とは、プッシュ アーキテクチャを実装する Web API です。</span><span class="sxs-lookup"><span data-stu-id="21a14-155">A webhook is web API that implements a push architecture.</span></span>
- <span data-ttu-id="21a14-156">**Azure Logic Apps。**</span><span class="sxs-lookup"><span data-stu-id="21a14-156">**Azure Logic Apps.**</span></span> <span data-ttu-id="21a14-157">Azure Logic Apps は、ワークフローとして、ビジネス プロセスをホストします。</span><span class="sxs-lookup"><span data-stu-id="21a14-157">An Azure logic app hosts a business process as a workflow.</span></span>
- <span data-ttu-id="21a14-158">**Microsoft Flow。**</span><span class="sxs-lookup"><span data-stu-id="21a14-158">**Microsoft Flow.**</span></span> <span data-ttu-id="21a14-159">Flow でも、ワークフローがホストされます。技術スタッフ以外が簡単に使用できます。</span><span class="sxs-lookup"><span data-stu-id="21a14-159">Flow also hosts workflows, but it is easier for non-technical staff to use.</span></span>

## <a name="should-you-use-event-grid"></a><span data-ttu-id="21a14-160">Event Grid を使用する場合</span><span class="sxs-lookup"><span data-stu-id="21a14-160">Should you use Event Grid?</span></span>
<span data-ttu-id="21a14-161">次の機能が必要な場合に、Event Grid を使用します。</span><span class="sxs-lookup"><span data-stu-id="21a14-161">Use Event Grid when you need these features:</span></span>

- <span data-ttu-id="21a14-162">**簡単さ。**</span><span class="sxs-lookup"><span data-stu-id="21a14-162">**Simplicity.**</span></span> <span data-ttu-id="21a14-163">Event Grid では、ソースをサブスクライバーに容易に接続することができます。</span><span class="sxs-lookup"><span data-stu-id="21a14-163">It is very easy to connect sources to subscribers in Event Grid.</span></span>
- <span data-ttu-id="21a14-164">**高度なフィルタリング。**</span><span class="sxs-lookup"><span data-stu-id="21a14-164">**Advanced filtering.**</span></span> <span data-ttu-id="21a14-165">サブスクリプションでは、トピックから受け取るイベントを厳しく制限できます。</span><span class="sxs-lookup"><span data-stu-id="21a14-165">Subscriptions have close control over the events they receive from a topic.</span></span>
- <span data-ttu-id="21a14-166">**展開。** 同じイベントやトピックにエンドポイントを無制限にサブスクライブさせることができます。</span><span class="sxs-lookup"><span data-stu-id="21a14-166">**Fan-out.** You can subscribe an unlimited number of endpoints to the same events and topics.</span></span>
- <span data-ttu-id="21a14-167">**信頼性。**</span><span class="sxs-lookup"><span data-stu-id="21a14-167">**Reliability.**</span></span> <span data-ttu-id="21a14-168">Event Grid では、イベントの配信を、各サブスクリプションに対して最大で 24 時間再試行します。</span><span class="sxs-lookup"><span data-stu-id="21a14-168">Event Grid retries event delivery for up to 24 hours for each subscription.</span></span>
- <span data-ttu-id="21a14-169">**イベントあたり従量課金。**</span><span class="sxs-lookup"><span data-stu-id="21a14-169">**Pay-per-event.**</span></span> <span data-ttu-id="21a14-170">送信するイベント数のみに対して支払いが行われます。</span><span class="sxs-lookup"><span data-stu-id="21a14-170">Pay only for the number of events that you transmit.</span></span>

## <a name="summary"></a><span data-ttu-id="21a14-171">まとめ</span><span class="sxs-lookup"><span data-stu-id="21a14-171">Summary</span></span>
<span data-ttu-id="21a14-172">Event Grid は、単純ですが、汎用的なイベント配信システムです。</span><span class="sxs-lookup"><span data-stu-id="21a14-172">Event Grid is a simple but versatile event distribution system.</span></span> <span data-ttu-id="21a14-173">これを使用すると、確実かつ迅速に個別のイベントをサブスクライバーに配信できます。</span><span class="sxs-lookup"><span data-stu-id="21a14-173">Use it to deliver discrete events to subscribers, which will receive those events reliably and quickly.</span></span> <span data-ttu-id="21a14-174">検討するメッセージング モデルはもう 1 つあります。大規模な_ストリーム_のイベントを配信するにはどうすればよいでしょうか。</span><span class="sxs-lookup"><span data-stu-id="21a14-174">We have one more messaging model to examine - what if we want to deliver a large _stream_ of events?</span></span> <span data-ttu-id="21a14-175">このようなシナリオの場合、Event Grid は、一度の配信で 1 つのイベントを配信するように設計されているため、最適ではありません。</span><span class="sxs-lookup"><span data-stu-id="21a14-175">In this scenario, Event Grid isn't a great solution because it's designed for one-event-at-a-time delivery.</span></span> <span data-ttu-id="21a14-176">代わりに、別の Azure サービスである Event Hubs に目を向ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="21a14-176">Instead, we need to turn to another Azure service: Event Hubs.</span></span>