<span data-ttu-id="ed347-101">多くのアプリケーションでは、何かが発生したときやいくつかのオブジェクトが変更されたとき、イベントを使用して、分散されているコンポーネントに通知を行います。</span><span class="sxs-lookup"><span data-stu-id="ed347-101">Many applications use events to notify distributed components that something happened, or that some object changed.</span></span> <span data-ttu-id="ed347-102">それらのイベントは、Azure で Azure Event Grid を使用して、簡単に配布することができます。</span><span class="sxs-lookup"><span data-stu-id="ed347-102">You can use Azure Event Grid to make it easy to distribute those events through Azure.</span></span>

<span data-ttu-id="ed347-103">Azure で実行される Web API を使用する音楽共有アプリケーションがあるとします。</span><span class="sxs-lookup"><span data-stu-id="ed347-103">Suppose you have a music-sharing application with a web API that runs in Azure.</span></span> <span data-ttu-id="ed347-104">ユーザーが新しい音声ファイルをアップロードした場合、世界中のユーザー デバイスにインストールされているモバイル アプリにそれを通知する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ed347-104">When a new sound file is uploaded by a user, you need to notify all the mobile apps installed on user devices around the world.</span></span>

<span data-ttu-id="ed347-105">これを確実に迅速に実行するには、Event Grid へのサブスクリプションを使用できます。</span><span class="sxs-lookup"><span data-stu-id="ed347-105">You can use subscriptions to Event Grid to achieve this reliably and quickly.</span></span>

## <a name="what-is-event-grid"></a><span data-ttu-id="ed347-106">Event Grid とは</span><span class="sxs-lookup"><span data-stu-id="ed347-106">What is Event Grid?</span></span>

<span data-ttu-id="ed347-107">Event Grid とは、Azure Blob Storage アカウントや Azure Media Services などのソースから Azure Functions や Webhook などのサブスクライバーにイベントを配布するサービスです。</span><span class="sxs-lookup"><span data-stu-id="ed347-107">Event Grid is a service that distributes events from sources, such as Azure Blob storage accounts or Azure Media Services, to subscribers, such as Azure Functions or webhooks.</span></span>

<span data-ttu-id="ed347-108">イベント ソースとは、イベントを生成することができるすべてのコンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="ed347-108">An event source is any component that can generate an event.</span></span> <span data-ttu-id="ed347-109">たとえば、ユーザーが Blob Storage アカウントに新しいメディア ファイルを追加するとします。</span><span class="sxs-lookup"><span data-stu-id="ed347-109">For example, a user might add a new media file to a Blob storage account.</span></span> <span data-ttu-id="ed347-110">これにより Event Grid が配布できるイベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="ed347-110">This generates an event that Event Grid can distribute.</span></span>

<span data-ttu-id="ed347-111">イベント サブスクライバーとは、Event Grid からイベントを受け取ることができるすべてのコンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="ed347-111">An event subscriber is any component that can receive events from Event Grid.</span></span> <span data-ttu-id="ed347-112">たとえば、Functions では、BLOB ストレージ アカウントの新しいメディア ファイルに応答するコードを実行できます。</span><span class="sxs-lookup"><span data-stu-id="ed347-112">For example, Functions can execute code that responds to the new media file in the Blob storage account.</span></span>

<span data-ttu-id="ed347-113">Event Grid は、複数のサブスクライバーにソースを接続するのを容易にします。</span><span class="sxs-lookup"><span data-stu-id="ed347-113">Event Grid makes it easy to connect sources to multiple subscribers.</span></span>

![Event Grid のソースとサブスクライバーの図](../images/6-event-grid.png)

## <a name="event-sources"></a><span data-ttu-id="ed347-115">イベント ソース</span><span class="sxs-lookup"><span data-stu-id="ed347-115">Event sources</span></span>

<span data-ttu-id="ed347-116">イベントは、次の種類の Azure リソースを使用して生成することができます。</span><span class="sxs-lookup"><span data-stu-id="ed347-116">Events can be generated by the following Azure resource types:</span></span>

- <span data-ttu-id="ed347-117">**Azure サブスクリプションとリソース グループ。**</span><span class="sxs-lookup"><span data-stu-id="ed347-117">**Azure subscriptions and resource groups.**</span></span> <span data-ttu-id="ed347-118">サブスクリプションおよびリソース グループは、Azure の管理オプションに関連するイベントを生成します。</span><span class="sxs-lookup"><span data-stu-id="ed347-118">Subscriptions and resource groups generate events related to management operations in Azure.</span></span> <span data-ttu-id="ed347-119">たとえば、ユーザーが仮想マシンを作成した場合、このソースによってイベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="ed347-119">For example, when a user creates a virtual machine, this source generates an event.</span></span>
- <span data-ttu-id="ed347-120">**ストレージ アカウント。**</span><span class="sxs-lookup"><span data-stu-id="ed347-120">**Storage accounts.**</span></span> <span data-ttu-id="ed347-121">ストレージ アカウントは、ユーザーが BLOB、ファイル、テーブル エントリ、またはキュー メッセージを追加するときにイベントを生成します。</span><span class="sxs-lookup"><span data-stu-id="ed347-121">Storage accounts can generate events when users add blobs, files, table entries, or queue messages.</span></span> <span data-ttu-id="ed347-122">イベント ソースとしては、BLOB アカウントと汎用アカウントの両方を使用できます。</span><span class="sxs-lookup"><span data-stu-id="ed347-122">You can use both blob accounts and general purpose accounts as event sources.</span></span>
- <span data-ttu-id="ed347-123">**Media Services。**</span><span class="sxs-lookup"><span data-stu-id="ed347-123">**Media Services.**</span></span> <span data-ttu-id="ed347-124">Media Services は、動画および音声メディアをホストし、メディア ファイルの高度な管理機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="ed347-124">Media Services hosts video and audio media, and provides advanced management features for media files.</span></span> <span data-ttu-id="ed347-125">Media Services では、エンコード ジョブが動画ファイルで開始されたときや完了したときに、イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="ed347-125">Media Services can generate events when an encoding job is started or completed on a video file.</span></span>
- <span data-ttu-id="ed347-126">**Azure IoT Hub。**</span><span class="sxs-lookup"><span data-stu-id="ed347-126">**Azure IoT Hub.**</span></span> <span data-ttu-id="ed347-127">IoT Hub は、IoT デバイスと通信し、それらからテレメトリを収集します。</span><span class="sxs-lookup"><span data-stu-id="ed347-127">IoT Hub communicates with and gathers telemetry from IoT devices.</span></span> <span data-ttu-id="ed347-128">そのような通信を受信すると、イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="ed347-128">It can generate events whenever such communications arrive.</span></span>
- <span data-ttu-id="ed347-129">**カスタム イベント。**</span><span class="sxs-lookup"><span data-stu-id="ed347-129">**Custom events.**</span></span> <span data-ttu-id="ed347-130">カスタム イベントは、REST API を使用するか、Java、GO、.NET、Node、Python および Ruby 上で Azure SDK を使用して生成されます。</span><span class="sxs-lookup"><span data-stu-id="ed347-130">Custom events can be generated using the REST API, or with the Azure SDK on Java, GO, .NET, Node, Python, and Ruby.</span></span> <span data-ttu-id="ed347-131">たとえば、Azure App Service の Web Apps 機能で、カスタム イベントを作成できます。</span><span class="sxs-lookup"><span data-stu-id="ed347-131">For example, you could create a custom event in the Web Apps feature of Azure App Service.</span></span> <span data-ttu-id="ed347-132">これは、ストレージ キューからメッセージがピックアップされると、ワーカー ロールで発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="ed347-132">This can happen in the worker role, when it picks up a message from a storage queue.</span></span>

<span data-ttu-id="ed347-133">Azure のさまざまなイベント ソースが広範囲に統合されていることにより、Event Grid がほぼすべての Azure リソースに関連するイベントを配信できることが保証されています。</span><span class="sxs-lookup"><span data-stu-id="ed347-133">This broad integration with diverse event sources within Azure ensures that Event Grid can distribute events that relate to almost any Azure resource.</span></span>

## <a name="topics"></a><span data-ttu-id="ed347-134">トピック</span><span class="sxs-lookup"><span data-stu-id="ed347-134">Topics</span></span>

<span data-ttu-id="ed347-135">Event Grid のトピックとは、関連イベントのコレクションです。</span><span class="sxs-lookup"><span data-stu-id="ed347-135">In Event Grid, a topic is a collection of related events.</span></span> <span data-ttu-id="ed347-136">ソースからイベントが発行されるとき、それらのイベントでトピックが 1 つのみ必要か、複数のトピックに分割するかを決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ed347-136">When you publish events from a source, you decide whether those events need only a single topic or to be divided into multiple topics.</span></span> <span data-ttu-id="ed347-137">イベントを受信して処理するコンポーネントは、受信するイベントを決定するために、トピックにサブスクライブします。</span><span class="sxs-lookup"><span data-stu-id="ed347-137">Components that receive and handle events subscribe to topics to determine the events they will receive.</span></span>

## <a name="subscriptions"></a><span data-ttu-id="ed347-138">サブスクリプション</span><span class="sxs-lookup"><span data-stu-id="ed347-138">Subscriptions</span></span>

<span data-ttu-id="ed347-139">イベント ハンドラーはサブスクリプションを使用して、トピック内のどのイベントを受け取るか Event Grid に伝えます。</span><span class="sxs-lookup"><span data-stu-id="ed347-139">Event handlers use subscriptions to tell Event Grid which events in a topic they want to receive.</span></span> <span data-ttu-id="ed347-140">サブスクリプションは、Event Grid がイベント通知を送信する場所であるエンドポイントの修正も行います。</span><span class="sxs-lookup"><span data-stu-id="ed347-140">The subscription also fixes the endpoint - this is the location that Event Grid sends event notifications.</span></span> <span data-ttu-id="ed347-141">サブスクリプションでは、その種類またはその件名でイベントをフィルタリングして、イベント ハンドラーが該当するイベントのみを受け取るようにすることもできます。</span><span class="sxs-lookup"><span data-stu-id="ed347-141">A subscription can also filter events by their type or by their subject, so you can ensure an event handler only receives relevant events.</span></span>

## <a name="event-handlers"></a><span data-ttu-id="ed347-142">イベント ハンドラー</span><span class="sxs-lookup"><span data-stu-id="ed347-142">Event handlers</span></span>

<span data-ttu-id="ed347-143">Azure の次のオブジェクト型では、Event Grid からイベントを受け取ってそれを処理することができます。</span><span class="sxs-lookup"><span data-stu-id="ed347-143">The following object types in Azure can receive and handle events from Event Grid:</span></span>

- <span data-ttu-id="ed347-144">**Azure Functions。**</span><span class="sxs-lookup"><span data-stu-id="ed347-144">**Azure Functions.**</span></span> <span data-ttu-id="ed347-145">Azure Function は、ホスト仮想サーバーやコンテナーなしで Azure で実行されるカスタム コードで構成されます。</span><span class="sxs-lookup"><span data-stu-id="ed347-145">An Azure function consists of custom code that runs in Azure, with no host virtual server or container.</span></span> <span data-ttu-id="ed347-146">イベントに対する応答をコードでカスタマイズする場合、Azure Function をイベント ハンドラーとして使用します。</span><span class="sxs-lookup"><span data-stu-id="ed347-146">Use an Azure function as an event handler when you want to code a custom response to the event.</span></span>
- <span data-ttu-id="ed347-147">**Webhook。**</span><span class="sxs-lookup"><span data-stu-id="ed347-147">**Webhooks.**</span></span> <span data-ttu-id="ed347-148">Webhook とは、プッシュ アーキテクチャを実装する Web API です。</span><span class="sxs-lookup"><span data-stu-id="ed347-148">A webhook is web API that implements a push architecture.</span></span>
- <span data-ttu-id="ed347-149">**Azure Logic Apps。**</span><span class="sxs-lookup"><span data-stu-id="ed347-149">**Azure Logic Apps.**</span></span> <span data-ttu-id="ed347-150">Azure Logic Apps は、ワークフローとして、ビジネス プロセスをホストします。</span><span class="sxs-lookup"><span data-stu-id="ed347-150">An Azure logic app hosts a business process as a workflow.</span></span>
- <span data-ttu-id="ed347-151">**Microsoft Flow。**</span><span class="sxs-lookup"><span data-stu-id="ed347-151">**Microsoft Flow.**</span></span> <span data-ttu-id="ed347-152">Flow でも、ワークフローがホストされます。技術スタッフ以外が簡単に使用できます。</span><span class="sxs-lookup"><span data-stu-id="ed347-152">Flow also hosts workflows, but it is easier for non-technical staff to use.</span></span>

## <a name="how-to-choose"></a><span data-ttu-id="ed347-153">選択する方法</span><span class="sxs-lookup"><span data-stu-id="ed347-153">How to choose</span></span>

<span data-ttu-id="ed347-154">次の機能が必要な場合に、Event Grid を使用します。</span><span class="sxs-lookup"><span data-stu-id="ed347-154">Use Event Grid when you need these features:</span></span>

- <span data-ttu-id="ed347-155">**簡単さ。**</span><span class="sxs-lookup"><span data-stu-id="ed347-155">**Simplicity.**</span></span> <span data-ttu-id="ed347-156">Event Grid では、ソースをサブスクライバーに容易に接続することができます。</span><span class="sxs-lookup"><span data-stu-id="ed347-156">It is very easy to connect sources to subscribers in Event Grid.</span></span>
- <span data-ttu-id="ed347-157">**高度なフィルタリング。**</span><span class="sxs-lookup"><span data-stu-id="ed347-157">**Advanced filtering.**</span></span> <span data-ttu-id="ed347-158">サブスクリプションでは、トピックから受け取るイベントを厳しく制限できます。</span><span class="sxs-lookup"><span data-stu-id="ed347-158">Subscriptions have close control over the events they receive from a topic.</span></span>
- <span data-ttu-id="ed347-159">**展開。** 同じイベントやトピックにエンドポイントを無制限にサブスクライブさせることができます。</span><span class="sxs-lookup"><span data-stu-id="ed347-159">**Fan-out.** You can subscribe an unlimited number of endpoints to the same events and topics.</span></span>
- <span data-ttu-id="ed347-160">**信頼性。**</span><span class="sxs-lookup"><span data-stu-id="ed347-160">**Reliability.**</span></span> <span data-ttu-id="ed347-161">Event Grid では、イベントの配信を、各サブスクリプションに対して最大で 24 時間再試行します。</span><span class="sxs-lookup"><span data-stu-id="ed347-161">Event Grid retries event delivery for up to 24 hours for each subscription.</span></span>
- <span data-ttu-id="ed347-162">**イベントあたり従量課金。**</span><span class="sxs-lookup"><span data-stu-id="ed347-162">**Pay-per-event.**</span></span> <span data-ttu-id="ed347-163">送信するイベント数のみに対して支払いが行われます。</span><span class="sxs-lookup"><span data-stu-id="ed347-163">Pay only for the number of events that you transmit.</span></span>

## <a name="summary"></a><span data-ttu-id="ed347-164">まとめ</span><span class="sxs-lookup"><span data-stu-id="ed347-164">Summary</span></span>

<span data-ttu-id="ed347-165">Event Grid は、単純ですが、汎用的なイベント配信システムです。</span><span class="sxs-lookup"><span data-stu-id="ed347-165">Event Grid is a simple but versatile event distribution system.</span></span> <span data-ttu-id="ed347-166">これを使用すると、確実かつ迅速にそれらのイベントをサブスクライバーに発行できます。</span><span class="sxs-lookup"><span data-stu-id="ed347-166">Use it to publish events to subscribers, which will receive those events reliably and quickly.</span></span>