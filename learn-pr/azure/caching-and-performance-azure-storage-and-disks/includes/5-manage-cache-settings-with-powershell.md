<span data-ttu-id="148b0-101">管理スクリプトを作成することは、ワークフローを最適化する強力な方法です。</span><span class="sxs-lookup"><span data-stu-id="148b0-101">Creating administration scripts is a powerful way to optimize your work flow.</span></span> <span data-ttu-id="148b0-102">共通する反復的なタスクを自動化することができます。</span><span class="sxs-lookup"><span data-stu-id="148b0-102">You can automate common, repetitive tasks.</span></span> <span data-ttu-id="148b0-103">スクリプトは一度検証すれば毎回同じように実行されるため、エラーを削減できます。</span><span class="sxs-lookup"><span data-stu-id="148b0-103">Once a script has been verified, it will run consistently, which will likely reduce errors.</span></span> <span data-ttu-id="148b0-104">前の演習では、VM の作成、データ ディスクの追加、キャッシュの変更を、すべて Azure portal を通じて行いました。</span><span class="sxs-lookup"><span data-stu-id="148b0-104">In the previous exercise, we created a VM, added a data disk and changed cache settings all through the Azure portal.</span></span> <span data-ttu-id="148b0-105">さまざまなリージョンの多くの VM でこれらのタスクを繰り返す必要がある場合は、どうしたらよいでしょう。</span><span class="sxs-lookup"><span data-stu-id="148b0-105">What if we needed to repeat these tasks across many VMs, in many regions?</span></span> <span data-ttu-id="148b0-106">Azure PowerShell を使用しましょう。</span><span class="sxs-lookup"><span data-stu-id="148b0-106">Let's use Azure Powershell!</span></span>

## <a name="what-is-azure-powershell"></a><span data-ttu-id="148b0-107">Azure PowerShell とは</span><span class="sxs-lookup"><span data-stu-id="148b0-107">What is Azure PowerShell?</span></span>
<span data-ttu-id="148b0-108">Azure PowerShell は、PowerShell に追加し、Azure サブスクリプションに接続してリソースを管理することができるモジュールです。</span><span class="sxs-lookup"><span data-stu-id="148b0-108">Azure PowerShell is a module that you add to PowerShell to let you connect to your Azure subscription and manage resources.</span></span> <span data-ttu-id="148b0-109">Azure PowerShell を使用するには、PowerShell が機能している必要があります。</span><span class="sxs-lookup"><span data-stu-id="148b0-109">Azure PowerShell requires PowerShell to function.</span></span> <span data-ttu-id="148b0-110">PowerShell は、シェル ウィンドウ、コマンド解析などのサービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="148b0-110">PowerShell provides services like the shell window, command parsing, and so on.</span></span> <span data-ttu-id="148b0-111">Azure PowerShell で、Azure 固有のコマンドが追加されます。</span><span class="sxs-lookup"><span data-stu-id="148b0-111">Azure PowerShell adds the Azure-specific commands.</span></span>

<span data-ttu-id="148b0-112">たとえば Azure PowerShell には、Azure サブスクリプション内に仮想マシンを作成する **New-AzureRmVM** コマンドがあります。</span><span class="sxs-lookup"><span data-stu-id="148b0-112">For example, Azure PowerShell provides the **New-AzureRmVM** command that creates a Virtual Machine for you inside your Azure subscription.</span></span> <span data-ttu-id="148b0-113">使用するには、PowerShell アプリケーションを起動し、次の例のようなコマンドを発行します。</span><span class="sxs-lookup"><span data-stu-id="148b0-113">To use it, you would launch the PowerShell application and then issue a command like the  example:</span></span>

```powershell
New-AzureRmVm `
    -ResourceGroupName "CrmTestingResourceGroup" `
    -Name "CrmUnitTests" `
    -Image "UbuntuLTS"
    ...
```

<span data-ttu-id="148b0-114">Azure PowerShell は、Azure Cloud Shell 経由のブラウザー内、または Linux、Mac、または Windows 上のローカル インストールという 2 つの方法で使用できます。</span><span class="sxs-lookup"><span data-stu-id="148b0-114">Azure PowerShell is available two ways: inside a browser via the Azure Cloud Shell or with a local install on Linux, Mac, or Windows.</span></span>

## <a name="what-are-powershell-cmdlets"></a><span data-ttu-id="148b0-115">PowerShell コマンドレットとは</span><span class="sxs-lookup"><span data-stu-id="148b0-115">What are PowerShell cmdlets?</span></span>

<span data-ttu-id="148b0-116">PowerShell コマンドは**コマンドレット**と呼ばれています。</span><span class="sxs-lookup"><span data-stu-id="148b0-116">A PowerShell command is called a **cmdlet** (pronounced "command-let").</span></span> <span data-ttu-id="148b0-117">コマンドレットは 1 つの機能を操作するコマンドです。</span><span class="sxs-lookup"><span data-stu-id="148b0-117">A cmdlet is a command that manipulates a single feature.</span></span> <span data-ttu-id="148b0-118">**コマンドレット**と用語は "小さなコマンド" を意味します。</span><span class="sxs-lookup"><span data-stu-id="148b0-118">The term **cmdlet** is intended to imply "small command".</span></span> <span data-ttu-id="148b0-119">慣例で、コマンドレットの作成者には、コマンドレットをシンプルにすること、目的を 1 つだけにすることが推奨されています。</span><span class="sxs-lookup"><span data-stu-id="148b0-119">By convention, cmdlet authors are encouraged to keep cmdlets simple and single-purpose.</span></span>

<span data-ttu-id="148b0-120">基本の PowerShell 製品には、セッションやバックグラウンド ジョブなどの機能で使用できるコマンドレットが付属します。</span><span class="sxs-lookup"><span data-stu-id="148b0-120">The base PowerShell product ships with cmdlets that work with features such as sessions and background jobs.</span></span> <span data-ttu-id="148b0-121">他の機能を操作するコマンドレットを得るには、PowerShell インストールにモジュールを追加します。</span><span class="sxs-lookup"><span data-stu-id="148b0-121">You add modules to your PowerShell installation to get cmdlets that manipulate other features.</span></span> <span data-ttu-id="148b0-122">たとえば、サードパーティ モジュールには、FTP と連動するモジュール、オペレーティング システムを管理するモジュール、ファイル システムにアクセスするモジュールなどがあります。</span><span class="sxs-lookup"><span data-stu-id="148b0-122">For example, there are third-party modules to work with ftp, administer your operating system, access the file system, and so on.</span></span>

<span data-ttu-id="148b0-123">コマンドレットには、動詞-名詞の命名規則が採用されています。たとえば、**Get-Process**、**Format-Table**、**Start-Service** のようになります。</span><span class="sxs-lookup"><span data-stu-id="148b0-123">Cmdlets follow a verb-noun naming convention; for example, **Get-Process**, **Format-Table**, and **Start-Service**.</span></span> <span data-ttu-id="148b0-124">動詞の選択にも規則があります。たとえば、データの取得は "get"、データの挿入または更新は "set"、データの書式設定は "format"、宛先への直接出力は "out" になります。</span><span class="sxs-lookup"><span data-stu-id="148b0-124">There's also a convention for verb choice: "get" to retrieve data, "set" to insert or update data, "format" to format data, "out" to direct output to a destination, and so on.</span></span>

<span data-ttu-id="148b0-125">コマンドレットの作成者には、コマンドレットごとにヘルプ ファイルを含めることが推奨されています。</span><span class="sxs-lookup"><span data-stu-id="148b0-125">Cmdlet authors are encouraged to include a help file for each cmdlet.</span></span> <span data-ttu-id="148b0-126">**Get-Help** コマンドレットを実行すると、コマンドレットのヘルプ ファイルが表示されます。</span><span class="sxs-lookup"><span data-stu-id="148b0-126">The **Get-Help** cmdlet displays the help file for any cmdlet:</span></span>

```
Get-Help <cmdlet-name> -detailed
```
## <a name="what-is-azurerm"></a><span data-ttu-id="148b0-127">AzureRM とは</span><span class="sxs-lookup"><span data-stu-id="148b0-127">What is AzureRM?</span></span>

<span data-ttu-id="148b0-128">**AzureRM** は、Azure 機能で使用できるコマンドレットのセットを含む Azure PowerShell モジュールの正式名称です (名前の中の **RM** は **Resource Manager** という意味です)。</span><span class="sxs-lookup"><span data-stu-id="148b0-128">**AzureRM** is the formal name for the Azure PowerShell module that has a set of cmdlets to work with Azure features (the **RM** in the name stands for **Resource Manager**).</span></span> <span data-ttu-id="148b0-129">数百単位のコマンドレットが含まれ、あらゆる Azure リソースのほぼすべての面を制御できます。</span><span class="sxs-lookup"><span data-stu-id="148b0-129">It contains hundreds of cmdlets that let you control nearly every aspect of every Azure resource.</span></span> <span data-ttu-id="148b0-130">リソース グループ、ストレージ、仮想マシン、Azure Active Directory、コンテナー、機械学習などを操作できます。</span><span class="sxs-lookup"><span data-stu-id="148b0-130">You can work with resource groups, storage, virtual machines, Azure Active Directory, containers, machine learning, and so on.</span></span>

## <a name="powershell-cmdlets-for-managing-azure-disk-caching"></a><span data-ttu-id="148b0-131">Azure ディスク キャッシュを管理するための PowerShell コマンドレット</span><span class="sxs-lookup"><span data-stu-id="148b0-131">PowerShell cmdlets for managing Azure disk caching</span></span>

<span data-ttu-id="148b0-132">Azure PowerShell には、VM とディスクの管理に役立つ固有のコマンドレットがあります。</span><span class="sxs-lookup"><span data-stu-id="148b0-132">Azure PowerShell has specific cmdlets to help manage VMs and disks.</span></span> 

<span data-ttu-id="148b0-133">次の演習で使用するコマンドレットの一部を次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="148b0-133">The following table lists some of the cmdlets we'll use in the next exercise.</span></span>

|<span data-ttu-id="148b0-134">コマンド</span><span class="sxs-lookup"><span data-stu-id="148b0-134">Command</span></span>  |<span data-ttu-id="148b0-135">説明</span><span class="sxs-lookup"><span data-stu-id="148b0-135">Description</span></span>  |
|---------|---------|
|`Get-AzureRmVM`     |  <span data-ttu-id="148b0-136">仮想マシンのプロパティを取得します。</span><span class="sxs-lookup"><span data-stu-id="148b0-136">Gets the properties of a virtual machine.</span></span>       |        <span data-ttu-id="148b0-137">$myVM</span><span class="sxs-lookup"><span data-stu-id="148b0-137">$myVM</span></span>
|`Update-AzureRmVM`     |  <span data-ttu-id="148b0-138">Azure 仮想マシンの状態を更新します。</span><span class="sxs-lookup"><span data-stu-id="148b0-138">Updates the state of an Azure virtual machine.</span></span>       |        
|`New-AzureRmDiskConfig`     |  <span data-ttu-id="148b0-139">構成可能なディスク オブジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="148b0-139">Creates a configurable disk object.</span></span>       |        
|`Add-AzureRmVMDataDisk`     |  <span data-ttu-id="148b0-140">データ ディスクを仮想マシンに追加します。</span><span class="sxs-lookup"><span data-stu-id="148b0-140">Adds a data disk to a virtual machine.</span></span>   |      


<span data-ttu-id="148b0-141">次の演習でこれらのコマンドレットを使用して、VM でキャッシュを管理してみましょう。</span><span class="sxs-lookup"><span data-stu-id="148b0-141">Let's use these cmdlets in the next exercise to manage caching on our VM.</span></span>
